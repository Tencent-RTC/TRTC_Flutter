!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TrtcWrapper=t():e.TrtcWrapper=t()}(self,(()=>(()=>{var e={51:function(e,t,r){!function(e,t,i){var n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(t),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},a=function(){return a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.apply(this,arguments)};function s(e,t,r,i){return new(r||(r=Promise))((function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function c(e,t){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function A(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function u(e,t){return e(t={exports:{}},t.exports),t.exports}var d,h,g,p,f,m,E,I,_=u((function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,i,o,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new n(i,o||e,a),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,a=new Array(o);n<o;n++)a[n]=i[n].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,n,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var c,A,l=this._events[s],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,o),!0;case 6:return l.fn.call(l.context,t,i,n,o,a),!0}for(A=1,c=new Array(u-1);A<u;A++)c[A-1]=arguments[A];l.fn.apply(l.context,c)}else{var d,h=l.length;for(A=0;A<h;A++)switch(l[A].once&&this.removeListener(e,l[A].fn,void 0,!0),u){case 1:l[A].fn.call(l[A].context);break;case 2:l[A].fn.call(l[A].context,t);break;case 3:l[A].fn.call(l[A].context,t,i);break;case 4:l[A].fn.call(l[A].context,t,i,n);break;default:if(!c)for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];l[A].fn.apply(l[A].context,c)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,i,n){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||n&&!s.once||i&&s.context!==i||a(this,o);else{for(var c=0,A=[],l=s.length;c<l;c++)(s[c].fn!==t||n&&!s[c].once||i&&s[c].context!==i)&&A.push(s[c]);A.length?this._events[o]=1===A.length?A[0]:A:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}));e.TRTCVideoResolution=void 0,(d=e.TRTCVideoResolution||(e.TRTCVideoResolution={}))[d.TRTCVideoResolution_120_120=1]="TRTCVideoResolution_120_120",d[d.TRTCVideoResolution_160_160=3]="TRTCVideoResolution_160_160",d[d.TRTCVideoResolution_270_270=5]="TRTCVideoResolution_270_270",d[d.TRTCVideoResolution_480_480=7]="TRTCVideoResolution_480_480",d[d.TRTCVideoResolution_160_120=50]="TRTCVideoResolution_160_120",d[d.TRTCVideoResolution_240_180=52]="TRTCVideoResolution_240_180",d[d.TRTCVideoResolution_280_210=54]="TRTCVideoResolution_280_210",d[d.TRTCVideoResolution_320_240=56]="TRTCVideoResolution_320_240",d[d.TRTCVideoResolution_400_300=58]="TRTCVideoResolution_400_300",d[d.TRTCVideoResolution_480_360=60]="TRTCVideoResolution_480_360",d[d.TRTCVideoResolution_640_480=62]="TRTCVideoResolution_640_480",d[d.TRTCVideoResolution_960_720=64]="TRTCVideoResolution_960_720",d[d.TRTCVideoResolution_160_90=100]="TRTCVideoResolution_160_90",d[d.TRTCVideoResolution_256_144=102]="TRTCVideoResolution_256_144",d[d.TRTCVideoResolution_320_180=104]="TRTCVideoResolution_320_180",d[d.TRTCVideoResolution_480_270=106]="TRTCVideoResolution_480_270",d[d.TRTCVideoResolution_640_360=108]="TRTCVideoResolution_640_360",d[d.TRTCVideoResolution_960_540=110]="TRTCVideoResolution_960_540",d[d.TRTCVideoResolution_1280_720=112]="TRTCVideoResolution_1280_720",d[d.TRTCVideoResolution_1920_1080=114]="TRTCVideoResolution_1920_1080",e.TRTCVideoStreamType=void 0,(h=e.TRTCVideoStreamType||(e.TRTCVideoStreamType={}))[h.TRTCVideoStreamTypeBig=0]="TRTCVideoStreamTypeBig",h[h.TRTCVideoStreamTypeSmall=1]="TRTCVideoStreamTypeSmall",h[h.TRTCVideoStreamTypeSub=2]="TRTCVideoStreamTypeSub",e.TRTCVideoFillMode=void 0,(g=e.TRTCVideoFillMode||(e.TRTCVideoFillMode={}))[g.TRTCVideoFillMode_Fill=0]="TRTCVideoFillMode_Fill",g[g.TRTCVideoFillMode_Fit=1]="TRTCVideoFillMode_Fit",e.TRTCVideoMirrorType=void 0,(p=e.TRTCVideoMirrorType||(e.TRTCVideoMirrorType={}))[p.TRTCVideoMirrorType_Auto=0]="TRTCVideoMirrorType_Auto",p[p.TRTCVideoMirrorType_Enable=1]="TRTCVideoMirrorType_Enable",p[p.TRTCVideoMirrorType_Disable=2]="TRTCVideoMirrorType_Disable",e.TRTCBeautyStyle=void 0,(f=e.TRTCBeautyStyle||(e.TRTCBeautyStyle={}))[f.TRTCBeautyStyleSmooth=0]="TRTCBeautyStyleSmooth",f[f.TRTCBeautyStyleNature=1]="TRTCBeautyStyleNature",e.TRTCAppScene=void 0,(m=e.TRTCAppScene||(e.TRTCAppScene={}))[m.TRTCAppSceneVideoCall=0]="TRTCAppSceneVideoCall",m[m.TRTCAppSceneLIVE=1]="TRTCAppSceneLIVE",m[m.TRTCAppSceneAudioCall=2]="TRTCAppSceneAudioCall",m[m.TRTCAppSceneVoiceChatRoom=3]="TRTCAppSceneVoiceChatRoom",e.TRTCRoleType=void 0,(E=e.TRTCRoleType||(e.TRTCRoleType={}))[E.TRTCRoleAnchor=20]="TRTCRoleAnchor",E[E.TRTCRoleAudience=21]="TRTCRoleAudience",e.TRTCAudioQuality=void 0,(I=e.TRTCAudioQuality||(e.TRTCAudioQuality={}))[I.TRTCAudioQualitySpeech=1]="TRTCAudioQualitySpeech",I[I.TRTCAudioQualityDefault=2]="TRTCAudioQualityDefault",I[I.TRTCAudioQualityMusic=3]="TRTCAudioQualityMusic";var C,y,T=function(e,t,r,i,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===r&&(r=""),void 0===i&&(i=""),void 0===n&&(n=""),this.deviceId=e,this.deviceName=t,this.kind=r,this.label=i,this.groupId=n};e.TRTCDeviceState=void 0,(C=e.TRTCDeviceState||(e.TRTCDeviceState={}))[C.TRTCDeviceStateAdd=0]="TRTCDeviceStateAdd",C[C.TRTCDeviceStateRemove=1]="TRTCDeviceStateRemove",C[C.TRTCDeviceStateActive=2]="TRTCDeviceStateActive",e.TRTCDeviceType=void 0,(y=e.TRTCDeviceType||(e.TRTCDeviceType={}))[y.TRTCDeviceTypeUnknow=-1]="TRTCDeviceTypeUnknow",y[y.TRTCDeviceTypeMic=0]="TRTCDeviceTypeMic",y[y.TRTCDeviceTypeSpeaker=1]="TRTCDeviceTypeSpeaker",y[y.TRTCDeviceTypeCamera=2]="TRTCDeviceTypeCamera";var v;e.TRTCVideoRotation=void 0,(v=e.TRTCVideoRotation||(e.TRTCVideoRotation={}))[v.TRTCVideoRotation0=0]="TRTCVideoRotation0",v[v.TRTCVideoRotation90=1]="TRTCVideoRotation90",v[v.TRTCVideoRotation180=2]="TRTCVideoRotation180",v[v.TRTCVideoRotation270=3]="TRTCVideoRotation270";var w;e.TRTCQuality=void 0,(w=e.TRTCQuality||(e.TRTCQuality={}))[w.TRTCQuality_Unknown=0]="TRTCQuality_Unknown",w[w.TRTCQuality_Excellent=1]="TRTCQuality_Excellent",w[w.TRTCQuality_Good=2]="TRTCQuality_Good",w[w.TRTCQuality_Poor=3]="TRTCQuality_Poor",w[w.TRTCQuality_Bad=4]="TRTCQuality_Bad",w[w.TRTCQuality_Vbad=5]="TRTCQuality_Vbad",w[w.TRTCQuality_Down=6]="TRTCQuality_Down";var S,b,R,D=function(t,r){void 0===t&&(t=""),void 0===r&&(r=e.TRTCQuality.TRTCQuality_Unknown),this.userId=t,this.quality=r},B=function(t,r,i,n,o,a,s){void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=e.TRTCVideoStreamType.TRTCVideoStreamTypeBig),this.width=t,this.height=r,this.frameRate=i,this.videoBitrate=n,this.audioBitrate=a,this.streamType=s},O=function(t,r,i,n,o,a,s,c,A,l,u,d,h,g){void 0===t&&(t=""),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===g&&(g=e.TRTCVideoStreamType.TRTCVideoStreamTypeBig),this.userId=t,this.width=i,this.height=n,this.frameRate=o,this.videoBitrate=a,this.audioBitrate=c,this.streamType=g},Q=function(e,t,r,i,n,o,a,s,c,A,l){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=[]),void 0===c&&(c=0),void 0===A&&(A=[]),void 0===l&&(l=0),this.upLoss=e,this.downLoss=t,this.rtt=n,this.receivedBytes=o,this.sentBytes=a,this.localStatisticsArray=s,this.localStatisticsArraySize=c,this.remoteStatisticsArray=A,this.remoteStatisticsArraySize=l};e.TRTCVideoResolutionMode=void 0,(S=e.TRTCVideoResolutionMode||(e.TRTCVideoResolutionMode={}))[S.TRTCVideoResolutionModeLandscape=0]="TRTCVideoResolutionModeLandscape",S[S.TRTCVideoResolutionModePortrait=1]="TRTCVideoResolutionModePortrait",e.TRTCVideoQosPreference=void 0,(b=e.TRTCVideoQosPreference||(e.TRTCVideoQosPreference={}))[b.TRTCVideoQosPreferenceSmooth=1]="TRTCVideoQosPreferenceSmooth",b[b.TRTCVideoQosPreferenceClear=2]="TRTCVideoQosPreferenceClear",e.TRTCQosControlMode=void 0,(R=e.TRTCQosControlMode||(e.TRTCQosControlMode={}))[R.TRTCQosControlModeClient=0]="TRTCQosControlModeClient",R[R.TRTCQosControlModeServer=1]="TRTCQosControlModeServer";var k,M,P=function(e,t,r,i){void 0===e&&(e=new ArrayBuffer(0)),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.buffer=e,this.length=t,this.width=r,this.height=i};e.TRTCLogLevel=void 0,(k=e.TRTCLogLevel||(e.TRTCLogLevel={}))[k.TRTCLogLevelVerbose=0]="TRTCLogLevelVerbose",k[k.TRTCLogLevelDebug=1]="TRTCLogLevelDebug",k[k.TRTCLogLevelInfo=2]="TRTCLogLevelInfo",k[k.TRTCLogLevelWarn=3]="TRTCLogLevelWarn",k[k.TRTCLogLevelError=4]="TRTCLogLevelError",k[k.TRTCLogLevelFatal=5]="TRTCLogLevelFatal",k[k.TRTCLogLevelNone=6]="TRTCLogLevelNone",e.TRTCScreenCaptureSourceType=void 0,(M=e.TRTCScreenCaptureSourceType||(e.TRTCScreenCaptureSourceType={}))[M.TRTCScreenCaptureSourceTypeUnknown=-1]="TRTCScreenCaptureSourceTypeUnknown",M[M.TRTCScreenCaptureSourceTypeWindow=0]="TRTCScreenCaptureSourceTypeWindow",M[M.TRTCScreenCaptureSourceTypeScreen=1]="TRTCScreenCaptureSourceTypeScreen",M[M.TRTCScreenCaptureSourceTypeCustom=2]="TRTCScreenCaptureSourceTypeCustom";var N;e.TRTCTranscodingConfigMode=void 0,(N=e.TRTCTranscodingConfigMode||(e.TRTCTranscodingConfigMode={}))[N.TRTCTranscodingConfigMode_Unknown=0]="TRTCTranscodingConfigMode_Unknown",N[N.TRTCTranscodingConfigMode_Manual=1]="TRTCTranscodingConfigMode_Manual",N[N.TRTCTranscodingConfigMode_Template_PureAudio=2]="TRTCTranscodingConfigMode_Template_PureAudio",N[N.TRTCTranscodingConfigMode_Template_PresetLayout=3]="TRTCTranscodingConfigMode_Template_PresetLayout",N[N.TRTCTranscodingConfigMode_Template_ScreenSharing=4]="TRTCTranscodingConfigMode_Template_ScreenSharing",N[N.TRTC_TranscodingConfigMode_Unknown=5]="TRTC_TranscodingConfigMode_Unknown",N[N.TRTC_TranscodingConfigMode_Manual=6]="TRTC_TranscodingConfigMode_Manual",N[N.TRTC_TranscodingConfigMode_Template_PureAudio=7]="TRTC_TranscodingConfigMode_Template_PureAudio",N[N.TRTC_TranscodingConfigMode_Template_PresetLayout=8]="TRTC_TranscodingConfigMode_Template_PresetLayout",N[N.TRTC_TranscodingConfigMode_Template_ScreenSharing=9]="TRTC_TranscodingConfigMode_Template_ScreenSharing";var L;e.TRTCMixInputType=void 0,(L=e.TRTCMixInputType||(e.TRTCMixInputType={}))[L.TRTCMixInputTypeUndefined=0]="TRTCMixInputTypeUndefined",L[L.TRTCMixInputTypeAudioVideo=1]="TRTCMixInputTypeAudioVideo",L[L.TRTCMixInputTypePureVideo=2]="TRTCMixInputTypePureVideo",L[L.TRTCMixInputTypePureAudio=3]="TRTCMixInputTypePureAudio";var x,U="onError",F="live",V="VirtualBackground",G="BasicBeauty",j="blur",H="image",Y={20:"anchor",21:"audience"},W={0:"rtc",1:F,2:"rtc",3:F};!function(e){e[e.ActiveExitRoom=0]="ActiveExitRoom",e[e.KickedExitRoom=1]="KickedExitRoom"}(x||(x={}));function J(){return Math.floor(performance.now())}var X=function(e){return void 0===e},K=function(e){return"number"==typeof e},z=function(e){return"boolean"==typeof e};function q(e){if("string"!=typeof e)return e;var t;try{var r=JSON.parse(e);t="object"==typeof r&&r?r:e}catch(r){t=e}return t}var Z,$,ee=function(e){return e&&e.Math===Math&&e},te=ee("object"==typeof globalThis&&globalThis)||ee("object"==typeof window&&window)||ee("object"==typeof self&&self)||ee("object"==typeof l&&l)||function(){return this}()||l||Function("return this")(),re=function(e){try{return!!e()}catch(e){return!0}},ie=!re((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),ne=!re((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),oe=Function.prototype.call,ae=ne?oe.bind(oe):function(){return oe.apply(oe,arguments)},se={}.propertyIsEnumerable,ce=Object.getOwnPropertyDescriptor,Ae={f:ce&&!se.call({1:2},1)?function(e){var t=ce(this,e);return!!t&&t.enumerable}:se},le=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ue=Function.prototype,de=ue.call,he=ne&&ue.bind.bind(de,de),ge=ne?he:function(e){return function(){return de.apply(e,arguments)}},pe=ge({}.toString),fe=ge("".slice),me=function(e){return fe(pe(e),8,-1)},Ee=Object,Ie=ge("".split),_e=re((function(){return!Ee("z").propertyIsEnumerable(0)}))?function(e){return"String"===me(e)?Ie(e,""):Ee(e)}:Ee,Ce=function(e){return null==e},ye=TypeError,Te=function(e){if(Ce(e))throw ye("Can't call method on "+e);return e},ve=function(e){return _e(Te(e))},we="object"==typeof document&&document.all,Se={all:we,IS_HTMLDDA:void 0===we&&void 0!==we},be=Se.all,Re=Se.IS_HTMLDDA?function(e){return"function"==typeof e||e===be}:function(e){return"function"==typeof e},De=Se.all,Be=Se.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Re(e)||e===De}:function(e){return"object"==typeof e?null!==e:Re(e)},Oe=function(e,t){return arguments.length<2?(r=te[e],Re(r)?r:void 0):te[e]&&te[e][t];var r},Qe=ge({}.isPrototypeOf),ke="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Me=te.process,Pe=te.Deno,Ne=Me&&Me.versions||Pe&&Pe.version,Le=Ne&&Ne.v8;Le&&($=(Z=Le.split("."))[0]>0&&Z[0]<4?1:+(Z[0]+Z[1])),!$&&ke&&(!(Z=ke.match(/Edge\/(\d+)/))||Z[1]>=74)&&(Z=ke.match(/Chrome\/(\d+)/))&&($=+Z[1]);var xe=$,Ue=te.String,Fe=!!Object.getOwnPropertySymbols&&!re((function(){var e=Symbol("symbol detection");return!Ue(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&xe&&xe<41})),Ve=Fe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ge=Object,je=Ve?function(e){return"symbol"==typeof e}:function(e){var t=Oe("Symbol");return Re(t)&&Qe(t.prototype,Ge(e))},He=String,Ye=TypeError,We=function(e,t){var r=e[t];return Ce(r)?void 0:function(e){if(Re(e))return e;throw Ye(function(e){try{return He(e)}catch(e){return"Object"}}(e)+" is not a function")}(r)},Je=TypeError,Xe=Object.defineProperty,Ke=function(e,t){try{Xe(te,e,{value:t,configurable:!0,writable:!0})}catch(r){te[e]=t}return t},ze="__core-js_shared__",qe=te[ze]||Ke(ze,{}),Ze=u((function(e){(e.exports=function(e,t){return qe[e]||(qe[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.32.1",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),$e=Object,et=function(e){return $e(Te(e))},tt=ge({}.hasOwnProperty),rt=Object.hasOwn||function(e,t){return tt(et(e),t)},it=0,nt=Math.random(),ot=ge(1..toString),at=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ot(++it+nt,36)},st=te.Symbol,ct=Ze("wks"),At=Ve?st.for||st:st&&st.withoutSetter||at,lt=function(e){return rt(ct,e)||(ct[e]=Fe&&rt(st,e)?st[e]:At("Symbol."+e)),ct[e]},ut=TypeError,dt=lt("toPrimitive"),ht=function(e){var t=function(e,t){if(!Be(e)||je(e))return e;var r,i=We(e,dt);if(i){if(void 0===t&&(t="default"),r=ae(i,e,t),!Be(r)||je(r))return r;throw ut("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var r,i;if("string"===t&&Re(r=e.toString)&&!Be(i=ae(r,e)))return i;if(Re(r=e.valueOf)&&!Be(i=ae(r,e)))return i;if("string"!==t&&Re(r=e.toString)&&!Be(i=ae(r,e)))return i;throw Je("Can't convert object to primitive value")}(e,t)}(e,"string");return je(t)?t:t+""},gt=te.document,pt=Be(gt)&&Be(gt.createElement),ft=function(e){return pt?gt.createElement(e):{}},mt=!ie&&!re((function(){return 7!==Object.defineProperty(ft("div"),"a",{get:function(){return 7}}).a})),Et=Object.getOwnPropertyDescriptor,It={f:ie?Et:function(e,t){if(e=ve(e),t=ht(t),mt)try{return Et(e,t)}catch(e){}if(rt(e,t))return le(!ae(Ae.f,e,t),e[t])}},_t=ie&&re((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ct=String,yt=TypeError,Tt=function(e){if(Be(e))return e;throw yt(Ct(e)+" is not an object")},vt=TypeError,wt=Object.defineProperty,St=Object.getOwnPropertyDescriptor,bt="enumerable",Rt="configurable",Dt="writable",Bt={f:ie?_t?function(e,t,r){if(Tt(e),t=ht(t),Tt(r),"function"==typeof e&&"prototype"===t&&"value"in r&&Dt in r&&!r[Dt]){var i=St(e,t);i&&i[Dt]&&(e[t]=r.value,r={configurable:Rt in r?r[Rt]:i[Rt],enumerable:bt in r?r[bt]:i[bt],writable:!1})}return wt(e,t,r)}:wt:function(e,t,r){if(Tt(e),t=ht(t),Tt(r),mt)try{return wt(e,t,r)}catch(e){}if("get"in r||"set"in r)throw vt("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},Ot=ie?function(e,t,r){return Bt.f(e,t,le(1,r))}:function(e,t,r){return e[t]=r,e},Qt=Function.prototype,kt=ie&&Object.getOwnPropertyDescriptor,Mt=rt(Qt,"name"),Pt={EXISTS:Mt,PROPER:Mt&&"something"===function(){}.name,CONFIGURABLE:Mt&&(!ie||ie&&kt(Qt,"name").configurable)},Nt=ge(Function.toString);Re(qe.inspectSource)||(qe.inspectSource=function(e){return Nt(e)});var Lt,xt,Ut,Ft=qe.inspectSource,Vt=te.WeakMap,Gt=Re(Vt)&&/native code/.test(String(Vt)),jt=Ze("keys"),Ht=function(e){return jt[e]||(jt[e]=at(e))},Yt={},Wt="Object already initialized",Jt=te.TypeError,Xt=te.WeakMap;if(Gt||qe.state){var Kt=qe.state||(qe.state=new Xt);Kt.get=Kt.get,Kt.has=Kt.has,Kt.set=Kt.set,Lt=function(e,t){if(Kt.has(e))throw Jt(Wt);return t.facade=e,Kt.set(e,t),t},xt=function(e){return Kt.get(e)||{}},Ut=function(e){return Kt.has(e)}}else{var zt=Ht("state");Yt[zt]=!0,Lt=function(e,t){if(rt(e,zt))throw Jt(Wt);return t.facade=e,Ot(e,zt,t),t},xt=function(e){return rt(e,zt)?e[zt]:{}},Ut=function(e){return rt(e,zt)}}var qt={set:Lt,get:xt,has:Ut,enforce:function(e){return Ut(e)?xt(e):Lt(e,{})},getterFor:function(e){return function(t){var r;if(!Be(t)||(r=xt(t)).type!==e)throw Jt("Incompatible receiver, "+e+" required");return r}}},Zt=u((function(e){var t=Pt.CONFIGURABLE,r=qt.enforce,i=qt.get,n=String,o=Object.defineProperty,a=ge("".slice),s=ge("".replace),c=ge([].join),A=ie&&!re((function(){return 8!==o((function(){}),"length",{value:8}).length})),l=String(String).split("String"),u=e.exports=function(e,i,u){"Symbol("===a(n(i),0,7)&&(i="["+s(n(i),/^Symbol\(([^)]*)\)/,"$1")+"]"),u&&u.getter&&(i="get "+i),u&&u.setter&&(i="set "+i),(!rt(e,"name")||t&&e.name!==i)&&(ie?o(e,"name",{value:i,configurable:!0}):e.name=i),A&&u&&rt(u,"arity")&&e.length!==u.arity&&o(e,"length",{value:u.arity});try{u&&rt(u,"constructor")&&u.constructor?ie&&o(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var d=r(e);return rt(d,"source")||(d.source=c(l,"string"==typeof i?i:"")),e};Function.prototype.toString=u((function(){return Re(this)&&i(this).source||Ft(this)}),"toString")})),$t=function(e,t,r,i){i||(i={});var n=i.enumerable,o=void 0!==i.name?i.name:t;if(Re(r)&&Zt(r,o,i),i.global)n?e[t]=r:Ke(t,r);else{try{i.unsafe?e[t]&&(n=!0):delete e[t]}catch(e){}n?e[t]=r:Bt.f(e,t,{value:r,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e},er=Math.ceil,tr=Math.floor,rr=Math.trunc||function(e){var t=+e;return(t>0?tr:er)(t)},ir=function(e){var t=+e;return t!=t||0===t?0:rr(t)},nr=Math.max,or=Math.min,ar=Math.min,sr=function(e){return e>0?ar(ir(e),9007199254740991):0},cr=function(e){return sr(e.length)},Ar=function(e){return function(t,r,i){var n,o=ve(t),a=cr(o),s=function(e,t){var r=ir(e);return r<0?nr(r+t,0):or(r,t)}(i,a);if(e&&r!=r){for(;a>s;)if((n=o[s++])!=n)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},lr=(Ar(!0),Ar(!1)),ur=ge([].push),dr=function(e,t){var r,i=ve(e),n=0,o=[];for(r in i)!rt(Yt,r)&&rt(i,r)&&ur(o,r);for(;t.length>n;)rt(i,r=t[n++])&&(~lr(o,r)||ur(o,r));return o},hr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gr=hr.concat("length","prototype"),pr={f:Object.getOwnPropertyNames||function(e){return dr(e,gr)}},fr={f:Object.getOwnPropertySymbols},mr=ge([].concat),Er=Oe("Reflect","ownKeys")||function(e){var t=pr.f(Tt(e)),r=fr.f;return r?mr(t,r(e)):t},Ir=function(e,t,r){for(var i=Er(t),n=Bt.f,o=It.f,a=0;a<i.length;a++){var s=i[a];rt(e,s)||r&&rt(r,s)||n(e,s,o(t,s))}},_r=/#|\.prototype\./,Cr=function(e,t){var r=Tr[yr(e)];return r===wr||r!==vr&&(Re(t)?re(t):!!t)},yr=Cr.normalize=function(e){return String(e).replace(_r,".").toLowerCase()},Tr=Cr.data={},vr=Cr.NATIVE="N",wr=Cr.POLYFILL="P",Sr=Cr,br=It.f,Rr=function(e,t){var r,i,n,o,a,s=e.target,c=e.global,A=e.stat;if(r=c?te:A?te[s]||Ke(s,{}):(te[s]||{}).prototype)for(i in t){if(o=t[i],n=e.dontCallGetSet?(a=br(r,i))&&a.value:r[i],!Sr(c?i:s+(A?".":"#")+i,e.forced)&&void 0!==n){if(typeof o==typeof n)continue;Ir(o,n)}(e.sham||n&&n.sham)&&Ot(o,"sham",!0),$t(r,i,o,e)}},Dr={};Dr[lt("toStringTag")]="z";var Br,Or="[object z]"===String(Dr),Qr=lt("toStringTag"),kr=Object,Mr="Arguments"===me(function(){return arguments}()),Pr=Or?me:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=kr(e),Qr))?r:Mr?me(t):"Object"===(i=me(t))&&Re(t.callee)?"Arguments":i},Nr=String,Lr=function(e){if("Symbol"===Pr(e))throw TypeError("Cannot convert a Symbol value to a string");return Nr(e)},xr=function(){var e=Tt(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},Ur=te.RegExp,Fr=re((function(){var e=Ur("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),Vr=Fr||re((function(){return!Ur("a","y").sticky})),Gr={BROKEN_CARET:Fr||re((function(){var e=Ur("^r","gy");return e.lastIndex=2,null!==e.exec("str")})),MISSED_STICKY:Vr,UNSUPPORTED_Y:Fr},jr=Object.keys||function(e){return dr(e,hr)},Hr=ie&&!_t?Object.defineProperties:function(e,t){Tt(e);for(var r,i=ve(t),n=jr(t),o=n.length,a=0;o>a;)Bt.f(e,r=n[a++],i[r]);return e},Yr={f:Hr},Wr=Oe("document","documentElement"),Jr="prototype",Xr="script",Kr=Ht("IE_PROTO"),zr=function(){},qr=function(e){return"<"+Xr+">"+e+"</"+Xr+">"},Zr=function(e){e.write(qr("")),e.close();var t=e.parentWindow.Object;return e=null,t},$r=function(){try{Br=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;$r="undefined"!=typeof document?document.domain&&Br?Zr(Br):(t=ft("iframe"),r="java"+Xr+":",t.style.display="none",Wr.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(qr("document.F=Object")),e.close(),e.F):Zr(Br);for(var i=hr.length;i--;)delete $r[Jr][hr[i]];return $r()};Yt[Kr]=!0;var ei,ti,ri=Object.create||function(e,t){var r;return null!==e?(zr[Jr]=Tt(e),r=new zr,zr[Jr]=null,r[Kr]=e):r=$r(),void 0===t?r:Yr.f(r,t)},ii=te.RegExp,ni=re((function(){var e=ii(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),oi=te.RegExp,ai=re((function(){var e=oi("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),si=qt.get,ci=Ze("native-string-replace",String.prototype.replace),Ai=RegExp.prototype.exec,li=Ai,ui=ge("".charAt),di=ge("".indexOf),hi=ge("".replace),gi=ge("".slice),pi=(ti=/b*/g,ae(Ai,ei=/a/,"a"),ae(Ai,ti,"a"),0!==ei.lastIndex||0!==ti.lastIndex),fi=Gr.BROKEN_CARET,mi=void 0!==/()??/.exec("")[1];(pi||mi||fi||ni||ai)&&(li=function(e){var t,r,i,n,o,a,s,c=this,A=si(c),l=Lr(e),u=A.raw;if(u)return u.lastIndex=c.lastIndex,t=ae(li,u,l),c.lastIndex=u.lastIndex,t;var d=A.groups,h=fi&&c.sticky,g=ae(xr,c),p=c.source,f=0,m=l;if(h&&(g=hi(g,"y",""),-1===di(g,"g")&&(g+="g"),m=gi(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==ui(l,c.lastIndex-1))&&(p="(?: "+p+")",m=" "+m,f++),r=new RegExp("^(?:"+p+")",g)),mi&&(r=new RegExp("^"+p+"$(?!\\s)",g)),pi&&(i=c.lastIndex),n=ae(Ai,h?r:c,m),h?n?(n.input=gi(n.input,f),n[0]=gi(n[0],f),n.index=c.lastIndex,c.lastIndex+=n[0].length):c.lastIndex=0:pi&&n&&(c.lastIndex=c.global?n.index+n[0].length:i),mi&&n&&n.length>1&&ae(ci,n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n&&d)for(n.groups=a=ri(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=n[s[1]];return n});var Ei=li;Rr({target:"RegExp",proto:!0,forced:/./.exec!==Ei},{exec:Ei});var Ii="\t\n\v\f\r                　\u2028\u2029\ufeff",_i=ge("".replace),Ci=RegExp("^["+Ii+"]+"),yi=RegExp("(^|[^"+Ii+"])["+Ii+"]+$"),Ti=function(e){return function(t){var r=Lr(Te(t));return 1&e&&(r=_i(r,Ci,"")),2&e&&(r=_i(r,yi,"$1")),r}},vi=(Ti(1),Ti(2),Ti(3)),wi=ge("".charAt),Si=te.parseFloat,bi=te.Symbol,Ri=bi&&bi.iterator,Di=1/Si(Ii+"-0")!=-1/0||Ri&&!re((function(){Si(Object(Ri))}))?function(e){var t=vi(Lr(e)),r=Si(t);return 0===r&&"-"===wi(t,0)?-0:r}:Si;Rr({global:!0,forced:parseFloat!==Di},{parseFloat:Di});var Bi=function(e){if("Function"===me(e))return ge(e)},Oi=(lt("species"),RegExp.prototype),Qi=ge("".charAt),ki=ge("".charCodeAt),Mi=ge("".slice),Pi=function(e){return function(t,r){var i,n,o=Lr(Te(t)),a=ir(r),s=o.length;return a<0||a>=s?e?"":void 0:(i=ki(o,a))<55296||i>56319||a+1===s||(n=ki(o,a+1))<56320||n>57343?e?Qi(o,a):i:e?Mi(o,a,a+2):n-56320+(i-55296<<10)+65536}},Ni=(Pi(!1),Pi(!0)),Li=function(e,t,r){return t+(r?Ni(e,t).length:1)},xi=TypeError,Ui=function(e,t){var r=e.exec;if(Re(r)){var i=ae(r,e,t);return null!==i&&Tt(i),i}if("RegExp"===me(e))return ae(Ei,e,t);throw xi("RegExp#exec called on incompatible receiver")};!function(e){var t=lt(e),r=!re((function(){var r={};return r[t]=function(){return 7},7!==""[e](r)})),i=r&&!re((function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},r[t](""),!e}));if(!r||!i){var n=Bi(/./[t]),o=function(e,t,r){return[function(t){var r=Te(this),i=Ce(t)?void 0:We(t,e);return i?ae(i,t,r):new RegExp(t)[e](Lr(r))},function(e){var i=Tt(this),n=Lr(e),o=r(t,i,n);if(o.done)return o.value;if(!i.global)return Ui(i,n);var a=i.unicode;i.lastIndex=0;for(var s,c=[],A=0;null!==(s=Ui(i,n));){var l=Lr(s[0]);c[A]=l,""===l&&(i.lastIndex=Li(n,sr(i.lastIndex),a)),A++}return 0===A?null:c}]}(t,""[e],(function(e,t,i,o,a){var s=Bi(e),c=t.exec;return c===Ei||c===Oi.exec?r&&!a?{done:!0,value:n(t,i,o)}:{done:!0,value:s(i,t,o)}:{done:!1}}));$t(String.prototype,e,o[0]),$t(Oi,t,o[1])}}("match");var Fi=Array.isArray||function(e){return"Array"===me(e)},Vi=TypeError,Gi=function(e){if(e>9007199254740991)throw Vi("Maximum allowed index exceeded");return e},ji=function(e,t,r){var i=ht(t);i in e?Bt.f(e,i,le(0,r)):e[i]=r},Hi=function(){},Yi=[],Wi=Oe("Reflect","construct"),Ji=/^\s*(?:class|function)\b/,Xi=ge(Ji.exec),Ki=!Ji.exec(Hi),zi=function(e){if(!Re(e))return!1;try{return Wi(Hi,Yi,e),!0}catch(e){return!1}},qi=function(e){if(!Re(e))return!1;switch(Pr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ki||!!Xi(Ji,Ft(e))}catch(e){return!0}};qi.sham=!0;var Zi=!Wi||re((function(){var e;return zi(zi.call)||!zi(Object)||!zi((function(){e=!0}))||e}))?qi:zi,$i=lt("species"),en=Array,tn=lt("species"),rn=lt("isConcatSpreadable"),nn=xe>=51||!re((function(){var e=[];return e[rn]=!1,e.concat()[0]!==e})),on=function(e){if(!Be(e))return!1;var t=e[rn];return void 0!==t?!!t:Fi(e)};Rr({target:"Array",proto:!0,arity:1,forced:!(nn&&(xe>=51||!re((function(){var e=[];return(e.constructor={})[tn]=function(){return{foo:1}},1!==e.concat(Boolean).foo}))))},{concat:function(e){var t,r,i,n,o,a=et(this),s=function(e,t){return new(function(e){var t;return Fi(e)&&(t=e.constructor,(Zi(t)&&(t===en||Fi(t.prototype))||Be(t)&&null===(t=t[$i]))&&(t=void 0)),void 0===t?en:t}(e))(0===t?0:t)}(a,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(on(o=-1===t?a:arguments[t]))for(n=cr(o),Gi(c+n),r=0;r<n;r++,c++)r in o&&ji(s,c,o[r]);else Gi(c+1),ji(s,c++,o);return s.length=c,s}});var an=window.navigator&&window.navigator.userAgent||"",sn=/AppleWebKit\/([\d.]+)/i.exec(an);sn&&parseFloat(sn.pop());var cn=/iPad/i.test(an),An=/iPhone/i.test(an)&&!cn,ln=/iPod/i.test(an),un=An||cn||ln,dn=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(an);un&&function(){var e=an.match(/OS (\d+)_/i);e&&e[1]&&e[1]}();var hn=/Android/i.test(an);hn&&function(){var e=an.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);t&&r&&parseFloat("".concat(e[1],".").concat(e[2]))}(),hn&&/webkit/i.test(an),/Firefox/i.test(an)&&function(){var e=an.match(/Firefox\/(\d+)/);e&&e[1]&&parseFloat(e[1])}();var gn=/Edge\//i.test(an);gn&&function(){var e=an.match(/Edge\/(\d+)/i);e&&e[1]&&e[1]}();var pn=/Edg\//i.test(an);pn&&function(){var e=an.match(/Edg\/(\d+)/);e&&e[1]&&parseFloat(e[1])}();var fn=/SogouMobileBrowser\//i.test(an);fn&&function(){var e=an.match(/SogouMobileBrowser\/(\d+)/);e&&e[1]&&parseFloat(e[1])}();var mn=/MetaSr\s/i.test(an);mn&&function(){var e=an.match(/MetaSr(\s\d+(\.\d+)+)/);e&&e[1]&&parseFloat(e[1])}();var En=/TBS\/\d+/i.test(an);En&&function(){var e=an.match(/TBS\/(\d+)/i);e&&e[1]&&e[1]}();var In=/XWEB\/\d+/i.test(an);In&&function(){var e=an.match(/XWEB\/(\d+)/i);e&&e[1]&&e[1]}(),/MSIE\s8\.0/.test(an),/MSIE\/\d+/i.test(an)&&function(){var e=/MSIE\s(\d+)\.\d/.exec(an),t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(an)&&/rv:11.0/.test(an)&&(t=11)}(),/(micromessenger|webbrowser)/i.test(an)&&function(){var e=an.match(/MicroMessenger\/(\d+)/i);e&&e[1]&&e[1]}();var _n=!En&&/MQQBrowser\/\d+/i.test(an)&&/COVC\/\d+/i.test(an),Cn=!En&&/MQQBrowser\/\d+/i.test(an)&&!/COVC\/\d+/i.test(an);(Cn||_n)&&function(){var e=an.match(/ MQQBrowser\/([\d.]+)/);e&&e[1]&&e[1]}();var yn=!En&&/ QQBrowser\/\d+/i.test(an);yn&&function(){var e=an.match(/ QQBrowser\/([\d.]+)/);e&&e[1]&&e[1]}();var Tn=!En&&/QQBrowserLite\/\d+/i.test(an);Tn&&function(){var e=an.match(/QQBrowserLite\/([\d.]+)/);e&&e[1]&&e[1]}();var vn=!En&&/MQBHD\/\d+/i.test(an);vn&&function(){var e=an.match(/MQBHD\/([\d.]+)/);e&&e[1]&&e[1]}(),/Windows/i.test(an),!un&&/MAC OS X/i.test(an),!hn&&/Linux/i.test(an),/MicroMessenger/i.test(an),/UCBrowser/i.test(an),/Electron/i.test(an);var wn=/MiuiBrowser/i.test(an);wn&&function(){var e=an.match(/MiuiBrowser\/([\d.]+)/);e&&e[1]&&e[1]}();var Sn=/HuaweiBrowser/i.test(an);/Huawei/i.test(an),Sn&&function(){var e=an.match(/HuaweiBrowser\/([\d.]+)/);e&&e[1]&&e[1]}();var bn=/SamsungBrowser/i.test(an);bn&&function(){var e=an.match(/SamsungBrowser\/([\d.]+)/);e&&e[1]&&e[1]}();var Rn=/HeyTapBrowser/i.test(an);Rn&&function(){var e=an.match(/HeyTapBrowser\/([\d.]+)/);e&&e[1]&&e[1]}();var Dn=/VivoBrowser/i.test(an);Dn&&function(){var e=an.match(/VivoBrowser\/([\d.]+)/);e&&e[1]&&e[1]}();var Bn,On,Qn,kn=/Chrome/i.test(an),Mn=!gn&&!mn&&!fn&&!En&&!In&&!pn&&!yn&&!wn&&!Sn&&!bn&&!Rn&&!Dn&&/Chrome/i.test(an);Mn&&function(){var e=an.match(/Chrome\/(\d+)/);e&&e[1]&&parseFloat(e[1])}(),Mn&&function(){var e=an.match(/Chrome\/([\d.]+)/);e&&e[1]&&e[1]}(),!kn&&!Cn&&!_n&&!Tn&&!vn&&/Safari/i.test(an)&&function(){var e=an.match(/Version\/([\d.]+)/);e&&e[1]&&e[1]}(),"file:"===location.protocol||"localhost"===location.hostname||/^\d+\.\d+\.\d+\.\d+$/.test(location.hostname),function(e){e.LIVE="live",e.RTC="rtc"}(Bn||(Bn={})),function(e){e.CONTAIN="contain",e.COVER="cover",e.FILL="fill"}(On||(On={})),function(e){e[e.exitRoom=0]="exitRoom",e[e.banned=1]="banned",e[e.roomDisband=2]="roomDisband"}(Qn||(Qn={}));var Pn={code:-1001,message:"参数错误, 请检查参数格式、是否非空等"},Nn={code:-1005,message:"not supported"},Ln="2.9.0",xn=Object.defineProperty,Un=(e,t,r)=>((e,t,r)=>t in e?xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);var Fn,Vn,Gn=(Vn="undefined"!=typeof document?null==(Fn=document.currentScript)?void 0:Fn.src:void 0,function(e={}){var t,r,i=Object.assign({},e),n=new Promise(((e,i)=>{t=e,r=i})),o=Object.assign({},i),a="";"undefined"!=typeof document&&document.currentScript&&(a=document.currentScript.src),Vn&&(a=Vn),a=a.startsWith("blob:")?"":a.substr(0,a.replace(/[?#].*/,"").lastIndexOf("/")+1);var s,c=i.print||console.log.bind(console),A=i.printErr||console.error.bind(console);Object.assign(i,o),o=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit,i.wasmBinary&&(s=i.wasmBinary);var l,u,d,h,g,p,f,m,E,I=!1,_=[],C=[],y=[],T=0,v=null;function w(e){var t;null==(t=i.onAbort)||t.call(i,e),A(e="Aborted("+e+")"),I=!0,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw r(n),n}var S,b="data:application/octet-stream;base64,",R=e=>e.startsWith(b);function D(e){return Promise.resolve().then((()=>function(e){if(e==S&&s)return new Uint8Array(s);var t=function(e){if(R(e))return function(e){for(var t=atob(e),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}(e.slice(b.length))}(e);if(t)return t;throw"both async and sync fetching of the wasm failed"}(e)))}var B=e=>{for(;e.length>0;)e.shift()(i)};i.noExitRuntime;class O{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){f[this.ptr+4>>2]=e}get_type(){return f[this.ptr+4>>2]}set_destructor(e){f[this.ptr+8>>2]=e}get_destructor(){return f[this.ptr+8>>2]}set_caught(e){e=e?1:0,u[this.ptr+12]=e}get_caught(){return 0!=u[this.ptr+12]}set_rethrown(e){e=e?1:0,u[this.ptr+13]=e}get_rethrown(){return 0!=u[this.ptr+13]}init(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)}set_adjusted_ptr(e){f[this.ptr+16>>2]=e}get_adjusted_ptr(){return f[this.ptr+16>>2]}get_exception_ptr(){if(rt(this.get_type()))return f[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var Q,k,M,P=e=>{for(var t="",r=e;d[r];)t+=Q[d[r++]];return t},N={},L={},x={},U=e=>{throw new k(e)},F=e=>{throw new M(e)},V=(e,t,r)=>{function i(t){var i=r(t);i.length!==e.length&&F("Mismatched type converter count");for(var n=0;n<e.length;++n)G(e[n],i[n])}e.forEach((function(e){x[e]=t}));var n=new Array(t.length),o=[],a=0;t.forEach(((e,t)=>{L.hasOwnProperty(e)?n[t]=L[e]:(o.push(e),N.hasOwnProperty(e)||(N[e]=[]),N[e].push((()=>{n[t]=L[e],++a===o.length&&i(n)})))})),0===o.length&&i(n)};function G(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(e,t,r={}){var i=t.name;if(e||U(`type "${i}" must have a positive integer typeid pointer`),L.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;U(`Cannot register type '${i}' twice`)}if(L[e]=t,delete x[e],N.hasOwnProperty(e)){var n=N[e];delete N[e],n.forEach((e=>e()))}}(e,t,r)}var j,H=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Y=e=>{U(e.$$.ptrType.registeredClass.name+" instance already deleted")},W=!1,J=e=>{},X=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)},K=(e,t,r)=>{if(t===r)return e;if(void 0===r.baseClass)return null;var i=K(e,t,r.baseClass);return null===i?null:r.downcast(i)},z={},q=[],Z=()=>{for(;q.length;){var e=q.pop();e.$$.deleteScheduled=!1,e.delete()}},$={},ee=(e,t)=>((!t.ptrType||!t.ptr)&&F("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&F("Both smartPtrType and smartPtr must be specified"),t.count={value:1},te(Object.create(e,{$$:{value:t,writable:!0}})));var te=e=>"undefined"==typeof FinalizationRegistry?(te=e=>e,e):(W=new FinalizationRegistry((e=>{X(e.$$)})),J=e=>W.unregister(e),(te=e=>{var t=e.$$;if(t.smartPtr){var r={$$:t};W.register(e,r,e)}return e})(e));function re(){}var ie=(e,t)=>Object.defineProperty(t,"name",{value:e}),ne=(e,t,r)=>{if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||U(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}};function oe(e,t,r,i,n,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=i,this.baseClass=n,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}var ae=(e,t,r)=>{for(;t!==r;)t.upcast||U(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function se(e,t){if(null===t)return this.isReference&&U(`null is not a valid ${this.name}`),0;t.$$||U(`Cannot pass "${Be(t)}" as a ${this.name}`),t.$$.ptr||U(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass;return ae(t.$$.ptr,r,this.registeredClass)}function ce(e,t){var r;if(null===t)return this.isReference&&U(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&U(`Cannot pass "${Be(t)}" as a ${this.name}`),t.$$.ptr||U(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&U(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var i=t.$$.ptrType.registeredClass;if(r=ae(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&U("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:U(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var n=t.clone();r=this.rawShare(r,Re.toHandle((()=>n.delete()))),null!==e&&e.push(this.rawDestructor,r)}break;default:U("Unsupporting sharing policy")}return r}function Ae(e,t){if(null===t)return this.isReference&&U(`null is not a valid ${this.name}`),0;t.$$||U(`Cannot pass "${Be(t)}" as a ${this.name}`),t.$$.ptr||U(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&U(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass;return ae(t.$$.ptr,r,this.registeredClass)}function le(e){return this.fromWireType(f[e>>2])}function ue(e,t,r,i,n,o,a,s,c,A,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=i,this.isSmartPointer=n,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=A,this.rawDestructor=l,n||void 0!==t.baseClass?this.toWireType=ce:i?(this.toWireType=se,this.destructorFunction=null):(this.toWireType=Ae,this.destructorFunction=null)}var de,he,ge=[],pe=e=>{var t=ge[e];return t||(e>=ge.length&&(ge.length=e+1),ge[e]=t=de.get(e)),t},fe=(e,t)=>{var r=(e=P(e)).includes("j")?((e,t)=>(...r)=>((e,t,r=[])=>e.includes("j")?((e,t,r)=>(e=e.replace(/p/g,"i"),(0,i["dynCall_"+e])(t,...r)))(e,t,r):pe(t)(...r))(e,t,r))(e,t):pe(t);return"function"!=typeof r&&U(`unknown function pointer with signature ${e}: ${t}`),r},me=e=>{var t=et(e),r=P(t);return tt(t),r},Ee=(e,t)=>{var r=[],i={};throw t.forEach((function e(t){if(!i[t]&&!L[t]){if(x[t])return void x[t].forEach(e);r.push(t),i[t]=!0}})),new he(`${e}: `+r.map(me).join([", "]))},Ie=(e,t)=>{for(var r=[],i=0;i<e;i++)r.push(f[t+4*i>>2]);return r},_e=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function Ce(e,t,r,i,n,o){var a=t.length;a<2&&U("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=null!==t[1]&&null!==r,c=function(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}(t),A="void"!==t[0].name,l=a-2,u=new Array(l),d=[],h=[];return ie(e,(function(...r){var o;r.length!==l&&U(`function ${e} called with ${r.length} arguments, expected ${l}`),h.length=0,d.length=s?2:1,d[0]=n,s&&(o=t[1].toWireType(h,this),d[1]=o);for(var a=0;a<l;++a)u[a]=t[a+2].toWireType(h,r[a]),d.push(u[a]);return function(e){if(c)_e(h);else for(var r=s?1:2;r<t.length;r++){var i=1===r?o:u[r-2];null!==t[r].destructorFunction&&t[r].destructorFunction(i)}if(A)return t[0].fromWireType(e)}(i(...d))}))}var ye,Te,ve=(e,t,r)=>(e instanceof Object||U(`${r} with invalid "this": ${e}`),e instanceof t.registeredClass.constructor||U(`${r} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||U(`cannot call emscripten binding method ${r} on deleted object`),ae(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)),we=[],Se=[],be=e=>{e>9&&0==--Se[e+1]&&(Se[e]=void 0,we.push(e))},Re={toValue:e=>(e||U("Cannot use deleted val. handle = "+e),Se[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{let t=we.pop()||Se.length;return Se[t]=e,Se[t+1]=1,t}}}},De={name:"emscripten::val",fromWireType:e=>{var t=Re.toValue(e);return be(e),t},toWireType:(e,t)=>Re.toHandle(t),argPackAdvance:8,readValueFromPointer:le,destructorFunction:null},Be=e=>{if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e},Oe=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType(m[e>>2])};case 8:return function(e){return this.fromWireType(E[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Qe=(e,t,r)=>{switch(t){case 1:return r?e=>u[e]:e=>d[e];case 2:return r?e=>h[e>>1]:e=>g[e>>1];case 4:return r?e=>p[e>>2]:e=>f[e>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},ke="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,Me=(e,t,r)=>{for(var i=t+r,n=t;e[n]&&!(n>=i);)++n;if(n-t>16&&e.buffer&&ke)return ke.decode(e.subarray(t,n));for(var o="";t<n;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var A=a-65536;o+=String.fromCharCode(55296|A>>10,56320|1023&A)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o},Pe=(e,t)=>e?Me(d,e,t):"",Ne="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,Le=(e,t)=>{for(var r=e,i=r>>1,n=i+t/2;!(i>=n)&&g[i];)++i;if((r=i<<1)-e>32&&Ne)return Ne.decode(d.subarray(e,r));for(var o="",a=0;!(a>=t/2);++a){var s=h[e+2*a>>1];if(0==s)break;o+=String.fromCharCode(s)}return o},xe=(e,t,r)=>{if(null!=r||(r=2147483647),r<2)return 0;for(var i=t,n=(r-=2)<2*e.length?r/2:e.length,o=0;o<n;++o){var a=e.charCodeAt(o);h[t>>1]=a,t+=2}return h[t>>1]=0,t-i},Ue=e=>2*e.length,Fe=(e,t)=>{for(var r=0,i="";!(r>=t/4);){var n=p[e+4*r>>2];if(0==n)break;if(++r,n>=65536){var o=n-65536;i+=String.fromCharCode(55296|o>>10,56320|1023&o)}else i+=String.fromCharCode(n)}return i},Ve=(e,t,r)=>{if(null!=r||(r=2147483647),r<4)return 0;for(var i=t,n=i+r-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),p[t>>2]=a,(t+=4)+4>n)break}return p[t>>2]=0,t-i},Ge=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&++r,t+=4}return t},je=(e,t)=>{var r=L[e];return void 0===r&&U(`${t} has unknown type ${me(e)}`),r},He=(e,t,r)=>{var i=[],n=e.toWireType(i,r);return i.length&&(f[t>>2]=Re.toHandle(i)),n},Ye={},We=[],Je=Reflect.construct,Xe=[null,[],[]],Ke=(e,t)=>{var r=Xe[e];0===t||10===t?((1===e?c:A)(Me(r,0)),r.length=0):r.push(t)};(()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Q=e})(),k=i.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},M=i.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(re.prototype,{isAliasOf(e){if(!(this instanceof re&&e instanceof re))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var i=e.$$.ptrType.registeredClass,n=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;i.baseClass;)n=i.upcast(n),i=i.baseClass;return t===i&&r===n},clone(){if(this.$$.ptr||Y(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=te(Object.create(Object.getPrototypeOf(this),{$$:{value:H(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Y(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&U("Object already scheduled for deletion"),J(this),X(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Y(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&U("Object already scheduled for deletion"),q.push(this),1===q.length&&j&&j(Z),this.$$.deleteScheduled=!0,this}}),i.getInheritedInstanceCount=()=>Object.keys($).length,i.getLiveInheritedInstances=()=>{var e=[];for(var t in $)$.hasOwnProperty(t)&&e.push($[t]);return e},i.flushPendingDeletes=Z,i.setDelayFunction=e=>{j=e,q.length&&j&&j(Z)},Object.assign(ue.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;null==(t=this.rawDestructor)||t.call(this,e)},argPackAdvance:8,readValueFromPointer:le,fromWireType:function(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=((e,t)=>(t=((e,t)=>{for(void 0===t&&U("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t})(e,t),$[t]))(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var i=r.clone();return this.destructor(e),i}function n(){return this.isSmartPointer?ee(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ee(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(t),s=z[a];if(!s)return n.call(this);o=this.isConst?s.constPointerType:s.pointerType;var c=K(t,this.registeredClass,o.registeredClass);return null===c?n.call(this):this.isSmartPointer?ee(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:e}):ee(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})}}),he=i.UnboundTypeError=(ye=Error,(Te=ie("UnboundTypeError",(function(e){this.name="UnboundTypeError",this.message=e;var t=new Error(e).stack;void 0!==t&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}))).prototype=Object.create(ye.prototype),Te.prototype.constructor=Te,Te.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},Te),Se.push(0,1,void 0,1,null,1,!0,1,!1,1),i.count_emval_handles=()=>Se.length/2-5-we.length;var ze,qe={w:(e,t,r)=>{throw new O(e).init(t,r),e},q:()=>{w("")},p:(e,t,r,i,n)=>{},u:(e,t,r,i)=>{G(e,{name:t=P(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){return this.fromWireType(d[e])},destructorFunction:null})},y:(e,t,r,n,o,a,s,c,A,l,u,d,h)=>{u=P(u),a=fe(o,a),c&&(c=fe(s,c)),l&&(l=fe(A,l)),h=fe(d,h);var g=(e=>{if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(u);((e,t,r)=>{i.hasOwnProperty(e)?(U(`Cannot register public name '${e}' twice`),ne(i,e,e),i.hasOwnProperty(r)&&U(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),i[e].overloadTable[r]=t):i[e]=t})(g,(function(){Ee(`Cannot construct ${u} due to unbound types`,[n])})),V([e,t,r],n?[n]:[],(t=>{var r,o,s;t=t[0],s=n?(o=t.registeredClass).instancePrototype:re.prototype;var A=ie(u,(function(...e){if(Object.getPrototypeOf(this)!==d)throw new k("Use 'new' to construct "+u);if(void 0===p.constructor_body)throw new k(u+" has no accessible constructor");var t=p.constructor_body[e.length];if(void 0===t)throw new k(`Tried to invoke ctor of ${u} with invalid number of parameters (${e.length}) - expected (${Object.keys(p.constructor_body).toString()}) parameters instead!`);return t.apply(this,e)})),d=Object.create(s,{constructor:{value:A}});A.prototype=d;var p=new oe(u,A,d,h,o,a,c,l);p.baseClass&&(null!=(r=p.baseClass).__derivedClasses||(r.__derivedClasses=[]),p.baseClass.__derivedClasses.push(p));var f=new ue(u,p,!0,!1,!1),m=new ue(u+"*",p,!1,!1,!1),E=new ue(u+" const*",p,!1,!0,!1);return z[e]={pointerType:m,constPointerType:E},((e,t,r)=>{i.hasOwnProperty(e)||F("Replacing nonexistent public symbol"),i[e].overloadTable,i[e]=t,i[e].argCount=r})(g,A),[f,m,E]}))},x:(e,t,r,i,n,o)=>{var a=Ie(t,r);n=fe(i,n),V([],[e],(e=>{var r=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new k(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=()=>{Ee(`Cannot construct ${e.name} due to unbound types`,a)},V([],a,(i=>(i.splice(1,0,null),e.registeredClass.constructor_body[t-1]=Ce(r,i,null,n,o),[]))),[]}))},h:(e,t,r,i,n,o,a,s,c)=>{var A=Ie(r,i);t=(e=>{let t=(e=e.trim()).indexOf("(");return-1!==t?e.substr(0,t):e})(t=P(t)),o=fe(n,o),V([],[e],(e=>{var i=`${(e=e[0]).name}.${t}`;function n(){Ee(`Cannot call ${i} due to unbound types`,A)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,l=c[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===r-2?(n.argCount=r-2,n.className=e.name,c[t]=n):(ne(c,t,i),c[t].overloadTable[r-2]=n),V([],A,(n=>{var s=Ce(i,n,e,o,a);return void 0===c[t].overloadTable?(s.argCount=r-2,c[t]=s):c[t].overloadTable[r-2]=s,[]})),[]}))},k:(e,t,r,i,n,o,a,s,c,A)=>{t=P(t),n=fe(i,n),V([],[e],(e=>{var i=`${(e=e[0]).name}.${t}`,l={get(){Ee(`Cannot access ${i} due to unbound types`,[r,a])},enumerable:!0,configurable:!0};return l.set=c?()=>Ee(`Cannot access ${i} due to unbound types`,[r,a]):e=>U(i+" is a read-only property"),Object.defineProperty(e.registeredClass.instancePrototype,t,l),V([],c?[r,a]:[r],(r=>{var a=r[0],l={get(){var t=ve(this,e,i+" getter");return a.fromWireType(n(o,t))},enumerable:!0};if(c){c=fe(s,c);var u=r[1];l.set=function(t){var r=ve(this,e,i+" setter"),n=[];c(A,r,u.toWireType(n,t)),_e(n)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,l),[]})),[]}))},t:e=>G(e,De),o:(e,t,r)=>{G(e,{name:t=P(t),fromWireType:e=>e,toWireType:(e,t)=>t,argPackAdvance:8,readValueFromPointer:Oe(t,r),destructorFunction:null})},g:(e,t,r,i,n)=>{t=P(t);var o=e=>e;if(0===i){var a=32-8*r;o=e=>e<<a>>>a}var s=t.includes("unsigned");G(e,{name:t,fromWireType:o,toWireType:s?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:Qe(t,r,0!==i),destructorFunction:null})},a:(e,t,r)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function n(e){var t=f[e>>2],r=f[e+4>>2];return new i(u.buffer,r,t)}G(e,{name:r=P(r),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{ignoreDuplicateRegistrations:!0})},n:(e,t)=>{var r="std::string"===(t=P(t));G(e,{name:t,fromWireType(e){var t,i=f[e>>2],n=e+4;if(r)for(var o=n,a=0;a<=i;++a){var s=n+a;if(a==i||0==d[s]){var c=Pe(o,s-o);void 0===t?t=c:(t+="\0",t+=c),o=s+1}}else{var A=new Array(i);for(a=0;a<i;++a)A[a]=String.fromCharCode(d[n+a]);t=A.join("")}return tt(e),t},toWireType(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i,n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||U("Cannot pass non-string to std::string"),i=r&&n?(e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++r):t+=3}return t})(t):t.length;var o=$e(4+i+1),a=o+4;if(f[o>>2]=i,r&&n)((e,t,r)=>{((e,t,r,i)=>{if(!(i>0))return 0;for(var n=r+i-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(r>=n)break;t[r++]=a}else if(a<=2047){if(r+1>=n)break;t[r++]=192|a>>6,t[r++]=128|63&a}else if(a<=65535){if(r+2>=n)break;t[r++]=224|a>>12,t[r++]=128|a>>6&63,t[r++]=128|63&a}else{if(r+3>=n)break;t[r++]=240|a>>18,t[r++]=128|a>>12&63,t[r++]=128|a>>6&63,t[r++]=128|63&a}}t[r]=0})(e,d,t,r)})(t,a,i+1);else if(n)for(var s=0;s<i;++s){var c=t.charCodeAt(s);c>255&&(tt(a),U("String has UTF-16 code units that do not fit in 8 bits")),d[a+s]=c}else for(s=0;s<i;++s)d[a+s]=t[s];return null!==e&&e.push(tt,o),o},argPackAdvance:8,readValueFromPointer:le,destructorFunction(e){tt(e)}})},l:(e,t,r)=>{var i,n,o,a;r=P(r),2===t?(i=Le,n=xe,a=Ue,o=e=>g[e>>1]):4===t&&(i=Fe,n=Ve,a=Ge,o=e=>f[e>>2]),G(e,{name:r,fromWireType:e=>{for(var r,n=f[e>>2],a=e+4,s=0;s<=n;++s){var c=e+4+s*t;if(s==n||0==o(c)){var A=i(a,c-a);void 0===r?r=A:(r+="\0",r+=A),a=c+t}}return tt(e),r},toWireType:(e,i)=>{"string"!=typeof i&&U(`Cannot pass non-string to C++ string type ${r}`);var o=a(i),s=$e(4+o+t);return f[s>>2]=o/t,n(i,s+4,o+t),null!==e&&e.push(tt,s),s},argPackAdvance:8,readValueFromPointer:le,destructorFunction(e){tt(e)}})},v:(e,t)=>{G(e,{isVoid:!0,name:t=P(t),argPackAdvance:0,fromWireType:()=>{},toWireType:(e,t)=>{}})},s:(e,t,r)=>d.copyWithin(e,t,t+r),j:(e,t,r)=>(e=Re.toValue(e),t=je(t,"emval::as"),He(t,r,e)),e:(e,t,r,i,n)=>(e=We[e],t=Re.toValue(t),r=(e=>{var t=Ye[e];return void 0===t?P(e):t})(r),e(t,t[r],i,n)),c:be,f:(e,t,r)=>{var i=((e,t)=>{for(var r=new Array(e),i=0;i<e;++i)r[i]=je(f[t+4*i>>2],"parameter "+i);return r})(e,t),n=i.shift();e--;var o=new Array(e),a=`methodCaller<(${i.map((e=>e.name)).join(", ")}) => ${n.name}>`;return(e=>{var t=We.length;return We.push(e),t})(ie(a,((t,a,s,c)=>{for(var A=0,l=0;l<e;++l)o[l]=i[l].readValueFromPointer(c+A),A+=i[l].argPackAdvance;var u=1===r?Je(a,o):a.apply(t,o);return He(n,s,u)})))},d:e=>{e>9&&(Se[e+1]+=1)},b:e=>{var t=Re.toValue(e);_e(t),be(e)},i:(e,t)=>{var r=(e=je(e,"_emval_take_value")).readValueFromPointer(t);return Re.toHandle(r)},r:e=>{d.length,w("OOM")},m:(e,t,r,i)=>{for(var n=0,o=0;o<r;o++){var a=f[t>>2],s=f[t+4>>2];t+=8;for(var c=0;c<s;c++)Ke(e,d[a+c]);n+=s}return f[i>>2]=n,0}},Ze=function(){var e={a:qe};function t(e,t){return Ze=e.exports,l=Ze.z,function(){var e=l.buffer;i.HEAP8=u=new Int8Array(e),i.HEAP16=h=new Int16Array(e),i.HEAPU8=d=new Uint8Array(e),i.HEAPU16=g=new Uint16Array(e),i.HEAP32=p=new Int32Array(e),i.HEAPU32=f=new Uint32Array(e),i.HEAPF32=m=new Float32Array(e),i.HEAPF64=E=new Float64Array(e)}(),de=Ze.C,function(e){C.unshift(e)}(Ze.A),function(){var e;if(T--,null==(e=i.monitorRunDependencies)||e.call(i,T),0==T&&v){var t=v;v=null,t()}}(),Ze}if(function(){var e;T++,null==(e=i.monitorRunDependencies)||e.call(i,T)}(),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){A(`Module.instantiateWasm callback failed with error: ${e}`),r(e)}return S||(S="data:application/octet-stream;base64,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Ay0AASIARQ0BIAJBAWohAiADQQFqIQMgACABRg0ACwsgACABRgtrAQF/IwBBgAJrIgUkAAJAIAIgA0wNACAEQYDABHENACAFIAEgAiADayIDQYACIANBgAJJIgEbECQaIAFFBEADQCAAIAVBgAIQHSADQYACayIDQf8BSw0ACwsgACAFIAMQHQsgBUGAAmokAAvlAwEFfyMAQRBrIgMkACADIAAoAgAiBEEIaygCACICNgIMIAMgACACajYCBCADIARBBGsoAgA2AgggAygCCCIEIAFBABAeIQIgAygCBCEFAkAgAgRAIAMoAgwhACMAQUBqIgEkACABQUBrJABBACAFIAAbIQIMAQsjAEFAaiICJAAgACAFTgRAIAJCADcCHCACQgA3AiQgAkIANwIsIAJCADcCFCACQQA2AhAgAiABNgIMIAIgBDYCBCACQQA2AjwgAkKBgICAgICAgAE3AjQgAiAANgIIIAQgAkEEaiAFIAVBAUEAIAQoAgAoAhQRCQAgAEEAIAIoAhwbIQYLIAJBQGskACAGIgINACMAQUBqIgIkACACQQA2AhAgAkGsxgA2AgwgAiAANgIIIAIgATYCBEEAIQAgAkEUakEAQScQJBogAkEANgI8IAJBAToAOyAEIAJBBGogBUEBQQAgBCgCACgCGBEIAAJAAkACQCACKAIoDgIAAQILIAIoAhhBACACKAIkQQFGG0EAIAIoAiBBAUYbQQAgAigCLEEBRhshAAwBCyACKAIcQQFHBEAgAigCLA0BIAIoAiBBAUcNASACKAIkQQFHDQELIAIoAhQhAAsgAkFAayQAIAAhAgsgA0EQaiQAIAILtAEBBX8jAEEQayIGJAAgBkEEaiICEEEjAEEQayIFJAACfyACLQALQQd2BEAgAigCBAwBCyACLQALQf8AcQshBANAAkACfyACLQALQQd2BEAgAigCAAwBCyACCyEDIAUgATkDACACAn8gAyAEQQFqIAUQRyIDQQBOBEAgAyAETQ0CIAMMAQsgBEEBdEEBcgsiBBAtDAELCyACIAMQLSAAIAIQQCAFQRBqJAAgAhBEIAZBEGokAAuABAEDfyACQYAETwRAIAAgASACEBIgAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCAAQQNxRQRAIAAhAgwBCyACRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAkEDcUUNASACIANJDQALCwJAIANBfHEiBEHAAEkNACACIARBQGoiBUsNAANAIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDCACIAEoAhA2AhAgAiABKAIUNgIUIAIgASgCGDYCGCACIAEoAhw2AhwgAiABKAIgNgIgIAIgASgCJDYCJCACIAEoAig2AiggAiABKAIsNgIsIAIgASgCMDYCMCACIAEoAjQ2AjQgAiABKAI4NgI4IAIgASgCPDYCPCABQUBrIQEgAkFAayICIAVNDQALCyACIARPDQEDQCACIAEoAgA2AgAgAUEEaiEBIAJBBGoiAiAESQ0ACwwBCyADQQRJBEAgACECDAELIAAgA0EEayIESwRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAiABLQABOgABIAIgAS0AAjoAAiACIAEtAAM6AAMgAUEEaiEBIAJBBGoiAiAETQ0ACwsgAiADSQRAA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0cNAAsLIAALCwAgASACIAAQRRoL8gICAn8BfgJAIAJFDQAgACABOgAAIAAgAmoiA0EBayABOgAAIAJBA0kNACAAIAE6AAIgACABOgABIANBA2sgAToAACADQQJrIAE6AAAgAkEHSQ0AIAAgAToAAyADQQRrIAE6AAAgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBBGsgATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQQhrIAE2AgAgAkEMayABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkEQayABNgIAIAJBFGsgATYCACACQRhrIAE2AgAgAkEcayABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa1CgYCAgBB+IQUgAyAEaiEBA0AgASAFNwMYIAEgBTcDECABIAU3AwggASAFNwMAIAFBIGohASACQSBrIgJBH0sNAAsLIAALEgAgAUEBdEHAxABqQQIgABBFC60CAQd/An8gARAqIQMjAEEQayIGJAACfyAALQALQQd2BEAgACgCBAwBCyAALQALQf8AcQsiBEEATwRAAkAgAyAALQAL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eHEgBCgCCEH/////B3FyNgIIIAAgACgCCEGAgICAeHI2AgggBEEQaiQADAELECcACyAAIAE2AgQLIAECfyAALQALQQd2BEAgACgCAAwBCyAACyICaiAFEEMgACABIAVqIgAQMSAGQQA6AA8gACACaiAGLQAPOgAACyAGQRBqJAAPCwJ/IAAtAAtBB3YEQCAAKAIADAELIAALIQQjAEEQayICJAACfyAALQALQQd2BEAgACgCBAwBCyAALQALCxogACABEDEgAkEAOgAPIAEgBGogAi0ADzoAACACQRBqJAALPQEBfyMAQRBrIgIkACACQQA6AA8DQCABBEAgACACLQAPOgAAIAFBAWshASAAQQFqIQAMAQsLIAJBEGokAAsaACAALQALQQd2BEAgACgCCBogACgCABAZCwvmAQEFfyMAQRBrIgUkACMAQSBrIgMkACMAQRBrIgQkACAEIAA2AgwgBCAAIAFqNgIIIAMgBCgCDDYCGCADIAQoAgg2AhwgBEEQaiQAIAMoAhghBCADKAIcIQYjAEEQayIBJAAgASAGNgIMIAIgBCAGIARrIgQQNiABIAIgBGo2AgggAyABKAIMNgIQIAMgASgCCDYCFCABQRBqJAAgAyAAIAMoAhAgAGtqNgIMIAMgAiADKAIUIAJrajYCCCAFIAMoAgw2AgggBSADKAIINgIMIANBIGokACAFKAIMIQcgBUEQaiQAIAcL8wIBBX8jAEEQayIHJAAgAiABQX9zQff///8Hak0EQAJ/IAAtAAtBB3YEQCAAKAIADAELIAALIQggB0EEaiIJIAFB8////wNJBH8gByABQQF0NgIMIAcgASACajYCBCMAQRBrIgIkACAJKAIAIAdBDGoiCigCAEkhCyACQRBqJAAgCiAJIAsbKAIAIgJBC08EfyACQQhqQXhxIgIgAkEBayICIAJBC0YbBUEKC0EBagVB9////wcLEDAgBygCBCECIAcoAggaIAQEQCACIAggBBAjCyAFBEAgAiAEaiAGIAUQIwsgAyAEayEGIAMgBEcEQCACIARqIAVqIAQgCGogBhAjCyABQQpHBEAgCBAZCyAAIAI2AgAgACAAKAIIQYCAgIB4cSAHKAIIQf////8HcXI2AgggACAAKAIIQYCAgIB4cjYCCCAAIAQgBWogBmoiADYCBCAHQQA6AAwgACACaiAH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IwBBEGsiAiQAQcQAEBwhASAAKAIEIgBBCU8EQCAAEAMLIAIgADYCCCABQZQnIAJBCGoQCDYCBCABQaTPADYCACABQQI2AhwgAUGkzwA2AhggAUECNgIUIAFBpM8ANgIQIAFBAjYCDCABQaTPADYCCCABQQA6ACAgAUKAgICAMDcCPCABQQA7ADcgAUEAOwArIAJBEGokACABC54FAgZ+BH8gASABKAIAQQdqQXhxIgFBEGo2AgAgACELIAEpAwAhAyABKQMIIQcjAEEgayIBJAAgB0L///////8/gyEFAn4gB0IwiEL//wGDIgSnIglBgfgAa0H9D00EQCAFQgSGIANCPIiEIQIgCUGA+ABrrSEEAkAgA0L//////////w+DIgNCgYCAgICAgIAIWgRAIAJCAXwhAgwBCyADQoCAgICAgICACFINACACQgGDIAJ8IQILQgAgAiACQv////////8HViIAGyECIACtIAR8DAELAkAgAyAFhFANACAEQv//AVINACAFQgSGIANCPIiEQoCAgICAgIAEhCECQv8PDAELQv8PIAlB/ocBSw0AGkIAQYD4AEGB+AAgBFAiCBsiCiAJayIAQfAASg0AGiADIQIgBSAFQoCAgICAgMAAhCAIGyIEIQYCQEGAASAAayIIQcAAcQRAIAIgCEFAaq2GIQZCACECDAELIAhFDQAgBiAIrSIFhiACQcAAIAhrrYiEIQYgAiAFhiECCyABIAI3AxAgASAGNwMYAkAgAEHAAHEEQCAEIABBQGqtiCEDQgAhBAwBCyAARQ0AIARBwAAgAGuthiADIACtIgKIhCEDIAQgAoghBAsgASADNwMAIAEgBDcDCCABKQMIQgSGIAEpAwAiA0I8iIQhAgJAIAkgCkcgASkDECABKQMYhEIAUnGtIANC//////////8Pg4QiA0KBgICAgICAgAhaBEAgAkIBfCECDAELIANCgICAgICAgIAIUg0AIAJCAYMgAnwhAgsgAkKAgICAgICACIUgAiACQv////////8HViIAGyECIACtCyEDIAFBIGokACALIAdCgICAgICAgICAf4MgA0I0hoQgAoS/OQMAC0MBAn8jAEEQayICJAAgAiABNgIMIAJBpM8ANgIIIAJBCGogABEBACEDIAIoAgwiAUEJTwRAIAEQAgsgAkEQaiQAIAMLBABCAAsEAEEAC/YCAQh/IwBBIGsiAyQAIAMgACgCHCIENgIQIAAoAhQhBSADIAI2AhwgAyABNgIYIAMgBSAEayIBNgIUIAEgAmohBUECIQcCfwJAAkACQCAAKAI8IANBEGoiAUECIANBDGoQDCIEBH9BuNgAIAQ2AgBBfwVBAAsEQCABIQQMAQsDQCAFIAMoAgwiBkYNAiAGQQBIBEAgASEEDAQLIAEgBiABKAIEIghLIglBA3RqIgQgBiAIQQAgCRtrIgggBCgCAGo2AgAgAUEMQQQgCRtqIgEgASgCACAIazYCACAFIAZrIQUgACgCPCAEIgEgByAJayIHIANBDGoQDCIGBH9BuNgAIAY2AgBBfwVBAAtFDQALCyAFQX9HDQELIAAgACgCLCIBNgIcIAAgATYCFCAAIAEgACgCMGo2AhAgAgwBCyAAQQA2AhwgAEIANwMQIAAgACgCAEEgcjYCAEEAIAdBAkYNABogAiAEKAIEawshCiADQSBqJAAgCguKAQEBfyAABEAgACwAN0EASARAIAAoAiwQGQsgACwAK0EASARAIAAoAiAQGQsgACgCHCIBQQlPBEAgARACIABBADYCHAsgACgCFCIBQQlPBEAgARACIABBADYCFAsgACgCDCIBQQlPBEAgARACIABBADYCDAsgACgCBCIBQQlPBEAgARACCyAAEBkLCyQBAn8gACgCBCIAECpBAWoiARAsIgIEfyACIAAgARAiBUEACwvrHAMMfwJ8AX0jAEFAaiIEJAAgBEHoAhAcIgI2AjAgBELigoCAgK2AgIB/NwI0IAJBkB1B4gIQIkEAOgDiAiAEQTBqIgJB/BBB5xAgAS0AOBsQGhogAkGRIBAaGgJAAkACQAJAAkAgASgCPEEBaw4DAAECAwsgBEEgaiENIAEoAkAhDCMAQaABayIFJAAjAEEQayIKJAAgCkEANgIMIApCADcCBCAKQTgQHCIDNgIEIAogA0E4aiICNgIMIANBAEE4ECQaIAogAjYCCAJ/IAVBlAFqIgtBADYCCCALQgA3AgAgC0HUABAcIgI2AgQgCyACNgIAIAsgAkHUAGoiBzYCCAJAAkAgCigCCCIDIAooAgQiCEYEQCACQQBB1AAQJEHUAGohAgwBCyADIAhrIglBAEgNAQNAIAJBADYCCCACQgA3AgAgAiAJEBwiBjYCBCACIAY2AgAgAiAGIAlqIgM2AgggBiAIIAkQIhogAiADNgIEIAJBDGoiAiAHRw0ACwsgCyACNgIEIAsMAQsgAkEANgIIIAJCADcCAEHiCBBTAAshByAKKAIEIgIEQCAKIAI2AgggAhAZC0EAIQIDQCAHKAIAIAJBDGxqIQgCQCACRQRAQQAhCQNAIAkgCWy4nyIORAAAAAAAABxAZQRAIAgoAgAgCUEDdGogDiAOmqJEAAAAAAAAMkCjEDdEAyQlRbkbkj+iIg45AwAgDiAPoCEPCyAJQQFqIglBB0cNAAsMAQsgAiACbCIDuJ8iDkQAAAAAAAAcQGUEQCAOIA6aokQAAAAAAAAyQKMQNyEOIAgoAgAgDkQDJCVFuRuSP6IiDjkDACAOIA+gIQ8LQQEhCQNAIAkgCWwgA2q4nyIORAAAAAAAABxAZQRAIAgoAgAgCUEDdGogDiAOmqJEAAAAAAAAMkCjEDdEAyQlRbkbkj+iIg45AwAgDkQAAAAAAAAQQKIgD6AhDwsgCUEBaiIJQQdHDQALCyACQQFqIgJBB0cNAAsgBygCACEHQQAhAgNAIAcgAkEMbGooAgAhCEEAIQlBACEDA0AgCCAJQQN0aiIGIAYrAwAgD6M5AwAgBiAGKwMIIA+jOQMIIAlBAmohCSADQQJqIgNBBkcNAAsgCCAJQQN0aiIDIAMrAwAgD6M5AwAgAkEBaiICQQdHDQALIApBEGokACAFQQA6AIgBIAVBADoAkwFBeiEJA0AgCSAMbCEGIAkgCUEfdSICcyACa0EMbCEIQXohAgNAAkAgBSgClAEgCGooAgAgAiACQR91IgNzIANrQQN0aisDALYiEEMAAAAAXkUNACAFQRxqIgMgBhAvIAUgA0GvFRAmIgMoAgg2AjAgBSADKQIANwMoIANCADcCACADQQA2AgggBUFAayAFQShqQbYREBoiAygCCDYCACAFIAMpAgA3AzggA0IANwIAIANBADYCCCAFQRBqIgMgAiAMbBAvIAUgBUE4aiAFKAIQIAMgBSwAGyIHQQBIIgMbIAUoAhQgByADGxAbIgMoAgg2AlAgBSADKQIANwNIIANCADcCACADQQA2AgggBSAFQcgAakG6ERAaIgMoAgg2AmAgBSADKQIANwNYIANCADcCACADQQA2AgggBUEEaiIDIBAQLiAFIAVB2ABqIAUoAgQgAyAFLAAPIgdBAEgiAxsgBSgCCCAHIAMbEBsiAygCCDYCcCAFIAMpAgA3A2ggA0IANwIAIANBADYCCCAFIAVB6ABqQasREBoiAygCCDYCgAEgBSADKQIANwN4IANCADcCACADQQA2AgggBUGIAWogBSgCeCAFQfgAaiAFLACDASIHQQBIIgMbIAUoAnwgByADGxAbGiAFLACDAUEASARAIAUoAngQGQsgBSwAc0EASARAIAUoAmgQGQsgBSwAD0EASARAIAUoAgQQGQsgBSwAY0EASARAIAUoAlgQGQsgBSwAU0EASARAIAUoAkgQGQsgBSwAG0EASARAIAUoAhAQGQsgBSwAQ0EASARAIAUoAjgQGQsgBSwAM0EASARAIAUoAigQGQsgBSwAJ0EATg0AIAUoAhwQGQsgAkEBaiICQQdHDQALIAlBAWoiCUEHRw0ACyMAQRBrIggkAEHzHxAqIQwCfyAFQYgBaiILLQALQQd2BEAgCygCBAwBCyALLQALQf8AcQshBgJ/An8jAEEQayIHJAAgBUH4AGohCiAGIAxqIglB9////wdNBEACQCAJQQtJBEAgCkIANwIAIApBADYCCCAKIAotAAtBgAFxIAlB/wBxcjoACyAKIAotAAtB/wBxOgALDAELIAlBC08EfyAJQQhqQXhxIgIgAkEBayICIAJBC0YbBUEKC0EBaiIDEBwhAiAKIAooAghBgICAgHhxIANB/////wdxcjYCCCAKIAooAghBgICAgHhyNgIIIAogAjYCACAKIAk2AgQLIAdBEGokACAKDAELECcACyICLQALQQd2BEAgAigCAAwBCyACCyICQfMfIAwQIyACIAxqIgICfyALLQALQQd2BEAgCygCAAwBCyALCyAGECMgAiAGakEBEEMgCEEQaiQAIA0gCkHNIxAaIgIpAgA3AgAgDSACKAIINgIIIAJCADcCACACQQA2AgggBSwAgwFBAEgEQCAFKAJ4EBkLIAUsAJMBQQBIBEAgBSgCiAEQGQsgBSgClAEiBwRAIAUoApgBIgMgByICRwRAA0AgA0EMayICKAIAIggEQCADQQhrIAg2AgAgCBAZCyACIgMgB0cNAAsgBSgClAEhAgsgBSAHNgKYASACEBkLIAVBoAFqJAAgBEEwaiAEKAIgIA0gBCwAKyIDQQBIIgIbIAQoAiQgAyACGxAbGiAELAArQQBODQMgBCgCIBAZDAMLIARBMGpBxyUQGhoMAgsgBEEwakH0JRAaGgwBCyAEQTBqQbAlEBoaCwJAAkAgASgCMCABLAA3IgMgA0EASBsiB0EBaiIIQfj///8HSQRAAkACQCAIQQtPBEAgCEEHckEBaiICEBwhBiAEIAg2AiQgBCAGNgIgIAQgAkGAgICAeHI2AigMAQsgBEEANgIoIARCADcDICAEIAg6ACsgBEEgaiEGIAdFDQELIAYgAUEsaiICKAIAIAIgA0EASBsgBxAyCyAGIAdqQQo7AAAgBEEwaiAEKAIgIARBIGogBCwAKyIDQQBIIgIbIAQoAiQgAyACGxAbGiAELAArQQBIBEAgBCgCIBAZCyABKAIkIAEsACsiAyADQQBIGyIHQQJqIghB+P///wdPDQECQAJAIAhBC08EQCAIQQdyQQFqIgIQHCEGIAQgCDYCJCAEIAY2AiAgBCACQYCAgIB4cjYCKAwBCyAEQQA2AiggBEIANwMgIAQgCDoAKyAEQSBqIQYgB0UNAQsgBiABQSBqIgIoAgAgAiADQQBIGyAHEDILIAYgB2oiAkEAOgACIAJB/RQ7AAAgBEEwaiAEKAIgIARBIGogBCwAKyIDQQBIIgIbIAQoAiQgAyACGxAbGiAELAArQQBIBEAgBCgCIBAZC0GQzQAoAgAiAxAqIgdB+P///wdPDQICQAJAIAdBC08EQCAHQQdyQQFqIgIQHCEGIAQgAkGAgICAeHI2AhwgBCAGNgIUIAQgBzYCGAwBCyAEIAc6AB8gBEEUaiEGIAdFDQELIAYgAyAHEDILIAYgB2pBADoAACAEQSBqIAFBsZYCIARBFGoQVSAEKAIkIQcgBEEANgIkIAQoAiAhAwJAIAEoAhQiAkEITQRAIAEgBzYCFCABIAM2AhAMAQsgAhACIAQoAiQhAiABIAc2AhQgASADNgIQIAJBCUkNACACEAIgBEEANgIkCyAELAAfQQBIBEAgBCgCFBAZCwJAIAQsADtBAE4EQCAEIAQoAjg2AhAgBCAEKQIwNwMIDAELIARBCGohAyAEKAIwIQcgBCgCNCEGIwBBEGsiCCQAAkACQAJAIAZBC0kEQCADIgIgAi0AC0GAAXEgBkH/AHFyOgALIAIgAi0AC0H/AHE6AAsMAQsgBkH3////B0sNASAIQQhqIAZBC08EfyAGQQhqQXhxIgIgAkEBayICIAJBC0YbBUEKC0EBahAwIAgoAgwaIAMgCCgCCCICNgIAIAMgAygCCEGAgICAeHEgCCgCDEH/////B3FyNgIIIAMgAygCCEGAgICAeHI2AgggAyAGNgIECyACIAcgBkEBahAjIAhBEGokAAwBCxAnAAsLIARBIGogAUGwlgIgBEEIahBVIAQoAiQhByAEQQA2AiQgBCgCICEDAkAgASgCDCICQQhNBEAgASAHNgIMIAEgAzYCCAwBCyACEAIgBCgCJCECIAEgBzYCDCABIAM2AgggAkEJSQ0AIAIQAiAEQQA2AiQLIAQsABNBAEgEQCAEKAIIEBkLIARBADYCIAJAQdTOAC0AAEEBcQRAQdDOACgCACEGDAELQQFB+ChBABAFIQZB1M4AQQE6AABB0M4AIAY2AgALAn8gBiABKAIEQeAJIARBIGpBABAEIg5EAAAAAAAA8EFjIA5EAAAAAAAAAABmcQRAIA6rDAELQQALIQMgBCgCICICBEAgAhABCyABKAIcIgJBCU8EQCACEAILIAEgAzYCHCABQaTPADYCGCABIAFBGGoiAiABQRBqEFQgASACIAFBCGoQVCABKAIcIgJBCU8EQCACEAMLIAQgAjYCICAEQQA2AjwCQEG8zgAtAABBAXEEQEG4zgAoAgAhBgwBC0ECQYwoQQAQBSEGQbzOAEEBOgAAQbjOACAGNgIACyAGIAEoAgRBxgkgBEE8aiAEQSBqEAQaIAQoAjwiAgRAIAIQAQsgACABKAIcIgE2AgQgAEGkzwA2AgAgAUEJTwRAIAEQAwsgBCwAO0EASARAIAQoAjAQGQsgBEFAayQADwsQOAALEDgACxA4AAuIAwECfyMAQRBrIgIkACAAKAIUIgFBCU8EQCABEAMLIAIgATYCCCACQQA2AgQCQEG8zgAtAABBAXEEQEG4zgAoAgAhAQwBC0ECQYwoQQAQBSEBQbzOAEEBOgAAQbjOACABNgIACyABIAAoAgRB/QggAkEEaiACQQhqEAQaIAIoAgQiAQRAIAEQAQsgACgCDCIBQQlPBEAgARADCyACIAE2AgggAkEANgIEAkBBvM4ALQAAQQFxBEBBuM4AKAIAIQEMAQtBAkGMKEEAEAUhAUG8zgBBAToAAEG4zgAgATYCAAsgASAAKAIEQf0IIAJBBGogAkEIahAEGiACKAIEIgEEQCABEAELIAAoAhwiAUEJTwRAIAEQAwsgAiABNgIIIAJBADYCBAJAQbzOAC0AAEEBcQRAQbjOACgCACEBDAELQQJBjChBABAFIQFBvM4AQQE6AABBuM4AIAE2AgALIAEgACgCBEHSCSACQQRqIAJBCGoQBBogAigCBCIABEAgABABCyACQRBqJAALBQBBsCYLNQEBfyABIAAoAgQiAkEBdWohASAAKAIAIQAgASACQQFxBH8gASgCACAAaigCAAUgAAsRAgALLwACfyAALAArQQBIBEAgAEEANgIkIAAoAiAMAQsgAEEAOgArIABBIGoLQQA6AAALPQEBfyABIAAoAgQiBkEBdWohASAAKAIAIQAgASACIAMgBCAFIAZBAXEEfyABKAIAIABqKAIABSAACxENAAuGCQEEfyMAQRBrIggkACMAQYACayIFJAAgBUHEAGoiBiABECEgBSAGQe4RECYiBigCCDYCWCAFIAYpAgA3A1AgBkIANwIAIAZBADYCCCAFIAVB0ABqQYQUEBoiBigCCDYCaCAFIAYpAgA3A2AgBkIANwIAIAZBADYCCCAFQThqIgYgAhAhIAUgBUHgAGogBSgCOCAGIAUsAEMiBkEASCIHGyAFKAI8IAYgBxsQGyIGKAIINgJ4IAUgBikCADcDcCAGQgA3AgAgBkEANgIIIAUgBUHwAGpByREQGiIGKAIINgKIASAFIAYpAgA3A4ABIAZCADcCACAGQQA2AgggBUEsaiIGIAEgA6AQISAFIAVBgAFqIAUoAiwgBiAFLAA3IgZBAEgiBxsgBSgCMCAGIAcbEBsiBigCCDYCmAEgBSAGKQIANwOQASAGQgA3AgAgBkEANgIIIAUgBUGQAWpBhBQQGiIGKAIINgKoASAFIAYpAgA3A6ABIAZCADcCACAGQQA2AgggBUEgaiIGIAIgBKAQISAFIAVBoAFqIAUoAiAgBiAFLAArIgZBAEgiBxsgBSgCJCAGIAcbEBsiBigCCDYCuAEgBSAGKQIANwOwASAGQgA3AgAgBkEANgIIIAUgBUGwAWpB3RIQGiIGKAIINgLIASAFIAYpAgA3A8ABIAZCADcCACAGQQA2AgggBUEUaiIGIAMQISAFIAVBwAFqIAUoAhQgBiAFLAAfIgZBAEgiBxsgBSgCGCAGIAcbEBsiBigCCDYC2AEgBSAGKQIANwPQASAGQgA3AgAgBkEANgIIIAUgBUHQAWpBuxIQGiIGKAIINgLoASAFIAYpAgA3A+ABIAZCADcCACAGQQA2AgggBUEIaiIGIAQQISAFIAVB4AFqIAUoAgggBiAFLAATIgZBAEgiBxsgBSgCDCAGIAcbEBsiBigCCDYC+AEgBSAGKQIANwPwASAGQgA3AgAgBkEANgIIIAggBUHwAWpB5hsQGiIGKQIANwIEIAggBigCCDYCDCAGQgA3AgAgBkEANgIIIAUsAPsBQQBIBEAgBSgC8AEQGQsgBSwAE0EASARAIAUoAggQGQsgBSwA6wFBAEgEQCAFKALgARAZCyAFLADbAUEASARAIAUoAtABEBkLIAUsAB9BAEgEQCAFKAIUEBkLIAUsAMsBQQBIBEAgBSgCwAEQGQsgBSwAuwFBAEgEQCAFKAKwARAZCyAFLAArQQBIBEAgBSgCIBAZCyAFLACrAUEASARAIAUoAqABEBkLIAUsAJsBQQBIBEAgBSgCkAEQGQsgBSwAN0EASARAIAUoAiwQGQsgBSwAiwFBAEgEQCAFKAKAARAZCyAFLAB7QQBIBEAgBSgCcBAZCyAFLABDQQBIBEAgBSgCOBAZCyAFLABrQQBIBEAgBSgCYBAZCyAFLABbQQBIBEAgBSgCUBAZCyAFLABPQQBIBEAgBSgCRBAZCyAFQYACaiQAIAAsACtBAEgEQCAAKAIgEBkLIAAgCCkCBDcCICAAIAgoAgw2AiggCEEQaiQACz8BAX8gASAAKAIEIgdBAXVqIQEgACgCACEAIAEgAiADIAQgBSAGIAdBAXEEfyABKAIAIABqKAIABSAACxEOAAvBGwIHfwF8IwBBQGoiCSQAIAkgBTkDICAJIAQ5AxggCSADOQMQIAkgAjkDCCAJIAE5AwAjAEEQayIGJAAgBiAJNgIMQZjNAEGWJSAJQQAQThogBkEQaiQAIwBBgARrIgYkACAJQTRqIgtBADoAACALQQA6AAsCQCABRAAAAAAAAAAAZEUNACAGQQA6APADIAZBADoA+wMgBkEAOgDkAyAGQQA6AO8DIAZCgICAgISAgIDAADcD2AMgBkKAgICAhICAgEA3A9ADIAZCgICAgIyAgIDAADcDyAMgBkKAgICAjICAgEA3A8ADIAZCgICAhISAgMDAADcDuAMgBkKAgICEhICAwEA3A7ADIAZCgICAhIyAgMDAADcDqAMgBkKAgICEjICAwEA3A6ADIAZCgICAhgw3A5gDIAZCgICAhgQ3A5ADIAZCgICAgICAgODAADcDiAMgBkKAgICAgICA4EA3A4ADIAZCgICAiIyAgNBANwP4AiAGQoCAgIiMgIDQwAA3A/ACIAZCgICAiISAgNDAADcD6AIgBkKAgICIhICA0EA3A+ACIAZCgICAhYyAgIBBNwPYAiAGQoCAgIWMgICAwQA3A9ACIAZCgICAhYSAgIDBADcDyAIgBkKAgICFhICAgEE3A8ACIAZCgICAiQQ3A7gCIAZCgICAiQw3A7ACIAZCgICAgICAgJDBADcDqAIgBkKAgICAgICAkEE3A6ACRAAAAAAAAABAIASjIQQgAUSamZmZmZnpv6JEAAAAAAAA8D+gIQ0DQCAGQbABaiIIIAcQLyAGIAhBqwsQJiIIKAIINgLIASAGIAgpAgA3A8ABIAhCADcCACAIQQA2AgggBiAGQcABakHWFRAaIggoAgg2AtgBIAYgCCkCADcD0AEgCEIANwIAIAhBADYCCCAGQaABaiIIIAZBoAJqIAdBA3RqIgoqAgAQLiAGIAZB0AFqIAYoAqABIAggBiwAqwEiCEEASCIMGyAGKAKkASAIIAwbEBsiCCgCCDYC6AEgBiAIKQIANwPgASAIQgA3AgAgCEEANgIIIAYgBkHgAWpB2xsQGiIIKAIINgL4ASAGIAgpAgA3A/ABIAhCADcCACAIQQA2AgggBkGQAWoiCCAKKgIEEC4gBiAGQfABaiAGKAKQASAIIAYsAJsBIghBAEgiChsgBigClAEgCCAKGxAbIggoAgg2AogCIAYgCCkCADcDgAIgCEIANwIAIAhBADYCCCAGIAZBgAJqQaoREBoiCCgCCDYCmAIgBiAIKQIANwOQAiAIQgA3AgAgCEEANgIIIAZB5ANqIAYoApACIAZBkAJqIAYsAJsCIghBAEgiChsgBigClAIgCCAKGxAbGiAGLACbAkEASARAIAYoApACEBkLIAYsAIsCQQBIBEAgBigCgAIQGQsgBiwAmwFBAEgEQCAGKAKQARAZCyAGLAD7AUEASARAIAYoAvABEBkLIAYsAOsBQQBIBEAgBigC4AEQGQsgBiwAqwFBAEgEQCAGKAKgARAZCyAGLADbAUEASARAIAYoAtABEBkLIAYsAMsBQQBIBEAgBigCwAEQGQsgBiwAuwFBAEgEQCAGKAKwARAZCyAGQdABaiIIIAcQLyAGIAhBjQsQJiIIKAIINgLoASAGIAgpAgA3A+ABIAhCADcCACAIQQA2AgggBiAGQeABakHeGxAaIggoAgg2AvgBIAYgCCkCADcD8AEgCEIANwIAIAhBADYCCCAGQcABaiIIQwAAAEBDAABAQEMAAIA/IAdBE0sbIAdBDGtBCEkbEC4gBiAGQfABaiAGKALAASAIIAYsAMsBIghBAEgiChsgBigCxAEgCCAKGxAbIggoAgg2AogCIAYgCCkCADcDgAIgCEIANwIAIAhBADYCCCAGIAZBgAJqQfkVEBoiCCgCCDYCmAIgBiAIKQIANwOQAiAIQgA3AgAgCEEANgIIIAZB8ANqIAYoApACIAZBkAJqIAYsAJsCIghBAEgiChsgBigClAIgCCAKGxAbGiAGLACbAkEASARAIAYoApACEBkLIAYsAIsCQQBIBEAgBigCgAIQGQsgBiwAywFBAEgEQCAGKALAARAZCyAGLAD7AUEASARAIAYoAvABEBkLIAYsAOsBQQBIBEAgBigC4AEQGQsgBiwA2wFBAEgEQCAGKALQARAZCyAHQQFqIgdBGEcNAAsgBkE0aiIHIAQQISAGIAdBvBUQJiIHKAIINgJIIAYgBykCADcDQCAHQgA3AgAgB0EANgIIIAYgBkFAa0G4ERAaIgcoAgg2AlggBiAHKQIANwNQIAdCADcCACAHQQA2AgggBkEoaiIHRAAAAAAAAABAIAWjECEgBiAGQdAAaiAGKAIoIAcgBiwAMyIHQQBIIggbIAYoAiwgByAIGxAbIgcoAgg2AmggBiAHKQIANwNgIAdCADcCACAHQQA2AgggBiAGQeAAakG0HBAaIgcoAgg2AnggBiAHKQIANwNwIAdCADcCACAHQQA2AgggBiAGQfAAaiAGKALkAyAGQeQDaiAGLADvAyIHQQBIIggbIAYoAugDIAcgCBsQGyIHKAIINgKIASAGIAcpAgA3A4ABIAdCADcCACAHQQA2AgggBiAGQYABakHcHBAaIgcoAgg2ApgBIAYgBykCADcDkAEgB0IANwIAIAdBADYCCCAGIAZBkAFqIAYoAvADIAZB8ANqIAYsAPsDIgdBAEgiCBsgBigC9AMgByAIGxAbIgcoAgg2AqgBIAYgBykCADcDoAEgB0IANwIAIAdBADYCCCAGIAZBoAFqQfoZEBoiBygCCDYCuAEgBiAHKQIANwOwASAHQgA3AgAgB0EANgIIIAZBHGoiByANECEgBiAGQbABaiAGKAIcIAcgBiwAJyIHQQBIIggbIAYoAiAgByAIGxAbIgcoAgg2AsgBIAYgBykCADcDwAEgB0IANwIAIAdBADYCCCAGIAZBwAFqQaoUEBoiBygCCDYC2AEgBiAHKQIANwPQASAHQgA3AgAgB0EANgIIIAZBEGoiByABRDMzMzMzM+O/okQAAAAAAADwP6AQISAGIAZB0AFqIAYoAhAgByAGLAAbIgdBAEgiCBsgBigCFCAHIAgbEBsiBygCCDYC6AEgBiAHKQIANwPgASAHQgA3AgAgB0EANgIIIAYgBkHgAWpB/BUQGiIHKAIINgL4ASAGIAcpAgA3A/ABIAdCADcCACAHQQA2AgggBkEEaiIHIAEQISAGIAZB8AFqIAYoAgQgByAGLAAPIgdBAEgiCBsgBigCCCAHIAgbEBsiBygCCDYCiAIgBiAHKQIANwOAAiAHQgA3AgAgB0EANgIIIAYgBkGAAmpBrRwQGiIHKAIINgKYAiAGIAcpAgA3A5ACIAdCADcCACAHQQA2AgggCyAGKAKQAiAGQZACaiAGLACbAiIHQQBIIggbIAYoApQCIAcgCBsQGxogBiwAmwJBAEgEQCAGKAKQAhAZCyAGLACLAkEASARAIAYoAoACEBkLIAYsAA9BAEgEQCAGKAIEEBkLIAYsAPsBQQBIBEAgBigC8AEQGQsgBiwA6wFBAEgEQCAGKALgARAZCyAGLAAbQQBIBEAgBigCEBAZCyAGLADbAUEASARAIAYoAtABEBkLIAYsAMsBQQBIBEAgBigCwAEQGQsgBiwAJ0EASARAIAYoAhwQGQsgBiwAuwFBAEgEQCAGKAKwARAZCyAGLACrAUEASARAIAYoAqABEBkLIAYsAJsBQQBIBEAgBigCkAEQGQsgBiwAiwFBAEgEQCAGKAKAARAZCyAGLAB7QQBIBEAgBigCcBAZCyAGLABrQQBIBEAgBigCYBAZCyAGLAAzQQBIBEAgBigCKBAZCyAGLABbQQBIBEAgBigCUBAZCyAGLABLQQBIBEAgBigCQBAZCyAGLAA/QQBIBEAgBigCNBAZCyAGLADvA0EASARAIAYoAuQDEBkLIAYsAPsDQQBODQAgBigC8AMQGQsCQCADRAAAAAAAAAAAZEUNACAGQeQDaiIHIANEzczMzMzM3D+iRJqZmZmZmbk/oBAhIAYgB0GjGBAmIgcoAgg2AvgDIAYgBykCADcD8AMgB0IANwIAIAdBADYCCCAGIAZB8ANqQcUjEBoiBygCCDYCqAIgBiAHKQIANwOgAiAHQgA3AgAgB0EANgIIIAsgBigCoAIgBkGgAmogBiwAqwIiB0EASCIIGyAGKAKkAiAHIAgbEBsaIAYsAKsCQQBIBEAgBigCoAIQGQsgBiwA+wNBAEgEQCAGKALwAxAZCyAGLADvA0EATg0AIAYoAuQDEBkLAkAgAkQAAAAAAAAAAGRFDQAgBkHkA2oiByACRLgehetRuL4/ohAhIAYgB0GUFBAmIgcoAgg2AvgDIAYgBykCADcD8AMgB0IANwIAIAdBADYCCCAGIAZB8ANqQaQmEBoiBygCCDYCqAIgBiAHKQIANwOgAiAHQgA3AgAgB0EANgIIIAsgBigCoAIgBkGgAmogBiwAqwIiB0EASCILGyAGKAKkAiAHIAsbEBsaIAYsAKsCQQBIBEAgBigCoAIQGQsgBiwA+wNBAEgEQCAGKALwAxAZCyAGLADvA0EATg0AIAYoAuQDEBkLIAZBgARqJAAgACwAN0EASARAIAAoAiwQGQsgACAJKQI0NwIsIAAgCSgCPDYCNCAJQUBrJAALYAIBfwF8IwBBEGsiAiQAIAJBADYCDCABKAIEQezJACACQQxqEAkhAyACKAIMIgEEQCABEAELIAACfyADmUQAAAAAAADgQWMEQCADqgwBC0GAgICAeAs2AkAgAkEQaiQACzcBAX8jAEEQayICJAAgAiABKAJANgIIIABB7MkAIAJBCGoQCDYCBCAAQaTPADYCACACQRBqJAALYAIBfwF8IwBBEGsiAiQAIAJBADYCDCABKAIEQezJACACQQxqEAkhAyACKAIMIgEEQCABEAELIAACfyADmUQAAAAAAADgQWMEQCADqgwBC0GAgICAeAs2AjwgAkEQaiQACyIBAX4gASACrSADrUIghoQgBCAAEQwAIgVCIIinJAEgBacLNwEBfyMAQRBrIgIkACACIAEoAjw2AgggAEHsyQAgAkEIahAINgIEIABBpM8ANgIAIAJBEGokAAsLvUQWAEGACAukH3NldEJlYXV0eQAtKyAgIDBYMHgALTBYKzBYIDBYLTB4KzB4IDB4AHVuc2lnbmVkIHNob3J0AHVuc2lnbmVkIGludABpbml0AGZsb2F0AHVpbnQ2NF90AGJsdXJSYWRpdXMAdmVjdG9yAG1pcnJvcgBhdHRhY2hTaGFkZXIAZGVsZXRlU2hhZGVyAGNyZWF0ZVNoYWRlcgBjb21waWxlU2hhZGVyAHVuc2lnbmVkIGNoYXIAc3RkOjpleGNlcHRpb24AbmFuAGxpbmtQcm9ncmFtAGRlbGV0ZVByb2dyYW0AY3JlYXRlUHJvZ3JhbQBib29sAHNldFdhdGVyTWFyawBzdG9wV2F0ZXJNYXJrAHVuc2lnbmVkIGxvbmcAc3RkOjp3c3RyaW5nAGJhc2ljX3N0cmluZwBzdGQ6OnN0cmluZwBzdGQ6OnUxNnN0cmluZwBzdGQ6OnUzMnN0cmluZwBpbmYAJWYAY2xvc2UAZG91YmxlAHZiTW9kZQBzaGFkZXJTb3VyY2UAdm9pZABzYW1wbGVDb2xvciArPSB0ZXh0dXJlKGZyYW1lLCBibHVyQ29vcmRpbmF0ZXNbAE5BTgBJTkYAZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2hvcnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGludD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8ZmxvYXQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDhfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDE2X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDE2X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQ2NF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ2NF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8Y2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4Ac3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGRvdWJsZT4AdmVjMiBjID0gdl90ZXhDb29yZDsAdmVjMiBjID0gdmVjMigxLjAgLSB2X3RleENvb3JkLngsIHZfdGV4Q29vcmQueSk7AEFsbEluMQAuAC4wLAAuMCkqbykqAChudWxsKQApKm8ueSk7ICAgIHZlYzIgY29vcmQyID0gdmVjMihmbG9hdCgAICAgIGMgPSB2ZWMyKHZfdGV4Q29vcmQueCwgMS4wIC0gdl90ZXhDb29yZC55KTsgICAgdmVjMiBjb29yZDEgPSB2ZWMyKGZsb2F0KAApLCAoYy55IC1jb29yZDEueSkgLyBvLnkgLyBmbG9hdCgAKSpvLnkpOyAgICBpZiAoYy54ID4gY29vcmQxLnggJiYgYy54IDwgY29vcmQyLnggJiYgYy55ID4gY29vcmQxLnkgJiYgYy55IDwgY29vcmQyLnkpIHsgICAgICB2ZWM0IHdhdGVyQ29sb3IgPSB0ZXh0dXJlKHdhdGVyTWFyaywgdmVjMigoYy54IC0gY29vcmQxLngpICAvIG8ueCAvIGZsb2F0KAApICogby54LCBmbG9hdCgAb3V0Q29sb3IucmdiICs9IHZlYzMoACk7ICAgICAgIHZlYzMgc21vb3RoQ29sb3IgPSBvdXRDb2xvci5yZ2IgKyAob3V0Q29sb3IucmdiLXZlYzMoaGlnaFBhc3MpKSphbHBoYSowLjE7ICAgICAgIHNtb290aENvbG9yID0gY2xhbXAocG93KHNtb290aENvbG9yLCB2ZWMzKABnKz1HKGMsdmVjMigAICAgICAgdmVjMiBvZmZzZXQgPSB2ZWMyKABdID0gdl90ZXhDb29yZC54eSArIG9mZnNldCAqIHZlYzIoADsgACkpLCB2ZWMzKDAuMCksIHZlYzMoMS4wKSk7ICAgICAgdmVjMyBzY3JlZW4gPSB2ZWMzKDEuMCkgLSAodmVjMygxLjApLXNtb290aENvbG9yKSAqICh2ZWMzKDEuMCktb3V0Q29sb3IucmdiKTsgICAgICAgdmVjMyBsaWdodGVuID0gbWF4KHNtb290aENvbG9yLCBvdXRDb2xvci5yZ2IpOyAgICAgICB2ZWMzIGJlYXV0eUNvbG9yID0gbWl4KG1peChvdXRDb2xvci5yZ2IsIHNjcmVlbiwgYWxwaGEpLCBsaWdodGVuLCBhbHBoYSk7ICAgICAgb3V0Q29sb3IucmdiID0gbWl4KG91dENvbG9yLnJnYiwgYmVhdXR5Q29sb3IsIAAKICAgICAgY29uc3QgbWF0MyBzYXR1cmF0ZU1hdHJpeCA9IG1hdDMoMS4xMTAyLC0wLjA1OTgsLTAuMDYxLC0wLjA3NzQsMS4wODI2LC0wLjExODYsLTAuMDIyOCwtMC4wMjI4LDEuMTc3Mik7CiAgICAgIHZlYzMgd2FybUNvbG9yID0gb3V0Q29sb3IucmdiICogc2F0dXJhdGVNYXRyaXg7CiAgICAgIG91dENvbG9yLnJnYiA9IG1peChvdXRDb2xvci5yZ2IsIHdhcm1Db2xvciwgACAgICAgIHNhbXBsZUNvbG9yID0gc2FtcGxlQ29sb3IgLyA2Mi4wOyAgICAgICBmbG9hdCBoaWdoUGFzcyA9IG91dENvbG9yLmcgLSBzYW1wbGVDb2xvciArIDAuNTsgICAgICAgY29uc3QgaGlnaHAgdmVjMyBXID0gdmVjMygwLjI5OSwwLjU4NywwLjExNCk7ICAgICAgZmxvYXQgbHVtaW5hbmNlID0gZG90KG91dENvbG9yLnJnYiwgVyk7ICAgICAgIGZsb2F0IGFscGhhID0gcG93KGx1bWluYW5jZSwgAF0pLmcgKiAAKSkpOyAgICAgIG91dENvbG9yID0gbWl4KG91dENvbG9yLHdhdGVyQ29sb3IsICB3YXRlckNvbG9yLmEpOyAgICB9ICAgIAApOyAgICAAKTsgICAgICB2ZWMyIGJsdXJDb29yZGluYXRlc1syNF07ICAgICAgACAgICAgIGZsb2F0IHNhbXBsZUNvbG9yID0gb3V0Q29sb3IuZyAqIDIyLjA7ICAgICAgIAAjdmVyc2lvbiAzMDAgZXMKICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDsKICAgIHVuaWZvcm0gc2FtcGxlcjJEIGZyYW1lOwogICAgdW5pZm9ybSBzYW1wbGVyMkQgbWFzazsKICAgIHVuaWZvcm0gc2FtcGxlcjJEIGJnOwogICAgdW5pZm9ybSBzYW1wbGVyMkQgd2F0ZXJNYXJrOwogICAgdW5pZm9ybSBzYW1wbGVyMkQgbGFzdE1hc2s7CiAgICBpbiB2ZWMyIHZfdGV4Q29vcmQ7CiAgICBvdXQgdmVjNCBvdXRDb2xvcjsKICAgIHZlYzQgRyh2ZWMyIGMsdmVjMiBzKXsKICAgICAgcmV0dXJuIHRleHR1cmUoZnJhbWUsdGV4dHVyZShtYXNrLGMrcykuYT4wLjM/YzpjK3MpOwogICAgfQogICAgdm9pZCBtYWluKCkgewogICAgICAACiAgICB2ZWM0IGcgPSB2ZWM0KDAuMCk7CiAgICAACiAgICAgIGMueSA9IDEuMCAtIGMueTsKICAgICAgdmVjNCBzcmNfY29sb3IgPSB0ZXh0dXJlKGZyYW1lLCBjKTsKICAgICAgZmxvYXQgYSA9IHRleHR1cmUobWFzaywgYykuYTsKICAgICAgYSA9IGE8MC41PzIuMCphKmE6MS4wLTIuMCooMS4wLWEpKigxLjAtYSk7CiAgICAgIC8vIGZsb2F0IGEyID0gdGV4dHVyZShsYXN0TWFzaywgYykuYTsKICAgICAgLy8gYTIgPSBhMjwwLjU/Mi4wKmEyKmEyOjEuMC0yLjAqKDEuMC1hMikqKDEuMC1hMik7CiAgICAgIC8vIGZsb2F0IGRlbHRhID0gYSAtIGEyOwogICAgICAvLyBpZiAoZGVsdGEgPCAwLjI1ICYmIGRlbHRhID4gLTAuMjUpCiAgICAgIC8vIHsKICAgICAgLy8gICAgIGEgPSBhICsgMC41KmRlbHRhOwogICAgICAvLyB9CiAgICAgIAogICAgICB2ZWMyIG8gPSAxLjAgLyB2ZWMyKHRleHR1cmVTaXplKGZyYW1lLCAwKSk7CiAgICAACiAgICAgIG91dENvbG9yID0gZzsKICAAI3ZlcnNpb24gMzAwIGVzCmluIHZlYzIgYV9wb3NpdGlvbjsKaW4gdmVjMiBhX3RleENvb3JkOwpvdXQgdmVjMiB2X3RleENvb3JkOwp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFfcG9zaXRpb24ueCwgYV9wb3NpdGlvbi55LCAwLCAxKTsKICB2X3RleENvb3JkID0gYV90ZXhDb29yZDsKfQoAc2V0QmVhdXR5ICVmICVmICVmICVmICVmCgBvdXRDb2xvciA9IHNyY19jb2xvcjsKAG91dENvbG9yID0gbWl4KHRleHR1cmUoYmcsIGMpLHNyY19jb2xvcixhKTsKAG91dENvbG9yID0gbWl4KHZlYzQoMC4wLDEuMCwwLjAsMS4wKSxzcmNfY29sb3IsYSk7CgA2QWxsSW4xAFAlAAAoEwAAUDZBbGxJbjEAAAAA1CUAADgTAAAAAAAAMBMAAFBLNkFsbEluMQAAANQlAABUEwAAAQAAADATAABwcAB2AHZwAEQTAACUEwAATjEwZW1zY3JpcHRlbjN2YWxFAABQJQAAgBMAAHBwcAB2cHBwAEGwJwskjCQAAEQTAABAJQAAQCUAAEAlAABAJQAAQCUAAHZwcGRkZGRkAEHgJwvICIwkAABEEwAAQCUAAEAlAABAJQAAQCUAAHZwcGRkZGQAjCQAAEQTAAB2cHAAjCQAAJQTAACUEwAARBMAAJQTAADsJAAAjCQAAJQTAABwFAAATlN0M19fMjEyYmFzaWNfc3RyaW5nSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAAFAlAAAwFAAAlBMAAIwkAACUEwAAlBMAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0loTlNfMTFjaGFyX3RyYWl0c0loRUVOU185YWxsb2NhdG9ySWhFRUVFAABQJQAAiBQAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0l3TlNfMTFjaGFyX3RyYWl0c0l3RUVOU185YWxsb2NhdG9ySXdFRUVFAABQJQAA0BQAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0lEc05TXzExY2hhcl90cmFpdHNJRHNFRU5TXzlhbGxvY2F0b3JJRHNFRUVFAAAAUCUAABgVAABOU3QzX18yMTJiYXNpY19zdHJpbmdJRGlOU18xMWNoYXJfdHJhaXRzSURpRUVO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"),function(e,t,r,i){return function(e,t,r){return D(e).then((e=>WebAssembly.instantiate(e,t))).then(r,(e=>{A(`failed to asynchronously prepare wasm: ${e}`),w(e)}))}(t,r,i)}(0,S,e,(function(e){t(e.instance)})).catch(r),{}}(),$e=e=>($e=Ze.B)(e),et=e=>(et=Ze.D)(e),tt=e=>(tt=Ze.E)(e),rt=e=>(rt=Ze.F)(e);function it(){function e(){ze||(ze=!0,i.calledRun=!0,!I&&(B(C),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),y.unshift(e);var e;B(y)}()))}T>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),_.unshift(e);var e;B(_)}(),T>0)||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),e()}),1)):e())}if(i.dynCall_jiji=(e,t,r,n,o)=>(i.dynCall_jiji=Ze.G)(e,t,r,n,o),i._vertexShaderSource=9872,v=function e(){ze||it(),ze||(v=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return it(),n}),jn=Gn,Hn=0,Yn=class e{constructor(e){this.core=e,Un(this,"seq"),Un(this,"_core"),Un(this,"log"),Un(this,"beautyParams"),Hn+=1,this.seq=Hn,this._core=e,this.log=e.log.createChild({id:`${this.getAlias()}${Hn}`}),this.log.info("created")}getName(){return e.Name}getAlias(){return"bb"}getValidateRule(e){switch(e){case"start":case"update":return function(e){return{name:"BasicBeautyOptions",type:"object",required:!0,allowEmpty:!1,properties:{beauty:{required:!1,type:"number"},brightness:{required:!1,type:"number"},ruddy:{required:!1,type:"number"}},validate(t,r,i,n){let{RtcError:o,ErrorCode:a,ErrorCodeDictionary:s}=e.errorModule;if(e.utils.isOverseaSdkAppId(t.sdkAppId))throw new o({code:a.INVALID_OPERATION,extraCode:s.INVALID_OPERATION,message:"This feature is not yet available in your country or region. If you have any questions, you can go to the community for consultation: https://zhiliao.qq.com/s/cWSPGIIM62CC/c3TPGIIM62CQ"})}}}(this._core);case"stop":return this._core,{name:"StopBasicBeautyOptions",required:!1}}}getGroup(){return"w"}async start(e){this._core.room.videoManager.Wasm||(this._core.room.videoManager.Wasm=await jn()),this._core.room.videoManager.renderMode="webgl";let t=this._core.utils.isUndefined(e.beauty)?.5:e.beauty,r=this._core.utils.isUndefined(e.brightness)?.5:e.brightness,i=this._core.utils.isUndefined(e.ruddy)?.5:e.ruddy;return this._core.room.videoManager.setBeautyParams({beauty:t,brightness:r,ruddy:i})}async update(e){let t=this._core.utils.isUndefined(e.beauty)?.5:e.beauty,r=this._core.utils.isUndefined(e.brightness)?.5:e.brightness,i=this._core.utils.isUndefined(e.ruddy)?.5:e.ruddy;return this._core.room.videoManager.setBeautyParams({beauty:t,brightness:r,ruddy:i})}async stop(){return this._core.room.videoManager.renderMode="auto",this._core.room.videoManager.stopBeauty()}destroy(){this._core.room.videoManager.renderMode="auto"}};Un(Yn,"Name","BasicBeauty");var Wn=Yn,Jn=function(){function e(e,t){if(this.logRegion="tc",this.loggerManager=e,t){var r=t.sdkAppId,i=t.userId,n=t.seq;this.seq=n,e&&(this.logger=e.createLogger({id:"".concat(this.logRegion).concat(n),userId:i,sdkAppId:r}))}else this.logger=e;this.logger||(this.logger={debug:function(e){console.debug(e)},info:function(e){console.info(e)},warn:function(e){console.warn(e)},error:function(e){console.error(e)}})}return e.prototype.getLogMessage=function(e){var t=this;return e.map((function(e){return t.getStringifyMessage(e)})).join(" ")},e.prototype.getStringifyMessage=function(e){var t=this;if("object"!=typeof e)return e;if(e instanceof HTMLElement)return"".concat(e.tagName.toLocaleLowerCase(),"#").concat(e.id);if(e instanceof Array){var r=[];return Object.keys(e).forEach((function(i){return r[i]=t.getStringifyMessage(e[i])})),JSON.stringify(r)}if(e instanceof Object){var i={};return Object.keys(e).forEach((function(r){return i[r]=t.getStringifyMessage(e[r])})),JSON.stringify(i)}return e},e.prototype.update=function(e){var t=e.userId,r=e.sdkAppId;this.loggerManager&&this.loggerManager.createLogger&&(this.logger=this.loggerManager.createLogger({id:"".concat(this.logRegion).concat(this.seq),userId:t,sdkAppId:r}))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.getLogMessage(e);this.logger.debug(r)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.getLogMessage(e);this.logger&&this.logger.info&&this.logger.info(r)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.getLogMessage(e);this.logger&&this.logger.warn&&this.logger.warn(r)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.getLogMessage(e);this.logger&&this.logger.error&&this.logger.error(r)},e}(),Xn=n.default._loggerManager;Xn.info("TRTCCloud Version: ".concat(Ln));var Kn,zn,qn="trtcCloud",Zn=1;navigator&&navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(Kn=function(){0!==$n.size&&Array.from($n.values()).forEach((function(e){e.fn()}))},function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];zn>0&&clearTimeout(zn),zn=window.setTimeout((function(){Kn.apply(e,t),zn=-1}),30)}));var $n=new Map,eo=function(t){function r(i){void 0===i&&(i={});var o=t.call(this)||this;o._version="",o._frameWorkType=30,o._component=0,o._language=0,o._networkProxy={},o._localView=null,o._autoRecvAudio=!0,o._autoRecvVideo=!0,o._localTestView=null,o._isVideoPublish=!0,o._localRenderParams={rotation:e.TRTCVideoRotation.TRTCVideoRotation0,fillMode:e.TRTCVideoFillMode.TRTCVideoFillMode_Fill,mirrorType:e.TRTCVideoMirrorType.TRTCVideoMirrorType_Auto},o._videoProfile={},o._videoPlayOption={},o._isAudioPublish=!0,o._audioProfile=n.default.TYPE.AUDIO_PROFILE_STANDARD,o._captureVolume=100,o._isSharingScreen=!1,o._remoteStreamConfig=new Map,o._remoteStreamMap=new Map,o._cameraList=[],o._microphoneList=[],o._speakerList=[],o._currentCamera={},o._currentMicrophone={},o._currentSpeaker={},o._currentCameraId="",o._currentMicrophoneId="",o._currentSpeakerId="",o._screenShareParams={option:{}},o._isMobile=dn,o._isFrontCamera=!0,o._smallStreamVideoProfile=void 0,o._qosPreference=void 0,o._defaultVideoProfile={width:640,height:480,frameRate:15,bitrate:900},o._defaultScreenProfile={width:1920,height:1080,frameRate:15,bitrate:1500},o._defaultSmallVideoProfile={width:160,height:120,frameRate:15,bitrate:200},o._isVirtualBackground=!1,o._isTestVirtualBackground=!1,o._isBeautyEnabled=!1,o._isTestBeautyEnabled=!1,o._remoteStatisticsUserIdList=[],o._version=Ln;var a=i.frameWorkType,s=void 0===a?30:a,c=i.component,A=void 0===c?0:c,l=i.language,u=void 0===l?0:l;return o._frameWorkType=s,o._component=A,o._language=u,o._trtc=n.default.create({enableSEI:r.enableSEI}),o._testTrtc=n.default.create(),o._log=n.default._loggerManager,o.logger=new Jn(Xn,{seq:Zn++}),o._echoCancellation=void 0,o._noiseSuppression=void 0,o._autoGainControl=void 0,o._addTRTCEvents(),o.handleDeviceChange=o.handleDeviceChange.bind(o),$n.set(o,{fn:o.handleDeviceChange,self:o}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(r,t),r.getTRTCShareInstance=function(e){return r.shareInstance||(r.shareInstance=new r(e)),r.shareInstance},r.setLogLevel=function(t,r){var i,o=((i={})[e.TRTCLogLevel.TRTCLogLevelVerbose]=0,i[e.TRTCLogLevel.TRTCLogLevelDebug]=1,i[e.TRTCLogLevel.TRTCLogLevelInfo]=2,i[e.TRTCLogLevel.TRTCLogLevelWarn]=3,i[e.TRTCLogLevel.TRTCLogLevelError]=4,i[e.TRTCLogLevel.TRTCLogLevelFatal]=4,i[e.TRTCLogLevel.TRTCLogLevelNone]=5,i),a=o[t];X(a)&&(a=o[e.TRTCLogLevel.TRTCLogLevelInfo]);var s=!z(r)||r;n.default.setLogLevel(a,s)},r.destroyTRTCShareInstance=function(){r.shareInstance&&(r.shareInstance._destroy(),r.shareInstance=null),Array.from(r.subCloudMap.keys()).forEach((function(e){return e._destroy()}))},r.callExperimentalAPI=function(e){console.log("static ".concat(qn,".callExperimentalAPI"),e);var t=q(e);if(t!==e){var i=t.api,n=t.params;if(i&&n)try{"enableSEI"===i&&(r.enableSEI=n.enable)}catch(e){throw e}}},r.prototype.createSubCloud=function(){if(this!==r.shareInstance)return null;var e=new r;return r.subCloudMap.set(e,e),e},r.prototype.destroy=function(){this!==r.shareInstance?(r.subCloudMap.get(this)&&r.subCloudMap.delete(this),this._destroy()):r.destroyTRTCShareInstance()},r.prototype._destroy=function(){$n.delete(this),this.removeAllListeners(),this._trtc.off("*"),this._trtc.destroy(),this._trtc=null,this._testTrtc.off("*"),this._testTrtc.destroy(),this._testTrtc=null},r.prototype.getSDKVersion=function(){return this._version||""},r.prototype.enterRoom=function(e,t){return s(this,void 0,Promise,(function(){var r,i,n,o,s,A,l,u,d,h,g,p,f,m,E,I,_,C;return c(this,(function(c){switch(c.label){case 0:if(r=e.sdkAppId,i=e.userId,n=e.userSig,o=e.roomId,s=e.strRoomId,A=e.role,l=e.privateMapKey,u=e.businessInfo,d=e.enableAutoPlayDialog,h=e.proxy,g=e.streamId,p=e.userDefineRecordId,this.logger.update({sdkAppId:r,userId:i}),this.logger.info("".concat(qn,".enterRoom with params: "),e,t),h&&(this._networkProxy=h),!(r&&i&&n))return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),f={sdkAppId:r,userId:i,userSig:n,roomId:o,strRoomId:s,role:Y[A],scene:W[t],autoReceiveAudio:this._autoRecvAudio,autoReceiveVideo:this._autoRecvVideo,frameWorkType:this._frameWorkType,component:this._component,language:this._language},f=l?a(a({},f),{privateMapKey:l}):f,f=u?a(a({},f),{businessInfo:u}):f,m=d||this._enableAutoPlayDialog,f=z(m)?a(a({},f),{enableAutoPlayDialog:m}):f,f=this._networkProxy?a(a({},f),{proxy:this._networkProxy}):f,f=g?a(a({},f),{streamId:g}):f,f=p?a(a({},f),{userDefineRecordId:p}):f,E=J(),[4,this._trtc.enterRoom(f)];case 2:return c.sent(),I=J()-E,this.emit("onEnterRoom",I),[3,4];case 3:return _=c.sent(),C=(C=this._transformTRTCErrorCode(_,"enterRoom"))<0?C:-1,this.emit("onEnterRoom",C),this._callFunctionErrorManage(_,"enterRoom"),[3,4];case 4:return[3,6];case 5:this._emitError(Pn),c.label=6;case 6:return[2]}}))}))},r.prototype.exitRoom=function(){return s(this,void 0,Promise,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.logger.info("".concat(qn,".exitRoom")),this._isSharingScreen&&this.stopScreenShare(),this.resetTRTCCloud(),this.stopLocalPreview(),this.stopLocalAudio(),[4,this._trtc.exitRoom()];case 1:return t.sent(),this.emit("onExitRoom",Qn.exitRoom),[3,3];case 2:return e=t.sent(),this._callFunctionErrorManage(e,"exitRoom"),[3,3];case 3:return[2]}}))}))},r.prototype.switchRole=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:this.logger.info("".concat(qn,".switchRole with param: "),e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._trtc.switchRole(Y[e])];case 2:return r.sent(),this.emit("onSwitchRole",0,"switch role success, role = ".concat(e,", ").concat(Y[e])),[3,4];case 3:return t=r.sent(),this.emit("onSwitchRole",null==t?void 0:t.getCode(),t.message),[3,4];case 4:return[2]}}))}))},r.prototype.setDefaultStreamRecvMode=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(r){return this.logger.info("".concat(qn,".setDefaultStreamRecvMode with param: "),{autoRecvAudio:e,autoRecvVideo:t}),z(e)&&(this._autoRecvAudio=e),z(t)&&(this._autoRecvVideo=t),[2]}))}))},r.prototype.resetTRTCCloud=function(){this._setIsAudioPublish(!0),this._echoCancellation=void 0,this._noiseSuppression=void 0,this._autoGainControl=void 0,this._isVirtualBackground=!1,this._isTestVirtualBackground=!1,this._remoteStatisticsUserIdList=[],this._resetBeautyStyle()},r.prototype._updateLocalVideo=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._trtc.updateLocalVideo(this._generateLocalVideoData())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT)throw e;return[3,3];case 3:return[2]}}))}))},r.prototype._updateLocalTestVideo=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._testTrtc.updateLocalVideo(this._generateLocalTestVideoData())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT)throw e;return[3,3];case 3:return[2]}}))}))},r.prototype._updateLocalScreen=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._trtc.updateScreenShare(this._getScreenShareParams())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT)throw e;return[3,3];case 3:return[2]}}))}))},r.prototype._updateRemoteVideo=function(e,t){return s(this,void 0,void 0,(function(){var r;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._trtc.updateRemoteVideo(this._generateRemoteVideoData(e,t))];case 1:return i.sent(),[3,3];case 2:if((r=i.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT)throw r;return[3,3];case 3:return[2]}}))}))},r.prototype.startLocalPreview=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(this,void 0,Promise,(function(){var t,r,i,o,a;return c(this,(function(s){switch(s.label){case 0:this.logger.info("".concat(qn,".startLocalPreview with params: "),e),1===A([],e,!0).length?r=A([],e,!0)[0]:2===A([],e,!0).length&&(a=A([],e,!0),t=a[0],r=a[1]),X(t)||(this._setIsMobile(!0),this._setIsFrontCamera(t)),this._setLocalView(r),s.label=1;case 1:s.trys.push([1,9,,10]),s.label=2;case 2:return s.trys.push([2,4,,8]),[4,this._trtc.startLocalVideo(this._generateLocalVideoData())];case 3:return s.sent(),[3,8];case 4:return(i=s.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT?[3,6]:[4,this._updateLocalVideo()];case 5:return s.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return this.emit("onCameraDidReady"),[3,10];case 9:return o=s.sent(),this._callFunctionErrorManage(o,"startLocalPreview"),[3,10];case 10:return[2]}}))}))},r.prototype.updateLocalView=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.logger.info("".concat(qn,".updateLocalView with param: "),e),this._setLocalView(e),[4,this._updateLocalVideo()];case 1:return t.sent(),[2]}}))}))},r.prototype.stopLocalPreview=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:this.logger.info("".concat(qn,".stopLocalPreview")),t.label=1;case 1:return t.trys.push([1,3,,4]),this._setLocalView(null),[4,this._trtc.stopLocalVideo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.warn("".concat(qn," stopLocalPreview error: ").concat(e)),this._callFunctionErrorManage(e,"stopLocalPreview"),[3,4];case 4:return[2]}}))}))},r.prototype.muteLocalVideo=function(e){return void 0===e&&(e=!1),s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:this.logger.info("".concat(qn,".muteLocalVideo with params: "),e),r.label=1;case 1:return r.trys.push([1,3,,4]),this._setIsVideoPublish(!e),[4,this._updateLocalVideo()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this._callFunctionErrorManage(t,"muteLocalVideo"),[3,4];case 4:return[2]}}))}))},r.prototype.startRemoteView=function(t,r,i){return s(this,void 0,void 0,(function(){var o,a;return c(this,(function(s){switch(s.label){case 0:this.logger.info("".concat(qn,".startRemoteView with params: "),t,r,i),s.label=1;case 1:if(s.trys.push([1,9,,10]),this._setRemoteStreamConfig(t,i,{view:r,small:i===e.TRTCVideoStreamType.TRTCVideoStreamTypeSmall}),!this._remoteStreamMap.get("".concat(t,"_").concat(this._getTRTCStreamType(i))))return[2];s.label=2;case 2:return s.trys.push([2,4,,8]),[4,this._trtc.startRemoteVideo(this._generateRemoteVideoData(t,i))];case 3:return s.sent(),[3,8];case 4:return(o=s.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT?[3,6]:[4,this._updateRemoteVideo(t,i)];case 5:return s.sent(),[3,7];case 6:throw o;case 7:return[3,8];case 8:return[3,10];case 9:return a=s.sent(),this._callFunctionErrorManage(a,"startRemoteView"),[3,10];case 10:return[2]}}))}))},r.prototype.updateRemoteView=function(e,t,r){return s(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return this.logger.info("".concat(qn,".updateRemoteView with params: "),e,t,r),this._setRemoteStreamConfig(e,r,{view:t}),this._remoteStreamMap.get("".concat(e,"_").concat(this._getTRTCStreamType(r)))?[4,this._updateRemoteVideo(e,r)]:[2];case 1:return i.sent(),[2]}}))}))},r.prototype.stopRemoteView=function(e,t){return s(this,void 0,void 0,(function(){var r;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".stopRemoteView with params: "),e,t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._trtc.stopRemoteVideo({userId:e,streamType:this._getTRTCStreamType(t)})];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),this._callFunctionErrorManage(r,"stopRemoteView"),[3,4];case 4:return[2]}}))}))},r.prototype.stopAllRemoteView=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:this.logger.info("".concat(qn,".stopAllRemoteView")),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._trtc.stopRemoteVideo({userId:"*"})];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this._callFunctionErrorManage(e,"stopAllRemoteView"),[3,4];case 4:return[2]}}))}))},r.prototype.setVideoEncoderParam=function(t){return s(this,void 0,void 0,(function(){var r,i;return c(this,(function(n){switch(n.label){case 0:this.logger.info("".concat(qn,".setVideoEncoderParam with params: "),t),n.label=1;case 1:return n.trys.push([1,4,,5]),r=this._getTRTCVideoProfile(e.TRTCVideoStreamType.TRTCVideoStreamTypeBig,t),this._setVideoProfile(r),[4,this._updateLocalVideo()];case 2:return n.sent(),[4,this._updateLocalTestVideo()];case 3:return n.sent(),[3,5];case 4:return i=n.sent(),this._callFunctionErrorManage(i,"setVideoEncoderParam"),[3,5];case 5:return[2]}}))}))},r.prototype.setNetworkQosParam=function(e){return s(this,void 0,void 0,(function(){var t,r,i=this;return c(this,(function(n){return this.logger.info("".concat(qn,".setNetworkQosParam with params: "),e),t=e.preference,r=this._getTRTCQosPreference(t),this._setQosPreference(r),this._setScreenShareParams({qosPreference:r}),[2,new Promise((function(e,t){Promise.all([i._updateLocalVideo(),i._updateLocalScreen()]).then((function(){e(!0)})).catch((function(e){i._callFunctionErrorManage(e,"setNetworkQosParam"),t(e)}))}))]}))}))},r.prototype.setLocalRenderParams=function(e){return s(this,void 0,void 0,(function(){var t,r;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".setLocalRenderParams with params: "),e),Object.assign(this._localRenderParams,e),i.label=1;case 1:return i.trys.push([1,4,,5]),t={},e.mirrorType&&(t.mirror=this._getTRTCMirror(e.mirrorType)),e.fillMode&&(t.fillMode=this._getTRTCFillMode(e.fillMode)),this._setVideoPlayOption(t),[4,this._updateLocalVideo()];case 2:return i.sent(),[4,this._updateLocalTestVideo()];case 3:return i.sent(),[3,5];case 4:return r=i.sent(),this._callFunctionErrorManage(r,"setLocalRenderParams"),[3,5];case 5:return[2]}}))}))},r.prototype.setRemoteRenderParams=function(e,t,r){return s(this,void 0,void 0,(function(){var i;return c(this,(function(n){switch(n.label){case 0:this.logger.info("".concat(qn,".setRemoteRenderParams with params: "),e,t,r),n.label=1;case 1:return n.trys.push([1,3,,4]),this._setRemoteStreamConfig(e,t,r),[4,this._updateRemoteVideo(e,t)];case 2:return n.sent(),[3,4];case 3:return i=n.sent(),this._callFunctionErrorManage(i,"setRemoteRenderParams"),[3,4];case 4:return[2]}}))}))},r.prototype._updateLocalAudio=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._trtc.updateLocalAudio(this._generateLocalAudioData())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT)throw e;return[3,3];case 3:return[2]}}))}))},r.prototype._updateLocalTestAudio=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._testTrtc.updateLocalAudio(this._generateLocalTestAudioData())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT)throw e;return[3,3];case 3:return[2]}}))}))},r.prototype.startLocalAudio=function(t){return void 0===t&&(t=e.TRTCAudioQuality.TRTCAudioQualityDefault),s(this,void 0,void 0,(function(){var r,i,o;return c(this,(function(a){switch(a.label){case 0:t===e.TRTCAudioQuality.TRTCAudioQualitySpeech?this.logger.warn("Web trtcCloud not support audioQuality of TRTCAudioQualitySpeech, and will use TRTCAudioQualityDefault"):this.logger.info("".concat(qn,".startLocalAudio with params: "),t),r=this._getTRTCAudioQuality(t),a.label=1;case 1:a.trys.push([1,9,,10]),this._setAudioProfile(r),a.label=2;case 2:return a.trys.push([2,4,,8]),[4,this._trtc.startLocalAudio(this._generateLocalAudioData())];case 3:return a.sent(),[3,8];case 4:return(i=a.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT?[3,6]:[4,this._updateLocalAudio()];case 5:return a.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return this.emit("onMicDidReady"),[3,10];case 9:return o=a.sent(),console.warn("".concat(qn," startLocalAudio error: ").concat(o)),this._callFunctionErrorManage(o,"startLocalAudio"),[3,10];case 10:return[2]}}))}))},r.prototype.stopLocalAudio=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:this.logger.info("".concat(qn,".stopLocalAudio")),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._trtc.stopLocalAudio()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this._callFunctionErrorManage(e,"stopLocalAudio"),[3,4];case 4:return[2]}}))}))},r.prototype.muteLocalAudio=function(e){return void 0===e&&(e=!1),s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:this.logger.info("".concat(qn,".muteLocalAudio with params: "),e),r.label=1;case 1:return r.trys.push([1,3,,4]),this._setIsAudioPublish(!e),[4,this._updateLocalAudio()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this._callFunctionErrorManage(t,"muteLocalAudio"),[3,4];case 4:return[2]}}))}))},r.prototype.setAudioCaptureVolume=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:this.logger.info("".concat(qn,".setAudioCaptureVolume with params: "),e),r.label=1;case 1:return r.trys.push([1,3,,4]),this._setCaptureVolume(e),[4,this._updateLocalAudio()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this._callFunctionErrorManage(t,"setAudioCaptureVolume"),[3,4];case 4:return[2]}}))}))},r.prototype.muteRemoteAudio=function(e,t){return void 0===t&&(t=!1),s(this,void 0,void 0,(function(){var r;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".muteRemoteAudio with params: "),e,t),i.label=1;case 1:return i.trys.push([1,3,,4]),e?[4,this._trtc.muteRemoteAudio(e,t)]:(this._emitError(Pn),[2]);case 2:return i.sent(),[3,4];case 3:return r=i.sent(),this._callFunctionErrorManage(r,"muteRemoteAudio"),[3,4];case 4:return[2]}}))}))},r.prototype.muteAllRemoteAudio=function(e){this.logger.info("".concat(qn,".muteAllRemoteAudio with params: "),e);try{this._trtc.muteRemoteAudio("*",e)}catch(e){this._callFunctionErrorManage(e,"muteAllRemoteAudio")}},r.prototype.setRemoteAudioVolume=function(e,t){this.logger.info("".concat(qn,".setRemoteAudioVolume with params: "),e,t);try{this._trtc.setRemoteAudioVolume(e,t)}catch(e){this._callFunctionErrorManage(e,"setRemoteAudioVolume")}},r.prototype.enableAudioVolumeEvaluation=function(e){this.logger.info("".concat(qn,".enableAudioVolumeEvaluation with params: "),e);try{this._trtc.enableAudioVolumeEvaluation(e)}catch(e){this._callFunctionErrorManage(e,"enableAudioVolumeEvaluation")}},r.prototype.enableSmallVideoStream=function(t,r){return s(this,void 0,Promise,(function(){var i;return c(this,(function(n){switch(n.label){case 0:return this.logger.info("".concat(qn,".enableSmallVideoStream with params: "),t,r),t?(i=this._getTRTCVideoProfile(e.TRTCVideoStreamType.TRTCVideoStreamTypeSmall,r),this._setSmallStreamVideoProfile(i)):this._setSmallStreamVideoProfile(void 0),[4,this._updateLocalVideo()];case 1:return n.sent(),[2]}}))}))},r.prototype.snapshotVideo=function(t,r){var i;return i=""===t&&r===e.TRTCVideoStreamType.TRTCVideoStreamTypeBig?this._trtc.getVideoSnapshot():""===t&&r===e.TRTCVideoStreamType.TRTCVideoStreamTypeSub?this._trtc.getVideoSnapshot({streamType:this._getTRTCStreamType(r)}):this._trtc.getVideoSnapshot({userId:t,streamType:this._getTRTCStreamType(r)}),this.emit("onSnapshotComplete",t,r,i),i},r.prototype.startScreenShare=function(t,r,i){return s(this,void 0,void 0,(function(){var o,a,s,A,l,u;return c(this,(function(c){switch(c.label){case 0:this.logger.info("".concat(qn,".startScreenShare with params: "),t,r,i),c.label=1;case 1:return c.trys.push([1,3,,4]),a=(o=i||{}).screenAudio,s=void 0!==a&&a,A=o.videoTrack,l=this._getTRTCVideoProfile(e.TRTCVideoStreamType.TRTCVideoStreamTypeSub,i),this._setScreenShareParams({view:t,profile:l,systemAudio:s,videoTrack:A}),[4,this._trtc.startScreenShare(this._getScreenShareParams())];case 2:return c.sent(),this._isSharingScreen=!0,[3,4];case 3:if((u=c.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT)throw console.error("Start share screen error:",u,u.code,u.name,u.message),u;return[3,4];case 4:return[2]}}))}))},r.prototype.setSubStreamEncoderParam=function(t){return s(this,void 0,void 0,(function(){var r,i;return c(this,(function(n){switch(n.label){case 0:this.logger.info("".concat(qn,".setSubStreamEncoderParam with params: "),t),r=this._getTRTCVideoProfile(e.TRTCVideoStreamType.TRTCVideoStreamTypeSub,t),this._setScreenShareParams({profile:r}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._updateLocalScreen()];case 2:return n.sent(),[3,4];case 3:return i=n.sent(),this._callFunctionErrorManage(i,"setSubStreamEncoderParam"),[3,4];case 4:return[2]}}))}))},r.prototype.stopScreenShare=function(){return s(this,void 0,Promise,(function(){var e;return c(this,(function(t){switch(t.label){case 0:this.logger.info("".concat(qn,".stopScreenShare")),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._trtc.stopScreenShare()];case 2:return t.sent(),this._clearScreenShareParams(),this._isSharingScreen=!1,this.emit("onScreenCaptureStopped",0),[3,4];case 3:return e=t.sent(),this._callFunctionErrorManage(e,"stopScreenShare"),[3,4];case 4:return[2]}}))}))},r.prototype.startScreenCapture=function(){this._emitError(Nn)},r.prototype.pauseScreenCapture=function(){this._emitError(Nn)},r.prototype.resumeScreenCapture=function(){this._emitError(Nn)},r.prototype.getScreenCaptureSources=function(){this._emitError(Nn)},r.prototype.selectScreenCaptureTarget=function(){this._emitError(Nn)},r.prototype.getCameraDevicesList=function(){return s(this,void 0,Promise,(function(){var e,t,r;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".getCameraDevicesList")),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,n.default.getCameraList()];case 2:return e=i.sent(),t=e.map((function(e){return a(a({},e),{deviceName:e.label})})),this._cameraList=e,"{}"!==JSON.stringify(this._currentCamera)?[3,4]:(this._currentCamera=this.getDefaultDeviceInfo(e),this._currentCameraId=this._currentCamera.deviceId,[4,this.setCurrentCameraDevice(this._currentCameraId)]);case 3:i.sent(),i.label=4;case 4:return[2,Promise.resolve(t)];case 5:return r=i.sent(),this._callFunctionErrorManage(r,"getCameraDevicesList"),[2,Promise.resolve([])];case 6:return[2]}}))}))},r.prototype.setCurrentCameraDevice=function(e){var t;return s(this,void 0,Promise,(function(){var r;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".setCurrentCameraDevice with params: "),{cameraId:e}),i.label=1;case 1:return i.trys.push([1,4,,5]),e?(this._currentCameraId=e,[4,this._updateLocalVideo()]):[2,!1];case 2:return i.sent(),[4,this._updateLocalTestVideo()];case 3:return i.sent(),this._currentCamera=this._cameraList.find((function(t){return t.deviceId===e}))||{},[3,5];case 4:throw r=i.sent(),this._currentCameraId=null===(t=this._currentCamera)||void 0===t?void 0:t.cameraId,this._callFunctionErrorManage(r,"setCurrentCameraDevice"),r;case 5:return[2]}}))}))},r.prototype.getCurrentCameraDevice=function(){this.logger.info("".concat(qn,".getCurrentCameraDevice"));var e=this._currentCamera,t=e.deviceId,r=e.label,i=e.kind,n=e.groupId;return new T(t,r,i,r,n)},r.prototype.isFrontCamera=function(){return this._getIsFrontCamera()},r.prototype.switchCamera=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:return this.logger.info("".concat(qn,".switchCamera with params: "),e),this._setIsFrontCamera(e),(t=this._getVideoPlayOption()).mirror=this._getTRTCMirror(this._localRenderParams.mirrorType),this._setVideoPlayOption(t),[4,this._updateLocalVideo()];case 1:return r.sent(),[2]}}))}))},r.prototype._onVirtualBackgroundError=function(e){this._emitWarning(e)},r.prototype.setVirtualBackground=function(e){return s(this,void 0,void 0,(function(){var t,r,i,n,o;return c(this,(function(s){switch(s.label){case 0:return s.trys.push([0,10,,11]),t=e.enable,r=e.type,i=e.blurLevel,n=e.imagePath,t?this._isVirtualBackground?r!==j?[3,2]:[4,this._trtc.updatePlugin(V,{type:r,blurLevel:i})]:[3,5]:[3,8];case 1:s.sent(),s.label=2;case 2:return r!==H?[3,4]:[4,this._trtc.updatePlugin(V,{type:r,src:n})];case 3:s.sent(),s.label=4;case 4:return[3,7];case 5:return[4,this._trtc.startPlugin(V,a(a({},e),{src:n,onError:this._onVirtualBackgroundError}))];case 6:s.sent(),this._isVirtualBackground=!0,s.label=7;case 7:return[3,9];case 8:this._trtc.stopPlugin(V),this._isVirtualBackground=!1,s.label=9;case 9:return[3,11];case 10:throw o=s.sent(),this.logger.error("".concat(qn,".setVirtualBackground fail: "),o),o;case 11:return[2]}}))}))},r.prototype.setTestVirtualBackground=function(e){return s(this,void 0,void 0,(function(){var t,r,i,n,o;return c(this,(function(s){switch(s.label){case 0:return s.trys.push([0,10,,11]),t=e.enable,r=e.type,i=e.blurLevel,n=e.imagePath,t?this._isTestVirtualBackground?r!==j?[3,2]:[4,this._testTrtc.updatePlugin(V,{type:r,blurLevel:i})]:[3,5]:[3,8];case 1:s.sent(),s.label=2;case 2:return r!==H?[3,4]:[4,this._testTrtc.updatePlugin(V,{type:r,src:n})];case 3:s.sent(),s.label=4;case 4:return[3,7];case 5:return[4,this._testTrtc.startPlugin(V,a(a({},e),{src:n,onError:this._onVirtualBackgroundError}))];case 6:s.sent(),this._isTestVirtualBackground=!0,s.label=7;case 7:return[3,9];case 8:this._testTrtc.stopPlugin(V),this._isTestVirtualBackground=!1,s.label=9;case 9:return[3,11];case 10:throw o=s.sent(),this.logger.error("".concat(qn,".setTestVirtualBackground fail: "),o),o;case 11:return[2]}}))}))},r.prototype.useVirtualBackground=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this._trtc?[4,this._trtc.use({plugin:i.VirtualBackground,assetsPath:e})]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._testTrtc?[4,this._testTrtc.use({plugin:i.VirtualBackground,assetsPath:e})]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},r.prototype.setBeautyStyle=function(e,t,r,i){return s(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this._handleBeautyStyleParam(this._trtc,this._isBeautyEnabled,e,t,r,i,!1)];case 1:return n.sent(),[2]}}))}))},r.prototype.setTestBeautyStyle=function(e,t,r,i){return s(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this._handleBeautyStyleParam(this._testTrtc,this._isTestBeautyEnabled,e,t,r,i,!0)];case 1:return n.sent(),[2]}}))}))},r.prototype.useBeautyStyle=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this._trtc?[4,this._trtc.use({plugin:Wn,assetsPath:e})]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._testTrtc?[4,this._testTrtc.use({plugin:Wn,assetsPath:e})]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},r.prototype._handleBeautyStyleParam=function(e,t,r,i,n,o,a){return s(this,void 0,void 0,(function(){var r,s,A,l,u;return c(this,(function(c){switch(c.label){case 0:if(i<0||i>9)throw new Error("beautyLevel must be between 0 and 9");if(n<0||n>9)throw new Error("whitenessLevel must be between 0 and 9");if(o<0||o>9)throw new Error("ruddinessLevel must be between 0 and 9");c.label=1;case 1:return c.trys.push([1,8,,9]),s=n/9,A=o/9,0==(r=i/9)&&0===s&&0===A?[4,e.stopPlugin(G)]:[3,3];case 2:return c.sent(),a?this._isTestBeautyEnabled=!1:this._isBeautyEnabled=!1,[3,7];case 3:return l={beauty:r,brightness:s,ruddy:A},t?[3,5]:[4,e.startPlugin(G,l)];case 4:return c.sent(),a?this._isTestBeautyEnabled=!0:this._isBeautyEnabled=!0,[3,7];case 5:return[4,e.updatePlugin(G,l)];case 6:c.sent(),c.label=7;case 7:return[3,9];case 8:throw u=c.sent(),a?this.logger.error("".concat(qn,".").concat("setTestBeautyStyle"," fail: "),u):this.logger.error("".concat(qn,".").concat("setBeautyStyle"," fail: "),u),u;case 9:return[2]}}))}))},r.prototype._resetBeautyStyle=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this._isBeautyEnabled?[4,this._trtc.stopPlugin(G)]:[3,2];case 1:e.sent(),this._isBeautyEnabled=!1,e.label=2;case 2:return this._isTestBeautyEnabled?[4,this._testTrtc.stopPlugin(G)]:[3,4];case 3:e.sent(),this._isTestBeautyEnabled=!1,e.label=4;case 4:return[2]}}))}))},r.prototype.getMicDevicesList=function(){return s(this,void 0,Promise,(function(){var e,t,r;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".getMicDevicesList")),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,n.default.getMicrophoneList()];case 2:return e=i.sent(),t=e.map((function(e){return a(a({},e),{deviceName:e.label})})),this._microphoneList=e,"{}"!==JSON.stringify(this._currentMicrophone)?[3,4]:(this._currentMicrophone=this.getDefaultDeviceInfo(e),this._currentMicrophoneId=this._currentMicrophone.deviceId,[4,this.setCurrentMicDevice(this._currentMicrophoneId)]);case 3:i.sent(),i.label=4;case 4:return[2,Promise.resolve(t)];case 5:return r=i.sent(),this._callFunctionErrorManage(r,"getMicDevicesList"),[2,Promise.resolve([])];case 6:return[2]}}))}))},r.prototype.setCurrentMicDevice=function(e){var t;return s(this,void 0,Promise,(function(){var r;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".setCurrentMicDevice with params: "),{micId:e}),i.label=1;case 1:return i.trys.push([1,4,,5]),e?(this._setCurrentMicrophoneId(e),[4,this._updateLocalAudio()]):[2,!1];case 2:return i.sent(),[4,this._updateLocalTestAudio()];case 3:return i.sent(),this._currentMicrophone=this._microphoneList.find((function(t){return t.deviceId===e}))||{},[3,5];case 4:throw r=i.sent(),this._setCurrentMicrophoneId(null===(t=this._currentMicrophone)||void 0===t?void 0:t.deviceId),this._callFunctionErrorManage(r,"setCurrentMicDevice"),r;case 5:return[2]}}))}))},r.prototype.getCurrentMicDevice=function(){this.logger.info("".concat(qn,".getCurrentMicDevice"));var e=this._currentMicrophone,t=e.deviceId,r=e.label,i=e.kind,n=e.groupId;return new T(t,r,i,r,n)},r.prototype.getSpeakerDevicesList=function(){return s(this,void 0,Promise,(function(){var e,t,r;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".getSpeakerDevicesList")),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,n.default.getSpeakerList()];case 2:return e=i.sent(),t=e.map((function(e){return a(a({},e),{deviceName:e.label})})),this._speakerList=e,"{}"!==JSON.stringify(this._currentSpeaker)?[3,4]:(this._currentSpeaker=this.getDefaultDeviceInfo(e),this._currentSpeakerId=this._currentSpeaker.deviceId,[4,this.setCurrentSpeakerDevice(this._currentSpeakerId)]);case 3:i.sent(),i.label=4;case 4:return[2,Promise.resolve(t)];case 5:return r=i.sent(),this._callFunctionErrorManage(r,"getSpeakerDevicesList"),[2,Promise.resolve([])];case 6:return[2]}}))}))},r.prototype.setCurrentSpeakerDevice=function(e){return s(this,void 0,Promise,(function(){var t;return c(this,(function(r){switch(r.label){case 0:this.logger.info("".concat(qn,".setCurrentSpeakerDevice with params: "),{speakerId:e}),r.label=1;case 1:return r.trys.push([1,3,,4]),e?[4,n.default.setCurrentSpeaker(e)]:[2,!1];case 2:return r.sent(),this._setCurrentSpeakerId(e),this._currentSpeaker=this._speakerList.find((function(t){return t.deviceId===e}))||{},[3,4];case 3:throw t=r.sent(),this._callFunctionErrorManage(t,"setCurrentSpeakerDevice"),t;case 4:return[2]}}))}))},r.prototype.getCurrentSpeakerDevice=function(){this.logger.info("".concat(qn,".getCurrentSpeakerDevice"));var e=this._currentSpeaker,t=e.deviceId,r=e.label,i=e.kind,n=e.groupId;return new T(t,r,i,r,n)},r.prototype.startCameraDeviceTest=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:if(this.logger.info("".concat(qn,".startCameraDeviceTest with params: "),e),!e)return[2];this._setLocalTestView(e),r.label=1;case 1:return r.trys.push([1,3,,7]),[4,this._testTrtc.startLocalVideo(this._generateLocalTestVideoData())];case 2:return r.sent(),[3,7];case 3:return(t=r.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT?[3,5]:[4,this._updateLocalTestVideo()];case 4:return r.sent(),[3,6];case 5:throw this._callFunctionErrorManage(t,"startCameraDeviceTest"),t;case 6:return[3,7];case 7:return[2]}}))}))},r.prototype.stopCameraDeviceTest=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.logger.info("".concat(qn,".stopCameraDeviceTest")),this._setLocalTestView(null),[4,this._testTrtc.stopLocalVideo()];case 1:return e.sent(),[2]}}))}))},r.prototype.startMicDeviceTest=function(e){return s(this,void 0,void 0,(function(){var t,r=this;return c(this,(function(i){switch(i.label){case 0:this.logger.info("".concat(qn,".startMicDeviceTest with params: "),e),i.label=1;case 1:return i.trys.push([1,3,,7]),[4,this._testTrtc.startLocalAudio(this._generateLocalTestAudioData())];case 2:return i.sent(),[3,7];case 3:return(t=i.sent()).code!==n.default.ERROR_CODE.OPERATION_ABORT?[3,5]:[4,this._updateLocalTestAudio()];case 4:return i.sent(),[3,6];case 5:throw this._callFunctionErrorManage(t,"startMicDeviceTest"),t;case 6:return[3,7];case 7:return this._testTrtc.on(n.default.EVENT.AUDIO_VOLUME,(function(e){null==e||e.result.forEach((function(e){var t=e.userId,i=e.volume;""===t&&r.emit("onTestMicVolume",i)}))})),[4,this._testTrtc.enableAudioVolumeEvaluation(e)];case 8:return i.sent(),[2]}}))}))},r.prototype.stopMicDeviceTest=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.logger.info("".concat(qn,".stopMicDeviceTest")),[4,this._testTrtc.stopLocalAudio()];case 1:return e.sent(),[2]}}))}))},r.prototype.callExperimentalAPI=function(e){return s(this,void 0,void 0,(function(){var t,r,i;return c(this,(function(n){switch(n.label){case 0:if(this.logger.info("".concat(qn,".callExperimentalAPI"),e),(t=q(e))===e)return[2];if(r=t.api,i=t.params,!r||!i)return[2];n.label=1;case 1:switch(n.trys.push([1,18,,19]),r){case"setFramework":return[3,2];case"enableAudioAEC":return[3,3];case"enableAudioANS":return[3,4];case"enableAudioAGC":return[3,5];case"KeyMetricsStats":return[3,6];case"setNetworkProxy":return[3,7];case"enableVirtualBackground":return[3,8];case"enableTestVirtualBackground":return[3,10];case"enableTestBeautyStyle":return[3,12];case"setVideoEncodeParamEx":return[3,14];case"enableAutoPlayDialog":return[3,15]}return[3,16];case 2:return this._handleSetFrameWork(i),[3,17];case 3:return this._echoCancellation=Boolean(i.enable),[3,17];case 4:return this._noiseSuppression=Boolean(i.enable),[3,17];case 5:return this._autoGainControl=Boolean(i.enable),[3,17];case 6:return this._handleKeyMetricsStats(i),[3,17];case 7:return this._networkProxy=i,[3,17];case 8:return[4,this.setVirtualBackground(i)];case 9:return n.sent(),[3,17];case 10:return[4,this.setTestVirtualBackground(i)];case 11:return n.sent(),[3,17];case 12:return[4,this.setTestBeautyStyle(i.style,i.beautyLevel,i.whitenessLevel,i.ruddinessLevel)];case 13:return n.sent(),[3,17];case 14:return this._setVideoEncodeParamEx(i),[3,17];case 15:return this._enableAutoPlayDialog=Boolean(i.enable),[3,17];case 16:return[3,17];case 17:return[3,19];case 18:throw n.sent();case 19:return[2]}}))}))},r.prototype._handleSetFrameWork=function(e){var t=e.frameWork,r=e.component,i=e.language;K(t)&&(this._frameWorkType=t),K(r)&&(this._component=r),K(i)&&(this._language=i)},r.prototype._handleKeyMetricsStats=function(e){var t=e.key,r=e.opt,i=e.value,o=e.version,a="enum"===r;n.default._addKVStat({type:r,key:t,value:i,version:o,useUV:a,base:100})},r.prototype._setVideoEncodeParamEx=function(t){return s(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:switch(t.streamType){case e.TRTCVideoStreamType.TRTCVideoStreamTypeBig:return[3,1];case e.TRTCVideoStreamType.TRTCVideoStreamTypeSub:return[3,3]}return[3,5];case 1:return[4,this.setVideoEncoderParam(t)];case 2:case 4:return r.sent(),[3,6];case 3:return[4,this.setSubStreamEncoderParam(t)];case 5:return[3,6];case 6:return[2]}}))}))},r.prototype._emitError=function(e){e&&this.emit&&this.emit(U,e.code,e.message)},r.prototype._emitWarning=function(e){this.emit&&this.emit("onWarning",e)},r.prototype._transformTRTCServerError=function(e){return-8===e.extraCode?-70252:0===String(e.extraCode).indexOf("70")?0-e.extraCode:void 0},r.prototype._transformTRTCInvalidOperationError=function(e,t){return"enterRoom"===t&&5104===e.extraCode?-3340:e.code},r.prototype._transformTRTCDeviceError=function(e,t){var r=["startLocalPreview","updateLocalView","muteLocalVideo","setVideoEncoderParam","setCurrentCameraDevice","switchCamera","setLocalRenderParams","enableSmallVideoStream","startCameraDeviceTest"].includes(t),i=["startLocalAudio","muteLocalAudio","setAudioCaptureVolume","setCurrentMicDevice","startMicDeviceTest"].includes(t);switch(e.extraCode){case 5301:case 5305:case 5306:case 5307:case 5308:case 5309:if(r)return-1301;if(i)return-1302;break;case 5302:if(r)return-1314;if(i)return-1317;break;case 5303:if(r)return-1316;if(i)return-1319;break;case 5304:if(r)return-1315;if(i)return-1318}},r.prototype._transformTRTCErrorCode=function(e,t){var r=null==e?void 0:e.code;if(e&&e.code)switch(e.code){case n.default.ERROR_CODE.DEVICE_ERROR:r=this._transformTRTCDeviceError(e,t);break;case n.default.ERROR_CODE.SERVER_ERROR:r=this._transformTRTCServerError(e);break;case n.default.ERROR_CODE.INVALID_OPERATION:r=this._transformTRTCInvalidOperationError(e,t)}return r},r.prototype._callFunctionErrorManage=function(e,t){if(!e||e.code!==n.default.ERROR_CODE.OPERATION_ABORT){this.logger.warn("(".concat(t,") failed - ").concat(e.code," - ").concat(e.message));var r=this._transformTRTCErrorCode(e,t);this.emit(U,r,e.message)}},r.prototype._getTRTCResolution=function(t){var r=(e.TRTCVideoResolution[t]||"").split("_");return{width:+(r.length>1&&r[1]),height:+(r.length>2&&r[2])}},r.prototype._getTRTCVideoProfile=function(t,r){void 0===r&&(r={});var i=r.videoWidth,n=r.videoHeight,o=r.videoResolution,a=r.videoFps,s=r.videoBitrate,c=r.resMode,A=r.resolutionMode,l={};switch(t){case e.TRTCVideoStreamType.TRTCVideoStreamTypeSub:l=this._defaultScreenProfile;break;case e.TRTCVideoStreamType.TRTCVideoStreamTypeSmall:l=this._defaultSmallVideoProfile;break;case e.TRTCVideoStreamType.TRTCVideoStreamTypeBig:default:l=this._defaultVideoProfile}if(X(o))X(i)||(l.width=i),X(n)||(l.height=n);else{var u=this._getTRTCResolution(o);l.width=u.width,l.height=u.height}if(!X(c)&&c===e.TRTCVideoResolutionMode.TRTCVideoResolutionModePortrait||!X(A)&&A===e.TRTCVideoResolutionMode.TRTCVideoResolutionModePortrait){var d=l.height,h=l.width;l.width=d,l.height=h}return a&&(l.frameRate=a),s&&(l.bitrate=s),l},r.prototype._getTRTCStreamType=function(t){var r;return((r={})[e.TRTCVideoStreamType.TRTCVideoStreamTypeBig]=n.default.TYPE.STREAM_TYPE_MAIN,r[e.TRTCVideoStreamType.TRTCVideoStreamTypeSmall]=n.default.TYPE.STREAM_TYPE_MAIN,r[e.TRTCVideoStreamType.TRTCVideoStreamTypeSub]=n.default.TYPE.STREAM_TYPE_SUB,r)[t]},r.prototype._getTRTCFillMode=function(t){var r;return((r={})[e.TRTCVideoFillMode.TRTCVideoFillMode_Fill]=On.COVER,r[e.TRTCVideoFillMode.TRTCVideoFillMode_Fit]=On.CONTAIN,r)[t]},r.prototype._getTRTCMirror=function(t){var r;return t===e.TRTCVideoMirrorType.TRTCVideoMirrorType_Auto?!this._getIsMobile()||this._getIsFrontCamera():((r={})[e.TRTCVideoMirrorType.TRTCVideoMirrorType_Enable]=!0,r[e.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable]=!1,r)[t]},r.prototype._getTRTCQosPreference=function(t){var r;return((r={})[e.TRTCVideoQosPreference.TRTCVideoQosPreferenceSmooth]=n.default.TYPE.QOS_PREFERENCE_SMOOTH,r[e.TRTCVideoQosPreference.TRTCVideoQosPreferenceClear]=n.default.TYPE.QOS_PREFERENCE_CLEAR,r)[t]},r.prototype._getTRTCAudioQuality=function(t){var r;return((r={})[e.TRTCAudioQuality.TRTCAudioQualitySpeech]=n.default.TYPE.AUDIO_PROFILE_STANDARD,r[e.TRTCAudioQuality.TRTCAudioQualityDefault]=n.default.TYPE.AUDIO_PROFILE_STANDARD,r[e.TRTCAudioQuality.TRTCAudioQualityMusic]=n.default.TYPE.AUDIO_PROFILE_HIGH_STEREO,r)[t]},r.prototype._getTRTCCloudDeviceType=function(t){return{camera:e.TRTCDeviceType.TRTCDeviceTypeCamera,microphone:e.TRTCDeviceType.TRTCDeviceTypeMic,speaker:e.TRTCDeviceType.TRTCDeviceTypeSpeaker}[t]},r.prototype._getTRTCCloudDeviceState=function(t){return{add:e.TRTCDeviceState.TRTCDeviceStateAdd,remove:e.TRTCDeviceState.TRTCDeviceStateRemove,active:e.TRTCDeviceState.TRTCDeviceStateActive}[t]},r.prototype._getTRTCCloudQuality=function(t){return[e.TRTCQuality.TRTCQuality_Unknown,e.TRTCQuality.TRTCQuality_Excellent,e.TRTCQuality.TRTCQuality_Good,e.TRTCQuality.TRTCQuality_Poor,e.TRTCQuality.TRTCQuality_Bad,e.TRTCQuality.TRTCQuality_Vbad,e.TRTCQuality.TRTCQuality_Down][t]},r.prototype._generateLocalVideoData=function(){var e={view:this._getLocalView(),publish:this._getIsVideoPublish(),option:a({profile:this._getVideoProfile(),small:this._getSmallStreamVideoProfile()||!1},this._getVideoPlayOption())};return this._getIsMobile()?e&&Object.assign(e.option,{useFrontCamera:this._getIsFrontCamera()}):e&&Object.assign(e.option,{cameraId:this._getCurrentCameraId()}),this._getQosPreference()&&e&&Object.assign(e.option,{qosPreference:this._getQosPreference()}),e},r.prototype._generateLocalTestVideoData=function(){return{view:this._getLocalTestView(),publish:!1,option:a({cameraId:this._getCurrentCameraId(),profile:this._getVideoProfile()},this._getVideoPlayOption())}},r.prototype._generateLocalAudioData=function(){var e={publish:this._getIsAudioPublish(),option:{microphoneId:this._getCurrentMicrophoneId(),profile:this._getAudioProfile(),captureVolume:this._getCaptureVolume()}};return z(this._echoCancellation)&&(e.option.echoCancellation=this._echoCancellation),z(this._autoGainControl)&&(e.option.autoGainControl=this._autoGainControl),z(this._noiseSuppression)&&(e.option.noiseSuppression=this._noiseSuppression),e},r.prototype._generateLocalTestAudioData=function(){return{publish:!1,option:{microphoneId:this._getCurrentMicrophoneId(),profile:this._getAudioProfile()}}},r.prototype._generateRemoteVideoData=function(e,t){return this._remoteStreamConfig.get("".concat(e,"_").concat(this._getTRTCStreamType(t)))},r.prototype._addTRTCEvents=function(){var t=this;this._trtc.on(n.default.EVENT.ERROR,(function(e){e&&t.emit("onError",e.code,e.message)})),this._trtc.on(n.default.EVENT.REMOTE_USER_ENTER,(function(e){(null==e?void 0:e.userId)&&t.emit("onRemoteUserEnterRoom",e.userId)})),this._trtc.on(n.default.EVENT.REMOTE_USER_EXIT,(function(e){(null==e?void 0:e.userId)&&t.emit("onRemoteUserLeaveRoom",e.userId)})),this._trtc.on(n.default.EVENT.REMOTE_AUDIO_AVAILABLE,(function(e){(null==e?void 0:e.userId)&&t.emit("onUserAudioAvailable",e.userId,!0)})),this._trtc.on(n.default.EVENT.REMOTE_AUDIO_UNAVAILABLE,(function(e){(null==e?void 0:e.userId)&&t.emit("onUserAudioAvailable",e.userId,!1)})),this._trtc.on(n.default.EVENT.REMOTE_VIDEO_AVAILABLE,(function(e){t._emitVideoAvailable(e,!0)})),this._trtc.on(n.default.EVENT.REMOTE_VIDEO_UNAVAILABLE,(function(e){t._emitVideoAvailable(e,!1)})),this._trtc.on(n.default.EVENT.AUDIO_VOLUME,(function(e){(null==e?void 0:e.result)&&t.emit("onUserVoiceVolume",null==e?void 0:e.result,((null==e?void 0:e.result)||[]).length)})),this._trtc.on(n.default.EVENT.KICKED_OUT,(function(e){var r={banned:Qn.banned,room_disband:Qn.roomDisband};K(r[e.reason])&&t.emit("onExitRoom",r[e.reason])})),this._trtc.on(n.default.EVENT.NETWORK_QUALITY,(function(e){var r=e.uplinkNetworkQuality,i=e.downlinkNetworkQuality,n=new D("",t._getTRTCCloudQuality(r)),o=[];t._remoteStatisticsUserIdList.length>0&&(o=t._remoteStatisticsUserIdList.map((function(e){return new D(e,t._getTRTCCloudQuality(i))}))),t.emit("onNetworkQuality",n,o)})),this._trtc.on(n.default.EVENT.AUTOPLAY_FAILED,(function(e){t.emit("onAutoPlayFailed",e)})),this._trtc.on(n.default.EVENT.SEI_MESSAGE,(function(e){if(e.data&&"object"==typeof e.data&&e.data instanceof ArrayBuffer){for(var r=new Uint8Array(e.data),i="",n=0;n<r.length;n++)i+=String.fromCharCode(r[n]);e.stringData=i}t.emit("onRecvSEIMsg",e.userId,JSON.stringify(e))})),this._trtc.on(n.default.EVENT.STATISTICS,(function(r){var i,n=r.rtt,o=r.upLoss,a=r.downLoss,s=r.bytesSent,c=r.bytesReceived,A=r.localStatistics,l=r.remoteStatistics;t._remoteStatisticsUserIdList=l.map((function(e){return e.userId}));var u={big:e.TRTCVideoStreamType.TRTCVideoStreamTypeBig,small:e.TRTCVideoStreamType.TRTCVideoStreamTypeSmall,sub:e.TRTCVideoStreamType.TRTCVideoStreamTypeSub},d=(null===(i=A.video)||void 0===i?void 0:i.length)>0?A.video.map((function(e){var t=new B;return t.width=e.width,t.height=e.height,t.frameRate=e.frameRate,t.videoBitrate=e.bitrate,t.audioBitrate=A.audio.bitrate||0,t.streamType=u[e.videoType],t})):[];if(0===d.length&&A.audio.bitrate>0){var h=new B;h.audioBitrate=A.audio.bitrate||0,d.push(h)}var g=[];l.forEach((function(e){var t=[],r=e.userId,i=e.audio.bitrate;if(e.video&&e.video.forEach((function(e){var n=new O;n.userId=r,n.width=e.width,n.height=e.height,n.frameRate=e.frameRate,n.videoBitrate=e.bitrate,n.audioBitrate=i||0,n.streamType=u[e.videoType],t.push(n)})),0===t.length){var n=new O;n.userId=r,n.audioBitrate=i||0,t.push(n)}g.push.apply(g,t)}));var p=new Q;p.upLoss=o,p.downLoss=a,p.rtt=n,p.sentBytes=s,p.receivedBytes=c,p.localStatisticsArray=d,p.localStatisticsArraySize=d.length,p.remoteStatisticsArray=g,p.remoteStatisticsArraySize=g.length,t.emit("onStatistics",p)})),this._trtc.on(n.default.EVENT.SCREEN_SHARE_STOPPED,(function(){t.emit("onScreenCaptureStopped",0),t._clearScreenShareParams(),t._isSharingScreen=!1})),this._trtc.on(n.default.EVENT.PUBLISH_STATE_CHANGED,(function(r){var i=r.mediaType;"started"===r.state&&("audio"===i?t.emit("onSendFirstLocalAudioFrame"):"video"===i?t.emit("onSendFirstLocalVideoFrame",e.TRTCVideoStreamType.TRTCVideoStreamTypeBig):"screen"===i&&t.emit("onSendFirstLocalVideoFrame",e.TRTCVideoStreamType.TRTCVideoStreamTypeSub))})),this._trtc.on(n.default.EVENT.VIDEO_PLAY_STATE_CHANGED,(function(r){var i,o=r.userId,a=r.streamType,s=r.state,c=((i={})[n.default.TYPE.STREAM_TYPE_MAIN]=e.TRTCVideoStreamType.TRTCVideoStreamTypeBig,i[n.default.TYPE.STREAM_TYPE_SUB]=e.TRTCVideoStreamType.TRTCVideoStreamTypeSub,i);"PLAYING"===s&&t.emit("onFirstVideoFrame",o,c[a],0,0)})),this._trtc.on(n.default.EVENT.AUDIO_PLAY_STATE_CHANGED,(function(e){var r=e.userId;"PLAYING"===e.state&&t.emit("onFirstAudioFrame",r)})),this._trtc.on(n.default.EVENT.DEVICE_CHANGED,(function(e){var r=e.type,i=e.device,n=e.action,o=i.deviceId;if("active"===n){switch(r){case"camera":t._currentCameraId=o,t._currentCamera=i;break;case"microphone":t._currentMicrophoneId=o,t._currentMicrophone=i;break;case"speaker":t._currentSpeakerId=o,t._currentSpeaker=i}t.emitOnDeviceChange(o,t._getTRTCCloudDeviceType(r),t._getTRTCCloudDeviceState(n))}})),this._trtc.on(n.default.EVENT.CUSTOM_MESSAGE,(function(e){e&&t.emit("onRecvCustomCmdMsg",e.userId,e.cmdId,e.seq,null==e?void 0:e.data)}))},r.prototype._removeTRTCEvents=function(){this._trtc.off("*")},r.prototype._emitVideoAvailable=function(e,t){var r=e.userId,i=e.streamType;t?this._remoteStreamMap.set("".concat(r,"_").concat(i),!0):this._remoteStreamMap.delete("".concat(r,"_").concat(i)),i===n.default.TYPE.STREAM_TYPE_SUB?r&&this.emit("onUserSubStreamAvailable",r,t):r&&this.emit("onUserVideoAvailable",r,t)},r.prototype._setLocalView=function(e){this._localView=e},r.prototype._getLocalView=function(){return this._localView},r.prototype._setIsMobile=function(e){this._isMobile=e},r.prototype._getIsMobile=function(){return this._isMobile},r.prototype._setIsFrontCamera=function(e){this._isFrontCamera=e},r.prototype._getIsFrontCamera=function(){return this._isFrontCamera},r.prototype._getSmallStreamVideoProfile=function(){return this._smallStreamVideoProfile},r.prototype._setSmallStreamVideoProfile=function(e){this._smallStreamVideoProfile=e},r.prototype._setIsVideoPublish=function(e){this._isVideoPublish=e},r.prototype._getIsVideoPublish=function(){return this._isVideoPublish},r.prototype._setVideoProfile=function(e){this._videoProfile=e},r.prototype._getVideoProfile=function(){return this._videoProfile},r.prototype._setVideoPlayOption=function(e){this._videoPlayOption=e},r.prototype._getVideoPlayOption=function(){return this._videoPlayOption},r.prototype._setQosPreference=function(e){this._qosPreference=e},r.prototype._getQosPreference=function(){return this._qosPreference},r.prototype._setLocalTestView=function(e){this._localTestView=e},r.prototype._getLocalTestView=function(){return this._localTestView},r.prototype._setScreenShareParams=function(e){var t=e.view,r=e.systemAudio,i=e.fillMode,n=e.profile,o=e.videoTrack,a=e.qosPreference;X(t)||(this._screenShareParams.view=t),X(r)||(this._screenShareParams.option.systemAudio=r),X(i)||(this._screenShareParams.option.fillMode=i),X(n)||(this._screenShareParams.option.profile=n),X(o)||(this._screenShareParams.option.videoTrack=o),X(a)||(this._screenShareParams.option.qosPreference=a)},r.prototype._clearScreenShareParams=function(){var e,t,r,i,n;(null===(e=this._screenShareParams)||void 0===e?void 0:e.view)&&delete this._screenShareParams.view,(null===(r=null===(t=this._screenShareParams)||void 0===t?void 0:t.option)||void 0===r?void 0:r.systemAudio)&&delete this._screenShareParams.option.systemAudio,(null===(n=null===(i=this._screenShareParams)||void 0===i?void 0:i.option)||void 0===n?void 0:n.videoTrack)&&delete this._screenShareParams.option.videoTrack},r.prototype._getScreenShareParams=function(){return this._screenShareParams},r.prototype._setIsAudioPublish=function(e){this._isAudioPublish=e},r.prototype._getIsAudioPublish=function(){return this._isAudioPublish},r.prototype._setAudioProfile=function(e){this._audioProfile=e},r.prototype._getAudioProfile=function(){return this._audioProfile},r.prototype._getCaptureVolume=function(){return this._captureVolume},r.prototype._setCaptureVolume=function(e){this._captureVolume=e},r.prototype._setCurrentCameraId=function(e){this._currentCameraId=e},r.prototype._getCurrentCameraId=function(){return this._currentCameraId},r.prototype._setCurrentMicrophoneId=function(e){this._currentMicrophoneId=e},r.prototype._getCurrentMicrophoneId=function(){return this._currentMicrophoneId},r.prototype._setCurrentSpeakerId=function(e){this._currentSpeakerId=e},r.prototype._getCurrentSpeakerId=function(){return this._currentSpeakerId},r.prototype._setRemoteStreamConfig=function(t,r,i){var n=this._remoteStreamConfig.get("".concat(t,"_").concat(this._getTRTCStreamType(r)));n||(n={userId:t,streamType:this._getTRTCStreamType(r),option:{mirror:this._getTRTCMirror(e.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable),fillMode:this._getTRTCFillMode(e.TRTCVideoFillMode.TRTCVideoFillMode_Fit)}});var o=i.view,a=i.mirrorType,s=i.fillMode,c=i.small;X(o)||(n.view=o),X(a)||(n.option.mirror=this._getTRTCMirror(a)),X(s)||(n.option.fillMode=this._getTRTCFillMode(s)),X(c)||(n.option.small=c),this._remoteStreamConfig.set("".concat(t,"_").concat(this._getTRTCStreamType(r)),n)},r.prototype.handleDeviceChange=function(){return s(this,void 0,void 0,(function(){var t=this;return c(this,(function(r){return n.default.getCameraList().then((function(r){return s(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this._cameraList.length===r.length?[2]:[4,this.deviceChangeManage(this._cameraList,r,e.TRTCDeviceType.TRTCDeviceTypeCamera)];case 1:return t.sent(),this._cameraList=r,[2]}}))}))})),n.default.getMicrophoneList().then((function(r){return s(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.deviceChangeManage(this._microphoneList,r,e.TRTCDeviceType.TRTCDeviceTypeMic)];case 1:return t.sent(),this._microphoneList=r,[2]}}))}))})),n.default.getSpeakerList().then((function(r){return s(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.deviceChangeManage(this._speakerList,r,e.TRTCDeviceType.TRTCDeviceTypeSpeaker)];case 1:return t.sent(),this._speakerList=r,[2]}}))}))})),[2]}))}))},r.prototype.isSameDevice=function(e,t){var r=e&&e.deviceId&&e.groupId&&e.label,i=t&&t.deviceId&&t.groupId&&t.label;return!(!r||!i)&&e.deviceId===t.deviceId&&e.groupId===t.groupId&&e.label===t.label},r.prototype.deviceChangeManage=function(t,r,i){return s(this,void 0,void 0,(function(){var n,o,a,s,A;return c(this,(function(c){switch(c.label){case 0:return n=void 0,t.length!==r.length&&(o=(r||[]).map((function(e){return e.deviceId})),a=new T,t.length>r.length?(a=t.filter((function(e){return!o.includes(e.deviceId)}))[0]||{},n=e.TRTCDeviceState.TRTCDeviceStateRemove):(o=(t||[]).map((function(e){return e.deviceId})),a=r.filter((function(e){return!o.includes(e.deviceId)}))[0]||{},n=e.TRTCDeviceState.TRTCDeviceStateAdd),s=a.deviceId,this.emitOnDeviceChange(s,i,n)),A=this.getDefaultDeviceInfo(r),i!==e.TRTCDeviceType.TRTCDeviceTypeCamera||n!==e.TRTCDeviceState.TRTCDeviceStateRemove?[3,3]:this.isSameDevice(this._currentCamera,A)?[2]:A.deviceId?[4,this.autoChangeDevice(i,A)]:[3,2];case 1:c.sent(),c.label=2;case 2:c.label=3;case 3:return i!==e.TRTCDeviceType.TRTCDeviceTypeMic?[3,6]:this.isSameDevice(this._currentMicrophone,A)?[2]:A.deviceId?[4,this.autoChangeDevice(i,A)]:[3,5];case 4:c.sent(),c.label=5;case 5:c.label=6;case 6:return i!==e.TRTCDeviceType.TRTCDeviceTypeSpeaker?[3,9]:this.isSameDevice(this._currentSpeaker,A)?[2]:A.deviceId?[4,this.autoChangeDevice(i,A)]:[3,8];case 7:c.sent(),c.label=8;case 8:c.label=9;case 9:return[2]}}))}))},r.prototype.getDefaultDeviceInfo=function(e){var t=new T;if(0===e.length)return t;var r=e.filter((function(e){return"default"===e.deviceId}));return r.length>0?r[0]:e[0]},r.prototype.autoChangeDevice=function(t,r){return s(this,void 0,void 0,(function(){var i,o,a,s,A;return c(this,(function(c){switch(c.label){case 0:if(i=r.deviceId,t!==e.TRTCDeviceType.TRTCDeviceTypeCamera)return[3,8];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._trtc.updateLocalVideo({option:{cameraId:i}})];case 2:return c.sent(),[3,4];case 3:return o=c.sent(),console.log("error",JSON.stringify(o)),o.code,n.default.ERROR_CODE.OPERATION_ABORT,[3,4];case 4:return c.trys.push([4,6,,7]),[4,this._testTrtc.updateLocalVideo({option:{cameraId:i}})];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),console.log("testTRTC error",JSON.stringify(a)),a.code,n.default.ERROR_CODE.OPERATION_ABORT,[3,7];case 7:this._currentCameraId=i,this._currentCamera=r,this.emitOnDeviceChange(i,t,e.TRTCDeviceState.TRTCDeviceStateActive),c.label=8;case 8:if(t!==e.TRTCDeviceType.TRTCDeviceTypeMic)return[3,16];c.label=9;case 9:return c.trys.push([9,11,,12]),[4,this._trtc.updateLocalAudio({option:{microphoneId:i}})];case 10:return c.sent(),[3,12];case 11:return s=c.sent(),console.log("error",JSON.stringify(s)),s.code,n.default.ERROR_CODE.OPERATION_ABORT,[3,12];case 12:return c.trys.push([12,14,,15]),[4,this._testTrtc.updateLocalAudio({option:{microphoneId:i}})];case 13:return c.sent(),[3,15];case 14:return A=c.sent(),console.log("testTRTC error",JSON.stringify(A)),A.code,n.default.ERROR_CODE.OPERATION_ABORT,[3,15];case 15:this._currentMicrophoneId=i,this._currentMicrophone=r,this.emitOnDeviceChange(i,t,e.TRTCDeviceState.TRTCDeviceStateActive),c.label=16;case 16:return t!==e.TRTCDeviceType.TRTCDeviceTypeSpeaker?[3,18]:[4,n.default.setCurrentSpeaker(i)];case 17:c.sent(),this._currentSpeakerId=i,this._currentSpeaker=r,this.emitOnDeviceChange(i,t,e.TRTCDeviceState.TRTCDeviceStateActive),c.label=18;case 18:return[2]}}))}))},r.prototype.emitOnDeviceChange=function(e,t,r){this.emit("onDeviceChange",e,t,r)},r.shareInstance=null,r.subCloudMap=new Map,r.enableSEI=!1,r}(_);e.Rect=function(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.left=e,this.top=t,this.right=r,this.bottom=i},e.TRTCDeviceInfo=T,e.TRTCImageBuffer=P,e.TRTCLocalStatistics=B,e.TRTCMixUser=function(t,r,i,n,o,a,s,c){void 0===t&&(t=""),void 0===r&&(r=""),void 0===i&&(i=null),void 0===n&&(n=0),void 0===o&&(o=!1),void 0===a&&(a=e.TRTCVideoStreamType.TRTCVideoStreamTypeBig),void 0===s&&(s=e.TRTCMixInputType.TRTCMixInputTypeUndefined),void 0===c&&(c=0),this.userId=t,this.roomId=r,this.rect=i,this.zOrder=n,this.pureAudio=o,this.streamType=a,this.inputType=s,this.renderMode=c},e.TRTCNetworkQosParam=function(t,r){void 0===t&&(t=e.TRTCVideoQosPreference.TRTCVideoQosPreferenceClear),void 0===r&&(r=e.TRTCQosControlMode.TRTCQosControlModeServer),this.preference=t,this.controlMode=r},e.TRTCParams=function(t,r,i,n,o,a,s,c,A,l,u){void 0===t&&(t=0),void 0===r&&(r=""),void 0===i&&(i=""),void 0===n&&(n=0),void 0===o&&(o=""),void 0===a&&(a=e.TRTCRoleType.TRTCRoleAnchor),void 0===s&&(s=null),void 0===A&&(A=null),void 0===l&&(l=null),void 0===u&&(u=30),this.sdkAppId=t,this.userId=r,this.userSig=i,this.roomId=n,this.strRoomId=o,this.role=a,this.privateMapKey=s,this.streamId=A,this.userDefineRecordId=l,this.frameWorkType=u},e.TRTCPublishCDNParam=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=null),this.appId=e,this.bizId=t,this.url=r},e.TRTCQualityInfo=D,e.TRTCRemoteStatistics=O,e.TRTCRenderParams=function(t,r,i){void 0===t&&(t=e.TRTCVideoRotation.TRTCVideoRotation0),void 0===r&&(r=e.TRTCVideoFillMode.TRTCVideoFillMode_Fit),void 0===i&&(i=e.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable),this.rotation=t,this.fillMode=r,this.mirrorType=i},e.TRTCScreenCaptureSourceInfo=function(t,r,i,n,o,a){void 0===t&&(t=e.TRTCScreenCaptureSourceType.TRTCScreenCaptureSourceTypeUnknown),void 0===r&&(r=""),void 0===i&&(i=""),void 0===n&&(n=new P),void 0===o&&(o=new P),void 0===a&&(a=!1),this.type=t,this.sourceId=r,this.sourceName=i,this.thumbBGRA=n,this.iconBGRA=o,this.isMinimizeWindow=a},e.TRTCStatistics=Q,e.TRTCTranscodingConfig=function(t,r,i,n,o,a,s,c,A,l,u,d,h,g,p){void 0===t&&(t=e.TRTCTranscodingConfigMode.TRTCTranscodingConfigMode_Unknown),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=15),void 0===c&&(c=2),void 0===A&&(A=0),void 0===l&&(l=""),void 0===u&&(u=64),void 0===d&&(d=48e3),void 0===h&&(h=1),void 0===g&&(g=[]),void 0===p&&(p=""),this.mode=t,this.appId=r,this.bizId=i,this.videoWidth=n,this.videoHeight=o,this.videoBitrate=a,this.videoFramerate=s,this.videoGOP=c,this.backgroundColor=A,this.backgroundImage=l,this.audioSampleRate=u,this.audioBitrate=d,this.audioChannels=h,this.mixUsersArray=g,this.mixUsersArraySize=g.length,this.streamId=p},e.TRTCVideoEncParam=function(t,r,i,n){void 0===t&&(t=e.TRTCVideoResolution.TRTCVideoResolution_640_360),void 0===r&&(r=e.TRTCVideoResolutionMode.TRTCVideoResolutionModeLandscape),void 0===i&&(i=15),void 0===n&&(n=550),this.videoResolution=t,this.resMode=r,this.videoFps=i,this.videoBitrate=n},e.TRTCVolumeInfo=function(e,t){void 0===e&&(e=""),void 0===t&&(t=0),this.userId=e,this.volume=t},e.default=eo,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(356),r(426))},62:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=A(r(422)),u=a(r(51)),d=r(839),h=function(){function e(){this._trtcCloud=null,this._framework=7,this._localPlayOptions={rotation:u.TRTCVideoRotation.TRTCVideoRotation0,fillMode:u.TRTCVideoFillMode.TRTCVideoFillMode_Fill,mirrorType:u.TRTCVideoMirrorType.TRTCVideoMirrorType_Enable},this._remotePlayOptions={rotation:u.TRTCVideoRotation.TRTCVideoRotation0,fillMode:u.TRTCVideoFillMode.TRTCVideoFillMode_Fill,mirrorType:u.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable},this._screenShareOptions={videoResolution:u.TRTCVideoResolution.TRTCVideoResolution_1920_1080,videoFps:15,videoBitrate:1500,screenAudio:!1},(0,d.logSuccess)("TrtcWrapper new come"),this._trtcCloud=u.default.getTRTCShareInstance({frameWorkType:this._framework}),this._addTRTCEvents()}return e.prototype.getSDKVersion=function(){return this._trtcCloud.getSDKVersion()},e.prototype.sharedInstance=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.destroySharedInstance=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this._removeTRTCEvents(),[4,this.exitRoom()];case 1:return e.sent(),(0,d.logSuccess)("destroySharedInstance success"),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.enterRoom=function(e){var t;return s(this,void 0,void 0,(function(){var r,i,n,o,a,s,A,l,u,h,g;return c(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),(0,d.logSuccess)("begin enterRoom"),r=(0,d.getFlutterArgs)(e,"userId"),i=(0,d.getFlutterArgs)(e,"sdkAppId"),n=(0,d.getFlutterArgs)(e,"userSig"),o=(0,d.getFlutterArgs)(e,"roomId"),a=(0,d.getFlutterArgs)(e,"strRoomId"),s=(0,d.getFlutterArgs)(e,"role"),A=(0,d.getFlutterArgs)(e,"streamId"),l=(0,d.getFlutterArgs)(e,"userDefineRecordId"),u=(0,d.getFlutterArgs)(e,"privateMapKey"),h=(0,d.getFlutterArgs)(e,"scene"),g={userId:r,sdkAppId:i,userSig:n,roomId:"string"==typeof o?parseInt(o,10):o,strRoomId:a,role:s,streamId:A,userDefineRecordId:l,privateMapKey:u},[4,null===(t=this._trtcCloud)||void 0===t?void 0:t.enterRoom(g,h)];case 1:case 2:return c.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.exitRoom=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this.stopLocalPreview()];case 1:return e.sent(),[4,this._trtcCloud.stopLocalAudio()];case 2:return e.sent(),[4,this._trtcCloud.exitRoom()];case 3:return e.sent(),window.DestoryLocalStreamCallBack(),(0,d.logSuccess)("exitRoom success"),[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.switchRole=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=(0,d.getFlutterArgs)(e,"role"),[4,this._trtcCloud.switchRole(t)];case 1:case 2:return r.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.switchRoom=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("switchRoom"),[2]}))}))},e.prototype.connectOtherRoom=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("connectOtherRoom"),[2]}))}))},e.prototype.disconnectOtherRoom=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("disconnectOtherRoom"),[2]}))}))},e.prototype.setDefaultStreamRecvMode=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setDefaultStreamRecvMode"),[2]}))}))},e.prototype.createSubCloud=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("createSubCloud"),[2]}))}))},e.prototype.destroySubCloud=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("destroySubCloud"),[2]}))}))},e.prototype.startLocalAudio=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._trtcCloud.startLocalAudio()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.stopLocalAudio=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._trtcCloud.stopLocalAudio()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.muteLocalAudio=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=(0,d.getFlutterArgs)(e,"mute"),[4,this._trtcCloud.muteLocalAudio(t)];case 1:case 2:return r.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.setAudioCaptureVolume=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setAudioCaptureVolume"),[2]}))}))},e.prototype.setAudioPlayoutVolume=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setAudioPlayoutVolume"),[2]}))}))},e.prototype.getAudioPlayoutVolume=function(e){(0,d.noSupportFunction)("getAudioPlayoutVolume")},e.prototype.setAudioRoute=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setAudioRoute"),[2]}))}))},e.prototype.startLocalPreview=function(e,t,r){var i,n;return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,null===(i=this._trtcCloud)||void 0===i?void 0:i.startLocalPreview(t)];case 1:return e.sent(),[4,null===(n=this._trtcCloud)||void 0===n?void 0:n.setLocalRenderParams(this.getLocalPlayOptions())];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.stopLocalPreview=function(e){var t;return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,null===(t=this._trtcCloud)||void 0===t?void 0:t.stopLocalPreview()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.muteLocalVideo=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=(0,d.getFlutterArgs)(e,"mute"),[4,this._trtcCloud.muteLocalVideo(t)];case 1:case 2:return r.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.switchCamera=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("switchCamera"),[2]}))}))},e.prototype.startRemoteView=function(e,t,r){var i;return s(this,void 0,void 0,(function(){var e,n;return c(this,(function(o){switch(o.label){case 0:e=(0,d.getFlutterArgs)(r,"userId"),n=(0,d.getFlutterArgs)(r,"streamType"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,null===(i=this._trtcCloud)||void 0===i?void 0:i.startRemoteView(e,t,n)];case 2:case 3:return o.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.stopRemoteView=function(e){var t;return s(this,void 0,void 0,(function(){var r;return c(this,(function(i){switch(i.label){case 0:r=(0,d.getFlutterArgs)(e,"userId"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===(t=this._trtcCloud)||void 0===t?void 0:t.stopRemoteView(r,u.TRTCVideoStreamType.TRTCVideoStreamTypeBig)];case 2:case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.stopAllRemoteView=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){try{this._trtcCloud.stopAllRemoteView()}catch(e){}return[2]}))}))},e.prototype.setVideoEncoderParam=function(e){var t;return s(this,void 0,void 0,(function(){var r;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),(r=JSON.parse(e))?[4,null===(t=this._trtcCloud)||void 0===t?void 0:t.setVideoEncoderParam(r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.muteRemoteVideoStream=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("muteRemoteVideoStream"),[2]}))}))},e.prototype.muteAllRemoteVideoStreams=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("muteAllRemoteVideoStreams"),[2]}))}))},e.prototype.muteRemoteAudio=function(e){return s(this,void 0,void 0,(function(){var t,r;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=(0,d.getFlutterArgs)(e,"mute"),r=(0,d.getFlutterArgs)(e,"userId"),[4,this._trtcCloud.muteRemoteAudio(r,t)];case 1:case 2:return i.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.muteAllRemoteAudio=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=(0,d.getFlutterArgs)(e,"mute"),[4,this._trtcCloud.muteAllRemoteAudio(t)];case 1:case 2:return r.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.enableAudioVolumeEvaluation=function(e){try{var t=(0,d.getFlutterArgs)(e,"intervalMs");return this._trtcCloud.enableAudioVolumeEvaluation(t),0}catch(e){}},e.prototype.setRemoteAudioVolume=function(e){try{var t=(0,d.getFlutterArgs)(e,"userId"),r=(0,d.getFlutterArgs)(e,"volume");this._trtcCloud.setRemoteAudioVolume(t,r)}catch(e){}},e.prototype.enableEncSmallVideoStream=function(e){return s(this,void 0,Number,(function(){var t,r;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=(0,d.getFlutterArgs)(e,"enable"),r=(0,d.getFlutterArgs)(e,"params"),[4,this._trtcCloud.enableSmallVideoStream(t,r)];case 1:case 2:return i.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.setLogLevel=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setLogLevel"),[2]}))}))},e.prototype.startPublishing=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("startPublishing"),[2]}))}))},e.prototype.stopPublishing=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("stopPublishing"),[2]}))}))},e.prototype.startPublishCDNStream=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("startPublishCDNStream"),[2]}))}))},e.prototype.stopPublishCDNStream=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("stopPublishCDNStream"),[2]}))}))},e.prototype.setMixTranscodingConfig=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setMixTranscodingConfig"),[2]}))}))},e.prototype.startScreenCapture=function(e){return s(this,void 0,void 0,(function(){var t,r,i;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=(0,d.getFlutterArgs)(e,"viewId"),r=(0,d.getFlutterArgs)(e,"streamType"),i=this.getScreenShareOptions(),[4,this._trtcCloud.startScreenShare(t,r,i)];case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.stopScreenCapture=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._trtcCloud.stopScreenShare()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.pauseScreenCapture=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("pauseScreenCapture"),[2]}))}))},e.prototype.resumeScreenCapture=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("resumeScreenCapture"),[2]}))}))},e.prototype.getDevicesList=function(e){return s(this,void 0,void 0,(function(){var t,r,i;return c(this,(function(n){switch(n.label){case 0:switch(n.trys.push([0,8,,9]),t=(0,d.getFlutterArgs)(e,"type"),r=[],t){case 0:return[3,1];case 1:return[3,3];case 2:return[3,5]}return[3,7];case 1:return[4,this._trtcCloud.getMicDevicesList()];case 2:case 4:case 6:return r=n.sent(),[3,7];case 3:return[4,this._trtcCloud.getSpeakerDevicesList()];case 5:return[4,this._trtcCloud.getCameraDevicesList()];case 7:return i={deviceList:r,count:r.length},[2,JSON.stringify(i)];case 8:return n.sent(),[3,9];case 9:return[2]}}))}))},e.prototype.setCurrentDevice=function(e){return s(this,void 0,void 0,(function(){var t,r;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),t=(0,d.getFlutterArgs)(e,"type"),r=(0,d.getFlutterArgs)(e,"deviceId"),1!==t?[3,3]:r?[4,this._trtcCloud.setCurrentMicDevice(r)]:[3,2];case 1:i.sent(),i.label=2;case 2:i.label=3;case 3:return 2!==t?[3,6]:r?[4,this._trtcCloud.setCurrentCameraDevice(r)]:[3,5];case 4:i.sent(),i.label=5;case 5:i.label=6;case 6:return[3,8];case 7:return i.sent(),[3,8];case 8:return[2]}}))}))},e.prototype.getCurrentDevice=function(e){return s(this,void 0,void 0,(function(){var t,r;return c(this,(function(i){switch(i.label){case 0:t=(0,d.getFlutterArgs)(e,"type"),r={},i.label=1;case 1:switch(i.trys.push([1,9,,10]),t){case 0:return[3,2];case 1:return[3,4];case 2:return[3,6]}return[3,8];case 2:return[4,this._trtcCloud.getCurrentMicDevice()];case 3:return r=i.sent(),[3,8];case 4:return[4,this._trtcCloud.getCurrentSpeakerDevice()];case 5:return r=i.sent(),[3,8];case 6:return[4,this._trtcCloud.getCurrentCameraDevice()];case 7:return r=i.sent(),[3,8];case 8:return[2,JSON.stringify(r)];case 9:return i.sent(),[3,10];case 10:return[2]}}))}))},e.prototype.setCurrentDeviceVolume=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setCurrentDeviceVolume"),[2]}))}))},e.prototype.getCurrentDeviceVolume=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("getCurrentDeviceVolume"),[2]}))}))},e.prototype.setCurrentDeviceMute=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setCurrentDeviceMute"),[2]}))}))},e.prototype.getCurrentDeviceMute=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("getCurrentDeviceMute"),[2]}))}))},e.prototype.startCameraDeviceTest=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("startCameraDeviceTest"),[2]}))}))},e.prototype.stopCameraDeviceTest=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("stopCameraDeviceTest"),[2]}))}))},e.prototype.startMicDeviceTest=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("startMicDeviceTest"),[2]}))}))},e.prototype.stopMicDeviceTest=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("stopMicDeviceTest"),[2]}))}))},e.prototype.startSpeakerDeviceTest=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("startSpeakerDeviceTest"),[2]}))}))},e.prototype.stopSpeakerDeviceTest=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("stopSpeakerDeviceTest"),[2]}))}))},e.prototype.setLocalRenderParams=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setLocalRenderParams"),[2]}))}))},e.prototype.updateLocalView=function(e,t,r){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("updateLocalView"),[2]}))}))},e.prototype.updateRemoteView=function(e,t,r){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("updateLocalView"),[2]}))}))},e.prototype.setWatermark=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("setWatermark"),[2]}))}))},e.prototype.getAudioCaptureVolume=function(e){(0,d.noSupportFunction)("getAudioCaptureVolume")},e.prototype.setRemoteVideoStreamType=function(e){(0,d.noSupportFunction)("setAudioCaptureVolume")},e.prototype.startAudioRecording=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.stopAudioRecording=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.startLocalRecording=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.stopLocalRecording=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.startPlayMusic=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("startPlayMusic"),resumeScreenCapture,[2]}))}))},e.prototype.stopPlayMusic=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("stopPlayMusic"),[2]}))}))},e.prototype.resumePlayMusic=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("resumePlayMusic"),[2]}))}))},e.prototype.pausePlayMusic=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return(0,d.noSupportFunction)("pausePlayMusic"),[2]}))}))},e.prototype.setConsoleEnabled=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){return(0,d.getFlutterArgs)(e,"enabled")?TRTC.Logger.enableUploadLog():TRTC.Logger.disableUploadLog(),[2]}))}))},e.prototype.setLogCompressEnabled=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.setLogDirPath=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.setLogDelegate=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.showDebugView=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.setDebugViewMargin=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.callExperimentalAPI=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.setLocalPlayOptions=function(e){this._localPlayOptions=i(i({},this._localPlayOptions),e)},e.prototype.getLocalPlayOptions=function(){return this._localPlayOptions},e.prototype.setRemotePlayOptions=function(e){void 0===e&&(e={}),this._remotePlayOptions=i(i({},this._remotePlayOptions),e)},e.prototype.getRemotePlayOptions=function(){return this._remotePlayOptions||{}},e.prototype.setScreenShareOptions=function(e){void 0===e&&(e={}),this._screenShareOptions=i(i({},this._screenShareOptions),e)},e.prototype.getScreenShareOptions=function(){return this._screenShareOptions},e.prototype.setEventHandler=function(e){this.handler=e},e.prototype._emitEvent=function(e,t){var r;(t instanceof Array||"object"==typeof t)&&(t=JSON.stringify(t)),null===(r=this.handler)||void 0===r||r.call(this,e.toString(),t)},e.prototype._addTRTCEvents=function(){var e,t,r,i,n,o,a,A,u,h=this;null===(e=this._trtcCloud)||void 0===e||e.on("onEnterRoom",(function(e){return s(h,void 0,void 0,(function(){return c(this,(function(t){return e>0&&(0,d.logInfo)("enter room success, time consuming: ".concat(e)),[2]}))}))})),null===(t=this._trtcCloud)||void 0===t||t.on("onExitRoom",(function(e){return s(h,void 0,void 0,(function(){return c(this,(function(t){return(0,d.logInfo)("exit room, reason: ".concat(e)),[2]}))}))})),null===(r=this._trtcCloud)||void 0===r||r.on("onRemoteUserEnterRoom",(function(e){return s(h,void 0,void 0,(function(){return c(this,(function(t){return this._emitEvent(l.default.onRemoteUserEnterRoom,e),[2]}))}))})),null===(i=this._trtcCloud)||void 0===i||i.on("onRemoteUserLeaveRoom",(function(e,t){return s(h,void 0,void 0,(function(){return c(this,(function(r){return this._emitEvent(l.default.onRemoteUserLeaveRoom,{userId:e,reason:t}),[2]}))}))})),null===(n=this._trtcCloud)||void 0===n||n.on("onUserVideoAvailable",(function(e,t){h._emitEvent(l.default.onUserVideoAvailable,{userId:e,available:t})})),null===(o=this._trtcCloud)||void 0===o||o.on("onUserAudioAvailable",(function(e,t){h._emitEvent(l.default.onUserAudioAvailable,{userId:e,available:t})})),null===(a=this._trtcCloud)||void 0===a||a.on("onUserSubStreamAvailable",(function(e,t){h._emitEvent(l.default.onUserSubStreamAvailable,{userId:e,available:t})})),null===(A=this._trtcCloud)||void 0===A||A.on("onUserVoiceVolume",(function(e){h._emitEvent(l.default.onUserVoiceVolume,{userVolumes:e,totalVolume:0})})),null===(u=this._trtcCloud)||void 0===u||u.on("onError",(function(e,t){h._emitEvent(l.default.onError,{errCode:e,errMsg:t})}))},e.prototype._removeTRTCEvents=function(){var e;null===(e=this._trtcCloud)||void 0===e||e.removeAllListeners()},e}();t.default=h},356:function(e,t,r){e.exports=function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},t=function(e){try{return!!e()}catch(e){return!0}},i=!t((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),n=i,o=Function.prototype,a=o.call,s=n&&o.bind.bind(a,a),c=n?s:function(e){return function(){return a.apply(e,arguments)}},A=c,l=A({}.toString),u=A("".slice),d=function(e){return u(l(e),8,-1)},h=t,g=d,p=Object,f=c("".split),m=h((function(){return!p("z").propertyIsEnumerable(0)}))?function(e){return"String"===g(e)?f(e,""):p(e)}:p,E=function(e){return null==e},I=E,_=TypeError,C=function(e){if(I(e))throw new _("Can't call method on "+e);return e},y=m,T=C,v=function(e){return y(T(e))},w=function(e){return e&&e.Math===Math&&e},S=w("object"==typeof globalThis&&globalThis)||w("object"==typeof window&&window)||w("object"==typeof self&&self)||w("object"==typeof e&&e)||w("object"==typeof e&&e)||function(){return this}()||Function("return this")(),b={},R={get exports(){return b},set exports(e){b=e}},D=S,B=Object.defineProperty,O=function(e,t){try{B(D,e,{value:t,configurable:!0,writable:!0})}catch(r){D[e]=t}return t},Q=S,k=O,M="__core-js_shared__",P=R.exports=Q[M]||k(M,{});(P.versions||(P.versions=[])).push({version:"3.38.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"});var N,L,x=b,U=function(e,t){return x[e]||(x[e]=t||{})},F=C,V=Object,G=function(e){return V(F(e))},j=G,H=c({}.hasOwnProperty),Y=Object.hasOwn||function(e,t){return H(j(e),t)},W=c,J=0,X=Math.random(),K=W(1..toString),z=function(e){return"Symbol("+(void 0===e?"":e)+")_"+K(++J+X,36)},q=S.navigator,Z=q&&q.userAgent,$=Z?String(Z):"",ee=S,te=$,re=ee.process,ie=ee.Deno,ne=re&&re.versions||ie&&ie.version,oe=ne&&ne.v8;oe&&(L=(N=oe.split("."))[0]>0&&N[0]<4?1:+(N[0]+N[1])),!L&&te&&(!(N=te.match(/Edge\/(\d+)/))||N[1]>=74)&&(N=te.match(/Chrome\/(\d+)/))&&(L=+N[1]);var ae=L,se=ae,ce=t,Ae=S.String,le=!!Object.getOwnPropertySymbols&&!ce((function(){var e=Symbol("symbol detection");return!Ae(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&se&&se<41})),ue=le&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,de=U,he=Y,ge=z,pe=le,fe=ue,me=S.Symbol,Ee=de("wks"),Ie=fe?me.for||me:me&&me.withoutSetter||ge,_e=function(e){return he(Ee,e)||(Ee[e]=pe&&he(me,e)?me[e]:Ie("Symbol."+e)),Ee[e]},Ce="object"==typeof document&&document.all,ye=void 0===Ce&&void 0!==Ce?function(e){return"function"==typeof e||e===Ce}:function(e){return"function"==typeof e},Te=ye,ve=function(e){return"object"==typeof e?null!==e:Te(e)},we=ve,Se=String,be=TypeError,Re=function(e){if(we(e))return e;throw new be(Se(e)+" is not an object")},De={},Be=!t((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),Oe=Be&&t((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Qe={},ke=ve,Me=S.document,Pe=ke(Me)&&ke(Me.createElement),Ne=function(e){return Pe?Me.createElement(e):{}},Le=Ne,xe=!Be&&!t((function(){return 7!==Object.defineProperty(Le("div"),"a",{get:function(){return 7}}).a})),Ue=i,Fe=Function.prototype.call,Ve=Ue?Fe.bind(Fe):function(){return Fe.apply(Fe,arguments)},Ge=S,je=ye,He=function(e,t){return arguments.length<2?(r=Ge[e],je(r)?r:void 0):Ge[e]&&Ge[e][t];var r},Ye=c({}.isPrototypeOf),We=He,Je=ye,Xe=Ye,Ke=Object,ze=ue?function(e){return"symbol"==typeof e}:function(e){var t=We("Symbol");return Je(t)&&Xe(t.prototype,Ke(e))},qe=String,Ze=function(e){try{return qe(e)}catch(e){return"Object"}},$e=ye,et=Ze,tt=TypeError,rt=function(e){if($e(e))return e;throw new tt(et(e)+" is not a function")},it=rt,nt=E,ot=function(e,t){var r=e[t];return nt(r)?void 0:it(r)},at=Ve,st=ye,ct=ve,At=TypeError,lt=Ve,ut=ve,dt=ze,ht=ot,gt=TypeError,pt=_e("toPrimitive"),ft=function(e,t){if(!ut(e)||dt(e))return e;var r,i=ht(e,pt);if(i){if(void 0===t&&(t="default"),r=lt(i,e,t),!ut(r)||dt(r))return r;throw new gt("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var r,i;if("string"===t&&st(r=e.toString)&&!ct(i=at(r,e)))return i;if(st(r=e.valueOf)&&!ct(i=at(r,e)))return i;if("string"!==t&&st(r=e.toString)&&!ct(i=at(r,e)))return i;throw new At("Can't convert object to primitive value")}(e,t)},mt=ft,Et=ze,It=function(e){var t=mt(e,"string");return Et(t)?t:t+""},_t=Be,Ct=xe,yt=Oe,Tt=Re,vt=It,wt=TypeError,St=Object.defineProperty,bt=Object.getOwnPropertyDescriptor,Rt="enumerable",Dt="configurable",Bt="writable";Qe.f=_t?yt?function(e,t,r){if(Tt(e),t=vt(t),Tt(r),"function"==typeof e&&"prototype"===t&&"value"in r&&Bt in r&&!r[Bt]){var i=bt(e,t);i&&i[Bt]&&(e[t]=r.value,r={configurable:Dt in r?r[Dt]:i[Dt],enumerable:Rt in r?r[Rt]:i[Rt],writable:!1})}return St(e,t,r)}:St:function(e,t,r){if(Tt(e),t=vt(t),Tt(r),Ct)try{return St(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new wt("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var Ot=Math.ceil,Qt=Math.floor,kt=Math.trunc||function(e){var t=+e;return(t>0?Qt:Ot)(t)},Mt=kt,Pt=function(e){var t=+e;return t!=t||0===t?0:Mt(t)},Nt=Pt,Lt=Math.max,xt=Math.min,Ut=function(e,t){var r=Nt(e);return r<0?Lt(r+t,0):xt(r,t)},Ft=Pt,Vt=Math.min,Gt=function(e){var t=Ft(e);return t>0?Vt(t,9007199254740991):0},jt=Gt,Ht=function(e){return jt(e.length)},Yt=v,Wt=Ut,Jt=Ht,Xt=function(e){return function(t,r,i){var n=Yt(t),o=Jt(n);if(0===o)return!e&&-1;var a,s=Wt(i,o);if(e&&r!=r){for(;o>s;)if((a=n[s++])!=a)return!0}else for(;o>s;s++)if((e||s in n)&&n[s]===r)return e||s||0;return!e&&-1}},Kt={includes:Xt(!0),indexOf:Xt(!1)},zt={},qt=Y,Zt=v,$t=Kt.indexOf,er=zt,tr=c([].push),rr=function(e,t){var r,i=Zt(e),n=0,o=[];for(r in i)!qt(er,r)&&qt(i,r)&&tr(o,r);for(;t.length>n;)qt(i,r=t[n++])&&(~$t(o,r)||tr(o,r));return o},ir=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],nr=rr,or=ir,ar=Object.keys||function(e){return nr(e,or)},sr=Be,cr=Oe,Ar=Qe,lr=Re,ur=v,dr=ar;De.f=sr&&!cr?Object.defineProperties:function(e,t){lr(e);for(var r,i=ur(t),n=dr(t),o=n.length,a=0;o>a;)Ar.f(e,r=n[a++],i[r]);return e};var hr,gr=He("document","documentElement"),pr=z,fr=U("keys"),mr=function(e){return fr[e]||(fr[e]=pr(e))},Er=Re,Ir=De,_r=ir,Cr=zt,yr=gr,Tr=Ne,vr="prototype",wr="script",Sr=mr("IE_PROTO"),br=function(){},Rr=function(e){return"<"+wr+">"+e+"</"+wr+">"},Dr=function(e){e.write(Rr("")),e.close();var t=e.parentWindow.Object;return e=null,t},Br=function(){try{hr=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;Br="undefined"!=typeof document?document.domain&&hr?Dr(hr):(t=Tr("iframe"),r="java"+wr+":",t.style.display="none",yr.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(Rr("document.F=Object")),e.close(),e.F):Dr(hr);for(var i=_r.length;i--;)delete Br[vr][_r[i]];return Br()};Cr[Sr]=!0;var Or=Object.create||function(e,t){var r;return null!==e?(br[vr]=Er(e),r=new br,br[vr]=null,r[Sr]=e):r=Br(),void 0===t?r:Ir.f(r,t)},Qr=_e,kr=Or,Mr=Qe.f,Pr=Qr("unscopables"),Nr=Array.prototype;void 0===Nr[Pr]&&Mr(Nr,Pr,{configurable:!0,value:kr(null)});var Lr,xr,Ur,Fr=function(e){Nr[Pr][e]=!0},Vr={},Gr=ye,jr=S.WeakMap,Hr=Gr(jr)&&/native code/.test(String(jr)),Yr=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Wr=Qe,Jr=Yr,Xr=Be?function(e,t,r){return Wr.f(e,t,Jr(1,r))}:function(e,t,r){return e[t]=r,e},Kr=Hr,zr=S,qr=ve,Zr=Xr,$r=Y,ei=b,ti=mr,ri=zt,ii="Object already initialized",ni=zr.TypeError,oi=zr.WeakMap;if(Kr||ei.state){var ai=ei.state||(ei.state=new oi);ai.get=ai.get,ai.has=ai.has,ai.set=ai.set,Lr=function(e,t){if(ai.has(e))throw new ni(ii);return t.facade=e,ai.set(e,t),t},xr=function(e){return ai.get(e)||{}},Ur=function(e){return ai.has(e)}}else{var si=ti("state");ri[si]=!0,Lr=function(e,t){if($r(e,si))throw new ni(ii);return t.facade=e,Zr(e,si,t),t},xr=function(e){return $r(e,si)?e[si]:{}},Ur=function(e){return $r(e,si)}}var ci={set:Lr,get:xr,has:Ur,enforce:function(e){return Ur(e)?xr(e):Lr(e,{})},getterFor:function(e){return function(t){var r;if(!qr(t)||(r=xr(t)).type!==e)throw new ni("Incompatible receiver, "+e+" required");return r}}},Ai={},li={},ui={}.propertyIsEnumerable,di=Object.getOwnPropertyDescriptor,hi=di&&!ui.call({1:2},1);li.f=hi?function(e){var t=di(this,e);return!!t&&t.enumerable}:ui;var gi=Be,pi=Ve,fi=li,mi=Yr,Ei=v,Ii=It,_i=Y,Ci=xe,yi=Object.getOwnPropertyDescriptor;Ai.f=gi?yi:function(e,t){if(e=Ei(e),t=Ii(t),Ci)try{return yi(e,t)}catch(e){}if(_i(e,t))return mi(!pi(fi.f,e,t),e[t])};var Ti={},vi={get exports(){return Ti},set exports(e){Ti=e}},wi=Be,Si=Y,bi=Function.prototype,Ri=wi&&Object.getOwnPropertyDescriptor,Di=Si(bi,"name"),Bi={EXISTS:Di,PROPER:Di&&"something"===function(){}.name,CONFIGURABLE:Di&&(!wi||wi&&Ri(bi,"name").configurable)},Oi=ye,Qi=b,ki=c(Function.toString);Oi(Qi.inspectSource)||(Qi.inspectSource=function(e){return ki(e)});var Mi=Qi.inspectSource,Pi=c,Ni=t,Li=ye,xi=Y,Ui=Be,Fi=Bi.CONFIGURABLE,Vi=Mi,Gi=ci.enforce,ji=ci.get,Hi=String,Yi=Object.defineProperty,Wi=Pi("".slice),Ji=Pi("".replace),Xi=Pi([].join),Ki=Ui&&!Ni((function(){return 8!==Yi((function(){}),"length",{value:8}).length})),zi=String(String).split("String"),qi=vi.exports=function(e,t,r){"Symbol("===Wi(Hi(t),0,7)&&(t="["+Ji(Hi(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!xi(e,"name")||Fi&&e.name!==t)&&(Ui?Yi(e,"name",{value:t,configurable:!0}):e.name=t),Ki&&r&&xi(r,"arity")&&e.length!==r.arity&&Yi(e,"length",{value:r.arity});try{r&&xi(r,"constructor")&&r.constructor?Ui&&Yi(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var i=Gi(e);return xi(i,"source")||(i.source=Xi(zi,"string"==typeof t?t:"")),e};Function.prototype.toString=qi((function(){return Li(this)&&ji(this).source||Vi(this)}),"toString");var Zi=ye,$i=Qe,en=Ti,tn=O,rn=function(e,t,r,i){i||(i={});var n=i.enumerable,o=void 0!==i.name?i.name:t;if(Zi(r)&&en(r,o,i),i.global)n?e[t]=r:tn(t,r);else{try{i.unsafe?e[t]&&(n=!0):delete e[t]}catch(e){}n?e[t]=r:$i.f(e,t,{value:r,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e},nn={},on=rr,an=ir.concat("length","prototype");nn.f=Object.getOwnPropertyNames||function(e){return on(e,an)};var sn={};sn.f=Object.getOwnPropertySymbols;var cn,An,ln,un=He,dn=nn,hn=sn,gn=Re,pn=c([].concat),fn=un("Reflect","ownKeys")||function(e){var t=dn.f(gn(e)),r=hn.f;return r?pn(t,r(e)):t},mn=Y,En=fn,In=Ai,_n=Qe,Cn=function(e,t,r){for(var i=En(t),n=_n.f,o=In.f,a=0;a<i.length;a++){var s=i[a];mn(e,s)||r&&mn(r,s)||n(e,s,o(t,s))}},yn=t,Tn=ye,vn=/#|\.prototype\./,wn=function(e,t){var r=bn[Sn(e)];return r===Dn||r!==Rn&&(Tn(t)?yn(t):!!t)},Sn=wn.normalize=function(e){return String(e).replace(vn,".").toLowerCase()},bn=wn.data={},Rn=wn.NATIVE="N",Dn=wn.POLYFILL="P",Bn=wn,On=S,Qn=Ai.f,kn=Xr,Mn=rn,Pn=O,Nn=Cn,Ln=Bn,xn=function(e,t){var r,i,n,o,a,s=e.target,c=e.global,A=e.stat;if(r=c?On:A?On[s]||Pn(s,{}):On[s]&&On[s].prototype)for(i in t){if(o=t[i],n=e.dontCallGetSet?(a=Qn(r,i))&&a.value:r[i],!Ln(c?i:s+(A?".":"#")+i,e.forced)&&void 0!==n){if(typeof o==typeof n)continue;Nn(o,n)}(e.sham||n&&n.sham)&&kn(o,"sham",!0),Mn(r,i,o,e)}},Un=!t((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Fn=Y,Vn=ye,Gn=G,jn=Un,Hn=mr("IE_PROTO"),Yn=Object,Wn=Yn.prototype,Jn=jn?Yn.getPrototypeOf:function(e){var t=Gn(e);if(Fn(t,Hn))return t[Hn];var r=t.constructor;return Vn(r)&&t instanceof r?r.prototype:t instanceof Yn?Wn:null},Xn=t,Kn=ye,zn=ve,qn=Jn,Zn=rn,$n=_e("iterator"),eo=!1;[].keys&&("next"in(ln=[].keys())?(An=qn(qn(ln)))!==Object.prototype&&(cn=An):eo=!0);var to=!zn(cn)||Xn((function(){var e={};return cn[$n].call(e)!==e}));to&&(cn={}),Kn(cn[$n])||Zn(cn,$n,(function(){return this}));var ro={IteratorPrototype:cn,BUGGY_SAFARI_ITERATORS:eo},io=Qe.f,no=Y,oo=_e("toStringTag"),ao=function(e,t,r){e&&!r&&(e=e.prototype),e&&!no(e,oo)&&io(e,oo,{configurable:!0,value:t})},so=ro.IteratorPrototype,co=Or,Ao=Yr,lo=ao,uo=Vr,ho=function(){return this},go=function(e,t,r,i){var n=t+" Iterator";return e.prototype=co(so,{next:Ao(+!i,r)}),lo(e,n,!1),uo[n]=ho,e},po=c,fo=rt,mo=ve,Eo=String,Io=TypeError,_o=ve,Co=C,yo=function(e){if(function(e){return mo(e)||null===e}(e))return e;throw new Io("Can't set "+Eo(e)+" as a prototype")},To=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=function(e,t,r){try{return po(fo(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return Co(r),yo(i),_o(r)?(t?e(r,i):r.__proto__=i,r):r}}():void 0),vo=xn,wo=Ve,So=ye,bo=go,Ro=Jn,Do=To,Bo=ao,Oo=Xr,Qo=rn,ko=Vr,Mo=Bi.PROPER,Po=Bi.CONFIGURABLE,No=ro.IteratorPrototype,Lo=ro.BUGGY_SAFARI_ITERATORS,xo=_e("iterator"),Uo="keys",Fo="values",Vo="entries",Go=function(){return this},jo=function(e,t,r,i,n,o,a){bo(r,t,i);var s,c,A,l=function(e){if(e===n&&p)return p;if(!Lo&&e&&e in h)return h[e];switch(e){case Uo:case Fo:case Vo:return function(){return new r(this,e)}}return function(){return new r(this)}},u=t+" Iterator",d=!1,h=e.prototype,g=h[xo]||h["@@iterator"]||n&&h[n],p=!Lo&&g||l(n),f="Array"===t&&h.entries||g;if(f&&(s=Ro(f.call(new e)))!==Object.prototype&&s.next&&(Ro(s)!==No&&(Do?Do(s,No):So(s[xo])||Qo(s,xo,Go)),Bo(s,u,!0)),Mo&&n===Fo&&g&&g.name!==Fo&&(Po?Oo(h,"name",Fo):(d=!0,p=function(){return wo(g,this)})),n)if(c={values:l(Fo),keys:o?p:l(Uo),entries:l(Vo)},a)for(A in c)(Lo||d||!(A in h))&&Qo(h,A,c[A]);else vo({target:t,proto:!0,forced:Lo||d},c);return h[xo]!==p&&Qo(h,xo,p,{name:n}),ko[t]=p,c},Ho=function(e,t){return{value:e,done:t}},Yo=v,Wo=Fr,Jo=Vr,Xo=ci,Ko=Qe.f,zo=jo,qo=Ho,Zo=Be,$o="Array Iterator",ea=Xo.set,ta=Xo.getterFor($o),ra=zo(Array,"Array",(function(e,t){ea(this,{type:$o,target:Yo(e),index:0,kind:t})}),(function(){var e=ta(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,qo(void 0,!0);switch(e.kind){case"keys":return qo(r,!1);case"values":return qo(t[r],!1)}return qo([r,t[r]],!1)}),"values"),ia=Jo.Arguments=Jo.Array;if(Wo("keys"),Wo("values"),Wo("entries"),Zo&&"values"!==ia.name)try{Ko(ia,"name",{value:"values"})}catch(e){}var na={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},oa=Ne("span").classList,aa=oa&&oa.constructor&&oa.constructor.prototype,sa=aa===Object.prototype?void 0:aa,ca=S,Aa=na,la=sa,ua=ra,da=Xr,ha=ao,ga=_e("iterator"),pa=ua.values,fa=function(e,t){if(e){if(e[ga]!==pa)try{da(e,ga,pa)}catch(t){e[ga]=pa}if(ha(e,t,!0),Aa[t])for(var r in ua)if(e[r]!==ua[r])try{da(e,r,ua[r])}catch(t){e[r]=ua[r]}}};for(var ma in Aa)fa(ca[ma]&&ca[ma].prototype,ma);fa(la,"DOMTokenList");var Ea=S,Ia=$,_a=d,Ca=function(e){return Ia.slice(0,e.length)===e},ya=Ca("Bun/")?"BUN":Ca("Cloudflare-Workers")?"CLOUDFLARE":Ca("Deno/")?"DENO":Ca("Node.js/")?"NODE":Ea.Bun&&"string"==typeof Bun.version?"BUN":Ea.Deno&&"object"==typeof Deno.version?"DENO":"process"===_a(Ea.process)?"NODE":Ea.window&&Ea.document?"BROWSER":"REST",Ta="NODE"===ya,va=Ti,wa=Qe,Sa=function(e,t,r){return r.get&&va(r.get,t,{getter:!0}),r.set&&va(r.set,t,{setter:!0}),wa.f(e,t,r)},ba=He,Ra=Sa,Da=Be,Ba=_e("species"),Oa=function(e){var t=ba(e);Da&&t&&!t[Ba]&&Ra(t,Ba,{configurable:!0,get:function(){return this}})},Qa=Ye,ka=TypeError,Ma=function(e,t){if(Qa(t,e))return e;throw new ka("Incorrect invocation")},Pa={};Pa[_e("toStringTag")]="z";var Na="[object z]"===String(Pa),La=ye,xa=d,Ua=_e("toStringTag"),Fa=Object,Va="Arguments"===xa(function(){return arguments}()),Ga=Na?xa:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Fa(e),Ua))?r:Va?xa(t):"Object"===(i=xa(t))&&La(t.callee)?"Arguments":i},ja=c,Ha=t,Ya=ye,Wa=Ga,Ja=Mi,Xa=function(){},Ka=He("Reflect","construct"),za=/^\s*(?:class|function)\b/,qa=ja(za.exec),Za=!za.test(Xa),$a=function(e){if(!Ya(e))return!1;try{return Ka(Xa,[],e),!0}catch(e){return!1}},es=function(e){if(!Ya(e))return!1;switch(Wa(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Za||!!qa(za,Ja(e))}catch(e){return!0}};es.sham=!0;var ts,rs,is,ns,os=!Ka||Ha((function(){var e;return $a($a.call)||!$a(Object)||!$a((function(){e=!0}))||e}))?es:$a,as=os,ss=Ze,cs=TypeError,As=function(e){if(as(e))return e;throw new cs(ss(e)+" is not a constructor")},ls=Re,us=As,ds=E,hs=_e("species"),gs=function(e,t){var r,i=ls(e).constructor;return void 0===i||ds(r=ls(i)[hs])?t:us(r)},ps=i,fs=Function.prototype,ms=fs.apply,Es=fs.call,Is="object"==typeof Reflect&&Reflect.apply||(ps?Es.bind(ms):function(){return Es.apply(ms,arguments)}),_s=d,Cs=c,ys=function(e){if("Function"===_s(e))return Cs(e)},Ts=rt,vs=i,ws=ys(ys.bind),Ss=function(e,t){return Ts(e),void 0===t?e:vs?ws(e,t):function(){return e.apply(t,arguments)}},bs=c([].slice),Rs=TypeError,Ds=function(e,t){if(e<t)throw new Rs("Not enough arguments");return e},Bs=/(?:ipad|iphone|ipod).*applewebkit/i.test($),Os=S,Qs=Is,ks=Ss,Ms=ye,Ps=Y,Ns=t,Ls=gr,xs=bs,Us=Ne,Fs=Ds,Vs=Bs,Gs=Ta,js=Os.setImmediate,Hs=Os.clearImmediate,Ys=Os.process,Ws=Os.Dispatch,Js=Os.Function,Xs=Os.MessageChannel,Ks=Os.String,zs=0,qs={},Zs="onreadystatechange";Ns((function(){ts=Os.location}));var $s=function(e){if(Ps(qs,e)){var t=qs[e];delete qs[e],t()}},ec=function(e){return function(){$s(e)}},tc=function(e){$s(e.data)},rc=function(e){Os.postMessage(Ks(e),ts.protocol+"//"+ts.host)};js&&Hs||(js=function(e){Fs(arguments.length,1);var t=Ms(e)?e:Js(e),r=xs(arguments,1);return qs[++zs]=function(){Qs(t,void 0,r)},rs(zs),zs},Hs=function(e){delete qs[e]},Gs?rs=function(e){Ys.nextTick(ec(e))}:Ws&&Ws.now?rs=function(e){Ws.now(ec(e))}:Xs&&!Vs?(ns=(is=new Xs).port2,is.port1.onmessage=tc,rs=ks(ns.postMessage,ns)):Os.addEventListener&&Ms(Os.postMessage)&&!Os.importScripts&&ts&&"file:"!==ts.protocol&&!Ns(rc)?(rs=rc,Os.addEventListener("message",tc,!1)):rs=Zs in Us("script")?function(e){Ls.appendChild(Us("script"))[Zs]=function(){Ls.removeChild(this),$s(e)}}:function(e){setTimeout(ec(e),0)});var ic={set:js,clear:Hs},nc=S,oc=Be,ac=Object.getOwnPropertyDescriptor,sc=function(e){if(!oc)return nc[e];var t=ac(nc,e);return t&&t.value},cc=function(){this.head=null,this.tail=null};cc.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var Ac,lc,uc,dc,hc,gc=cc,pc=/ipad|iphone|ipod/i.test($)&&"undefined"!=typeof Pebble,fc=/web0s(?!.*chrome)/i.test($),mc=S,Ec=sc,Ic=Ss,_c=ic.set,Cc=gc,yc=Bs,Tc=pc,vc=fc,wc=Ta,Sc=mc.MutationObserver||mc.WebKitMutationObserver,bc=mc.document,Rc=mc.process,Dc=mc.Promise,Bc=Ec("queueMicrotask");if(!Bc){var Oc=new Cc,Qc=function(){var e,t;for(wc&&(e=Rc.domain)&&e.exit();t=Oc.get();)try{t()}catch(e){throw Oc.head&&Ac(),e}e&&e.enter()};yc||wc||vc||!Sc||!bc?!Tc&&Dc&&Dc.resolve?((dc=Dc.resolve(void 0)).constructor=Dc,hc=Ic(dc.then,dc),Ac=function(){hc(Qc)}):wc?Ac=function(){Rc.nextTick(Qc)}:(_c=Ic(_c,mc),Ac=function(){_c(Qc)}):(lc=!0,uc=bc.createTextNode(""),new Sc(Qc).observe(uc,{characterData:!0}),Ac=function(){uc.data=lc=!lc}),Bc=function(e){Oc.head||Ac(),Oc.add(e)}}var kc=Bc,Mc=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Pc=S.Promise,Nc=S,Lc=Pc,xc=ye,Uc=Bn,Fc=Mi,Vc=_e,Gc=ya,jc=ae;Lc&&Lc.prototype;var Hc=Vc("species"),Yc=!1,Wc=xc(Nc.PromiseRejectionEvent),Jc=Uc("Promise",(function(){var e=Fc(Lc),t=e!==String(Lc);if(!t&&66===jc)return!0;if(!jc||jc<51||!/native code/.test(e)){var r=new Lc((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};if((r.constructor={})[Hc]=i,!(Yc=r.then((function(){}))instanceof i))return!0}return!(t||"BROWSER"!==Gc&&"DENO"!==Gc||Wc)})),Xc={CONSTRUCTOR:Jc,REJECTION_EVENT:Wc,SUBCLASSING:Yc},Kc={},zc=rt,qc=TypeError,Zc=function(e){var t,r;this.promise=new e((function(e,i){if(void 0!==t||void 0!==r)throw new qc("Bad Promise constructor");t=e,r=i})),this.resolve=zc(t),this.reject=zc(r)};Kc.f=function(e){return new Zc(e)};var $c,eA,tA,rA=xn,iA=Ta,nA=S,oA=Ve,aA=rn,sA=To,cA=ao,AA=Oa,lA=rt,uA=ye,dA=ve,hA=Ma,gA=gs,pA=ic.set,fA=kc,mA=Mc,EA=gc,IA=ci,_A=Pc,CA=Kc,yA="Promise",TA=Xc.CONSTRUCTOR,vA=Xc.REJECTION_EVENT,wA=Xc.SUBCLASSING,SA=IA.getterFor(yA),bA=IA.set,RA=_A&&_A.prototype,DA=_A,BA=RA,OA=nA.TypeError,QA=nA.document,kA=nA.process,MA=CA.f,PA=MA,NA=!!(QA&&QA.createEvent&&nA.dispatchEvent),LA="unhandledrejection",xA=function(e){var t;return!(!dA(e)||!uA(t=e.then))&&t},UA=function(e,t){var r,i,n,o=t.value,a=1===t.state,s=a?e.ok:e.fail,c=e.resolve,A=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&HA(t),t.rejection=1),!0===s?r=o:(l&&l.enter(),r=s(o),l&&(l.exit(),n=!0)),r===e.promise?A(new OA("Promise-chain cycle")):(i=xA(r))?oA(i,r,c,A):c(r)):A(o)}catch(e){l&&!n&&l.exit(),A(e)}},FA=function(e,t){e.notified||(e.notified=!0,fA((function(){for(var r,i=e.reactions;r=i.get();)UA(r,e);e.notified=!1,t&&!e.rejection&&GA(e)})))},VA=function(e,t,r){var i,n;NA?((i=QA.createEvent("Event")).promise=t,i.reason=r,i.initEvent(e,!1,!0),nA.dispatchEvent(i)):i={promise:t,reason:r},!vA&&(n=nA["on"+e])?n(i):e===LA&&function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}("Unhandled promise rejection",r)},GA=function(e){oA(pA,nA,(function(){var t,r=e.facade,i=e.value;if(jA(e)&&(t=mA((function(){iA?kA.emit("unhandledRejection",i,r):VA(LA,r,i)})),e.rejection=iA||jA(e)?2:1,t.error))throw t.value}))},jA=function(e){return 1!==e.rejection&&!e.parent},HA=function(e){oA(pA,nA,(function(){var t=e.facade;iA?kA.emit("rejectionHandled",t):VA("rejectionhandled",t,e.value)}))},YA=function(e,t,r){return function(i){e(t,i,r)}},WA=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,FA(e,!0))},JA=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new OA("Promise can't be resolved itself");var i=xA(t);i?fA((function(){var r={done:!1};try{oA(i,t,YA(JA,r,e),YA(WA,r,e))}catch(t){WA(r,t,e)}})):(e.value=t,e.state=1,FA(e,!1))}catch(t){WA({done:!1},t,e)}}};if(TA&&(BA=(DA=function(e){hA(this,BA),lA(e),oA($c,this);var t=SA(this);try{e(YA(JA,t),YA(WA,t))}catch(e){WA(t,e)}}).prototype,($c=function(e){bA(this,{type:yA,done:!1,notified:!1,parent:!1,reactions:new EA,rejection:!1,state:0,value:null})}).prototype=aA(BA,"then",(function(e,t){var r=SA(this),i=MA(gA(this,DA));return r.parent=!0,i.ok=!uA(e)||e,i.fail=uA(t)&&t,i.domain=iA?kA.domain:void 0,0===r.state?r.reactions.add(i):fA((function(){UA(i,r)})),i.promise})),eA=function(){var e=new $c,t=SA(e);this.promise=e,this.resolve=YA(JA,t),this.reject=YA(WA,t)},CA.f=MA=function(e){return e===DA||void 0===e?new eA(e):PA(e)},uA(_A)&&RA!==Object.prototype)){tA=RA.then,wA||aA(RA,"then",(function(e,t){var r=this;return new DA((function(e,t){oA(tA,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete RA.constructor}catch(e){}sA&&sA(RA,BA)}rA({global:!0,constructor:!0,wrap:!0,forced:TA},{Promise:DA}),cA(DA,yA,!1),AA(yA);var XA=Vr,KA=_e("iterator"),zA=Array.prototype,qA=function(e){return void 0!==e&&(XA.Array===e||zA[KA]===e)},ZA=Ga,$A=ot,el=E,tl=Vr,rl=_e("iterator"),il=function(e){if(!el(e))return $A(e,rl)||$A(e,"@@iterator")||tl[ZA(e)]},nl=Ve,ol=rt,al=Re,sl=Ze,cl=il,Al=TypeError,ll=function(e,t){var r=arguments.length<2?cl(e):t;if(ol(r))return al(nl(r,e));throw new Al(sl(e)+" is not iterable")},ul=Ve,dl=Re,hl=ot,gl=function(e,t,r){var i,n;dl(e);try{if(!(i=hl(e,"return"))){if("throw"===t)throw r;return r}i=ul(i,e)}catch(e){n=!0,i=e}if("throw"===t)throw r;if(n)throw i;return dl(i),r},pl=Ss,fl=Ve,ml=Re,El=Ze,Il=qA,_l=Ht,Cl=Ye,yl=ll,Tl=il,vl=gl,wl=TypeError,Sl=function(e,t){this.stopped=e,this.result=t},bl=Sl.prototype,Rl=function(e,t,r){var i,n,o,a,s,c,A,l=r&&r.that,u=!(!r||!r.AS_ENTRIES),d=!(!r||!r.IS_RECORD),h=!(!r||!r.IS_ITERATOR),g=!(!r||!r.INTERRUPTED),p=pl(t,l),f=function(e){return i&&vl(i,"normal",e),new Sl(!0,e)},m=function(e){return u?(ml(e),g?p(e[0],e[1],f):p(e[0],e[1])):g?p(e,f):p(e)};if(d)i=e.iterator;else if(h)i=e;else{if(!(n=Tl(e)))throw new wl(El(e)+" is not iterable");if(Il(n)){for(o=0,a=_l(e);a>o;o++)if((s=m(e[o]))&&Cl(bl,s))return s;return new Sl(!1)}i=yl(e,n)}for(c=d?e.next:i.next;!(A=fl(c,i)).done;){try{s=m(A.value)}catch(e){vl(i,"throw",e)}if("object"==typeof s&&s&&Cl(bl,s))return s}return new Sl(!1)},Dl=_e("iterator"),Bl=!1;try{var Ol=0,Ql={next:function(){return{done:!!Ol++}},return:function(){Bl=!0}};Ql[Dl]=function(){return this},Array.from(Ql,(function(){throw 2}))}catch(e){}var kl=function(e,t){try{if(!t&&!Bl)return!1}catch(e){return!1}var r=!1;try{var i={};i[Dl]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r},Ml=Pc,Pl=Xc.CONSTRUCTOR||!kl((function(e){Ml.all(e).then(void 0,(function(){}))})),Nl=Ve,Ll=rt,xl=Kc,Ul=Mc,Fl=Rl;xn({target:"Promise",stat:!0,forced:Pl},{all:function(e){var t=this,r=xl.f(t),i=r.resolve,n=r.reject,o=Ul((function(){var r=Ll(t.resolve),o=[],a=0,s=1;Fl(e,(function(e){var c=a++,A=!1;s++,Nl(r,t,e).then((function(e){A||(A=!0,o[c]=e,--s||i(o))}),n)})),--s||i(o)}));return o.error&&n(o.value),r.promise}});var Vl=xn,Gl=Xc.CONSTRUCTOR,jl=Pc,Hl=He,Yl=ye,Wl=rn,Jl=jl&&jl.prototype;if(Vl({target:"Promise",proto:!0,forced:Gl,real:!0},{catch:function(e){return this.then(void 0,e)}}),Yl(jl)){var Xl=Hl("Promise").prototype.catch;Jl.catch!==Xl&&Wl(Jl,"catch",Xl,{unsafe:!0})}var Kl=Ve,zl=rt,ql=Kc,Zl=Mc,$l=Rl;xn({target:"Promise",stat:!0,forced:Pl},{race:function(e){var t=this,r=ql.f(t),i=r.reject,n=Zl((function(){var n=zl(t.resolve);$l(e,(function(e){Kl(n,t,e).then(r.resolve,i)}))}));return n.error&&i(n.value),r.promise}});var eu=Kc;xn({target:"Promise",stat:!0,forced:Xc.CONSTRUCTOR},{reject:function(e){var t=eu.f(this);return(0,t.reject)(e),t.promise}});var tu=Re,ru=ve,iu=Kc,nu=function(e,t){if(tu(e),ru(t)&&t.constructor===e)return t;var r=iu.f(e);return(0,r.resolve)(t),r.promise},ou=xn,au=Xc.CONSTRUCTOR,su=nu;He("Promise"),ou({target:"Promise",stat:!0,forced:au},{resolve:function(e){return su(this,e)}});var cu=ye,Au=ve,lu=To,uu=function(e,t,r){var i,n;return lu&&cu(i=t.constructor)&&i!==r&&Au(n=i.prototype)&&n!==r.prototype&&lu(e,n),e},du=ve,hu=d,gu=_e("match"),pu=Ga,fu=String,mu=function(e){if("Symbol"===pu(e))throw new TypeError("Cannot convert a Symbol value to a string");return fu(e)},Eu=Re,Iu=function(){var e=Eu(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},_u=Ve,Cu=Y,yu=Ye,Tu=Iu,vu=RegExp.prototype,wu=t,Su=S.RegExp,bu=wu((function(){var e=Su("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),Ru=bu||wu((function(){return!Su("a","y").sticky})),Du=bu||wu((function(){var e=Su("^r","gy");return e.lastIndex=2,null!==e.exec("str")})),Bu={BROKEN_CARET:Du,MISSED_STICKY:Ru,UNSUPPORTED_Y:bu},Ou=Qe.f,Qu=t,ku=S.RegExp,Mu=Qu((function(){var e=ku(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)})),Pu=t,Nu=S.RegExp,Lu=Pu((function(){var e=Nu("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),xu=Be,Uu=S,Fu=c,Vu=Bn,Gu=uu,ju=Xr,Hu=Or,Yu=nn.f,Wu=Ye,Ju=mu,Xu=Bu,Ku=function(e,t,r){r in e||Ou(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})},zu=rn,qu=t,Zu=Y,$u=ci.enforce,ed=Oa,td=Mu,rd=Lu,id=_e("match"),nd=Uu.RegExp,od=nd.prototype,ad=Uu.SyntaxError,sd=Fu(od.exec),cd=Fu("".charAt),Ad=Fu("".replace),ld=Fu("".indexOf),ud=Fu("".slice),dd=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,hd=/a/g,gd=/a/g,pd=new nd(hd)!==hd,fd=Xu.MISSED_STICKY,md=Xu.UNSUPPORTED_Y;if(Vu("RegExp",xu&&(!pd||fd||td||rd||qu((function(){return gd[id]=!1,nd(hd)!==hd||nd(gd)===gd||"/a/i"!==String(nd(hd,"i"))}))))){for(var Ed=function(e,t){var r,i,n,o,a,s,c=Wu(od,this),A=function(e){var t;return du(e)&&(void 0!==(t=e[gu])?!!t:"RegExp"===hu(e))}(e),l=void 0===t,u=[],d=e;if(!c&&A&&l&&e.constructor===Ed)return e;if((A||Wu(od,e))&&(e=e.source,l&&(t=function(e){var t=e.flags;return void 0!==t||"flags"in vu||Cu(e,"flags")||!yu(vu,e)?t:_u(Tu,e)}(d))),e=void 0===e?"":Ju(e),t=void 0===t?"":Ju(t),d=e,td&&"dotAll"in hd&&(i=!!t&&ld(t,"s")>-1)&&(t=Ad(t,/s/g,"")),r=t,fd&&"sticky"in hd&&(n=!!t&&ld(t,"y")>-1)&&md&&(t=Ad(t,/y/g,"")),rd&&(o=function(e){for(var t,r=e.length,i=0,n="",o=[],a=Hu(null),s=!1,c=!1,A=0,l="";i<=r;i++){if("\\"===(t=cd(e,i)))t+=cd(e,++i);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:if(n+=t,"?:"===ud(e,i+1,i+3))continue;sd(dd,ud(e,i+1))&&(i+=2,c=!0),A++;continue;case">"===t&&c:if(""===l||Zu(a,l))throw new ad("Invalid capture group name");a[l]=!0,o[o.length]=[l,A],c=!1,l="";continue}c?l+=t:n+=t}return[n,o]}(e),e=o[0],u=o[1]),a=Gu(nd(e,t),c?this:od,Ed),(i||n||u.length)&&(s=$u(a),i&&(s.dotAll=!0,s.raw=Ed(function(e){for(var t,r=e.length,i=0,n="",o=!1;i<=r;i++)"\\"!==(t=cd(e,i))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),n+=t):n+="[\\s\\S]":n+=t+cd(e,++i);return n}(e),r)),n&&(s.sticky=!0),u.length&&(s.groups=u)),e!==d)try{ju(a,"source",""===d?"(?:)":d)}catch(e){}return a},Id=Yu(nd),_d=0;Id.length>_d;)Ku(Ed,nd,Id[_d++]);od.constructor=Ed,Ed.prototype=od,zu(Uu,"RegExp",Ed,{constructor:!0})}ed("RegExp");var Cd=Ve,yd=c,Td=mu,vd=Iu,wd=Bu,Sd=Or,bd=ci.get,Rd=Mu,Dd=Lu,Bd=U("native-string-replace",String.prototype.replace),Od=RegExp.prototype.exec,Qd=Od,kd=yd("".charAt),Md=yd("".indexOf),Pd=yd("".replace),Nd=yd("".slice),Ld=function(){var e=/a/,t=/b*/g;return Cd(Od,e,"a"),Cd(Od,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),xd=wd.BROKEN_CARET,Ud=void 0!==/()??/.exec("")[1];(Ld||Ud||xd||Rd||Dd)&&(Qd=function(e){var t,r,i,n,o,a,s,c=this,A=bd(c),l=Td(e),u=A.raw;if(u)return u.lastIndex=c.lastIndex,t=Cd(Qd,u,l),c.lastIndex=u.lastIndex,t;var d=A.groups,h=xd&&c.sticky,g=Cd(vd,c),p=c.source,f=0,m=l;if(h&&(g=Pd(g,"y",""),-1===Md(g,"g")&&(g+="g"),m=Nd(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==kd(l,c.lastIndex-1))&&(p="(?: "+p+")",m=" "+m,f++),r=new RegExp("^(?:"+p+")",g)),Ud&&(r=new RegExp("^"+p+"$(?!\\s)",g)),Ld&&(i=c.lastIndex),n=Cd(Od,h?r:c,m),h?n?(n.input=Nd(n.input,f),n[0]=Nd(n[0],f),n.index=c.lastIndex,c.lastIndex+=n[0].length):c.lastIndex=0:Ld&&n&&(c.lastIndex=c.global?n.index+n[0].length:i),Ud&&n&&n.length>1&&Cd(Bd,n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n&&d)for(n.groups=a=Sd(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=n[s[1]];return n});var Fd=Qd;xn({target:"RegExp",proto:!0,forced:/./.exec!==Fd},{exec:Fd});var Vd=d,Gd=Array.isArray||function(e){return"Array"===Vd(e)},jd=Gd,Hd=os,Yd=ve,Wd=_e("species"),Jd=Array,Xd=Ss,Kd=m,zd=G,qd=Ht,Zd=function(e,t){return new(function(e){var t;return jd(e)&&(t=e.constructor,(Hd(t)&&(t===Jd||jd(t.prototype))||Yd(t)&&null===(t=t[Wd]))&&(t=void 0)),void 0===t?Jd:t}(e))(0===t?0:t)},$d=c([].push),eh=function(e){var t=1===e,r=2===e,i=3===e,n=4===e,o=6===e,a=7===e,s=5===e||o;return function(c,A,l,u){for(var d,h,g=zd(c),p=Kd(g),f=qd(p),m=Xd(A,l),E=0,I=u||Zd,_=t?I(c,f):r||a?I(c,0):void 0;f>E;E++)if((s||E in p)&&(h=m(d=p[E],E,g),e))if(t)_[E]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return E;case 2:$d(_,d)}else switch(e){case 4:return!1;case 7:$d(_,d)}return o?-1:i||n?n:_}},th={forEach:eh(0),map:eh(1),filter:eh(2),some:eh(3),every:eh(4),find:eh(5),findIndex:eh(6),filterReject:eh(7)},rh=t,ih=function(e,t){var r=[][e];return!!r&&rh((function(){r.call(null,t||function(){return 1},1)}))},nh=th.forEach,oh=ih("forEach")?[].forEach:function(e){return nh(this,e,arguments.length>1?arguments[1]:void 0)},ah=S,sh=na,ch=sa,Ah=oh,lh=Xr,uh=function(e){if(e&&e.forEach!==Ah)try{lh(e,"forEach",Ah)}catch(t){e.forEach=Ah}};for(var dh in sh)sh[dh]&&uh(ah[dh]&&ah[dh].prototype);uh(ch);var hh=rt,gh=G,ph=m,fh=Ht,mh=TypeError,Eh="Reduce of empty array with no initial value",Ih=function(e){return function(t,r,i,n){var o=gh(t),a=ph(o),s=fh(o);if(hh(r),0===s&&i<2)throw new mh(Eh);var c=e?s-1:0,A=e?-1:1;if(i<2)for(;;){if(c in a){n=a[c],c+=A;break}if(c+=A,e?c<0:s<=c)throw new mh(Eh)}for(;e?c>=0:s>c;c+=A)c in a&&(n=r(n,a[c],c,o));return n}},_h={left:Ih(!1),right:Ih(!0)},Ch=_h.left;xn({target:"Array",proto:!0,forced:!Ta&&ae>79&&ae<83||!ih("reduce")},{reduce:function(e){var t=arguments.length;return Ch(this,e,t,t>1?arguments[1]:void 0)}});var yh=Ve,Th=rn,vh=Fd,wh=t,Sh=_e,bh=Xr,Rh=Sh("species"),Dh=RegExp.prototype,Bh=c,Oh=Pt,Qh=mu,kh=C,Mh=Bh("".charAt),Ph=Bh("".charCodeAt),Nh=Bh("".slice),Lh=function(e){return function(t,r){var i,n,o=Qh(kh(t)),a=Oh(r),s=o.length;return a<0||a>=s?e?"":void 0:(i=Ph(o,a))<55296||i>56319||a+1===s||(n=Ph(o,a+1))<56320||n>57343?e?Mh(o,a):i:e?Nh(o,a,a+2):n-56320+(i-55296<<10)+65536}},xh={codeAt:Lh(!1),charAt:Lh(!0)},Uh=xh.charAt,Fh=c,Vh=G,Gh=Math.floor,jh=Fh("".charAt),Hh=Fh("".replace),Yh=Fh("".slice),Wh=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Jh=/\$([$&'`]|\d{1,2})/g,Xh=Ve,Kh=Re,zh=ye,qh=d,Zh=Fd,$h=TypeError,eg=Is,tg=Ve,rg=c,ig=t,ng=Re,og=ye,ag=E,sg=Pt,cg=Gt,Ag=mu,lg=C,ug=function(e,t,r){return t+(r?Uh(e,t).length:1)},dg=ot,hg=function(e,t,r,i,n,o){var a=r+e.length,s=i.length,c=Jh;return void 0!==n&&(n=Vh(n),c=Wh),Hh(o,c,(function(o,c){var A;switch(jh(c,0)){case"$":return"$";case"&":return e;case"`":return Yh(t,0,r);case"'":return Yh(t,a);case"<":A=n[Yh(c,1,-1)];break;default:var l=+c;if(0===l)return o;if(l>s){var u=Gh(l/10);return 0===u?o:u<=s?void 0===i[u-1]?jh(c,1):i[u-1]+jh(c,1):o}A=i[l-1]}return void 0===A?"":A}))},gg=function(e,t){var r=e.exec;if(zh(r)){var i=Xh(r,e,t);return null!==i&&Kh(i),i}if("RegExp"===qh(e))return Xh(Zh,e,t);throw new $h("RegExp#exec called on incompatible receiver")},pg=_e("replace"),fg=Math.max,mg=Math.min,Eg=rg([].concat),Ig=rg([].push),_g=rg("".indexOf),Cg=rg("".slice),yg=function(e){return void 0===e?e:String(e)},Tg="$0"==="a".replace(/./,"$0"),vg=!!/./[pg]&&""===/./[pg]("a","$0"),wg=!ig((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));!function(e,t,r,i){var n=Sh(e),o=!wh((function(){var t={};return t[n]=function(){return 7},7!==""[e](t)})),a=o&&!wh((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[Rh]=function(){return r},r.flags="",r[n]=/./[n]),r.exec=function(){return t=!0,null},r[n](""),!t}));if(!o||!a||r){var s=/./[n],c=t(n,""[e],(function(e,t,r,i,n){var a=t.exec;return a===vh||a===Dh.exec?o&&!n?{done:!0,value:yh(s,t,r,i)}:{done:!0,value:yh(e,r,t,i)}:{done:!1}}));Th(String.prototype,e,c[0]),Th(Dh,n,c[1])}i&&bh(Dh[n],"sham",!0)}("replace",(function(e,t,r){var i=vg?"$":"$0";return[function(e,r){var i=lg(this),n=ag(e)?void 0:dg(e,pg);return n?tg(n,e,i,r):tg(t,Ag(i),e,r)},function(e,n){var o=ng(this),a=Ag(e);if("string"==typeof n&&-1===_g(n,i)&&-1===_g(n,"$<")){var s=r(t,o,a,n);if(s.done)return s.value}var c=og(n);c||(n=Ag(n));var A,l=o.global;l&&(A=o.unicode,o.lastIndex=0);for(var u,d=[];null!==(u=gg(o,a))&&(Ig(d,u),l);)""===Ag(u[0])&&(o.lastIndex=ug(a,cg(o.lastIndex),A));for(var h="",g=0,p=0;p<d.length;p++){for(var f,m=Ag((u=d[p])[0]),E=fg(mg(sg(u.index),a.length),0),I=[],_=1;_<u.length;_++)Ig(I,yg(u[_]));var C=u.groups;if(c){var y=Eg([m],I,E,a);void 0!==C&&Ig(y,C),f=Ag(eg(n,void 0,y))}else f=hg(m,a,E,I,C,n);E>=g&&(h+=Cg(a,g,E)+f,g=E+m.length)}return h+Cg(a,g)}]}),!wg||!Tg||vg);var Sg=Kt.includes,bg=Fr;xn({target:"Array",proto:!0,forced:t((function(){return!Array(1).includes()}))},{includes:function(e){return Sg(this,e,arguments.length>1?arguments[1]:void 0)}}),bg("includes");var Rg=Pt,Dg=mu,Bg=C,Og=RangeError,Qg=c,kg=Gt,Mg=mu,Pg=C,Ng=Qg((function(e){var t=Dg(Bg(this)),r="",i=Rg(e);if(i<0||1/0===i)throw new Og("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r})),Lg=Qg("".slice),xg=Math.ceil,Ug=function(e){return function(t,r,i){var n,o,a=Mg(Pg(t)),s=kg(r),c=a.length,A=void 0===i?" ":Mg(i);return s<=c||""===A?a:((o=Ng(A,xg((n=s-c)/A.length))).length>n&&(o=Lg(o,0,n)),e?a+o:o+a)}},Fg={start:Ug(!1),end:Ug(!0)},Vg=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test($),Gg=Fg.start;xn({target:"String",proto:!0,forced:Vg},{padStart:function(e){return Gg(this,e,arguments.length>1?arguments[1]:void 0)}});var jg=xn,Hg=c,Yg=Ut,Wg=RangeError,Jg=String.fromCharCode,Xg=String.fromCodePoint,Kg=Hg([].join);jg({target:"String",stat:!0,arity:1,forced:!!Xg&&1!==Xg.length},{fromCodePoint:function(e){for(var t,r=[],i=arguments.length,n=0;i>n;){if(t=+arguments[n++],Yg(t,1114111)!==t)throw new Wg(t+" is not a valid code point");r[n]=t<65536?Jg(t):Jg(55296+((t-=65536)>>10),t%1024+56320)}return Kg(r,"")}});var zg=t,qg=Be,Zg=_e("iterator"),$g=!zg((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),i="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),i+=r+e})),r.delete("a",2),r.delete("b",void 0),!t.size&&!qg||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Zg]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==i||"x"!==new URL("https://x",void 0).host})),ep=rn,tp=function(e,t,r){for(var i in t)ep(e,i,t[i],r);return e},rp=bs,ip=Math.floor,np=function(e,t){var r=e.length;if(r<8)for(var i,n,o=1;o<r;){for(n=o,i=e[o];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==o++&&(e[n]=i)}else for(var a=ip(r/2),s=np(rp(e,0,a),t),c=np(rp(e,a),t),A=s.length,l=c.length,u=0,d=0;u<A||d<l;)e[u+d]=u<A&&d<l?t(s[u],c[d])<=0?s[u++]:c[d++]:u<A?s[u++]:c[d++];return e},op=np,ap=xn,sp=S,cp=sc,Ap=He,lp=Ve,up=c,dp=Be,hp=$g,gp=rn,pp=Sa,fp=tp,mp=ao,Ep=go,Ip=ci,_p=Ma,Cp=ye,yp=Y,Tp=Ss,vp=Ga,wp=Re,Sp=ve,bp=mu,Rp=Or,Dp=Yr,Bp=ll,Op=il,Qp=Ho,kp=Ds,Mp=op,Pp=_e("iterator"),Np="URLSearchParams",Lp=Np+"Iterator",xp=Ip.set,Up=Ip.getterFor(Np),Fp=Ip.getterFor(Lp),Vp=cp("fetch"),Gp=cp("Request"),jp=cp("Headers"),Hp=Gp&&Gp.prototype,Yp=jp&&jp.prototype,Wp=sp.TypeError,Jp=sp.encodeURIComponent,Xp=String.fromCharCode,Kp=Ap("String","fromCodePoint"),zp=parseInt,qp=up("".charAt),Zp=up([].join),$p=up([].push),ef=up("".replace),tf=up([].shift),rf=up([].splice),nf=up("".split),of=up("".slice),af=up(/./.exec),sf=/\+/g,cf=/^[0-9a-f]+$/i,Af=function(e,t){var r=of(e,t,t+2);return af(cf,r)?zp(r,16):NaN},lf=function(e){for(var t=0,r=128;r>0&&e&r;r>>=1)t++;return t},uf=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},df=function(e){for(var t=(e=ef(e,sf," ")).length,r="",i=0;i<t;){var n=qp(e,i);if("%"===n){if("%"===qp(e,i+1)||i+3>t){r+="%",i++;continue}var o=Af(e,i+1);if(o!=o){r+=n,i++;continue}i+=2;var a=lf(o);if(0===a)n=Xp(o);else{if(1===a||a>4){r+="�",i++;continue}for(var s=[o],c=1;c<a&&!(3+ ++i>t||"%"!==qp(e,i));){var A=Af(e,i+1);if(A!=A){i+=3;break}if(A>191||A<128)break;$p(s,A),i+=2,c++}if(s.length!==a){r+="�";continue}var l=uf(s);null===l?r+="�":n=Kp(l)}}r+=n,i++}return r},hf=/[!'()~]|%20/g,gf={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},pf=function(e){return gf[e]},ff=function(e){return ef(Jp(e),hf,pf)},mf=Ep((function(e,t){xp(this,{type:Lp,target:Up(e).entries,index:0,kind:t})}),Np,(function(){var e=Fp(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,Qp(void 0,!0);var i=t[r];switch(e.kind){case"keys":return Qp(i.key,!1);case"values":return Qp(i.value,!1)}return Qp([i.key,i.value],!1)}),!0),Ef=function(e){this.entries=[],this.url=null,void 0!==e&&(Sp(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===qp(e,0)?of(e,1):e:bp(e)))};Ef.prototype={type:Np,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,i,n,o,a,s,c=this.entries,A=Op(e);if(A)for(r=(t=Bp(e,A)).next;!(i=lp(r,t)).done;){if(o=(n=Bp(wp(i.value))).next,(a=lp(o,n)).done||(s=lp(o,n)).done||!lp(o,n).done)throw new Wp("Expected sequence with length 2");$p(c,{key:bp(a.value),value:bp(s.value)})}else for(var l in e)yp(e,l)&&$p(c,{key:l,value:bp(e[l])})},parseQuery:function(e){if(e)for(var t,r,i=this.entries,n=nf(e,"&"),o=0;o<n.length;)(t=n[o++]).length&&(r=nf(t,"="),$p(i,{key:df(tf(r)),value:df(Zp(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],i=0;i<t.length;)e=t[i++],$p(r,ff(e.key)+"="+ff(e.value));return Zp(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var If=function(){_p(this,_f);var e=xp(this,new Ef(arguments.length>0?arguments[0]:void 0));dp||(this.size=e.entries.length)},_f=If.prototype;if(fp(_f,{append:function(e,t){var r=Up(this);kp(arguments.length,2),$p(r.entries,{key:bp(e),value:bp(t)}),dp||this.length++,r.updateURL()},delete:function(e){for(var t=Up(this),r=kp(arguments.length,1),i=t.entries,n=bp(e),o=r<2?void 0:arguments[1],a=void 0===o?o:bp(o),s=0;s<i.length;){var c=i[s];if(c.key!==n||void 0!==a&&c.value!==a)s++;else if(rf(i,s,1),void 0!==a)break}dp||(this.size=i.length),t.updateURL()},get:function(e){var t=Up(this).entries;kp(arguments.length,1);for(var r=bp(e),i=0;i<t.length;i++)if(t[i].key===r)return t[i].value;return null},getAll:function(e){var t=Up(this).entries;kp(arguments.length,1);for(var r=bp(e),i=[],n=0;n<t.length;n++)t[n].key===r&&$p(i,t[n].value);return i},has:function(e){for(var t=Up(this).entries,r=kp(arguments.length,1),i=bp(e),n=r<2?void 0:arguments[1],o=void 0===n?n:bp(n),a=0;a<t.length;){var s=t[a++];if(s.key===i&&(void 0===o||s.value===o))return!0}return!1},set:function(e,t){var r=Up(this);kp(arguments.length,1);for(var i,n=r.entries,o=!1,a=bp(e),s=bp(t),c=0;c<n.length;c++)(i=n[c]).key===a&&(o?rf(n,c--,1):(o=!0,i.value=s));o||$p(n,{key:a,value:s}),dp||(this.size=n.length),r.updateURL()},sort:function(){var e=Up(this);Mp(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=Up(this).entries,i=Tp(e,arguments.length>1?arguments[1]:void 0),n=0;n<r.length;)i((t=r[n++]).value,t.key,this)},keys:function(){return new mf(this,"keys")},values:function(){return new mf(this,"values")},entries:function(){return new mf(this,"entries")}},{enumerable:!0}),gp(_f,Pp,_f.entries,{name:"entries"}),gp(_f,"toString",(function(){return Up(this).serialize()}),{enumerable:!0}),dp&&pp(_f,"size",{get:function(){return Up(this).entries.length},configurable:!0,enumerable:!0}),mp(If,Np),ap({global:!0,constructor:!0,forced:!hp},{URLSearchParams:If}),!hp&&Cp(jp)){var Cf=up(Yp.has),yf=up(Yp.set),Tf=function(e){if(Sp(e)){var t,r=e.body;if(vp(r)===Np)return t=e.headers?new jp(e.headers):new jp,Cf(t,"content-type")||yf(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Rp(e,{body:Dp(0,bp(r)),headers:Dp(0,t)})}return e};if(Cp(Vp)&&ap({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return Vp(e,arguments.length>1?Tf(arguments[1]):{})}}),Cp(Gp)){var vf=function(e){return _p(this,Hp),new Gp(e,arguments.length>1?Tf(arguments[1]):{})};Hp.constructor=vf,vf.prototype=Hp,ap({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:vf})}}var wf={URLSearchParams:If,getState:Up},Sf=xn,bf=Pc,Rf=t,Df=He,Bf=ye,Of=gs,Qf=nu,kf=rn,Mf=bf&&bf.prototype;if(Sf({target:"Promise",proto:!0,real:!0,forced:!!bf&&Rf((function(){Mf.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Of(this,Df("Promise")),r=Bf(e);return this.then(r?function(r){return Qf(t,e()).then((function(){return r}))}:e,r?function(r){return Qf(t,e()).then((function(){throw r}))}:e)}}),Bf(bf)){var Pf=Df("Promise").prototype.finally;Mf.finally!==Pf&&kf(Mf,"finally",Pf,{unsafe:!0})}var Nf="\t\n\v\f\r                　\u2028\u2029\ufeff",Lf=C,xf=mu,Uf=Nf,Ff=c("".replace),Vf=RegExp("^["+Uf+"]+"),Gf=RegExp("(^|[^"+Uf+"])["+Uf+"]+$"),jf=function(e){return function(t){var r=xf(Lf(t));return 1&e&&(r=Ff(r,Vf,"")),2&e&&(r=Ff(r,Gf,"$1")),r}},Hf={start:jf(1),end:jf(2),trim:jf(3)},Yf=Bi.PROPER,Wf=t,Jf=Nf,Xf=Hf.trim;xn({target:"String",proto:!0,forced:function(e){return Wf((function(){return!!Jf[e]()||"​᠎"!=="​᠎"[e]()||Yf&&Jf[e].name!==e}))}("trim")},{trim:function(){return Xf(this)}});var Kf="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,zf=Pt,qf=Gt,Zf=RangeError,$f=function(e){if(void 0===e)return 0;var t=zf(e),r=qf(t);if(t!==r)throw new Zf("Wrong length or index");return r},em=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1},tm=em,rm=Math.abs,im=2220446049250313e-31,nm=1/im,om=Math.fround||function(e){return function(e,t,r,i){var n=+e,o=rm(n),a=tm(n);if(o<i)return a*function(e){return e+nm-nm}(o/i/t)*i*t;var s=(1+t/im)*o,c=s-(s-o);return c>r||c!=c?1/0*a:a*c}(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)},am=Array,sm=Math.abs,cm=Math.pow,Am=Math.floor,lm=Math.log,um=Math.LN2,dm={pack:function(e,t,r){var i,n,o,a=am(r),s=8*r-t-1,c=(1<<s)-1,A=c>>1,l=23===t?cm(2,-24)-cm(2,-77):0,u=e<0||0===e&&1/e<0?1:0,d=0;for((e=sm(e))!=e||1/0===e?(n=e!=e?1:0,i=c):(i=Am(lm(e)/um),e*(o=cm(2,-i))<1&&(i--,o*=2),(e+=i+A>=1?l/o:l*cm(2,1-A))*o>=2&&(i++,o/=2),i+A>=c?(n=0,i=c):i+A>=1?(n=(e*o-1)*cm(2,t),i+=A):(n=e*cm(2,A-1)*cm(2,t),i=0));t>=8;)a[d++]=255&n,n/=256,t-=8;for(i=i<<t|n,s+=t;s>0;)a[d++]=255&i,i/=256,s-=8;return a[d-1]|=128*u,a},unpack:function(e,t){var r,i=e.length,n=8*i-t-1,o=(1<<n)-1,a=o>>1,s=n-7,c=i-1,A=e[c--],l=127&A;for(A>>=7;s>0;)l=256*l+e[c--],s-=8;for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)r=256*r+e[c--],s-=8;if(0===l)l=1-a;else{if(l===o)return r?NaN:A?-1/0:1/0;r+=cm(2,t),l-=a}return(A?-1:1)*r*cm(2,l-t)}},hm=G,gm=Ut,pm=Ht,fm=function(e){for(var t=hm(this),r=pm(t),i=arguments.length,n=gm(i>1?arguments[1]:void 0,r),o=i>2?arguments[2]:void 0,a=void 0===o?r:gm(o,r);a>n;)t[n++]=e;return t},mm=S,Em=c,Im=Be,_m=Kf,Cm=Xr,ym=Sa,Tm=tp,vm=t,wm=Ma,Sm=Pt,bm=Gt,Rm=$f,Dm=om,Bm=dm,Om=Jn,Qm=To,km=fm,Mm=bs,Pm=uu,Nm=Cn,Lm=ao,xm=ci,Um=Bi.PROPER,Fm=Bi.CONFIGURABLE,Vm="ArrayBuffer",Gm="DataView",jm="prototype",Hm="Wrong index",Ym=xm.getterFor(Vm),Wm=xm.getterFor(Gm),Jm=xm.set,Xm=mm[Vm],Km=Xm,zm=Km&&Km[jm],qm=mm[Gm],Zm=qm&&qm[jm],$m=Object.prototype,eE=mm.Array,tE=mm.RangeError,rE=Em(km),iE=Em([].reverse),nE=Bm.pack,oE=Bm.unpack,aE=function(e){return[255&e]},sE=function(e){return[255&e,e>>8&255]},cE=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},AE=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},lE=function(e){return nE(Dm(e),23,4)},uE=function(e){return nE(e,52,8)},dE=function(e,t,r){ym(e[jm],t,{configurable:!0,get:function(){return r(this)[t]}})},hE=function(e,t,r,i){var n=Wm(e),o=Rm(r),a=!!i;if(o+t>n.byteLength)throw new tE(Hm);var s=n.bytes,c=o+n.byteOffset,A=Mm(s,c,c+t);return a?A:iE(A)},gE=function(e,t,r,i,n,o){var a=Wm(e),s=Rm(r),c=i(+n),A=!!o;if(s+t>a.byteLength)throw new tE(Hm);for(var l=a.bytes,u=s+a.byteOffset,d=0;d<t;d++)l[u+d]=c[A?d:t-d-1]};if(_m){var pE=Um&&Xm.name!==Vm;vm((function(){Xm(1)}))&&vm((function(){new Xm(-1)}))&&!vm((function(){return new Xm,new Xm(1.5),new Xm(NaN),1!==Xm.length||pE&&!Fm}))?pE&&Fm&&Cm(Xm,"name",Vm):((Km=function(e){return wm(this,zm),Pm(new Xm(Rm(e)),this,Km)})[jm]=zm,zm.constructor=Km,Nm(Km,Xm)),Qm&&Om(Zm)!==$m&&Qm(Zm,$m);var fE=new qm(new Km(2)),mE=Em(Zm.setInt8);fE.setInt8(0,2147483648),fE.setInt8(1,2147483649),!fE.getInt8(0)&&fE.getInt8(1)||Tm(Zm,{setInt8:function(e,t){mE(this,e,t<<24>>24)},setUint8:function(e,t){mE(this,e,t<<24>>24)}},{unsafe:!0})}else zm=(Km=function(e){wm(this,zm);var t=Rm(e);Jm(this,{type:Vm,bytes:rE(eE(t),0),byteLength:t}),Im||(this.byteLength=t,this.detached=!1)})[jm],Zm=(qm=function(e,t,r){wm(this,Zm),wm(e,zm);var i=Ym(e),n=i.byteLength,o=Sm(t);if(o<0||o>n)throw new tE("Wrong offset");if(o+(r=void 0===r?n-o:bm(r))>n)throw new tE("Wrong length");Jm(this,{type:Gm,buffer:e,byteLength:r,byteOffset:o,bytes:i.bytes}),Im||(this.buffer=e,this.byteLength=r,this.byteOffset=o)})[jm],Im&&(dE(Km,"byteLength",Ym),dE(qm,"buffer",Wm),dE(qm,"byteLength",Wm),dE(qm,"byteOffset",Wm)),Tm(Zm,{getInt8:function(e){return hE(this,1,e)[0]<<24>>24},getUint8:function(e){return hE(this,1,e)[0]},getInt16:function(e){var t=hE(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=hE(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return AE(hE(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return AE(hE(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return oE(hE(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return oE(hE(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){gE(this,1,e,aE,t)},setUint8:function(e,t){gE(this,1,e,aE,t)},setInt16:function(e,t){gE(this,2,e,sE,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){gE(this,2,e,sE,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){gE(this,4,e,cE,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){gE(this,4,e,cE,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){gE(this,4,e,lE,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){gE(this,8,e,uE,t,arguments.length>2&&arguments[2])}});Lm(Km,Vm),Lm(qm,Gm);var EE={ArrayBuffer:Km,DataView:qm},IE=xn,_E=ys,CE=t,yE=Re,TE=Ut,vE=Gt,wE=gs,SE=EE.ArrayBuffer,bE=EE.DataView,RE=bE.prototype,DE=_E(SE.prototype.slice),BE=_E(RE.getUint8),OE=_E(RE.setUint8);IE({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:CE((function(){return!new SE(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(DE&&void 0===t)return DE(yE(this),e);for(var r=yE(this).byteLength,i=TE(e,r),n=TE(void 0===t?r:t,r),o=new(wE(this,SE))(vE(n-i)),a=new bE(this),s=new bE(o),c=0;i<n;)OE(s,c++,BE(a,i++));return o}});var QE,kE,ME,PE={},NE={get exports(){return PE},set exports(e){PE=e}},LE=Kf,xE=Be,UE=S,FE=ye,VE=ve,GE=Y,jE=Ga,HE=Ze,YE=Xr,WE=rn,JE=Sa,XE=Ye,KE=Jn,zE=To,qE=_e,ZE=z,$E=ci.enforce,eI=ci.get,tI=UE.Int8Array,rI=tI&&tI.prototype,iI=UE.Uint8ClampedArray,nI=iI&&iI.prototype,oI=tI&&KE(tI),aI=rI&&KE(rI),sI=Object.prototype,cI=UE.TypeError,AI=qE("toStringTag"),lI=ZE("TYPED_ARRAY_TAG"),uI="TypedArrayConstructor",dI=LE&&!!zE&&"Opera"!==jE(UE.opera),hI=!1,gI={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},pI={BigInt64Array:8,BigUint64Array:8},fI=function(e){var t=KE(e);if(VE(t)){var r=eI(t);return r&&GE(r,uI)?r[uI]:fI(t)}},mI=function(e){if(!VE(e))return!1;var t=jE(e);return GE(gI,t)||GE(pI,t)};for(QE in gI)(ME=(kE=UE[QE])&&kE.prototype)?$E(ME)[uI]=kE:dI=!1;for(QE in pI)(ME=(kE=UE[QE])&&kE.prototype)&&($E(ME)[uI]=kE);if((!dI||!FE(oI)||oI===Function.prototype)&&(oI=function(){throw new cI("Incorrect invocation")},dI))for(QE in gI)UE[QE]&&zE(UE[QE],oI);if((!dI||!aI||aI===sI)&&(aI=oI.prototype,dI))for(QE in gI)UE[QE]&&zE(UE[QE].prototype,aI);if(dI&&KE(nI)!==aI&&zE(nI,aI),xE&&!GE(aI,AI))for(QE in hI=!0,JE(aI,AI,{configurable:!0,get:function(){return VE(this)?this[lI]:void 0}}),gI)UE[QE]&&YE(UE[QE],lI,QE);var EI={NATIVE_ARRAY_BUFFER_VIEWS:dI,TYPED_ARRAY_TAG:hI&&lI,aTypedArray:function(e){if(mI(e))return e;throw new cI("Target is not a typed array")},aTypedArrayConstructor:function(e){if(FE(e)&&(!zE||XE(oI,e)))return e;throw new cI(HE(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,i){if(xE){if(r)for(var n in gI){var o=UE[n];if(o&&GE(o.prototype,e))try{delete o.prototype[e]}catch(r){try{o.prototype[e]=t}catch(e){}}}aI[e]&&!r||WE(aI,e,r?t:dI&&rI[e]||t,i)}},exportTypedArrayStaticMethod:function(e,t,r){var i,n;if(xE){if(zE){if(r)for(i in gI)if((n=UE[i])&&GE(n,e))try{delete n[e]}catch(e){}if(oI[e]&&!r)return;try{return WE(oI,e,r?t:dI&&oI[e]||t)}catch(e){}}for(i in gI)!(n=UE[i])||n[e]&&!r||WE(n,e,t)}},getTypedArrayConstructor:fI,isView:function(e){if(!VE(e))return!1;var t=jE(e);return"DataView"===t||GE(gI,t)||GE(pI,t)},isTypedArray:mI,TypedArray:oI,TypedArrayPrototype:aI},II=S,_I=t,CI=kl,yI=EI.NATIVE_ARRAY_BUFFER_VIEWS,TI=II.ArrayBuffer,vI=II.Int8Array,wI=!yI||!_I((function(){vI(1)}))||!_I((function(){new vI(-1)}))||!CI((function(e){new vI,new vI(null),new vI(1.5),new vI(e)}),!0)||_I((function(){return 1!==new vI(new TI(2),1,void 0).length})),SI=ve,bI=Math.floor,RI=Number.isInteger||function(e){return!SI(e)&&isFinite(e)&&bI(e)===e},DI=Pt,BI=RangeError,OI=RangeError,QI=function(e,t){var r=function(e){var t=DI(e);if(t<0)throw new BI("The argument can't be less than 0");return t}(e);if(r%t)throw new OI("Wrong offset");return r},kI=Math.round,MI=Ga,PI=ft,NI=TypeError,LI=function(e){var t=PI(e,"number");if("number"==typeof t)throw new NI("Can't convert number to bigint");return BigInt(t)},xI=Ss,UI=Ve,FI=As,VI=G,GI=Ht,jI=ll,HI=il,YI=qA,WI=EI.aTypedArrayConstructor,JI=LI,XI=function(e){var t,r,i,n,o,a,s,c,A=FI(this),l=VI(e),u=arguments.length,d=u>1?arguments[1]:void 0,h=void 0!==d,g=HI(l);if(g&&!YI(g))for(c=(s=jI(l,g)).next,l=[];!(a=UI(c,s)).done;)l.push(a.value);for(h&&u>2&&(d=xI(d,arguments[2])),r=GI(l),n=function(e){var t=MI(e);return"BigInt64Array"===t||"BigUint64Array"===t}(i=new(WI(A))(r)),t=0;r>t;t++)o=h?d(l[t],t):l[t],i[t]=n?JI(o):+o;return i},KI=Ht,zI=xn,qI=S,ZI=Ve,$I=Be,e_=wI,t_=EI,r_=EE,i_=Ma,n_=Yr,o_=Xr,a_=RI,s_=Gt,c_=$f,A_=QI,l_=It,u_=Y,d_=Ga,h_=ve,g_=ze,p_=Or,f_=Ye,m_=To,E_=nn.f,I_=XI,__=th.forEach,C_=Oa,y_=Sa,T_=Qe,v_=Ai,w_=function(e,t,r){for(var i=0,n=arguments.length>2?r:KI(t),o=new e(n);n>i;)o[i]=t[i++];return o},S_=uu,b_=ci.get,R_=ci.set,D_=ci.enforce,B_=T_.f,O_=v_.f,Q_=qI.RangeError,k_=r_.ArrayBuffer,M_=k_.prototype,P_=r_.DataView,N_=t_.NATIVE_ARRAY_BUFFER_VIEWS,L_=t_.TYPED_ARRAY_TAG,x_=t_.TypedArray,U_=t_.TypedArrayPrototype,F_=t_.isTypedArray,V_="BYTES_PER_ELEMENT",G_="Wrong length",j_=function(e,t){y_(e,t,{configurable:!0,get:function(){return b_(this)[t]}})},H_=function(e){var t;return f_(M_,e)||"ArrayBuffer"===(t=d_(e))||"SharedArrayBuffer"===t},Y_=function(e,t){return F_(e)&&!g_(t)&&t in e&&a_(+t)&&t>=0},W_=function(e,t){return t=l_(t),Y_(e,t)?n_(2,e[t]):O_(e,t)},J_=function(e,t,r){return t=l_(t),!(Y_(e,t)&&h_(r)&&u_(r,"value"))||u_(r,"get")||u_(r,"set")||r.configurable||u_(r,"writable")&&!r.writable||u_(r,"enumerable")&&!r.enumerable?B_(e,t,r):(e[t]=r.value,e)};$I?(N_||(v_.f=W_,T_.f=J_,j_(U_,"buffer"),j_(U_,"byteOffset"),j_(U_,"byteLength"),j_(U_,"length")),zI({target:"Object",stat:!0,forced:!N_},{getOwnPropertyDescriptor:W_,defineProperty:J_}),NE.exports=function(e,t,r){var i=e.match(/\d+/)[0]/8,n=e+(r?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=qI[n],c=s,A=c&&c.prototype,l={},u=function(e,t){B_(e,t,{get:function(){return function(e,t){var r=b_(e);return r.view[o](t*i+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=b_(e);o.view[a](t*i+o.byteOffset,r?function(e){var t=kI(e);return t<0?0:t>255?255:255&t}(n):n,!0)}(this,t,e)},enumerable:!0})};N_?e_&&(c=t((function(e,t,r,n){return i_(e,A),S_(h_(t)?H_(t)?void 0!==n?new s(t,A_(r,i),n):void 0!==r?new s(t,A_(r,i)):new s(t):F_(t)?w_(c,t):ZI(I_,c,t):new s(c_(t)),e,c)})),m_&&m_(c,x_),__(E_(s),(function(e){e in c||o_(c,e,s[e])})),c.prototype=A):(c=t((function(e,t,r,n){i_(e,A);var o,a,s,l=0,d=0;if(h_(t)){if(!H_(t))return F_(t)?w_(c,t):ZI(I_,c,t);o=t,d=A_(r,i);var h=t.byteLength;if(void 0===n){if(h%i)throw new Q_(G_);if((a=h-d)<0)throw new Q_(G_)}else if((a=s_(n)*i)+d>h)throw new Q_(G_);s=a/i}else s=c_(t),o=new k_(a=s*i);for(R_(e,{buffer:o,byteOffset:d,byteLength:a,length:s,view:new P_(o)});l<s;)u(e,l++)})),m_&&m_(c,x_),A=c.prototype=p_(U_)),A.constructor!==c&&o_(A,"constructor",c),D_(A).TypedArrayConstructor=c,L_&&o_(A,L_,n);var d=c!==s;l[n]=c,zI({global:!0,constructor:!0,forced:d,sham:!N_},l),V_ in c||o_(c,V_,i),V_ in A||o_(A,V_,i),C_(n)}):NE.exports=function(){},PE("Uint8",(function(e){return function(t,r,i){return e(this,t,r,i)}}));var X_=fm,K_=LI,z_=Ga,q_=Ve,Z_=t,$_=EI.aTypedArray,eC=EI.exportTypedArrayMethod,tC=c("".slice);eC("fill",(function(e){var t=arguments.length;$_(this);var r="Big"===tC(z_(this),0,3)?K_(e):+e;return q_(X_,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),Z_((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})));var rC=S,iC=Ve,nC=EI,oC=Ht,aC=QI,sC=G,cC=t,AC=rC.RangeError,lC=rC.Int8Array,uC=lC&&lC.prototype,dC=uC&&uC.set,hC=nC.aTypedArray,gC=nC.exportTypedArrayMethod,pC=!cC((function(){var e=new Uint8ClampedArray(2);return iC(dC,e,{length:1,0:3},1),3!==e[1]})),fC=pC&&nC.NATIVE_ARRAY_BUFFER_VIEWS&&cC((function(){var e=new lC(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));gC("set",(function(e){hC(this);var t=aC(arguments.length>1?arguments[1]:void 0,1),r=sC(e);if(pC)return iC(dC,this,r,t);var i=this.length,n=oC(r),o=0;if(n+t>i)throw new AC("Wrong length");for(;o<n;)this[t+o]=r[o++]}),!pC||fC);var mC=$.match(/firefox\/(\d+)/i),EC=!!mC&&+mC[1],IC=/MSIE|Trident/.test($),_C=$.match(/AppleWebKit\/(\d+)\./),CC=!!_C&&+_C[1],yC=ys,TC=t,vC=rt,wC=op,SC=EC,bC=IC,RC=ae,DC=CC,BC=EI.aTypedArray,OC=EI.exportTypedArrayMethod,QC=S.Uint16Array,kC=QC&&yC(QC.prototype.sort),MC=!(!kC||TC((function(){kC(new QC(2),null)}))&&TC((function(){kC(new QC(2),{})}))),PC=!!kC&&!TC((function(){if(RC)return RC<74;if(SC)return SC<67;if(bC)return!0;if(DC)return DC<602;var e,t,r=new QC(516),i=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,i[e]=e-2*t+3;for(kC(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==i[e])return!0}));OC("sort",(function(e){return void 0!==e&&vC(e),PC?kC(this,e):wC(BC(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!PC||MC);var NC=xn,LC=Be,xC=c,UC=Y,FC=ye,VC=Ye,GC=mu,jC=Sa,HC=Cn,YC=S.Symbol,WC=YC&&YC.prototype;if(LC&&FC(YC)&&(!("description"in WC)||void 0!==YC().description)){var JC={},XC=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:GC(arguments[0]),t=VC(WC,this)?new YC(e):void 0===e?YC():YC(e);return""===e&&(JC[t]=!0),t};HC(XC,YC),XC.prototype=WC,WC.constructor=XC;var KC="Symbol(description detection)"===String(YC("description detection")),zC=xC(WC.valueOf),qC=xC(WC.toString),ZC=/^Symbol\((.*)\)[^)]+$/,$C=xC("".replace),ey=xC("".slice);jC(WC,"description",{configurable:!0,get:function(){var e=zC(this);if(UC(JC,e))return"";var t=qC(e),r=KC?ey(t,7,-1):$C(t,ZC,"$1");return""===r?void 0:r}}),NC({global:!0,constructor:!0,forced:!0},{Symbol:XC})}var ty=xh.charAt,ry=mu,iy=ci,ny=jo,oy=Ho,ay="String Iterator",sy=iy.set,cy=iy.getterFor(ay);ny(String,"String",(function(e){sy(this,{type:ay,string:ry(e),index:0})}),(function(){var e,t=cy(this),r=t.string,i=t.index;return i>=r.length?oy(void 0,!0):(e=ty(r,i),t.index+=e.length,oy(e,!1))}));var Ay,ly=Be,uy=c,dy=Ve,hy=t,gy=ar,py=sn,fy=li,my=G,Ey=m,Iy=Object.assign,_y=Object.defineProperty,Cy=uy([].concat),yy=!Iy||hy((function(){if(ly&&1!==Iy({b:1},Iy(_y({},"a",{enumerable:!0,get:function(){_y(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!==Iy({},e)[r]||gy(Iy({},t)).join("")!==i}))?function(e,t){for(var r=my(e),i=arguments.length,n=1,o=py.f,a=fy.f;i>n;)for(var s,c=Ey(arguments[n++]),A=o?Cy(gy(c),o(c)):gy(c),l=A.length,u=0;l>u;)s=A[u++],ly&&!dy(a,c,s)||(r[s]=c[s]);return r}:Iy,Ty=Re,vy=gl,wy=Be,Sy=Qe,by=Yr,Ry=Ss,Dy=Ve,By=G,Oy=function(e,t,r,i){try{return i?t(Ty(r)[0],r[1]):t(r)}catch(t){vy(e,"throw",t)}},Qy=qA,ky=os,My=Ht,Py=function(e,t,r){wy?Sy.f(e,t,by(0,r)):e[t]=r},Ny=ll,Ly=il,xy=Array,Uy=c,Fy=2147483647,Vy=/[^\0-\u007E]/,Gy=/[.\u3002\uFF0E\uFF61]/g,jy="Overflow: input needs wider integers to process",Hy=RangeError,Yy=Uy(Gy.exec),Wy=Math.floor,Jy=String.fromCharCode,Xy=Uy("".charCodeAt),Ky=Uy([].join),zy=Uy([].push),qy=Uy("".replace),Zy=Uy("".split),$y=Uy("".toLowerCase),eT=function(e){return e+22+75*(e<26)},tT=function(e,t,r){var i=0;for(e=r?Wy(e/700):e>>1,e+=Wy(e/t);e>455;)e=Wy(e/35),i+=36;return Wy(i+36*e/(e+38))},rT=function(e){var t=[];e=function(e){for(var t=[],r=0,i=e.length;r<i;){var n=Xy(e,r++);if(n>=55296&&n<=56319&&r<i){var o=Xy(e,r++);56320==(64512&o)?zy(t,((1023&n)<<10)+(1023&o)+65536):(zy(t,n),r--)}else zy(t,n)}return t}(e);var r,i,n=e.length,o=128,a=0,s=72;for(r=0;r<e.length;r++)(i=e[r])<128&&zy(t,Jy(i));var c=t.length,A=c;for(c&&zy(t,"-");A<n;){var l=Fy;for(r=0;r<e.length;r++)(i=e[r])>=o&&i<l&&(l=i);var u=A+1;if(l-o>Wy((Fy-a)/u))throw new Hy(jy);for(a+=(l-o)*u,o=l,r=0;r<e.length;r++){if((i=e[r])<o&&++a>Fy)throw new Hy(jy);if(i===o){for(var d=a,h=36;;){var g=h<=s?1:h>=s+26?26:h-s;if(d<g)break;var p=d-g,f=36-g;zy(t,Jy(eT(g+p%f))),d=Wy(p/f),h+=36}zy(t,Jy(eT(d))),s=tT(a,u,A===c),a=0,A++}}a++,o++}return Ky(t,"")},iT=xn,nT=Be,oT=$g,aT=S,sT=Ss,cT=c,AT=rn,lT=Sa,uT=Ma,dT=Y,hT=yy,gT=function(e){var t=By(e),r=ky(this),i=arguments.length,n=i>1?arguments[1]:void 0,o=void 0!==n;o&&(n=Ry(n,i>2?arguments[2]:void 0));var a,s,c,A,l,u,d=Ly(t),h=0;if(!d||this===xy&&Qy(d))for(a=My(t),s=r?new this(a):xy(a);a>h;h++)u=o?n(t[h],h):t[h],Py(s,h,u);else for(s=r?new this:[],l=(A=Ny(t,d)).next;!(c=Dy(l,A)).done;h++)u=o?Oy(A,n,[c.value,h],!0):c.value,Py(s,h,u);return s.length=h,s},pT=bs,fT=xh.codeAt,mT=mu,ET=ao,IT=Ds,_T=wf,CT=ci,yT=CT.set,TT=CT.getterFor("URL"),vT=_T.URLSearchParams,wT=_T.getState,ST=aT.URL,bT=aT.TypeError,RT=aT.parseInt,DT=Math.floor,BT=Math.pow,OT=cT("".charAt),QT=cT(/./.exec),kT=cT([].join),MT=cT(1..toString),PT=cT([].pop),NT=cT([].push),LT=cT("".replace),xT=cT([].shift),UT=cT("".split),FT=cT("".slice),VT=cT("".toLowerCase),GT=cT([].unshift),jT="Invalid scheme",HT="Invalid host",YT="Invalid port",WT=/[a-z]/i,JT=/[\d+-.a-z]/i,XT=/\d/,KT=/^0x/i,zT=/^[0-7]+$/,qT=/^\d+$/,ZT=/^[\da-f]+$/i,$T=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ev=/[\0\t\n\r #/:<>?@[\\\]^|]/,tv=/^[\u0000-\u0020]+/,rv=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,iv=/[\t\n\r]/g,nv=function(e){var t,r,i,n;if("number"==typeof e){for(t=[],r=0;r<4;r++)GT(t,e%256),e=DT(e/256);return kT(t,".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,r=1,i=null,n=0,o=0;o<8;o++)0!==e[o]?(n>r&&(t=i,r=n),i=null,n=0):(null===i&&(i=o),++n);return n>r?i:t}(e),r=0;r<8;r++)n&&0===e[r]||(n&&(n=!1),i===r?(t+=r?":":"::",n=!0):(t+=MT(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},ov={},av=hT({},ov,{" ":1,'"':1,"<":1,">":1,"`":1}),sv=hT({},av,{"#":1,"?":1,"{":1,"}":1}),cv=hT({},sv,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Av=function(e,t){var r=fT(e,0);return r>32&&r<127&&!dT(t,e)?e:encodeURIComponent(e)},lv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},uv=function(e,t){var r;return 2===e.length&&QT(WT,OT(e,0))&&(":"===(r=OT(e,1))||!t&&"|"===r)},dv=function(e){var t;return e.length>1&&uv(FT(e,0,2))&&(2===e.length||"/"===(t=OT(e,2))||"\\"===t||"?"===t||"#"===t)},hv=function(e){return"."===e||"%2e"===VT(e)},gv={},pv={},fv={},mv={},Ev={},Iv={},_v={},Cv={},yv={},Tv={},vv={},wv={},Sv={},bv={},Rv={},Dv={},Bv={},Ov={},Qv={},kv={},Mv={},Pv=function(e,t,r){var i,n,o,a=mT(e);if(t){if(n=this.parse(a))throw new bT(n);this.searchParams=null}else{if(void 0!==r&&(i=new Pv(r,!0)),n=this.parse(a,null,i))throw new bT(n);(o=wT(new vT)).bindURL(this),this.searchParams=o}};Pv.prototype={type:"URL",parse:function(e,t,r){var i,n,o,a,s,c=this,A=t||gv,l=0,u="",d=!1,h=!1,g=!1;for(e=mT(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=LT(e,tv,""),e=LT(e,rv,"$1")),e=LT(e,iv,""),i=gT(e);l<=i.length;){switch(n=i[l],A){case gv:if(!n||!QT(WT,n)){if(t)return jT;A=fv;continue}u+=VT(n),A=pv;break;case pv:if(n&&(QT(JT,n)||"+"===n||"-"===n||"."===n))u+=VT(n);else{if(":"!==n){if(t)return jT;u="",A=fv,l=0;continue}if(t&&(c.isSpecial()!==dT(lv,u)||"file"===u&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&lv[c.scheme]===c.port&&(c.port=null));u="","file"===c.scheme?A=bv:c.isSpecial()&&r&&r.scheme===c.scheme?A=mv:c.isSpecial()?A=Cv:"/"===i[l+1]?(A=Ev,l++):(c.cannotBeABaseURL=!0,NT(c.path,""),A=Qv)}break;case fv:if(!r||r.cannotBeABaseURL&&"#"!==n)return jT;if(r.cannotBeABaseURL&&"#"===n){c.scheme=r.scheme,c.path=pT(r.path),c.query=r.query,c.fragment="",c.cannotBeABaseURL=!0,A=Mv;break}A="file"===r.scheme?bv:Iv;continue;case mv:if("/"!==n||"/"!==i[l+1]){A=Iv;continue}A=yv,l++;break;case Ev:if("/"===n){A=Tv;break}A=Ov;continue;case Iv:if(c.scheme=r.scheme,n===Ay)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=pT(r.path),c.query=r.query;else if("/"===n||"\\"===n&&c.isSpecial())A=_v;else if("?"===n)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=pT(r.path),c.query="",A=kv;else{if("#"!==n){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=pT(r.path),c.path.length--,A=Ov;continue}c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=pT(r.path),c.query=r.query,c.fragment="",A=Mv}break;case _v:if(!c.isSpecial()||"/"!==n&&"\\"!==n){if("/"!==n){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,A=Ov;continue}A=Tv}else A=yv;break;case Cv:if(A=yv,"/"!==n||"/"!==OT(u,l+1))continue;l++;break;case yv:if("/"!==n&&"\\"!==n){A=Tv;continue}break;case Tv:if("@"===n){d&&(u="%40"+u),d=!0,o=gT(u);for(var p=0;p<o.length;p++){var f=o[p];if(":"!==f||g){var m=Av(f,cv);g?c.password+=m:c.username+=m}else g=!0}u=""}else if(n===Ay||"/"===n||"?"===n||"#"===n||"\\"===n&&c.isSpecial()){if(d&&""===u)return"Invalid authority";l-=gT(u).length+1,u="",A=vv}else u+=n;break;case vv:case wv:if(t&&"file"===c.scheme){A=Dv;continue}if(":"!==n||h){if(n===Ay||"/"===n||"?"===n||"#"===n||"\\"===n&&c.isSpecial()){if(c.isSpecial()&&""===u)return HT;if(t&&""===u&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(u))return a;if(u="",A=Bv,t)return;continue}"["===n?h=!0:"]"===n&&(h=!1),u+=n}else{if(""===u)return HT;if(a=c.parseHost(u))return a;if(u="",A=Sv,t===wv)return}break;case Sv:if(!QT(XT,n)){if(n===Ay||"/"===n||"?"===n||"#"===n||"\\"===n&&c.isSpecial()||t){if(""!==u){var E=RT(u,10);if(E>65535)return YT;c.port=c.isSpecial()&&E===lv[c.scheme]?null:E,u=""}if(t)return;A=Bv;continue}return YT}u+=n;break;case bv:if(c.scheme="file","/"===n||"\\"===n)A=Rv;else{if(!r||"file"!==r.scheme){A=Ov;continue}switch(n){case Ay:c.host=r.host,c.path=pT(r.path),c.query=r.query;break;case"?":c.host=r.host,c.path=pT(r.path),c.query="",A=kv;break;case"#":c.host=r.host,c.path=pT(r.path),c.query=r.query,c.fragment="",A=Mv;break;default:dv(kT(pT(i,l),""))||(c.host=r.host,c.path=pT(r.path),c.shortenPath()),A=Ov;continue}}break;case Rv:if("/"===n||"\\"===n){A=Dv;break}r&&"file"===r.scheme&&!dv(kT(pT(i,l),""))&&(uv(r.path[0],!0)?NT(c.path,r.path[0]):c.host=r.host),A=Ov;continue;case Dv:if(n===Ay||"/"===n||"\\"===n||"?"===n||"#"===n){if(!t&&uv(u))A=Ov;else if(""===u){if(c.host="",t)return;A=Bv}else{if(a=c.parseHost(u))return a;if("localhost"===c.host&&(c.host=""),t)return;u="",A=Bv}continue}u+=n;break;case Bv:if(c.isSpecial()){if(A=Ov,"/"!==n&&"\\"!==n)continue}else if(t||"?"!==n)if(t||"#"!==n){if(n!==Ay&&(A=Ov,"/"!==n))continue}else c.fragment="",A=Mv;else c.query="",A=kv;break;case Ov:if(n===Ay||"/"===n||"\\"===n&&c.isSpecial()||!t&&("?"===n||"#"===n)){if(".."===(s=VT(s=u))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"===n||"\\"===n&&c.isSpecial()||NT(c.path,"")):hv(u)?"/"===n||"\\"===n&&c.isSpecial()||NT(c.path,""):("file"===c.scheme&&!c.path.length&&uv(u)&&(c.host&&(c.host=""),u=OT(u,0)+":"),NT(c.path,u)),u="","file"===c.scheme&&(n===Ay||"?"===n||"#"===n))for(;c.path.length>1&&""===c.path[0];)xT(c.path);"?"===n?(c.query="",A=kv):"#"===n&&(c.fragment="",A=Mv)}else u+=Av(n,sv);break;case Qv:"?"===n?(c.query="",A=kv):"#"===n?(c.fragment="",A=Mv):n!==Ay&&(c.path[0]+=Av(n,ov));break;case kv:t||"#"!==n?n!==Ay&&("'"===n&&c.isSpecial()?c.query+="%27":c.query+="#"===n?"%23":Av(n,ov)):(c.fragment="",A=Mv);break;case Mv:n!==Ay&&(c.fragment+=Av(n,av))}l++}},parseHost:function(e){var t,r,i;if("["===OT(e,0)){if("]"!==OT(e,e.length-1))return HT;if(t=function(e){var t,r,i,n,o,a,s,c=[0,0,0,0,0,0,0,0],A=0,l=null,u=0,d=function(){return OT(e,u)};if(":"===d()){if(":"!==OT(e,1))return;u+=2,l=++A}for(;d();){if(8===A)return;if(":"!==d()){for(t=r=0;r<4&&QT(ZT,d());)t=16*t+RT(d(),16),u++,r++;if("."===d()){if(0===r)return;if(u-=r,A>6)return;for(i=0;d();){if(n=null,i>0){if(!("."===d()&&i<4))return;u++}if(!QT(XT,d()))return;for(;QT(XT,d());){if(o=RT(d(),10),null===n)n=o;else{if(0===n)return;n=10*n+o}if(n>255)return;u++}c[A]=256*c[A]+n,2!=++i&&4!==i||A++}if(4!==i)return;break}if(":"===d()){if(u++,!d())return}else if(d())return;c[A++]=t}else{if(null!==l)return;u++,l=++A}}if(null!==l)for(a=A-l,A=7;0!==A&&a>0;)s=c[A],c[A--]=c[l+a-1],c[l+--a]=s;else if(8!==A)return;return c}(FT(e,1,-1)),!t)return HT;this.host=t}else if(this.isSpecial()){if(e=function(e){var t,r,i=[],n=Zy(qy($y(e),Gy,"."),".");for(t=0;t<n.length;t++)r=n[t],zy(i,Yy(Vy,r)?"xn--"+rT(r):r);return Ky(i,".")}(e),QT($T,e))return HT;if(t=function(e){var t,r,i,n,o,a,s,c=UT(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(r=[],i=0;i<t;i++){if(""===(n=c[i]))return e;if(o=10,n.length>1&&"0"===OT(n,0)&&(o=QT(KT,n)?16:8,n=FT(n,8===o?1:2)),""===n)a=0;else{if(!QT(10===o?qT:8===o?zT:ZT,n))return e;a=RT(n,o)}NT(r,a)}for(i=0;i<t;i++)if(a=r[i],i===t-1){if(a>=BT(256,5-t))return null}else if(a>255)return null;for(s=PT(r),i=0;i<r.length;i++)s+=r[i]*BT(256,3-i);return s}(e),null===t)return HT;this.host=t}else{if(QT(ev,e))return HT;for(t="",r=gT(e),i=0;i<r.length;i++)t+=Av(r[i],ov);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return dT(lv,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&uv(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,i=e.password,n=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,A=t+":";return null!==n?(A+="//",e.includesCredentials()&&(A+=r+(i?":"+i:"")+"@"),A+=nv(n),null!==o&&(A+=":"+o)):"file"===t&&(A+="//"),A+=e.cannotBeABaseURL?a[0]:a.length?"/"+kT(a,"/"):"",null!==s&&(A+="?"+s),null!==c&&(A+="#"+c),A},setHref:function(e){var t=this.parse(e);if(t)throw new bT(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Nv(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+nv(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(mT(e)+":",gv)},getUsername:function(){return this.username},setUsername:function(e){var t=gT(mT(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Av(t[r],cv)}},getPassword:function(){return this.password},setPassword:function(e){var t=gT(mT(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Av(t[r],cv)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?nv(e):nv(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,vv)},getHostname:function(){var e=this.host;return null===e?"":nv(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,wv)},getPort:function(){var e=this.port;return null===e?"":mT(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=mT(e))?this.port=null:this.parse(e,Sv))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+kT(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Bv))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=mT(e))?this.query=null:("?"===OT(e,0)&&(e=FT(e,1)),this.query="",this.parse(e,kv)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=mT(e))?("#"===OT(e,0)&&(e=FT(e,1)),this.fragment="",this.parse(e,Mv)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Nv=function(e){var t=uT(this,Lv),r=IT(arguments.length,1)>1?arguments[1]:void 0,i=yT(t,new Pv(e,!1,r));nT||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},Lv=Nv.prototype,xv=function(e,t){return{get:function(){return TT(this)[e]()},set:t&&function(e){return TT(this)[t](e)},configurable:!0,enumerable:!0}};if(nT&&(lT(Lv,"href",xv("serialize","setHref")),lT(Lv,"origin",xv("getOrigin")),lT(Lv,"protocol",xv("getProtocol","setProtocol")),lT(Lv,"username",xv("getUsername","setUsername")),lT(Lv,"password",xv("getPassword","setPassword")),lT(Lv,"host",xv("getHost","setHost")),lT(Lv,"hostname",xv("getHostname","setHostname")),lT(Lv,"port",xv("getPort","setPort")),lT(Lv,"pathname",xv("getPathname","setPathname")),lT(Lv,"search",xv("getSearch","setSearch")),lT(Lv,"searchParams",xv("getSearchParams")),lT(Lv,"hash",xv("getHash","setHash"))),AT(Lv,"toJSON",(function(){return TT(this).serialize()}),{enumerable:!0}),AT(Lv,"toString",(function(){return TT(this).serialize()}),{enumerable:!0}),ST){var Uv=ST.createObjectURL,Fv=ST.revokeObjectURL;Uv&&AT(Nv,"createObjectURL",sT(Uv,ST)),Fv&&AT(Nv,"revokeObjectURL",sT(Fv,ST))}ET(Nv,"URL"),iT({global:!0,constructor:!0,forced:!oT,sham:!nT},{URL:Nv}),PE("Float32",(function(e){return function(t,r,i){return e(this,t,r,i)}}));var Vv=_h.right;xn({target:"Array",proto:!0,forced:!Ta&&ae>79&&ae<83||!ih("reduceRight")},{reduceRight:function(e){return Vv(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Gv=Oa,jv="ArrayBuffer",Hv=EE[jv];xn({global:!0,constructor:!0,forced:S[jv]!==Hv},{ArrayBuffer:Hv}),Gv(jv);var Yv=xn,Wv=Gd,Jv=c([].reverse),Xv=[1,2];Yv({target:"Array",proto:!0,forced:String(Xv)===String(Xv.reverse())},{reverse:function(){return Wv(this)&&(this.length=this.length),Jv(this)}});var Kv=Ze,zv=TypeError,qv=xn,Zv=c,$v=rt,ew=G,tw=Ht,rw=function(e,t){if(!delete e[t])throw new zv("Cannot delete property "+Kv(t)+" of "+Kv(e))},iw=mu,nw=t,ow=op,aw=ih,sw=EC,cw=IC,Aw=ae,lw=CC,uw=[],dw=Zv(uw.sort),hw=Zv(uw.push),gw=nw((function(){uw.sort(void 0)})),pw=nw((function(){uw.sort(null)})),fw=aw("sort"),mw=!nw((function(){if(Aw)return Aw<70;if(!(sw&&sw>3)){if(cw)return!0;if(lw)return lw<603;var e,t,r,i,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(i=0;i<47;i++)uw.push({k:t+i,v:r})}for(uw.sort((function(e,t){return t.v-e.v})),i=0;i<uw.length;i++)t=uw[i].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));qv({target:"Array",proto:!0,forced:gw||!pw||!fw||!mw},{sort:function(e){void 0!==e&&$v(e);var t=ew(this);if(mw)return void 0===e?dw(t):dw(t,e);var r,i,n=[],o=tw(t);for(i=0;i<o;i++)i in t&&hw(n,t[i]);for(ow(n,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:iw(t)>iw(r)?1:-1}}(e)),r=tw(n),i=0;i<r;)t[i]=n[i++];for(;i<o;)rw(t,i++);return t}}),(0,EI.exportTypedArrayStaticMethod)("from",XI,wI);let Ew=!0,Iw=!0;function _w(e,t,r){const i=e.match(t);return i&&i.length>=r&&parseInt(i[r],10)}function Cw(e,t,r){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,n=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return n.apply(this,arguments);const o=e=>{const t=r(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,o),n.apply(this,[e,o])};const o=i.removeEventListener;i.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(r))return o.apply(this,arguments);const i=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function yw(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ew=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Tw(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Iw=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function vw(){if("object"==typeof window){if(Ew)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function ww(e,t){Iw&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Sw(e){return"[object Object]"===Object.prototype.toString.call(e)}function bw(e){return Sw(e)?Object.keys(e).reduce((function(t,r){const i=Sw(e[r]),n=i?bw(e[r]):e[r],o=i&&!Object.keys(n).length;return void 0===n||o?t:Object.assign(t,{[r]:n})}),{}):e}function Rw(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith("Id")?Rw(e,e.get(t[i]),r):i.endsWith("Ids")&&t[i].forEach((t=>{Rw(e,e.get(t),r)}))})))}function Dw(e,t,r){const i=r?"outbound-rtp":"inbound-rtp",n=new Map;if(null===t)return n;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((r=>{r.type===i&&r.trackId===t.id&&Rw(e,r,n)}))})),n}const Bw=vw;function Ow(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const i=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;const i="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);const n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"==typeof i.ideal?(e[n("min",r)]=i.ideal,t.optional.push(e),e={},e[n("max",r)]=i.ideal,t.optional.push(e)):(e[n("",r)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[n("",r)]=i.exact):["min","max"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[n(e,r)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},n=function(e,n){if(t.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return r.mediaDevices.enumerateDevices().then((r=>{let a=(r=r.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&r.length&&t.includes("back")&&(a=r[r.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=i(e.video),Bw("chrome: "+JSON.stringify(e)),n(e)}))}e.video=i(e.video)}return Bw("chrome: "+JSON.stringify(e)),n(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,i){n(e,(e=>{r.webkitGetUserMedia(e,t,(e=>{i&&i(o(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){const e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return n(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function Qw(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function kw(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.track.id)):{track:r.track};const n=new Event("track");n.track=r.track,n.receiver=i,n.transceiver={receiver:i},n.streams=[t.stream],this.dispatchEvent(n)})),t.stream.getTracks().forEach((r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.id)):{track:r};const n=new Event("track");n.track=r,n.receiver=i,n.transceiver={receiver:i},n.streams=[t.stream],this.dispatchEvent(n)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Cw(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Mw(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let n=r.apply(this,arguments);return n||(n=t(this,e),this._senders.push(n)),n};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Pw(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,i]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const n=function(e){const t={};return e.result().forEach((e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{r[t]=e.stat(t)})),t[r.id]=r})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const i=function(e){r(o(n(e)))};return t.apply(this,[i,e])}return new Promise(((e,r)=>{t.apply(this,[function(t){e(o(n(t)))},r])})).then(r,i)}}function Nw(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Dw(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Cw(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Dw(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,i;return this.getSenders().forEach((r=>{r.track===e&&(t?i=!0:t=r)})),this.getReceivers().forEach((t=>(t.track===e&&(r?i=!0:r=t),t.track===e))),i||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Lw(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(i)&&this._shimmedLocalStreams[r.id].push(i):this._shimmedLocalStreams[r.id]=[r,i],i};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();r.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),n.apply(this,arguments)}}function xw(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Lw(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}i.apply(this,[t])};const n=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],n=e._streams[i.id];r=r.replace(new RegExp(n.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const n=this._streams[r.id];if(n)n.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const i=new e.MediaStream([t]);this._streams[r.id]=i,this._reverseStreams[i.id]=r,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{const r=o(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],n=e._streams[i.id];r=r.replace(new RegExp(i.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((r=>{this._streams[r].getTracks().find((t=>e.track===t))&&(t=this._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Uw(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function Fw(e,t){Cw(e,"negotiationneeded",(e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e}))}var Vw=Object.freeze({__proto__:null,shimMediaStream:Qw,shimOnTrack:kw,shimGetSendersWithDtmf:Mw,shimGetStats:Pw,shimSenderReceiverGetStats:Nw,shimAddTrackRemoveTrackWithNative:Lw,shimAddTrackRemoveTrack:xw,shimPeerConnection:Uw,fixNegotiationNeeded:Fw,shimGetUserMedia:Ow,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((t=>{const i=r.video&&r.video.width,n=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},i&&(r.video.mandatory.maxWidth=i),n&&(r.video.mandatory.maxHeight=n),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function Gw(e,t){const r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,i){ww("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}function jw(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Hw(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,o]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!n)try{e.forEach((e=>{e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(n,o)}}function Yw(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Ww(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Cw(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Jw(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){ww("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function Xw(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Kw(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const r=e.length>0;r&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const i=t.apply(this,arguments);if(r){const{sender:t}=i,r=t.getParameters();(!("encodings"in r)||1===r.encodings.length&&0===Object.keys(r.encodings[0]).length)&&(r.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(r).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function zw(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function qw(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Zw(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var $w=Object.freeze({__proto__:null,shimOnTrack:jw,shimPeerConnection:Hw,shimSenderGetStats:Yw,shimReceiverGetStats:Ww,shimRemoveStream:Jw,shimRTCDataChannel:Xw,shimAddTransceiver:Kw,shimGetParameters:zw,shimCreateOffer:qw,shimCreateAnswer:Zw,shimGetUserMedia:Gw,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}});function eS(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((r=>t.call(this,r,e))),e.getVideoTracks().forEach((r=>t.call(this,r,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach((e=>{r.includes(e.track)&&this.removeTrack(e)}))})}}function tS(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}))}),t.apply(e,arguments)}}}function rS(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,i=t.createAnswer,n=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[i]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],n=i.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n};let s=function(e,t,r){const i=n.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i};t.setLocalDescription=s,s=function(e,t,r){const i=o.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i},t.setRemoteDescription=s,s=function(e,t,r){const i=a.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i},t.addIceCandidate=s}function iS(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(nS(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,i){t.mediaDevices.getUserMedia(e).then(r,i)}.bind(t))}function nS(e){return e&&void 0!==e.video?Object.assign({},e,{video:bw(e.video)}):e}function oS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let i=e.iceServers[r];void 0===i.urls&&i.url?(ww("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function aS(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function sS(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function cS(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var AS=Object.freeze({__proto__:null,shimLocalStreamsAPI:eS,shimRemoteStreamsAPI:tS,shimCallbacksAPI:rS,shimGetUserMedia:iS,shimConstraints:nS,shimRTCIceServerUrls:oS,shimTrackEventTransceiver:aS,shimCreateOfferLegacy:sS,shimAudioContext:cS}),lS={},uS={get exports(){return lS},set exports(e){lS=e}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){const r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter((e=>0===e.indexOf(r)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const r={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":r.relatedAddress=t[e+1];break;case"rport":r.relatedPort=parseInt(t[e+1],10);break;case"tcptype":r.tcpType=t[e+1];break;case"ufrag":r.ufrag=t[e+1],r.usernameFragment=t[e+1];break;default:void 0===r[t[e]]&&(r[t[e]]=t[e+1])}return r},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const r=e.component;"rtp"===r?t.push(1):"rtcp"===r?t.push(2):t.push(r),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let r;const i=e.substring(e.indexOf(" ")+1).split(";");for(let e=0;e<i.length;e++)r=i[e].trim().split("="),t[r[0].trim()]=r[1];return t},t.writeFmtp=function(e){let t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const i=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+r+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),r={ssrc:parseInt(e.substring(7,t),10)},i=e.indexOf(":",t);return i>-1?(r.attribute=e.substring(t+1,i),r.value=e.substring(i+1)):r.attribute=e.substring(t+1),r},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const r=t.matchPrefix(e,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,r){return{role:"auto",fingerprints:t.matchPrefix(e+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,r){return t.matchPrefix(e+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,r){const i=t.matchPrefix(e+r,"a=ice-ufrag:")[0],n=t.matchPrefix(e+r,"a=ice-pwd:")[0];return i&&n?{usernameFragment:i.substring(12),password:n.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" ");r.profile=i[2];for(let n=3;n<i.length;n++){const o=i[n],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){const i=t.parseRtpMap(a),n=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(i.parameters=n.length?t.parseFmtp(n[0]):{},i.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),r.codecs.push(i),i.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(i.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{r.headerExtensions.push(t.parseExtmap(e))}));const n=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach((e=>{n.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),r},t.writeRtpDescription=function(e,r){let i="";i+="m="+e+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",r.codecs.forEach((e=>{i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));let n=0;return r.codecs.forEach((e=>{e.maxptime>n&&(n=e.maxptime)})),n>0&&(i+="a=maxptime:"+n+"\r\n"),r.headerExtensions&&r.headerExtensions.forEach((e=>{i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){const r=[],i=t.parseRtpParameters(e),n=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),s=a.length>0&&a[0].ssrc;let c;const A=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));A.length>0&&A[0].length>1&&A[0][0]===s&&(c=A[0][1]),i.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(t.rtx={ssrc:c}),r.push(t),n&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&s&&r.push({ssrc:s});let l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substring(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,r.forEach((e=>{e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){const r={},i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const n=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=n.length>0,r.compound=0===n.length;const o=t.matchPrefix(e,"a=rtcp-mux");return r.mux=o.length>0,r},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let r;const i=t.matchPrefix(e,"a=msid:");if(1===i.length)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const n=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return n.length>0?(r=n[0].value.split(" "),{stream:r[0],track:r[1]}):void 0},t.parseSctpDescription=function(e){const r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");let n;i.length>0&&(n=parseInt(i[0].substring(19),10)),isNaN(n)&&(n=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:n};const a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){const e=a[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){let r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,r,i){let n;const o=void 0!==r?r:2;return n=e||t.generateSessionId(),"v=0\r\no="+(i||"thisisadapterortc")+" "+n+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,r){const i=t.splitLines(e);for(let e=0;e<i.length;e++)switch(i[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[e].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const r=t.splitLines(e)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(e){const r=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const r=t.splitLines(e);for(let e=0;e<r.length;e++)if(r[e].length<2||"="!==r[e].charAt(1))return!1;return!0},e.exports=t}(uS);var dS=lS,hS=function(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if("default"!==r&&!(r in e)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}({__proto__:null,default:dS},[lS]);function gS(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const r=new t(e),i=dS.parseCandidate(e.candidate);for(const e in i)e in r||Object.defineProperty(r,e,{value:i[e]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Cw(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function pS(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Cw(e,"icecandidate",(e=>{if(e.candidate){const t=dS.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function fS(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=dS.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=dS.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),r=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r}(e),i=function(e,r){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const n=dS.matchPrefix(e.sdp,"a=max-message-size:");return n.length>0?i=parseInt(n[0].substring(19),10):"firefox"===t.browser&&-1!==r&&(i=2147483637),i}(arguments[0],e);let n;n=0===r&&0===i?Number.POSITIVE_INFINITY:0===r||0===i?Math.max(r,i):Math.min(r,i);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>n}),this._sctp=o}return r.apply(this,arguments)}}function mS(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const i=arguments[0],n=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&n>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},Cw(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function ES(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}function IS(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const r=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function _S(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function CS(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.setLocalDescription;r&&0!==r.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return r.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?r.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>r.apply(this,[e])))})}var yS=Object.freeze({__proto__:null,shimRTCIceCandidate:gS,shimRTCIceCandidateRelayProtocol:pS,shimMaxMessageSize:fS,shimSendThrowTypeError:mS,shimConnectionState:ES,removeExtmapAllowMixed:IS,shimAddIceCandidateNullOrEmpty:_S,shimParameterlessSetLocalDescription:CS});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=vw,i=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=_w(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=_w(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=_w(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),n={browserDetails:i,commonShim:yS,extractVersion:_w,disableLog:yw,disableWarnings:Tw,sdp:hS};switch(i.browser){case"chrome":if(!Vw||!Uw||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),n;if(null===i.version)return r("Chrome shim can not determine version, not shimming."),n;r("adapter.js shimming chrome."),n.browserShim=Vw,_S(e,i),CS(e),Ow(e,i),Qw(e),Uw(e,i),kw(e),xw(e,i),Mw(e),Pw(e),Nw(e),Fw(e,i),gS(e),pS(e),ES(e),fS(e,i),mS(e),IS(e,i);break;case"firefox":if(!$w||!Hw||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),n;r("adapter.js shimming firefox."),n.browserShim=$w,_S(e,i),CS(e),Gw(e,i),Hw(e,i),jw(e),Jw(e),Yw(e),Ww(e),Xw(e),Kw(e),zw(e),qw(e),Zw(e),gS(e),ES(e),fS(e,i),mS(e);break;case"safari":if(!AS||!t.shimSafari)return r("Safari shim is not included in this adapter release."),n;r("adapter.js shimming safari."),n.browserShim=AS,_S(e,i),CS(e),oS(e),sS(e),rS(e),eS(e),tS(e),aS(e),iS(e),cS(e),gS(e),pS(e),fS(e,i),mS(e),IS(e,i);break;default:r("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var TS,vS=Object.create,wS=Object.defineProperty,SS=Object.defineProperties,bS=Object.getOwnPropertyDescriptor,RS=Object.getOwnPropertyDescriptors,DS=Object.getOwnPropertyNames,BS=Object.getOwnPropertySymbols,OS=Object.getPrototypeOf,QS=Object.prototype.hasOwnProperty,kS=Object.prototype.propertyIsEnumerable,MS=Reflect.get,PS=Math.pow,NS=(e,t,r)=>t in e?wS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,LS=(e,t)=>{for(var r in t||(t={}))QS.call(t,r)&&NS(e,r,t[r]);if(BS)for(var r of BS(t))kS.call(t,r)&&NS(e,r,t[r]);return e},xS=(e,t)=>SS(e,RS(t)),US=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),FS=(e,t)=>{for(var r in t)wS(e,r,{get:t[r],enumerable:!0})},VS=(e,t,r)=>(r=null!=e?vS(OS(e)):{},((e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of DS(t))!QS.call(e,r)&&undefined!==r&&wS(e,r,{get:()=>t[r],enumerable:!(i=bS(t,r))||i.enumerable});return e})(!t&&e&&e.__esModule?r:wS(r,"default",{value:e,enumerable:!0}),e)),GS=(e,t,r,i)=>{for(var n,o=i>1?void 0:i?bS(t,r):t,a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i?n(t,r,o):n(o))||o);return i&&o&&wS(t,r,o),o},jS=(e,t,r)=>NS(e,"symbol"!=typeof t?t+"":t,r),HS=(e,t,r)=>MS(OS(e),r,t),YS=(e,t,r)=>new Promise(((i,n)=>{var o=e=>{try{s(r.next(e))}catch(e){n(e)}},a=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);s((r=r.apply(e,t)).next())})),WS=US(((e,t)=>{var r=Object.prototype.hasOwnProperty,i="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,a),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function c(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},c.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},c.prototype.emit=function(e,t,r,n,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var c,A,l=this._events[s],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,o),!0;case 6:return l.fn.call(l.context,t,r,n,o,a),!0}for(A=1,c=new Array(u-1);A<u;A++)c[A-1]=arguments[A];l.fn.apply(l.context,c)}else{var d,h=l.length;for(A=0;A<h;A++)switch(l[A].once&&this.removeListener(e,l[A].fn,void 0,!0),u){case 1:l[A].fn.call(l[A].context);break;case 2:l[A].fn.call(l[A].context,t);break;case 3:l[A].fn.call(l[A].context,t,r);break;case 4:l[A].fn.call(l[A].context,t,r,n);break;default:if(!c)for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];l[A].fn.apply(l[A].context,c)}}return!0},c.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},c.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},c.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn===t&&(!n||a.once)&&(!r||a.context===r)&&s(this,o);else{for(var c=0,A=[],l=a.length;c<l;c++)(a[c].fn!==t||n&&!a[c].once||r&&a[c].context!==r)&&A.push(a[c]);A.length?this._events[o]=1===A.length?A[0]:A:s(this,o)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,void 0!==t&&(t.exports=c)})),JS=US(((e,t)=>{var r=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(r).forEach((function(e){r[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))})),XS=US((e=>{var t=function(e){return String(Number(e))===e?Number(e):e},r=function(e,r,i){var n=e.name&&e.names;e.push&&!r[e.push]?r[e.push]=[]:n&&!r[e.name]&&(r[e.name]={});var o=e.push?{}:n?r[e.name]:r;(function(e,r,i,n){if(n&&!i)r[n]=t(e[1]);else for(var o=0;o<i.length;o+=1)null!=e[o+1]&&(r[i[o]]=t(e[o+1]))})(i.match(e.reg),o,e.names,e.name),e.push&&r[e.push].push(o)},i=JS(),n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(n).forEach((function(e){var t=e[0],n=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var s=0;s<(i[t]||[]).length;s+=1){var c=i[t][s];if(c.reg.test(n))return r(c,a,n)}})),t.media=o,t};var o=function(e,r){var i=r.split(/=(.+)/,2);return 2===i.length?e[i[0]]=t(i[1]):1===i.length&&r.length>1&&(e[i[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var r=[],i=e.split(" ").map(t),n=0;n<i.length;n+=3)r.push({component:i[n],ip:i[n+1],port:i[n+2]});return r},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var r,i=!1;return"~"!==e[0]?r=t(e):(r=t(e.substring(1,e.length)),i=!0),{scid:r,paused:i}}))}))}})),KS=US(((e,t)=>{var r=JS(),i=/%[sdv%]/g,n=function(e){var t=1,r=arguments,n=r.length;return e.replace(i,(function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},o=function(e,t,r){var i=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var o=0;o<t.names.length;o+=1){var a=t.names[o];t.name?i.push(r[t.name][a]):i.push(r[t.names[o]])}else i.push(r[t.name]);return n.apply(null,i)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var i=t.outerOrder||a,n=t.innerOrder||s,c=[];return i.forEach((function(t){r[t].forEach((function(r){r.name in e&&null!=e[r.name]?c.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){c.push(o(t,r,e))}))}))})),e.media.forEach((function(e){c.push(o("m",r.m[0],e)),n.forEach((function(t){r[t].forEach((function(r){r.name in e&&null!=e[r.name]?c.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){c.push(o(t,r,e))}))}))}))})),c.join("\r\n")+"\r\n"}})),zS=US((e=>{var t=XS(),r=KS();e.write=r,e.parse=t.parse,e.parseParams=t.parseParams,e.parseFmtpConfig=t.parseFmtpConfig,e.parsePayloads=t.parsePayloads,e.parseRemoteCandidates=t.parseRemoteCandidates,e.parseImageAttributes=t.parseImageAttributes,e.parseSimulcastStreamList=t.parseSimulcastStreamList})),qS=US(((e,t)=>{var r=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(r).forEach((function(e){r[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))})),ZS=US((e=>{var t=function(e){return String(Number(e))===e?Number(e):e},r=function(e,r,i){var n=e.name&&e.names;e.push&&!r[e.push]?r[e.push]=[]:n&&!r[e.name]&&(r[e.name]={});var o=e.push?{}:n?r[e.name]:r;(function(e,r,i,n){if(n&&!i)r[n]=t(e[1]);else for(var o=0;o<i.length;o+=1)null!=e[o+1]&&(r[i[o]]=t(e[o+1]))})(i.match(e.reg),o,e.names,e.name),e.push&&r[e.push].push(o)},i=qS(),n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(n).forEach((function(e){var t=e[0],n=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var s=0;s<(i[t]||[]).length;s+=1){var c=i[t][s];if(c.reg.test(n))return r(c,a,n)}})),t.media=o,t};var o=function(e,r){var i=r.split(/=(.+)/,2);return 2===i.length?e[i[0]]=t(i[1]):1===i.length&&r.length>1&&(e[i[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var r=[],i=e.split(" ").map(t),n=0;n<i.length;n+=3)r.push({component:i[n],ip:i[n+1],port:i[n+2]});return r},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var r,i=!1;return"~"!==e[0]?r=t(e):(r=t(e.substring(1,e.length)),i=!0),{scid:r,paused:i}}))}))}})),$S=US(((e,t)=>{var r=qS(),i=/%[sdv%]/g,n=function(e){var t=1,r=arguments,n=r.length;return e.replace(i,(function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},o=function(e,t,r){var i=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var o=0;o<t.names.length;o+=1){var a=t.names[o];t.name?i.push(r[t.name][a]):i.push(r[t.names[o]])}else i.push(r[t.name]);return n.apply(null,i)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var i=t.outerOrder||a,n=t.innerOrder||s,c=[];return i.forEach((function(t){r[t].forEach((function(r){r.name in e&&null!=e[r.name]?c.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){c.push(o(t,r,e))}))}))})),e.media.forEach((function(e){c.push(o("m",r.m[0],e)),n.forEach((function(t){r[t].forEach((function(r){r.name in e&&null!=e[r.name]?c.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){c.push(o(t,r,e))}))}))}))})),c.join("\r\n")+"\r\n"}})),eb=US((e=>{var t=ZS(),r=$S();e.write=r,e.parse=t.parse,e.parseParams=t.parseParams,e.parseFmtpConfig=t.parseFmtpConfig,e.parsePayloads=t.parsePayloads,e.parseRemoteCandidates=t.parseRemoteCandidates,e.parseImageAttributes=t.parseImageAttributes,e.parseSimulcastStreamList=t.parseSimulcastStreamList})),tb=VS(WS()),rb=((TS=rb||{})[TS.INVALID_PARAMETER=4096]="INVALID_PARAMETER",TS[TS.INVALID_OPERATION=4097]="INVALID_OPERATION",TS[TS.NOT_SUPPORTED=4098]="NOT_SUPPORTED",TS[TS.DEVICE_NOT_FOUND=4099]="DEVICE_NOT_FOUND",TS[TS.INITIALIZE_FAILED=4100]="INITIALIZE_FAILED",TS[TS.SIGNAL_CHANNEL_SETUP_FAILED=16385]="SIGNAL_CHANNEL_SETUP_FAILED",TS[TS.SIGNAL_CHANNEL_ERROR=16386]="SIGNAL_CHANNEL_ERROR",TS[TS.ICE_TRANSPORT_ERROR=16387]="ICE_TRANSPORT_ERROR",TS[TS.JOIN_ROOM_FAILED=16388]="JOIN_ROOM_FAILED",TS[TS.CREATE_OFFER_FAILED=16389]="CREATE_OFFER_FAILED",TS[TS.SIGNAL_CHANNEL_RECONNECTION_FAILED=16390]="SIGNAL_CHANNEL_RECONNECTION_FAILED",TS[TS.UPLINK_RECONNECTION_FAILED=16391]="UPLINK_RECONNECTION_FAILED",TS[TS.DOWNLINK_RECONNECTION_FAILED=16392]="DOWNLINK_RECONNECTION_FAILED",TS[TS.REMOTE_STREAM_NOT_EXIST=16400]="REMOTE_STREAM_NOT_EXIST",TS[TS.CLIENT_BANNED=16448]="CLIENT_BANNED",TS[TS.SERVER_TIMEOUT=16449]="SERVER_TIMEOUT",TS[TS.SUBSCRIPTION_TIMEOUT=16450]="SUBSCRIPTION_TIMEOUT",TS[TS.PLAY_NOT_ALLOWED=16451]="PLAY_NOT_ALLOWED",TS[TS.DEVICE_AUTO_RECOVER_FAILED=16452]="DEVICE_AUTO_RECOVER_FAILED",TS[TS.START_PUBLISH_CDN_FAILED=16453]="START_PUBLISH_CDN_FAILED",TS[TS.STOP_PUBLISH_CDN_FAILED=16454]="STOP_PUBLISH_CDN_FAILED",TS[TS.START_MIX_TRANSCODE_FAILED=16455]="START_MIX_TRANSCODE_FAILED",TS[TS.STOP_MIX_TRANSCODE_FAILED=16456]="STOP_MIX_TRANSCODE_FAILED",TS[TS.NOT_SUPPORTED_H264=16457]="NOT_SUPPORTED_H264",TS[TS.SWITCH_ROLE_FAILED=16458]="SWITCH_ROLE_FAILED",TS[TS.API_CALL_TIMEOUT=16459]="API_CALL_TIMEOUT",TS[TS.SCHEDULE_FAILED=16460]="SCHEDULE_FAILED",TS[TS.API_CALL_ABORTED=16461]="API_CALL_ABORTED",TS[TS.SPC_INITIALIZED_FAILED=16462]="SPC_INITIALIZED_FAILED",TS[TS.VIDEO_MANAGER_ERROR=16463]="VIDEO_MANAGER_ERROR",TS[TS.UNKNOWN=65535]="UNKNOWN",TS),ib=rb,nb=class extends Error{constructor(e){let{name:t="RtcError",message:r,code:i=ib.UNKNOWN,extraCode:n=0,constraint:o}=e,a="<".concat(function(e){for(let t in ib)if(ib[t]===e)return t;return"UNKNOWN"}(i)," 0x").concat(i.toString(16),">"),s="".concat(r).concat(o?" constraint: ".concat(o):"").concat(null!=r&&r.includes(a)?"":" ".concat(a));super(s),jS(this,"code"),jS(this,"extraCode"),jS(this,"message"),jS(this,"originMessage"),jS(this,"name"),jS(this,"constraint"),this.code=i,this.extraCode=n,this.name=t,this.message=s,this.constraint=o,this.originMessage=r}getCode(){return this.code}getExtraCode(){return this.extraCode}toString(){return this.originMessage}},ob=nb,ab=((new Date).getTime(),0),sb=function(){return(new Date).getTime()+ab},cb=function(){let e=new Date;return e.setTime(sb()),e.toLocaleString()},Ab={};FS(Ab,{bytes2ms:()=>ZR,convertObjectNumberToInt:()=>VD,copyProperties:()=>qR,deepClone:()=>OD,deepMerge:()=>BD,delay:()=>GD,fibonacci:()=>oD,formatedTime:()=>MD,getConstructorName:()=>ID,getContainerFromElement:()=>kD,getEnv:()=>jR,getInternalVersion:()=>vD,getLoggerUrl:()=>YR,getMuteStateFromFlag:()=>bD,getNetworkType:()=>JR,getNumNetworkType:()=>zR,getReconnectionTimeout:()=>aD,getStringByteLength:()=>LD,getTurnServer:()=>RD,getUint32Version:()=>FD,getValueType:()=>sD,getViewListFromView:()=>QD,glog:()=>rD,ipv4ToUint32:()=>DD,isArray:()=>gD,isAudioWorkletSupported:()=>_D,isBoolean:()=>dD,isConstructor:()=>ED,isEmpty:()=>SD,isFunction:()=>cD,isLangChinese:()=>iD,isMediaStreamTrack:()=>pD,isNumber:()=>uD,isObject:()=>hD,isOverseaSdkAppId:()=>HR,isPlainObject:()=>nD,isPortrait:()=>xD,isPromise:()=>mD,isRemoteTrack:()=>fD,isString:()=>lD,isUndefined:()=>AD,loadImage:()=>UD,ms2bytes:()=>eD,ms2samples:()=>tD,performanceNow:()=>yD,promiseAny:()=>CD,samples2ms:()=>$R,setNetworkType:()=>KR,stringify:()=>PD,stringifyIncludeValue:()=>ND,throttlePromise:()=>jD});var lb={};FS(lb,{AUDIO_MUTE_BIT:()=>Kb,AUDIO_STAT_BIT:()=>Xb,AUX_STAT_BIT:()=>Jb,AUX_STREAM_MSID:()=>eR,BACKEND_ENV:()=>jb,BASE_DOC_URL:()=>wb,BASE_HOST:()=>Cb,CAPABILITIES_KEYS:()=>VR,CLASS_NAME:()=>QR,CLOUD_CONSOLE_URL:()=>vb,CROSS_ROOM_BIT:()=>Zb,DATA_FREEZE_TIMING:()=>wR,DEFAULT_ASSETS_URL:()=>Sb,DOC_URL:()=>bb,DTLS_STATE_UNKNOWN:()=>lR,ENV_NAME:()=>Qb,EXCHANGE_SDP_TIMEOUT:()=>_R,IS_WORKER:()=>fb,IS_WORKLET:()=>mb,KIBANA_EVENT:()=>mR,LOCAL_STREAM_PUBLISH_STATE:()=>vR,LOGGER_CMD_TYPE:()=>Ob,LOGGER_DOMAIN:()=>Rb,LOGGER_DOMAIN_OVERSEA:()=>Db,LOG_LEVEL:()=>kb,LOG_LEVEL_NAME:()=>LR,MAIN_STREAM_MSID:()=>$b,MAX_RTT:()=>GR,MICROPHONE_COMMUNICATIONS:()=>NR,MICROPHONE_DEFAULT:()=>MR,MUTE_ALL_BIT:()=>qb,NAME:()=>Vb,NETWORK_TYPE:()=>Nb,NOT_SUPPORTED_H264:()=>TR,PAUSED_RETRY_COUNT:()=>kR,PEERCONNECTION_CONNECTING_TIMEOUT:()=>DR,PEER_CONNECTION_STATE:()=>uR,PEER_LEAVE_REASON:()=>xR,RECOVER_CAPTURE_INTERVAL:()=>FR,REMOTE_STREAM_TYPE_AUX:()=>rR,REMOTE_STREAM_TYPE_MAIN:()=>tR,RENDER_FREEZE_TIMING:()=>SR,SCHEDULE_DOMAIN:()=>BR,SCHEDULE_TIMEOUT:()=>OR,SDP_SEMANTICS_PLAN_B:()=>yR,SDP_SEMANTICS_UNIFIED_PLAN:()=>CR,SECOND_HOST:()=>yb,SIGNAL_PING_PONG_INTERVAL:()=>Pb,SIGNAL_PING_TIMEOUT:()=>Mb,SIGNAL_RECONNECTION_COUNT:()=>fR,SMALL_STAT_BIT:()=>Wb,SPEAKER_DEFAULT:()=>PR,STORAGE_EXPIRES_TIME:()=>Lb,STREAM_TYPE_BIG:()=>bR,STREAM_TYPE_SMALL:()=>RR,SUBSCRIBE_SMALL_RETRY_COUNT:()=>UR,SYNC_USER_LIST_INTERVAL:()=>ER,Scene:()=>Hb,THIRD_HOST:()=>Tb,TRANSPORT_DIRECTION:()=>Gb,TRTC_ERROR_ASSISTANCE:()=>Bb,TRTC_QUALITY_BAD:()=>sR,TRTC_QUALITY_DISCONNECTED:()=>AR,TRTC_QUALITY_EXCELLENT:()=>nR,TRTC_QUALITY_GOOD:()=>oR,TRTC_QUALITY_POOR:()=>aR,TRTC_QUALITY_UNKNOWN:()=>iR,TRTC_QUALITY_VERY_BAD:()=>cR,UPDATE_OFFER_TIMEOUT:()=>IR,VIDEO_MUTE_BIT:()=>zb,VIDEO_STAT_BIT:()=>Yb,audioProfileMap:()=>xb,getRetryCount:()=>gR,getScriptDir:()=>Eb,innerVersion:()=>ub,loggerProxy:()=>Ib,screenProfileMap:()=>Fb,setLoggerProxy:()=>_b,setRetryCount:()=>hR,setVersion:()=>hb,version:()=>db,videoProfileMap:()=>Ub});var ub="4.15.00.1600",db="5.0.0";function hb(e){db=e;let[t,r,i]=e.split(".").map((e=>parseInt(e,10)));ub="".concat(t,".").concat(Math.min(15,r),".").concat(Math.min(15,i),".").concat(r.toString().padStart(2,"0")).concat(i.toString().padStart(2,"0"))}var gb,pb,fb="undefined"!=typeof importScripts,mb="undefined"!=typeof registerProcessor,Eb=()=>{let e=fb?self.location.href:document.currentScript.src;return e.substring(0,e.lastIndexOf("/")+1)},Ib="",_b=e=>Ib=e,Cb="web.sdk.qcloud.com",yb="web.sdk.tencent.cn",Tb="web.sdk.cloud.tencent.cn",vb="https://console.cloud.tencent.com/trtc",wb="https://".concat(Cb,"/trtc/webrtc/v5/doc"),Sb="https://web.sdk.qcloud.com/trtc/webrtc/v5/assets/",bb="".concat(wb,"/zh-cn/"),Rb="https://yun.tim.qq.com",Db="https://apisgp.my-imcloud.com",Bb="trtc_error_assistance",Ob={LOG:"jssdk_log",EVENT:"jssdk_event",KEY_POINT:"jssdk_new_endreport",KV_STAT:"jssdk_key_metrics_report"},Qb={QCLOUD:"qcloud",OLD_CLOUD_LADDER:"trtc",WEBRTC:"webrtc"},kb=((pb=kb||{})[pb.TRACE=0]="TRACE",pb[pb.DEBUG=1]="DEBUG",pb[pb.INFO=2]="INFO",pb[pb.WARN=3]="WARN",pb[pb.ERROR=4]="ERROR",pb[pb.NONE=5]="NONE",pb),Mb=18e3,Pb=2e3,Nb={unknown:0,wifi:1,"3g":2,"2g":3,"4g":4,wired:5,"5g":6},Lb=6048e5,xb={standard:{sampleRate:48e3,channelCount:1,bitrate:40},"standard-stereo":{sampleRate:48e3,channelCount:2,bitrate:64},high:{sampleRate:48e3,channelCount:1,bitrate:128},"high-stereo":{sampleRate:48e3,channelCount:2,bitrate:192}},Ub={"120p":{width:160,height:120,frameRate:15,bitrate:200},"120p_2":{width:160,height:120,frameRate:15,bitrate:100},"180p":{width:320,height:180,frameRate:15,bitrate:350},"180p_2":{width:320,height:180,frameRate:15,bitrate:150},"240p":{width:320,height:240,frameRate:15,bitrate:400},"240p_2":{width:320,height:240,frameRate:15,bitrate:200},"360p":{width:640,height:360,frameRate:15,bitrate:800},"360p_2":{width:640,height:360,frameRate:15,bitrate:400},"480p":{width:640,height:480,frameRate:15,bitrate:900},"480p_2":{width:640,height:480,frameRate:15,bitrate:500},"720p":{width:1280,height:720,frameRate:15,bitrate:1500},"1080p":{width:1920,height:1080,frameRate:15,bitrate:2e3},"1440p":{width:2560,height:1440,frameRate:30,bitrate:4860},"4K":{width:3840,height:2160,frameRate:30,bitrate:9e3}},Fb={"480p":{width:640,height:480,frameRate:5,bitrate:900},"480p_2":{width:640,height:480,frameRate:30,bitrate:1e3},"720p":{width:1280,height:720,frameRate:5,bitrate:1200},"720p_2":{width:1280,height:720,frameRate:30,bitrate:3e3},"1080p":{width:1920,height:1080,frameRate:5,bitrate:1600},"1080p_2":{width:1920,height:1080,frameRate:30,bitrate:4e3}},Vb={CANVAS:"canvas",AUDIO:"audio",VIDEO:"video",SCREEN:"screen",SMALL:"small",BIG:"big",AUXILIARY:"auxiliary",SMALL_VIDEO:"smallVideo",FACING_MODE_USER:"user",FACING_MODE_ENVIRONMENT:"environment",MUTE:"mute",UNMUTE:"unmute",ENDED:"ended",PLAYING:"playing",PAUSE:"pause",ERROR:"error",LOADEDDATA:"loadeddata",LOADEDMETADATA:"loadedmetadata",AUDIO_INPUT:"audioinput",VIDEO_INPUT:"videoinput",DETAIL:"detail",TEXT:"text",MAIN:"main",BACKUP:"backup",BANNED:"banned",KICK:"kick",USER_TIME_OUT:"user_time_out",ROOM_DISBAND:"room_disband",SEI_MESSAGE:"sei-message",ADD:"add",REMOVE:"remove",REPLACE:"replace",TRACK:"track",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",TRANSCEIVER_DIRECTION_SENDONLY:"sendonly",TRANSCEIVER_DIRECTION_RECVONLY:"recvonly",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture"},Gb={INACTIVE:"inactive",SENDONLY:"sendonly",RECVONLY:"recvonly"},jb={OLD_CLOUD_LADDER:"wss://trtc.rtc.qq.com",WEBRTC:"wss://webrtc.qq.com"},Hb=((gb=Hb||{}).LIVE="live",gb.RTC="rtc",gb),Yb=1,Wb=2,Jb=4,Xb=8,Kb=64,zb=16,qb=112,Zb=128,$b="5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV",eR="224d130c-7b5c-415b-aaa2-79c2eb5a6df2",tR=Vb.MAIN,rR=Vb.AUXILIARY,iR=0,nR=1,oR=2,aR=3,sR=4,cR=5,AR=6,lR="unknown",uR={NEW:"new",CONNECTING:"connecting",FAILED:"failed",CLOSED:"closed",DISCONNECTED:"disconnected",CONNECTED:"connected",COMPLETED:"completed"},dR=1/0;function hR(e){dR=e}function gR(){return dR}var pR,fR=30,mR={JOIN:"join",DELTA_JOIN:"delta-join",REJOIN:"rejoin",LEAVE:"leave",DELTA_LEAVE:"delta-leave",PUBLISH:"publish",DELTA_PUBLISH:"delta-publish",UNPUBLISH:"unpublish",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",UPLINK_CONNECTION:"uplink-connection",UPLINK_RECONNECTION:"uplink-reconnection",DOWNLINK_CONNECTION:"downlink-connection",DOWNLINK_RECONNECTION:"downlink-reconnection",ON_TRACK:"ontrack",ICE_CONNECTION_STATE:"iceConnectionState",LOCAL_STREAM_INITIALIZE:"stream-initialize",SIGNAL_CONNECTION:"websocketConnectionState",SIGNAL_RECONNECTION:"websocketReconnectionState",UPDATE_STREAM:"update-stream",RECOVER_LOCAL_AUDIO_TRACK:"recover-local-audio-track",RECOVER_LOCAL_VIDEO_TRACK:"recover-local-video-track",RECOVER_SUBSCRIPTION:"recover-subscription",START_MIX_TRANSCODE:"start-mix-transcode",STOP_MIX_TRANSCODE:"stop-mix-transcode",PLAYER_ERROR:"player-error",SCHEDULE:"schedule",LOAD_WORKLET:"load-worklet",VIDEO_FROZEN_COUNT:"videoFrozenCount",GET_USER_MEDIA_RETRY:"getUserMedia-retry"},ER=1e4,IR=1e4,_R=1e4,CR="unified-plan",yR="plan-b",TR=1028,vR=((pR=vR||{})[pR.UNPUBLISH=-1]="UNPUBLISH",pR[pR.PUBLISHING=0]="PUBLISHING",pR[pR.PUBLISHED=1]="PUBLISHED",pR),wR=500,SR=1e3,bR=Vb.BIG,RR=Vb.SMALL,DR=1e4,BR={MAIN:"schedule.cloud-rtc.com",BACKUP:"schedule.cloud-rtc.net",MAIN_OVERSEA:"schedule.rtc-web.com",BACKUP_OVERSEA:"schedule.rtc-web.io",MAIN_OVERSEA_BACKUP:"intl-schedule.cloud-rtc.com"},OR=2e3,QR={TRTC:"TRTC",CLIENT:"Client",LOCAL_STREAM:"LocalStream",REMOTE_STREAM:"RemoteStream",STREAM:"Stream"},kR=5,MR="default",PR=MR,NR="communications",LR=Object.keys(kb),xR=["normal leave","timeout leave","kick","role change"],UR=10,FR=2e3,VR=["width","height","frameRate","facingMode","sampleRate","sampleSize","channelCount","deviceId","min","max"],GR=1e4,jR=function(){return new URLSearchParams(location.search).get("trtc_env")||""},HR=e=>Number(e)<14e8,YR=function(e,t){let r;r=Ib||(HR(e)?Db:Rb);let i=Math.floor(Math.random()*PS(2,31));return"".concat(r,"/v5/AVQualityReportSvc/C2S?random=").concat(i,"&sdkappid=").concat(e,"&cmdtype=").concat(t)},WR="unknown";function JR(){if("unknown"!==WR)return WR;let{userAgent:e,connection:t}=navigator,r=(e.match(/NetType\/\S+/)||[])[0]||"";r=r.toLowerCase().replace("nettype/",""),"3gnet"===r&&(r="3g");let i=t&&t.type&&t.type.toLowerCase(),n=t&&t.effectiveType&&t.effectiveType.toLowerCase();return"slow-2"===n&&(n="2g"),i&&(WR=XR(i,n)),WR}function XR(e,t){if(Nb[e])return e;switch(e){case"cellular":case"wimax":return t||"unknown";case"ethernet":return"wired";default:return"unknown"}}function KR(e){WR=XR(e)}function zR(){return Nb[JR()]}function qR(e,t){for(let r of Reflect.ownKeys(t))if("constructor"!==r&&"prototype"!==r&&"name"!==r){let i=Object.getOwnPropertyDescriptor(t,r)||"";Object.defineProperty(e,r,i)}return e}function ZR(e){return $R(e/4,arguments.length>1&&void 0!==arguments[1]?arguments[1]:48e3)}function $R(e){return 1e3*e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:48e3)}function eD(e){return 4*tD(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:48e3)}function tD(e){return e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:48e3)/1e3}var rD="undefined"!=typeof window&&"function"==typeof window.glog?window.glog:()=>{},iD=()=>{let e=navigator.language;return e=e.substring(0,2),"zh"===e},nD=function(e){if(!e||"object"!=typeof e||"[object Object]"!=Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);if(null===t)return!0;let r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Function.prototype.toString.call(r)===Function.prototype.toString.call(Object)};function oD(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<=1?t:oD(e-1,t,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+t)}function aD(e){return e>8?3e4:1e3*oD(e)}function sD(e){return Reflect.apply(Object.prototype.toString,e,[]).replace(/^\[object\s(\w+)\]$/,"$1").toLowerCase()}var cD=e=>"function"==typeof e,AD=e=>void 0===e,lD=e=>"string"==typeof e,uD=e=>"number"==typeof e,dD=e=>"boolean"==typeof e,hD=e=>"object"===sD(e),gD=e=>"array"===sD(e),pD=e=>sD(e)==="MediaStreamTrack".toLowerCase(),fD=e=>e.isRemote,mD=e=>"promise"===sD(e),ED=e=>cD(e)&&e.prototype.constructor===e,ID=e=>ED(e)?e.prototype.constructor.name:"",_D="undefined"!=typeof AudioWorkletNode;function CD(e){return new Promise(((t,r)=>{let i=[];e.forEach((n=>{n.then(t).catch((t=>{i.push(t),i.length===e.length&&r(i)}))}))}))}function yD(){return performance&&performance.now?Math.floor(performance.now()):Date.now()}var TD=e=>+e<10?"0".concat(e):e,vD=e=>{let t=e.match(/^\d+\.\d+\.\d+/)[0];if(!t)return e;let r=t.split("."),i=TD(r[1])+TD(r[2]);return r[1]-15>0&&(r[1]="15"),r[2]-15>0&&(r[2]="15"),"".concat(r.join("."),".").concat(i)},wD=Object.prototype.hasOwnProperty;function SD(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e||"function"==typeof e||Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(nD(e))switch(Object.prototype.toString.call(e)){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(let t in e)if(wD.call(e,t))return!1;return!0}return!1}function bD(e,t){return{userId:t,hasAudio:!!(e&Xb),hasVideo:!!(e&Yb),hasAuxiliary:!!(e&Jb),hasSmall:!!(e&Wb),audioMuted:!!(e&Kb),videoMuted:!!(e&zb),audioAvailable:!(!(e&Xb)||e&Kb),videoAvailable:!(!(e&Yb)||e&zb)}}function RD(e){let t={urls:e.url.startsWith("turn:")||e.url.startsWith("turns:")?e.url:"turn:".concat(e.url)};return!AD(e.username)&&!AD(e.credential)&&(t.username=e.username,t.credential=e.credential,t.credentialType="password",AD(e.credentialType)||(t.credentialType=e.credentialType)),t}function DD(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!lD(e))return 0;let r=e.split(".");return t?(Number(r[0])<<24|Number(r[1])<<16|Number(r[2])<<8|Number(r[3]))>>>0:(Number(r[3])<<24|Number(r[2])<<16|Number(r[1])<<8|Number(r[0]))>>>0}var BD=function(e,t,r,i){if(!hD(e)||!hD(t))return 0;let n,o=0,a=Object.keys(t);for(let s=0,c=a.length;s<c;s++)if(n=a[s],!(AD(t[n])||r&&r.includes(n)))if(hD(e[n])&&hD(t[n]))o+=BD(e[n],t[n],r,i);else{if(i&&i.includes(t[n]))continue;e[n]!==t[n]&&(e[n]=OD(t[n]),o+=1)}return o};function OD(e){if(gD(e)){let t=[];return e.forEach(((e,r)=>{t[r]=OD(e)})),t}if(hD(e)){let t={};return Object.keys(e).forEach((r=>{t[r]=OD(e[r])})),t}return e}var QD=e=>{let t=[];if(gD(e))t=[...e];else if(lD(e)){let r=document.getElementById(e);r&&t.push(r)}else e&&t.push(e);return t},kD=e=>lD(e)?document.getElementById(e):e,MD=()=>(e=>{let t=e=>e<10?"0".concat(e):"".concat(e),r=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),o=t(e.getHours()),a=t(e.getMinutes()),s=t(e.getSeconds());return"".concat(r,"/").concat(i,"/").concat(n," ").concat(o,":").concat(a,":").concat(s)})(new Date);function PD(e,t){let{keysToInclude:r,keysToExclude:i}=t;try{if(gD(e))return"[".concat(e.map((e=>PD(e,{keysToInclude:r,keysToExclude:i}))).join(","),"]");if(!nD(e)||!gD(r)&&!gD(i))return JSON.stringify(e);let t={},n=new Set(r),o=new Set(i);return Object.keys(e).forEach((a=>{(0===o.size&&n.has(a)||0===n.size&&!o.has(a))&&(t[a]=nD(e[a])||gD(e[a])?JSON.parse(PD(e[a],{keysToExclude:i,keysToInclude:r})):e[a])})),JSON.stringify(t)}catch(e){return"{}"}}function ND(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return Object.keys(e).forEach((i=>{t===e[i]&&r.push(i)})),PD(e,{keysToInclude:r})}function LD(e){return e.replace(/[\u4e00-\u9fa5]/g,"aa").length}var xD=()=>{var e,t,r,i;return null!=(e=window.screen)&&e.orientation?!(null==(i=null==(r=null==(t=window.screen)?void 0:t.orientation)?void 0:r.type)||!i.includes("portrait")):0===window.orientation||180===window.orientation},UD=e=>YS(void 0,null,(function*(){return new Promise(((t,r)=>{let i;if(lD(e))i=new Image,i.crossOrigin="anonymous",i.src=e;else if(i=e,i.complete)return void t(i);i.onload=()=>t(i),i.onerror=()=>{r(new ob({code:ib.INVALID_PARAMETER,message:"load image failed, url: ".concat(e)}))}}))})),FD=e=>{let t=e.split(".");return+t[0]<<24|+t[1]<<16|+t[2]<<8|+t[3]},VD=e=>(Object.keys(e).forEach((t=>{uD(e[t])&&(t.startsWith("uint")||t.startsWith("int"))?e[t]=Math.floor(e[t]):(nD(e[t])||gD(e[t]))&&VD(e[t])})),e);function GD(e,t){return new Promise((r=>{let i=setTimeout(r,e);t&&t(i)}))}function jD(e,t){let r=null;return function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return r||(r=e.apply(t||this,n),r.finally((()=>r=null)),r)}}function HD(e){let{url:t,body:r,method:i="POST",timeout:n,priority:o}=e;return new Promise(((e,a)=>{if("fetch"in window)return fetch(t,{method:i,body:r,priority:o}).then((e=>e.text())).then((t=>{try{e({data:JSON.parse(t)})}catch(r){e({data:t})}}),a);let s=new XMLHttpRequest;s.onreadystatechange=()=>{if(4===s.readyState)if(s.status>=200&&s.status<300)try{let t=JSON.parse(s.response);e({data:t})}catch(t){e({data:s.response})}else a({status:s.status,statusText:s.statusText||"request failed!"})},s.timeout=n||5e3,s.open(i,t,!0),s.send(r)}))}function YD(e){return YS(this,null,(function*(){let t=yD(),r=JSON.stringify(e);try{if(!CompressionStream||r.length<=2800)return r;let e=new Blob([r],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip")),i=yield(yield(yield new Response(e)).blob()).arrayBuffer();return jO.debug("compressJSON ".concat(r.length," -> ").concat(i.byteLength," ").concat(yD()-t,"ms")),i}catch(e){return r}}))}var WD=Object.prototype.hasOwnProperty,JD=e=>"function"==typeof e,XD=e=>void 0===e,KD=e=>e.isRemote;var zD=function(e){let{retryFunction:t,settings:r,onError:i,onRetrying:n,onRetryFailed:o,onRetrySuccess:a,context:s}=e;return function(){for(var e=arguments.length,c=new Array(e),A=0;A<e;A++)c[A]=arguments[A];let{retries:l=5,timeout:u=1e3}=r,d=0,h=-1,g=0,p=(e,r)=>YS(this,null,(function*(){let A=s||this;try{let r=yield t.apply(A,c);d>0&&a&&a.call(this,d),d=0,e(r)}catch(t){let a=()=>{clearTimeout(h),d=0,g=2,r(t)},s=()=>{2!==g&&d<(JD(l)?l():l)?(d++,g=1,JD(n)&&n.call(this,d,a),h=window.setTimeout((()=>{h=-1,p(e,r)}),JD(u)?u(d):u)):(a(),JD(o)&&o.call(this,t))};JD(i)?i.call(this,{error:t,retry:s,reject:r,retryFuncArgs:c,retriedCount:d}):s()}}));return new Promise(p)}},qD=class{constructor(e){jS(this,"userId"),jS(this,"remoteUserId"),jS(this,"id"),jS(this,"sdkAppId"),jS(this,"type"),jS(this,"isLocal"),this.id=e.id,this.userId=e.userId,this.sdkAppId=e.sdkAppId,this.remoteUserId=e.remoteUserId,this.isLocal="boolean"!=typeof e.isLocal||e.isLocal,this.type=this.isLocal?"":e.type}createChild(e){return Object.setPrototypeOf(e,this)}setUserId(e){this.userId=e}setSdkAppId(e){this.sdkAppId=e}log(e,t){let r=this.isLocal?this.userId:this.remoteUserId;t.unshift("[".concat(this.isLocal?"↑":"↓").concat(this.type&&"main"!==this.type?"*":"").concat(this.id).concat(r?"|".concat(r):"","]")),jO.log(e,t,XD(this.userId)||function(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e||"function"==typeof e||Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(function(e){if(!e||"object"!=typeof e||"[object Object]"!=Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);if(null===t)return!0;let r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Function.prototype.toString.call(r)===Function.prototype.toString.call(Object)}(e))switch(Object.prototype.toString.call(e)){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(let t in e)if(WD.call(e,t))return!1;return!0}return!1}(this.userId),this.userId,this.sdkAppId)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(2,t)}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(1,t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(3,t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(4,t)}},ZD={};FS(ZD,{ANDROID_VERSION:()=>uB,CHROME_MAJOR_VERSION:()=>hO,CHROME_VERSION:()=>gO,EDGE_VERSION:()=>EB,EDG_MAJOR_VERSION:()=>CB,EDG_VERSION:()=>_B,FIREFOX_MAJOR_VERSION:()=>fB,FIREFOX_VERSION:()=>pB,HUAWEI_VERSION:()=>rO,IE_VERSION:()=>QB,IOS_MAIN_VERSION:()=>_O,IOS_VERSION:()=>IO,IPADQQB_VERSION:()=>jB,IS_ANDROID:()=>lB,IS_ANDROID_WEBVIEW:()=>EO,IS_ANY_SAFARI:()=>fO,IS_CHROME:()=>uO,IS_CHROME_OS:()=>JB,IS_CHROMIUM_BASE:()=>lO,IS_EDG:()=>IB,IS_EDGE:()=>mB,IS_ELECTRON:()=>zB,IS_FIREFOX:()=>gB,IS_HEADLESS_CHROME:()=>dO,IS_HONOR:()=>tO,IS_HUAWEI:()=>eO,IS_HUAWEIBROWSER:()=>$B,IS_IE:()=>OB,IS_IE8:()=>BB,IS_IOS:()=>AB,IS_IOS_13_OR_14:()=>TO,IS_IOS_15_1:()=>yO,IS_IPAD:()=>oB,IS_IPADQQB:()=>GB,IS_IPAD_PRO:()=>aB,IS_IPHONE:()=>sB,IS_IPOD:()=>cB,IS_LINUX:()=>WB,IS_LOCAL:()=>vO,IS_MAC:()=>YB,IS_MACQQB:()=>FB,IS_MIBROWSER:()=>qB,IS_MQQB:()=>NB,IS_NATIVE_ANDROID:()=>hB,IS_OLD_ANDROID:()=>dB,IS_OPPOBROWSER:()=>oO,IS_SAFARI:()=>pO,IS_SAFARI_15_1:()=>CO,IS_SAMSUNGBROWSER:()=>iO,IS_SOGOU:()=>vB,IS_SOGOUM:()=>yB,IS_TBS:()=>SB,IS_UCBROWSER:()=>KB,IS_VIVOBROWSER:()=>sO,IS_WECHAT:()=>kB,IS_WIN:()=>HB,IS_WQQB:()=>xB,IS_WX:()=>XB,IS_X5MQQB:()=>PB,IS_XWEB:()=>RB,MACQQB_VERSION:()=>VB,MI_VERSION:()=>ZB,MQQB_VERSION:()=>LB,OPPO_VERSION:()=>aO,SAFARI_VERSION:()=>mO,SAMSUNG_VERSION:()=>nO,SOGOUM_VERSION:()=>TB,SOGOU_VERSION:()=>wB,TBS_VERSION:()=>bB,UA_DATA_STRING:()=>DO,USER_AGENT:()=>$D,VIVO_VERSION:()=>cO,WECHAT_VERSION:()=>MB,WQQB_VERSION:()=>UB,XWEB_VERSION:()=>DB,browserInfo:()=>SO,getBrowserInfo:()=>bO,getChromeMajorVersion:()=>AO,getDeviceModel:()=>OO,getOSName:()=>kO,getOSNumber:()=>MO,getOSString:()=>PO,getOSType:()=>LO,getTerminalType:()=>NO,getUserAgentData:()=>BO,isLocalStorageEnabled:()=>wO});var $D="undefined"==typeof navigator?"":navigator.userAgent,eB=e=>new RegExp(e,"i").test($D),tB=e=>{if(eB(e)){let t=new RegExp("".concat(e,"\\/([\\d.]+)")),r=$D.match(t);if(r&&r[1])return r[1]}return""},rB=e=>{if(eB(e)){let t=new RegExp("".concat(e,"\\/(\\d+)")),r=$D.match(t);if(r&&r[1])return parseFloat(r[1])}return NaN},iB=/AppleWebKit\/([\d.]+)/i.exec($D),nB=iB?parseFloat(iB[1]):NaN,oB=eB("iPad"),aB="undefined"!=typeof navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&eB("Macintosh"),sB=eB("iPhone")&&!oB,cB=eB("iPod"),AB=sB||oB||cB||aB,lB=eB("Android"),uB=function(){if(lB){let e=$D.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(e){let t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);if(t&&r)return parseFloat("".concat(e[1],".").concat(e[2]));if(t)return t}}return NaN}(),dB=lB&&eB("webkit")&&uB<2.3,hB=lB&&uB<5&&nB<537,gB=eB("Firefox"),pB=tB("Firefox"),fB=rB("Firefox"),mB=eB("Edge"),EB=tB("Edge"),IB=eB("Edg"),_B=tB("Edg"),CB=rB("Edg"),yB=eB("SogouMobileBrowser"),TB=tB("SogouMobileBrowser"),vB=eB("MetaSr\\s"),wB=tB("MetaSr\\s"),SB=eB("TBS"),bB=tB("TBS"),RB=eB("XWEB"),DB=tB("XWEB"),BB=eB("MSIE\\s8\\.0"),OB=eB("MSIE\\/\\d+"),QB=function(){if(OB){let e=/MSIE\s(\d+)\.\d/.exec($D),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test($D)&&/rv:11.0/.test($D)&&(t=11),t}return NaN}(),kB=eB("(micromessenger|webbrowser)"),MB=tB("MicroMessenger"),PB=!SB&&eB("MQQBrowser")&&eB("COVC"),NB=!SB&&eB("MQQBrowser")&&!eB("COVC"),LB=NB||PB?tB("MQQBrowser"):"",xB=!SB&&eB(" QQBrowser"),UB=tB(" QQBrowser"),FB=!SB&&eB("QQBrowserLite"),VB=tB("QQBrowserLite"),GB=!SB&&eB("MQBHD"),jB=tB("MQBHD"),HB=eB("Windows"),YB=!AB&&eB("MAC OS X"),WB=!lB&&eB("Linux"),JB=eB("CrOS"),XB=eB("MicroMessenger"),KB=eB("UCBrowser"),zB=eB("Electron"),qB=eB("MiuiBrowser"),ZB=tB("MiuiBrowser"),$B=eB("HuaweiBrowser"),eO=eB("Huawei")||eB("HUAWEI"),tO=eB("Honor")||eB("HONOR"),rO=tB("HuaweiBrowser"),iO=eB("SamsungBrowser"),nO=tB("SamsungBrowser"),oO=eB("HeyTapBrowser"),aO=tB("HeyTapBrowser"),sO=eB("VivoBrowser"),cO=tB("VivoBrowser"),AO=()=>rB("Chrome"),lO=eB("Chrome"),uO=!mB&&!vB&&!yB&&!SB&&!RB&&!IB&&!xB&&!qB&&!$B&&!iO&&!oO&&!sO&&lO,dO=eB("HeadlessChrome"),hO=AO(),gO=tB("Chrome"),pO=!lO&&!NB&&!PB&&!FB&&!GB&&eB("Safari"),fO=pO||AB,mO=tB("Version"),EO=/Android.*(wv|.0.0.0)/.test($D),IO=(()=>{if(aB)return mO;if(AB){let e=$D.match(/OS (\d+)_(\d+)/i);if(e&&e[1]){let t=e[1];return e[2]&&(t+=".".concat(e[2])),t}}return""})(),_O=Number(IO.split(".")[0]),CO="15.1"===mO,yO="15.1"===IO,TO=(()=>{let e=Number(IO.split(".")[0]);return 14===e||13===e})(),vO="undefined"!=typeof location&&("file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname),wO=(()=>{let e;return()=>{if(void 0===e)try{e=!!window.localStorage}catch(t){e=!1}return e}})(),SO=bO();function bO(){let e=new Map([[gB,["Firefox",pB]],[IB,["Edg",_B]],[uO,["Chrome",gO]],[pO,["Safari",mO]],[SB,["TBS",bB]],[RB,["XWEB",DB]],[kB&&sB,["WeChat",MB]],[xB,["QQ(Win)",UB]],[NB,["QQ(Mobile)",LB]],[PB,["QQ(Mobile X5)",LB]],[FB,["QQ(Mac)",VB]],[GB,["QQ(iPad)",jB]],[qB,["MI",ZB]],[$B,["HW",rO]],[iO,["Samsung",nO]],[oO,["OPPO",aO]],[sO,["VIVO",cO]],[mB,["EDGE",EB]],[yB,["SogouMobile",TB]],[vB,["Sogou",wB]]]),t="unknown",r="unknown";return e.has(!0)&&([t,r]=e.get(!0)),{name:t,version:r}}var RO=null,DO="";function BO(){return YS(this,null,(function*(){if(RO)return RO;if(!navigator.userAgentData||"function"!=typeof navigator.userAgentData.getHighEntropyValues)return null;try{return(RO=yield navigator.userAgentData.getHighEntropyValues(["architecture","bitness","model","platformVersion","fullVersionList"]))&&!DO&&(DO="UAData: ".concat(RO.platform,"/").concat(RO.platformVersion),RO.architecture&&RO.bitness&&(DO+=" ".concat(RO.architecture,"/").concat(RO.bitness)),RO.mobile&&(DO+=" mobile"),RO.model&&(DO+=" model: ".concat(RO.model)),RO.fullVersionList&&(DO+=" ".concat(RO.fullVersionList.filter((e=>"Not/A)Brand"!==e.brand)).map((e=>"".concat(e.brand,"/").concat(e.version))).join(",")))),RO}catch(e){return null}}))}function OO(){return(null==RO?void 0:RO.model)||""}var QO=new Map([[lB,"Android"],[AB,"iOS"],[HB,"Windows"],[YB,"MacOS"],[WB,"Linux"],[JB,"ChromeOS"]]),kO=function(){return QO.get(!0)?QO.get(!0):RO?RO.platform:"unknown"};function MO(){return HB?1:lB?2:YB?3:AB?4:WB?5:JB?6:0}var PO=()=>{let e=kO();return e+="/".concat(SO.name,"/").concat(pO?SO.version:SO.version.split(".")[0]),null!=RO&&RO.platformVersion&&(e+="/".concat(RO.platformVersion)),null!=RO&&RO.architecture&&(e+="/".concat(RO.architecture)),e};function NO(){return lB?4:sB?2:oB?3:YB?12:HB?5:WB?13:1}function LO(){return lB?"Android":sB?"iPhone":oB?"iPad":YB?"Mac":HB?"Windows":WB?"Linux":"unknown"}var xO,UO=new(VS(WS(),1).default),FO=((xO=FO||{}).ROOM_DESTROY="1",xO.JOIN_START="21",xO.JOIN_SCHEDULE_SUCCESS="22",xO.JOIN_SIGNAL_CONNECTION_START="23",xO.JOIN_SIGNAL_CONNECTION_END="24",xO.JOIN_SEND_CMD="25",xO.JOIN_RECEIVED_CMD_RES="26",xO.JOIN_SUCCESS="27",xO.JOIN_FAILED="28",xO.LEAVE_START="51",xO.LEAVE_SEND_CMD="52",xO.LEAVE_SUCCESS="53",xO.PUBLISH_START="61",xO.SEND_FIRST_VIDEO_FRAME="62",xO.PUBLISH_FAILED="63",xO.SUBSCRIBE_START="81",xO.SUBSCRIBE_SUCCESS="82",xO.SUBSCRIBE_FAILED="84",xO.UNSUBSCRIBE_SUCCESS="83",xO.LOCAL_TRACK_CAPTURE_START="101",xO.LOCAL_TRACK_CAPTURE_SUCCESS="102",xO.LOCAL_TRACK_CAPTURE_FAILED="103",xO.LOCAL_TRACK_PUBLISHED="104",xO.LOCAL_TRACK_UNPUBLISHED="105",xO.LOCAL_TRACK_REPLACED="106",xO.SWITCH_DEVICE_SUCCESS="107",xO.TRACK_MUTED="108",xO.TRACK_UNMUTED="109",xO.REMOTE_TRACK_SUBSCRIBED="110",xO.REMOTE_TRACK_UNSUBSCRIBED="111",xO.LOCAL_TRACK_RECAPTURE="112",xO.PLAY_TRACK_START="151",xO.PLAYER_STATE_CHANGED="152",xO.VIDEO_LOADED_DATA="153",xO.AUTOPLAY_DIALOG_CLICK_CONFIRM="154",xO.SIGNAL_CONNECTION_STATE_CHANGED="201",xO.PEER_CONNECTION_STATE_CHANGED="202",xO.SINGLE_CONNECTION_STAT="203",xO.SPC_RECONNECTED="204",xO.HEARTBEAT_REPORT="251",xO.RECEIVED_PUBLISHED_USER_LIST="252",xO.REMOTE_PUBLISH_STATE_CHANGED="253",xO.AUDIO_LEVEL_INTERVAL="260",xO.NETWORK_QUALITY="261",xO.VIDEO_CODEC_IMPLEMENTATION_CHANGED="262",xO.QUALITY_LIMITATION_CHANGED="263",xO.LOG="264",xO),VO=FO,GO=class e{constructor(){jS(this,"_isEnableUploadLog",!0),jS(this,"_localJoinedUser",new Map),jS(this,"_queue",[]),jS(this,"_timeoutId",-1),jS(this,"_logLevel",1),jS(this,"_logLevelToUpload",2),!fb&&!mb&&(this.checkURLParam(),this.installEvents())}get isAbleToUpload(){return this._isEnableUploadLog&&-1!==this._timeoutId}installEvents(){UO.on(VO.JOIN_SCHEDULE_SUCCESS,(e=>{let{schedule:t}=e;var r;null!=(r=null==t?void 0:t.config)&&r.logLevelToUpload&&kb[t.config.logLevelToUpload]&&(this._logLevelToUpload=t.config.logLevelToUpload)})),UO.on(VO.JOIN_SUCCESS,(e=>{let{room:t}=e;this.addJoinedUser({userId:t.userId,sdkAppId:t.sdkAppId}),this.startUpload()})),UO.once(VO.JOIN_FAILED,(()=>{this.startUpload()})),UO.on(VO.LEAVE_SUCCESS,(e=>{let{room:t}=e;this.deleteJoinedUser(t.userId)}))}startUpload(){-1===this._timeoutId&&this.uploadInterval()}addJoinedUser(e){this._localJoinedUser.set(e.userId,e),this.startUpload()}deleteJoinedUser(e){this._localJoinedUser.delete(e)}uploadInterval(){this.upload().catch((()=>{})),this._timeoutId=window.setTimeout((()=>this.uploadInterval()),5e3)}getLogsToUpload(){let e={map:new Map,splicedQueue:[]};if(this._queue[0].forAllJoinedClients&&0===this._localJoinedUser.size)return e;let t=0;for(;t<this._queue.length&&50!==t;t++){let r=this._queue[t];if(r.forAllJoinedClients)this._localJoinedUser.forEach((t=>{let{userId:i,sdkAppId:n}=t;e.map.has(i)?e.map.get(i).logs.push(r):e.map.set(i,{userId:i,sdkAppId:n,logs:[r]})}));else if(lD(r.userId)&&uD(r.sdkAppId)){let{userId:t,sdkAppId:i}=r;e.map.has(t)?e.map.get(t).logs.push(r):e.map.set(t,{userId:t,sdkAppId:i,logs:[r]})}}return e.map.size>0&&(e.splicedQueue=this._queue.splice(0,t)),e}upload(){return YS(this,null,(function*(){if(0===this._queue.length||!this._isEnableUploadLog)return;let{map:e,splicedQueue:t}=this.getLogsToUpload();if(0===e.size)return;try{let t=[...e.values()];for(let e=0;e<t.length;e++){let{userId:r,sdkAppId:i,logs:n}=t[e];yield this.uploadLogWithRetry(JSON.stringify({timestamp:cb(),sdkAppId:String(i),userId:r,version:db,log:n.map((e=>e.log)).join("\n")}),i),n.forEach((e=>e.uploaded=!0))}}catch(e){}let r=t.filter((e=>!e.uploaded));r.length>0&&(this._queue=r.concat(this._queue))}))}uploadLogWithRetry(e,t){return zD({retryFunction:()=>HD({url:YR(t,Ob.LOG),body:e,timeout:5e3,priority:"low"}),settings:{retries:3,timeout:2e3},onError:e=>{let{retry:t}=e;t()}})()}getPrefix(e){let t=new Date;t.setTime(sb());let r=String(t.getMilliseconds());return"padStart"in String.prototype&&(r=r.toString().padStart(3,"0")),"[".concat(t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),":").concat(r,"] <").concat(kb[e],">")}getLogLevel(){return this._logLevel}setLogLevel(e){AD(kb[e])||(this._logLevel!==e&&this.info("setLogLevel",e),this._logLevel=e)}enableUploadLog(){this._isEnableUploadLog=!0}disableUploadLog(){this.warn("disableUploadLog"),this._isEnableUploadLog=!1}logChunkToString(e){if(lD(e))return e;try{return e instanceof Error?e.toString():JSON.stringify(e)}catch(e){return""}}log(t,r){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;var a;r.unshift(this.getPrefix(t));let s={log:r.reduce(((e,t)=>"".concat(e," ").concat(this.logChunkToString(t)).trim()),""),level:t,userId:n,sdkAppId:o,forAllJoinedClients:i};if(UO.emit(VO.LOG,{log:s}),this._isEnableUploadLog&&t>=this._logLevelToUpload&&this._queue.push(s),t<this._logLevel)return;let c=(null==(a=kb[t])?void 0:a.toLowerCase())||"info";e.PRINT_LOG_TAG?console[c]("%cTRTC%c%s","padding: 1px 4px;border-radius: 3px;color: #fff;background: #1E88E5;","display: inline",...r):console[c](...r)}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(1,t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(2,t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(3,t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(4,t)}createLogger(e){return new qD(e)}checkURLParam(){let e=new URLSearchParams(location.search).get("logLevelToUpload"),t=e?Number(e):-1;kb[t]&&(this._logLevelToUpload=t)}getQueue(){return this._queue}};jS(GO,"PRINT_LOG_TAG",!(AB||lB||dO));var jO=new GO,HO=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},YO=new class{constructor(){jS(this,"_prefix","TRTC"),jS(this,"_queue",new Map)}getRealKey(e){return"".concat(this._prefix,"_").concat(e)}checkStorage(){wO()&&(setInterval(this.doFlush.bind(this),2e4),Object.keys(localStorage).filter((e=>{if(e.startsWith(this._prefix))try{let t=localStorage.getItem(e);if(!t)return!1;let r=JSON.parse(t);if(r&&r.expiresIn<Date.now())return!0}catch(e){return!1}return!1})).forEach((e=>localStorage.removeItem(e))))}doFlush(){if(wO())try{for(let[e,t]of this._queue)localStorage.setItem(e,JSON.stringify(t))}catch(e){jO.warn(e)}}getItem(e){if(!wO())return null;try{let t=localStorage.getItem(this.getRealKey(e));if(!t)return null;let r=JSON.parse(t);return r&&r.expiresIn>=Date.now()?r.value:null}catch(e){jO.warn(e)}}setItem(e,t){if(wO())try{let r={expiresIn:Date.now()+Lb,value:t};this._queue.set(this.getRealKey(e),r)}catch(e){jO.warn(e)}}deleteItem(e){if(!wO())return!1;try{return e=this.getRealKey(e),this._queue.delete(e),localStorage.removeItem(e),!0}catch(e){return jO.warn(e),!1}}clear(){if(wO())try{localStorage.clear()}catch(e){jO.warn(e)}}},WO={};FS(WO,{HTTPS_API:()=>Tk,IS_GET_CAPABILITIES_SUPPORTED:()=>Gk,IS_GET_SETTINGS_SUPPORTED:()=>Vk,IS_GET_SYNCHRONIZATION_SOURCES_SUPPORTED:()=>Fk,IS_INSERTABLE_STREAM_SUPPORTED:()=>jk,IS_JITTER_BUFFER_TARGET_SUPPORTED:()=>tM,IS_RTC_RTP_SENDER_SUPPORTED:()=>Lk,IS_SCRIPT_TRANSFORM_SUPPORTED:()=>Hk,IS_SEI_SUPPORTED:()=>Yk,IS_SPC_SUPPORTED:()=>Pk,basis:()=>qk,capabilityCheck:()=>$k,checkSystemRequirementsInternal:()=>Ik,decodeSupportStatus:()=>Ek,encodeSupportStatus:()=>mk,getBrowserInfo:()=>lk,getDisplayResolution:()=>wk,isAddTransceiverSupported:()=>Mk,isBrowserSupported:()=>uk,isGetReceiversSupported:()=>Ok,isGetSendersSupported:()=>Qk,isGetTransceiversSupported:()=>kk,isGetUserMediaSupported:()=>Sk,isMediaDevicesSupported:()=>hk,isMediaSessionSupported:()=>Xk,isMediaStreamTrackProcessorSupported:()=>fk,isReplaceTrackSupported:()=>xk,isRequestVideoFrameCallbackSupported:()=>eM,isSIMDSupported:()=>zk,isScreenCaptureApiAvailable:()=>Ck,isSelectedCandidatePair:()=>vk,isSetParametersSupported:()=>Uk,isSmallStreamAPISupported:()=>Rk,isSmallStreamSupported:()=>Dk,isStopTransceiverSupported:()=>Nk,isTRTCSupported:()=>_k,isUnifiedPlanDefault:()=>Bk,isUsedInHttpProtocol:()=>pk,isWebAudioSupported:()=>bk,isWebCodecSupported:()=>Jk,isWebCodecsSupported:()=>dk,isWebRTCSupported:()=>Wk,isWebTransportSupported:()=>Kk});var JO={};FS(JO,{AUDIO_LEVEL_SCALE:()=>LQ,AudioCodecPipelineType:()=>GQ,AudioDecoderDowngradeState:()=>EQ,AudioPlayerMode:()=>MQ,AudioType:()=>vQ,BASIC_TYPE:()=>UQ,BannedReason:()=>PQ,CONNECTION_CLOSED_REASON:()=>oQ,ClientEvent:()=>aQ,CodecType:()=>jQ,ConnectionEvent:()=>nQ,ConnectionState:()=>mQ,DECODE_FAILED_ERROR_CODE:()=>HQ,FacingMode:()=>QQ,LeaveReason:()=>NQ,LocalTrackEvent:()=>cQ,MULTI_VIDEO_DATA_TYPE:()=>RQ,MediaType:()=>yQ,MediaTypeLabel:()=>TQ,MonitorEventId:()=>DQ,MutedFlag:()=>hQ,NetworkQualityValue:()=>BQ,PlayerState:()=>AQ,ReceiveMode:()=>OQ,RemoteStreamType:()=>bQ,RemoteTrackEvent:()=>dQ,RoomEvent:()=>lQ,SceneNumber:()=>gQ,StreamEvent:()=>sQ,StreamType:()=>SQ,SubscribeMediaType:()=>xQ,TIMER_TYPE:()=>WQ,TRACK_ACTION:()=>CQ,TRACK_KIND:()=>_Q,TrackEvent:()=>uQ,UserRole:()=>fQ,UserRoleNumber:()=>pQ,VideoCodec:()=>FQ,VideoCodecPipelineType:()=>VQ,VideoContentHint:()=>YQ,VideoDecoderDowngradeState:()=>IQ,VideoPlayerMode:()=>kQ,VideoType:()=>wQ});var XO,KO,zO,qO,ZO,$O,eQ,tQ,rQ,iQ,nQ=((iQ=nQ||{}).TRACK_ADDED="track-added",iQ.TRACK_UPDATED="track-updated",iQ.TRACK_SUBSCRIBED="track-subscribed",iQ.STREAM_ADDED="stream-added",iQ.STREAM_REMOVED="stream-removed",iQ.STREAM_UPDATED="stream-updated",iQ.STREAM_PUBLISHED="stream-published",iQ.STREAM_SUBSCRIBED="stream-subscribed",iQ.STREAM_UNSUBSCRIBED="stream-unsubscribed",iQ.STATE_CHANGED="state-changed",iQ.ERROR="error",iQ.CONNECTION_STATE_CHANGED="connection-state-changed",iQ.FIREWALL_RESTRICTION="firewall-restriction",iQ.SEI_MESSAGE="sei-message",iQ.CLOSED="closed",iQ),oQ=(e=>(e.REMOTE_LEAVE="remote user exitRoom",e.REMOTE_UNPUBLISH="remote user unpublished",e.LOCAL_LEAVE="you exitRoom",e.LOCAL_UNPUBLISH="you unpublished",e.LOCAL_UNSUBSCRIBE="you unsubscribed",e.SWITCH_ROLE="you switch role to audience",e))(oQ||{}),aQ=((rQ=aQ||{}).STREAM_ADDED="stream-added",rQ.STREAM_REMOVED="stream-removed",rQ.STREAM_UPDATED="stream-updated",rQ.STREAM_SUBSCRIBED="stream-subscribed",rQ.CONNECTION_STATE_CHANGED="connection-state-changed",rQ.PEER_JOIN="peer-join",rQ.PEER_LEAVE="peer-leave",rQ.MUTE_AUDIO="mute-audio",rQ.MUTE_VIDEO="mute-video",rQ.UNMUTE_AUDIO="unmute-audio",rQ.UNMUTE_VIDEO="unmute-video",rQ.CLIENT_BANNED="client-banned",rQ.NETWORK_QUALITY="network-quality",rQ.AUDIO_VOLUME="audio-volume",rQ.SEI_MESSAGE="sei-message",rQ.ERROR="error",rQ),sQ=((tQ=sQ||{}).PLAYER_STATE_CHANGED="player-state-changed",tQ.SCREEN_SHARING_STOPPED="screen-sharing-stopped",tQ.CONNECTION_STATE_CHANGED="connection-state-changed",tQ.DEVICE_AUTO_RECOVERED="device-auto-recovered",tQ.ERROR="error",tQ),cQ=(e=>(e.DEVICE_AUTO_RECOVERED="1",e.DEVICE_RECOVER_FAILED="5",e.DEVICE_CHANGED="2",e.ERROR="3",e.PUBLISH_STATE_CHANGED="4",e.ENCODE_FAILED="6",e))(cQ||{}),AQ=(e=>(e.PAUSED="PAUSED",e.PLAYING="PLAYING",e.STOPPED="STOPPED",e))(AQ||{}),lQ=((eQ=lQ||{}).PEER_JOIN="peer-join",eQ.PEER_LEAVE="peer-leave",eQ.SIGNAL_CONNECTION_STATE_CHANGED="signal-connection-state-changed",eQ.MEDIA_CONNECTION_STATE_CHANGED="media-connection-state-changed",eQ.BANNED="banned",eQ.NETWORK_QUALITY="network-quality",eQ.AUDIO_VOLUME="audio-volume",eQ.SEI_MESSAGE="sei-message",eQ.ERROR="error",eQ.REMOTE_PUBLISH_STATE_CHANGED="remote-publish-state-changed",eQ.REMOTE_PUBLISHED="remote-published",eQ.REMOTE_UNPUBLISHED="remote-unpublished",eQ.FIREWALL_RESTRICTION="firewall-restriction",eQ.HEARTBEAT_REPORT="heartbeat-report",eQ.CUSTOM_MESSAGE="custom-message",eQ.LAYER_DATA="layerData",eQ.FIRST_VIDEO_FRAME="first-video-frame",eQ.DUMP="dump",eQ),uQ=(($O=uQ||{}).PLAYER_STATE_CHANGED="player-state-changed",$O.MUTE="mute",$O.UNMUTE="unmute",$O.ERROR="error",$O.INPUT_MEDIA_TRACK_CHANGED="input-media-track-changed",$O.OUTPUT_MEDIA_TRACK_CHANGED="output-media-track-changed",$O.FIRST_VIDEO_FRAME="first-video-frame",$O),dQ=(e=>(e.DECODE_FAILED="decode-failed",e.DECODE_DOWNGRADE_STATE_CHANGED="decode-downgrade-state-changed",e))(dQ||{}),hQ=(e=>(e[e.VIDEO=1]="VIDEO",e[e.SMALL=2]="SMALL",e[e.AUX=4]="AUX",e[e.AUDIO=8]="AUDIO",e[e.VIDEO_MUTE=16]="VIDEO_MUTE",e[e.AUX_MUTE=32]="AUX_MUTE",e[e.AUDIO_MUTE=64]="AUDIO_MUTE",e))(hQ||{}),gQ=(e=>(e[e.RTC=1]="RTC",e[e.LIVE=2]="LIVE",e))(gQ||{}),pQ=(e=>(e[e.ANCHOR=20]="ANCHOR",e[e.AUDIENCE=21]="AUDIENCE",e))(pQ||{}),fQ=(e=>(e.ANCHOR="anchor",e.AUDIENCE="audience",e))(fQ||{}),mQ=(e=>(e.CONNECTED="CONNECTED",e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.RECONNECTED="RECONNECTED",e.RECONNECTING="RECONNECTING",e))(mQ||{}),EQ=((ZO=EQ||{}).INITIALIZED="INITIALIZED",ZO.STARTING="STARTING",ZO.STARTED="STARTED",ZO.FAILED="FAILED",ZO),IQ=(e=>(e.INITIALIZED="INITIALIZED",e.STARTING="STARTING",e.STARTED="STARTED",e.FAILED="FAILED",e))(IQ||{}),_Q=(e=>(e.AUDIO="audio",e.VIDEO="video",e.AUXILIARY="auxVideo",e))(_Q||{}),CQ=(e=>(e.ADD="add",e.REMOVE="remove",e))(CQ||{}),yQ=(e=>(e[e.NULL=0]="NULL",e[e.AUDIO=1]="AUDIO",e[e.AUX_VIDEO=2]="AUX_VIDEO",e[e.BIG_VIDEO=4]="BIG_VIDEO",e[e.SMALL_VIDEO=8]="SMALL_VIDEO",e))(yQ||{}),TQ={1:"audio",2:"auxVideo",4:"video"},vQ=((qO=vQ||{})[qO.opus=111]="opus",qO),wQ=(e=>(e[e.h264=100]="h264",e[e.vp8=101]="vp8",e))(wQ||{}),SQ=(e=>(e.Big="big",e.Small="small",e))(SQ||{}),bQ=(e=>(e.Main="main",e.Aux="auxiliary",e))(bQ||{}),RQ=(e=>(e[e.MULTI_DATA_AUDIO=1]="MULTI_DATA_AUDIO",e[e.MULTI_DATA_BIG_IMG=2]="MULTI_DATA_BIG_IMG",e[e.MULTI_DATA_SMALL_IMG=3]="MULTI_DATA_SMALL_IMG",e[e.MULTI_DATA_AUX_IMG=7]="MULTI_DATA_AUX_IMG",e[e.MULTI_DATA_TYPE_BUTT=12]="MULTI_DATA_TYPE_BUTT",e))(RQ||{}),DQ=((zO=DQ||{})[zO.PUBLISH_VIDEO=32768]="PUBLISH_VIDEO",zO[zO.PUBLISH_AUDIO=32769]="PUBLISH_AUDIO",zO[zO.UNPUBLISH_VIDEO=32770]="UNPUBLISH_VIDEO",zO[zO.UNPUBLISH_AUDIO=32771]="UNPUBLISH_AUDIO",zO[zO.MUTE_AUDIO=32772]="MUTE_AUDIO",zO[zO.MUTE_VIDEO=32773]="MUTE_VIDEO",zO[zO.UNMUTE_AUDIO=32774]="UNMUTE_AUDIO",zO[zO.UNMUTE_VIDEO=32775]="UNMUTE_VIDEO",zO[zO.SUBSCRIBE_VIDEO=32776]="SUBSCRIBE_VIDEO",zO[zO.SUBSCRIBE_AUDIO=32777]="SUBSCRIBE_AUDIO",zO[zO.UNSUBSCRIBE_VIDEO=32778]="UNSUBSCRIBE_VIDEO",zO[zO.UNSUBSCRIBE_AUDIO=32779]="UNSUBSCRIBE_AUDIO",zO[zO.SWITCH_CAMERA=32780]="SWITCH_CAMERA",zO[zO.SWITCH_MICROPHONE=32781]="SWITCH_MICROPHONE",zO[zO.REPLACE_VIDEO=32782]="REPLACE_VIDEO",zO[zO.REPLACE_AUDIO=32783]="REPLACE_AUDIO",zO[zO.MUTE_REMOTE_VIDEO=32784]="MUTE_REMOTE_VIDEO",zO[zO.MUTE_REMOTE_AUDIO=32785]="MUTE_REMOTE_AUDIO",zO[zO.UNMUTE_REMOTE_VIDEO=32786]="UNMUTE_REMOTE_VIDEO",zO[zO.UNMUTE_REMOTE_AUDIO=32787]="UNMUTE_REMOTE_AUDIO",zO[zO.JOIN=32788]="JOIN",zO[zO.LEAVE=32789]="LEAVE",zO[zO.SIGNAL_DISCONNECTED=32790]="SIGNAL_DISCONNECTED",zO[zO.SIGNAL_CONNECTED=32791]="SIGNAL_CONNECTED",zO[zO.TRANSPORT_UPLINK_CONNECTED=32792]="TRANSPORT_UPLINK_CONNECTED",zO[zO.TRANSPORT_DOWNLINK_CONNECTED=32793]="TRANSPORT_DOWNLINK_CONNECTED",zO[zO.SIGNAl_RECONNECTING=32794]="SIGNAl_RECONNECTING",zO[zO.SIGNAL_RECONNECT_SUCCESS=32795]="SIGNAL_RECONNECT_SUCCESS",zO[zO.SIGNAL_RECONNECT_FAIL=32796]="SIGNAL_RECONNECT_FAIL",zO[zO.TRANSPORT_UPLINK_RECONNECTING=32797]="TRANSPORT_UPLINK_RECONNECTING",zO[zO.TRANSPORT_UPLINK_RECONNECT_SUCCESS=32798]="TRANSPORT_UPLINK_RECONNECT_SUCCESS",zO[zO.TRANSPORT_UPLINK_RECONNECT_FAIL=32799]="TRANSPORT_UPLINK_RECONNECT_FAIL",zO[zO.TRANSPORT_DOWNLINK_RECONNECTING=32800]="TRANSPORT_DOWNLINK_RECONNECTING",zO[zO.TRANSPORT_DOWNLINK_RECONNECT_SUCCESS=32801]="TRANSPORT_DOWNLINK_RECONNECT_SUCCESS",zO[zO.TRANSPORT_DOWNLINK_RECONNECT_FAIL=32802]="TRANSPORT_DOWNLINK_RECONNECT_FAIL",zO[zO.SUBSCRIBE_SMALL_VIDEO=32803]="SUBSCRIBE_SMALL_VIDEO",zO[zO.UNSUBSCRIBE_SMALL_VIDEO=32804]="UNSUBSCRIBE_SMALL_VIDEO",zO[zO.PUBLISH_AUX=32805]="PUBLISH_AUX",zO[zO.UNPUBLISH_AUX=32806]="UNPUBLISH_AUX",zO[zO.DEVICE_CAPTURE=2003]="DEVICE_CAPTURE",zO[zO.VIDEO_ENCODER=4004]="VIDEO_ENCODER",zO[zO.VIDEO_DECODER=4005]="VIDEO_DECODER",zO),BQ=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.EXCELLENT=1]="EXCELLENT",e[e.GOOD=2]="GOOD",e[e.POOR=3]="POOR",e[e.BAD=4]="BAD",e[e.VERY_BAD=5]="VERY_BAD",e[e.DISCONNECTED=6]="DISCONNECTED",e))(BQ||{}),OQ=(e=>(e[e.MANUAL=0]="MANUAL",e[e.AUTO_AUDIO=1]="AUTO_AUDIO",e[e.AUTO_VIDEO=2]="AUTO_VIDEO",e[e.AUTO_ALL=3]="AUTO_ALL",e))(OQ||{}),QQ=(e=>(e.user="user",e.environment="environment",e))(QQ||{}),kQ=(e=>(e[e.ELEMENT=0]="ELEMENT",e[e.CANVAS_FROM_ELEMENT=1]="CANVAS_FROM_ELEMENT",e[e.CANVAS_WITHOUT_ELEMENT=2]="CANVAS_WITHOUT_ELEMENT",e))(kQ||{}),MQ=(e=>(e[e.ELEMENT=0]="ELEMENT",e[e.CONTEXT=1]="CONTEXT",e))(MQ||{}),PQ=(e=>(e.BANNED="banned",e.KICK="kick",e.USER_TIME_OUT="user_time_out",e.ROOM_DISBAND="room_disband",e))(PQ||{}),NQ=((KO=NQ||{})[KO.USER_EXIT_REASON_TC_USER_EXIT_NORMAL=0]="USER_EXIT_REASON_TC_USER_EXIT_NORMAL",KO[KO.USER_EXIT_REASON_TC_USER_EXIT_TIMEOUT=1]="USER_EXIT_REASON_TC_USER_EXIT_TIMEOUT",KO[KO.USER_EXIT_REASON_TC_USER_EXIT_KICKED=2]="USER_EXIT_REASON_TC_USER_EXIT_KICKED",KO[KO.USER_EXIT_REASON_TC_USER_EXIT_CHANGED=3]="USER_EXIT_REASON_TC_USER_EXIT_CHANGED",KO[KO.USER_KICK_OUT_CODE_BUSINESS_USER=4]="USER_KICK_OUT_CODE_BUSINESS_USER",KO[KO.USER_KICK_OUT_CODE_BUSINESS_ROOM=5]="USER_KICK_OUT_CODE_BUSINESS_ROOM",KO[KO.USER_KICK_OUT_CODE_SERVER_USER=6]="USER_KICK_OUT_CODE_SERVER_USER",KO[KO.USER_KICK_OUT_CODE_SERVER_ROOM=7]="USER_KICK_OUT_CODE_SERVER_ROOM",KO[KO.USER_KICK_SESS_EXSIT=8]="USER_KICK_SESS_EXSIT",KO),LQ=1e8,xQ=class{constructor(){jS(this,"mediaType",0)}set audio(e){e?this.mediaType|=1:this.mediaType&=-2}get audio(){return!!(1&this.mediaType)}set video(e){e?this.mediaType|=4:this.mediaType&=-5}get video(){return!!(4&this.mediaType)}set auxiliary(e){e?this.mediaType|=2:this.mediaType&=-3}get auxiliary(){return!!(2&this.mediaType)}set smallVideo(e){e?this.mediaType|=8:this.mediaType&=-9}get smallVideo(){return!!(8&this.mediaType)}},UQ=(e=>(e.String="string",e.Number="number",e.Boolean="boolean",e.Array="array",e.Object="object",e))(UQ||{}),FQ=(e=>(e.H264="h264",e.H265="h265",e.VP8="vp8",e))(FQ||{}),VQ=(e=>(e[e.ENCRYPT_AND_DECRYPT=0]="ENCRYPT_AND_DECRYPT",e[e.DUMP=1]="DUMP",e[e.SEI=2]="SEI",e[e.ENCODE_AND_DECODE=3]="ENCODE_AND_DECODE",e))(VQ||{}),GQ=(e=>(e[e.ENCRYPT_AND_DECRYPT=0]="ENCRYPT_AND_DECRYPT",e[e.NTP_TO_AUDIO_FRAME=1]="NTP_TO_AUDIO_FRAME",e[e.DUMP=2]="DUMP",e[e.ENCODE_AND_DECODE=3]="ENCODE_AND_DECODE",e))(GQ||{}),jQ=(e=>(e.WebRTC="webrtc",e.WebCodecs="webcodecs",e.WebAssembly="webassembly",e))(jQ||{}),HQ=((XO=HQ||{})[XO.SUCCESS=0]="SUCCESS",XO[XO.FAILED=1]="FAILED",XO[XO.WEBCODEC_INIT=2]="WEBCODEC_INIT",XO[XO.WEBCODEC_CONFIG_NOT_SUPPORT=3]="WEBCODEC_CONFIG_NOT_SUPPORT",XO[XO.WEBCODEC_DECODER_ERROR=4]="WEBCODEC_DECODER_ERROR",XO[XO.WEBCODEC_TRACK_MUTE=5]="WEBCODEC_TRACK_MUTE",XO[XO.WASM_INIT=6]="WASM_INIT",XO[XO.WASM_WEBGL_UNAVALIABLE=7]="WASM_WEBGL_UNAVALIABLE",XO[XO.WASM_DECODER_ERROR=8]="WASM_DECODER_ERROR",XO[XO.WASM_TRACK_MUTE=9]="WASM_TRACK_MUTE",XO[XO.TEST=10]="TEST",XO),YQ=(e=>(e.NONE="",e.DETAIL="detail",e.MOTION="motion",e.TEXT="text",e))(YQ||{}),WQ=(e=>(e.INTERVAL="interval",e.TIMEOUT="timeout",e.RAF="raf",e.RIC="ric",e.INTERVAL_IN_WORKER="intervalInWorker",e))(WQ||{}),JQ={AVOID_REPEATED_CALL:"AVOID_REPEATED_CALL",INVALID_PARAMETER_REQUIRED:"INVALID_PARAMETER_REQUIRED",INVALID_PARAMETER_TYPE:"INVALID_PARAMETER_TYPE",INVALID_PARAMETER_EMPTY:"INVALID_PARAMETER_EMPTY",INVALID_PARAMETER_INSTANCE:"INVALID_PARAMETER_INSTANCE",INVALID_PARAMETER_RANGE:"INVALID_PARAMETER_RANGE",INVALID_PARAMETER_MIN:"INVALID_PARAMETER_MIN",INVALID_PARAMETER_MAX:"INVALID_PARAMETER_MAX",INVALID_PARAMETER_STREAMTYPE:"INVALID_PARAMETER_STREAMTYPE",API_CALL_TIMEOUT:"API_CALL_TIMEOUT",SIGNAL_CHANNEL_RECONNECTION_FAILED:"SIGNAL_CHANNEL_RECONNECTION_FAILED",SIGNAL_CHANNEL_SETUP_FAILED:"SIGNAL_CHANNEL_SETUP_FAILED",ERROR_MESSAGE:"ERROR_MESSAGE",EXCHANGE_SDP_TIMEOUT:"EXCHANGE_SDP_TIMEOUT",DOWNLINK_RECONNECTION_FAILED:"DOWNLINK_RECONNECTION_FAILED",EXCHANGE_SDP_FAILED:"EXCHANGE_SDP_FAILED",UPDATE_OFFER_TIMEOUT:"UPDATE_OFFER_TIMEOUT",UPLINK_RECONNECTION_FAILED:"UPLINK_RECONNECTION_FAILED",INVALID_RECORDID:"INVALID_RECORDID",INVALID_PURE_AUDIO:"INVALID_PURE_AUDIO",INVALID_STREAMID:"INVALID_STREAMID",INVALID_USER_DEFINE_RECORDID:"INVALID_USER_DEFINE_RECORDID",INVALID_USER_DEFINE_PUSH_ARGS:"INVALID_USER_DEFINE_PUSH_ARGS",INVALID_PROXY:"INVALID_PROXY",INVALID_JOIN:"INVALID_JOIN",INVALID_ROOMID_STRING:"INVALID_ROOMID_STRING",INVALID_ROOMID_INTEGER:"INVALID_ROOMID_INTEGER",INVALID_SIGNAL_CHANNEL:"INVALID_SIGNAL_CHANNEL",JOIN_ROOM_TIMEOUT:"JOIN_ROOM_TIMEOUT",JOIN_ROOM_FAILED:"JOIN_ROOM_FAILED",REJOIN_ROOM_FAILED:"REJOIN_ROOM_FAILED",INVALID_DESTROY:"INVALID_DESTROY",INVALID_PUBLISH:"INVALID_PUBLISH",INVALID_UNPUBLISH:"INVALID_UNPUBLISH",INVALID_AUDIENCE:"INVALID_AUDIENCE",INVALID_INITIALIZE:"INVALID_INITIALIZE",INVALID_DUPLICATE_PUBLISHING:"INVALID_DUPLICATE_PUBLISHING",INVALID_SUBSCRIBE_UNDEFINED:"INVALID_SUBSCRIBE_UNDEFINED",INVALID_SUBSCRIBE_LOCAL:"INVALID_SUBSCRIBE_LOCAL",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",SUBSCRIBE_FAILED:"SUBSCRIBE_FAILED",INVALID_ROLE:"INVALID_ROLE",INVALID_PARAMETER_SWITCH_ROLE:"INVALID_PARAMETER_SWITCH_ROLE",INVALID_OPERATION_SWITCH_ROLE:"INVALID_OPERATION_SWITCH_ROLE",SWITCH_ROLE_TIMEOUT:"SWITCH_ROLE_TIMEOUT",SWITCH_ROLE_FAILED:"SWITCH_ROLE_FAILED",CLIENT_BANNED:"CLIENT_BANNED",INVALID_OPERATION_START_PUBLISH_CDN:"INVALID_OPERATION_START_PUBLISH_CDN",INVALID_OPERATION_STOP_PUBLISH_CDN:"INVALID_OPERATION_STOP_PUBLISH_CDN",INVALID_STREAM_ID:"INVALID_STREAM_ID",START_PUBLISH_CDN_FAILED:"START_PUBLISH_CDN_FAILED",STOP_PUBLISH_CDN_FAILED:"STOP_PUBLISH_CDN_FAILED",START_MIX_TRANSCODE:"START_MIX_TRANSCODE",STOP_MIX_TRANSCODE:"STOP_MIX_TRANSCODE",INVALID_AUDIO_VOLUME:"INVALID_AUDIO_VOLUME",ENABLE_SMALL_STREAM_PUBLISHED:"ENABLE_SMALL_STREAM_PUBLISHED",DISABLE_SMALL_STREAM_PUBLISHED:"DISABLE_SMALL_STREAM_PUBLISHED",NOT_SUPPORTED_SMALL_STREAM:"NOT_SUPPORTED_SMALL_STREAM",INVALID_SMALL_STREAM_PROFILE:"INVALID_SMALL_STREAM_PROFILE",INVALID_PARAMETER_REMOTE_STREAM:"INVALID_PARAMETER_REMOTE_STREAM",INVALID_OPERATION_CHANGE_SMALL:"INVALID_OPERATION_CHANGE_SMALL",REMOTE_NOT_PUBLISH_SMALL_STREAM:"REMOTE_NOT_PUBLISH_SMALL_STREAM",INVALID_SWITCH_DEVICE:"INVALID_SWITCH_DEVICE",INVALID_SWITCH_DEVICE_PUBLISHING:"INVALID_SWITCH_DEVICE_PUBLISHING",INVALID_REPLACE_TRACK:"INVALID_REPLACE_TRACK",INVALID_INITIALIZE_LOCAL_STREAM:"INVALID_INITIALIZE_LOCAL_STREAM",INVALID_ADD_TRACK_REPETITIVE:"INVALID_ADD_TRACK_REPETITIVE",INVALID_ADD_TRACK_REMOVING:"INVALID_ADD_TRACK_REMOVING",INVALID_ADD_TRACK_PUBLISHING:"INVALID_ADD_TRACK_PUBLISHING",INVALID_STREAM_INITIALIZED:"INVALID_STREAM_INITIALIZED",INVALID_ADD_TRACK_NUMBER:"INVALID_ADD_TRACK_NUMBER",INVALID_REMOVE_AUDIO_TRACK:"INVALID_REMOVE_AUDIO_TRACK",INVALID_REMOVE_AUDIO_ADDING:"INVALID_REMOVE_AUDIO_ADDING",INVALID_REMOVE_AUDIO_ON:"INVALID_REMOVE_AUDIO_ON",INVALID_REMOVE_TRACK_PUBLISHING:"INVALID_REMOVE_TRACK_PUBLISHING",INVALID_REMOVE_TRACK_NOT_TRACK:"INVALID_REMOVE_TRACK_NOT_TRACK",INVALID_REMOVE_TRACK_NUMBER:"INVALID_REMOVE_TRACK_NUMBER",INVALID_REPLACE_TRACK_NO_TRACK:"INVALID_REPLACE_TRACK_NO_TRACK",REPEAT_JOIN:"REPEAT_JOIN",CLIENT_DESTROYED:"CLIENT_DESTROYED",NOT_BUG_PACKAGE:"NOT_BUG_PACKAGE",START_MIX_TRANSCODE_FAILED:"START_MIX_TRANSCODE_FAILED",STOP_MIX_TRANSCODE_FAILED:"STOP_MIX_TRANSCODE_FAILED",MIX_TRANSCODE_NOT_STARTED:"MIX_TRANSCODE_NOT_STARTED",CANNOT_LESS_THAN_ZERO:"CANNOT_LESS_THAN_ZERO",MIX_PARAMS_VIDEO_FRAMERATE:"MIX_PARAMS_VIDEO_FRAMERATE",MIX_PARAMS_VIDEO_GOP:"MIX_PARAMS_VIDEO_GOP",MIX_PARAMS_AUDIO_BITRATE:"MIX_PARAMS_AUDIO_BITRATE",MIX_PARAMS_USER_Z_ORDER:"MIX_PARAMS_USER_Z_ORDER",MIX_PARAMS_NOT_SELF:"MIX_PARAMS_NOT_SELF",MIX_PARAMS_USER_STREAM:"MIX_PARAMS_USER_STREAM",INVALID_PLAY:"INVALID_PLAY",INVALID_ELEMENT_ID:"INVALID_ELEMENT_ID",INVALID_ELEMENT_ID_TYPE:"INVALID_ELEMENT_ID_TYPE",PLAY_FAILED:"PLAY_FAILED",INVALID_USERID:"INVALID_USERID",INVALID_CREATE_STREAM_SOURCE:"INVALID_CREATE_STREAM_SOURCE",INVALID_CREATE_STREAM_SCREEN:"INVALID_CREATE_STREAM_SCREEN",INVALID_CREATE_STREAM_AUDIO:"INVALID_CREATE_STREAM_AUDIO",INVALID_CREATE_STREAM_SCREEN_AUDIO:"INVALID_CREATE_STREAM_SCREEN_AUDIO",NOT_SUPPORTED_HTTP:"NOT_SUPPORTED_HTTP",NOT_SUPPORTED_WEBRTC:"NOT_SUPPORTED_WEBRTC",NOT_SUPPORTED_PROFILE:"NOT_SUPPORTED_PROFILE",NOT_SUPPORTED_MEDIA:"NOT_SUPPORTED_MEDIA",NOT_SUPPORTED_H264ENCODE:"NOT_SUPPORTED_H264ENCODE",NOT_SUPPORTED_H264DECODE:"NOT_SUPPORTED_H264DECODE",NOT_SUPPORTED_TRACK:"NOT_SUPPORTED_TRACK",NOT_SUPPORTED_SWITCH_DEVICE:"NOT_SUPPORTED_SWITCH_DEVICE",NOT_SUPPORTED_CAPTURE:"NOT_SUPPORTED_CAPTURE",NOT_SUPPORTED_AUX:"NOT_SUPPORTED_AUX",MICROPHONE_NOT_FOUND:"MICROPHONE_NOT_FOUND",CAMERA_NOT_FOUND:"CAMERA_NOT_FOUND",SIGNAL_RESPONSE_FAILED:"SIGNAL_RESPONSE_FAILED",CATCH_HANDLER_ERROR:"CATCH_HANDLER_ERROR",API_NOT_EXIST:"API_NOT_EXIST",CONNECTION_CLOSED:"CONNECTION_CLOSED",SUBSCRIBE_ALL_FALSE:"SUBSCRIBE_ALL_FALSE",SEI_NOT_SUPPORT:"SEI_NOT_SUPPORT",SEI_DISABLED:"SEI_DISABLED",SEI_BEFORE_PUBLISH:"SEI_BEFORE_PUBLISH",SEI_NOT_VIDEO:"SEI_NOT_VIDEO",CALL_FREQUENCY_LIMIT:"CALL_FREQUENCY_LIMIT",CONNECTION_ABORTED:"CONNECTION_ABORTED",API_CALL_ABORTED:"API_CALL_ABORTED",DUPLICATE_AUX:"DUPLICATE_AUX"},XQ={AVOID_REPEATED_CALL:e=>"previous ".concat(e.name,"() is ongoing, please avoid repeated calls."),INVALID_PARAMETER_REQUIRED(e){let{key:t,rule:r,fnName:i,value:n}=e;return"'".concat(t||r.name,"' is a required param when calling ").concat(i,"(), received: ").concat(n,".")},INVALID_PARAMETER_TYPE(e){let{key:t,rule:r,fnName:i,value:n}=e,o="".concat(t||r.name),a="";return a=Array.isArray(r.type)?r.type.join("|"):r.type,"'".concat(o,"' must be type of ").concat(a," when calling ").concat(i,"(), received type: ").concat(sD(n),".")},INVALID_PARAMETER_EMPTY(e){let{key:t,rule:r,fnName:i,value:n}=e;return"'".concat(t||r.name,"' cannot be '").concat(n,"' when calling ").concat(i,"().")},INVALID_PARAMETER_INSTANCE(e){let{key:t,rule:r,fnName:i,value:n}=e,o="".concat(t||r.name),a="".concat(r.instanceOf.name||r.instanceOf);return"'".concat(o,"' must be instanceof ").concat(a," when calling ").concat(i,"(), received type: ").concat(sD(n),".")},INVALID_PARAMETER_RANGE(e){let{key:t,rule:r,fnName:i,value:n}=e;return"'".concat(t||r.name,"' must be one of ").concat(r.values.join("|")," when calling ").concat(i,"(), received: ").concat(n,".")},INVALID_PARAMETER_MIN(e){let{key:t,rule:r,fnName:i,value:n}=e;return"the min value of ".concat(t||r.name," is ").concat(r.min,", received: ").concat(n,".")},INVALID_PARAMETER_MAX(e){let{key:t,rule:r,fnName:i,value:n}=e;return"the max value of ".concat(t||r.name," is ").concat(r.max,", received: ").concat(n,".")},API_CALL_TIMEOUT:e=>"".concat(e.commandDesc||e.command," timeout observed."),SIGNAL_CHANNEL_RECONNECTION_FAILED:"signal channel reconnection failed, please check your network.",SIGNAL_CHANNEL_SETUP_FAILED:e=>"SignalChannel setup failure: (errorCode: ".concat(e.errorCode,", errorMsg: ").concat(e.errorMsg," })."),ERROR_MESSAGE(e){let t="".concat(e.type," failed");return e.message&&(t="".concat(t,": ").concat(e.message,".")),t},EXCHANGE_SDP_TIMEOUT:"exchange sdp timeout.",DOWNLINK_RECONNECTION_FAILED:"downlink reconnection failed, please check your network and re-join room.",EXCHANGE_SDP_FAILED:e=>"exchange sdp failed ".concat(e.errMsg,"."),UPDATE_OFFER_TIMEOUT:"update offer timeout observed.",UPLINK_RECONNECTION_FAILED:"uplink reconnection failed, please check your network and publish again.",INVALID_RECORDID:"recordId must be an integer number.",INVALID_PURE_AUDIO:"pureAudioPushMode must be 1 or 2.",INVALID_STREAMID:"streamId must be a sting literal within 64 bytes, and not be empty.",INVALID_USER_DEFINE_RECORDID:"userDefineRecordId must be a sting literal contains (a-zA-Z),(0-9), underline and hyphen, within 64 bytes, and not be empty.",INVALID_USER_DEFINE_PUSH_ARGS:"userDefinePushArgs must be a sting literal within 256 bytes, and not be empty.",INVALID_PROXY:'proxy server url must start with "wss://".',INVALID_JOIN:"duplicate join() called.",INVALID_ROOMID_STRING:e=>"'".concat(e,"' must be validate string when useStringRoomId is true."),INVALID_ROOMID_INTEGER:e=>"'".concat(e,"' must be an integer between [1, 4294967294] when useStringRoomId is false."),INVALID_SIGNAL_CHANNEL:"SignalChannel is not ready yet.",JOIN_ROOM_TIMEOUT:"join room timeout.",JOIN_ROOM_FAILED(e){let{error:t,code:r}=e;return"Failed to join room - ".concat(t," code: ").concat(r)},REJOIN_ROOM_FAILED:e=>"reJoin room: ".concat(e.roomId," failed, please check your network."),INVALID_DESTROY:"please call leave() before destroy().",INVALID_PUBLISH:"please call join() before publish().",INVALID_UNPUBLISH:"stream has not been published yet.",INVALID_AUDIENCE:'no permission to publish() under live/audience, please call switchRole("anchor") firstly before publish().',INVALID_INITIALIZE:"cannot publish stream because stream is not initialized, is switching device, or has been closed.",INVALID_DUPLICATE_PUBLISHING:e=>"duplicate ".concat(e," stream publishing, please unpublish your prev ").concat(e," stream and then re-publish."),INVALID_SUBSCRIBE_UNDEFINED:"stream is undefined or null.",INVALID_SUBSCRIBE_LOCAL:"stream cannot be LocalStream.",INVALID_REMOTE_STREAM:"remoteStream does not exist because it has been unpublished by remote peer.",SUBSCRIBE_FAILED(e){let{message:t,userId:r,streamType:i}=e;return"failed to subscribe ".concat(r," ").concat(i," stream, reason: ").concat(t,".")},INVALID_ROLE:"switchRole can only be called in live mode.",INVALID_PARAMETER_SWITCH_ROLE:"role could only be set to a value as anchor or audience.",INVALID_OPERATION_SWITCH_ROLE:"please call join() before switchRole().",SWITCH_ROLE_TIMEOUT:"switchRole timeout.",SWITCH_ROLE_FAILED:e=>"switchRole failed, errCode: ".concat(e.code," errMsg: ").concat(e.message,"."),CLIENT_BANNED:e=>"client was banned because of ".concat(e.message,"."),INVALID_OPERATION_START_PUBLISH_CDN:"please call startPublishCDNStream() after join room and publish the local stream.",INVALID_OPERATION_STOP_PUBLISH_CDN:"please call startPublishCDNStream() before stopPublishCDNStream().",START_PUBLISH_CDN_FAILED:e=>"startPublishCDNStream failed, errMsg: ".concat(e.message,"."),STOP_PUBLISH_CDN_FAILED:e=>"stopPublishCDNStream failed, errMsg: ".concat(e.message,"."),INVALID_STREAM_ID:e=>"'".concat(e,"' can only consist of uppercase and lowercase english letters (a-zA-Z), numbers (0-9), hyphens and underscores."),START_MIX_TRANSCODE:"please call startMixTranscode() after join().",STOP_MIX_TRANSCODE:"please call stopMixTranscode() after startMixTranscode().",INVALID_AUDIO_VOLUME:"interval must be a number.",ENABLE_SMALL_STREAM_PUBLISHED:"Cannot enable small stream after localStream published.",DISABLE_SMALL_STREAM_PUBLISHED:"Cannot disable small stream after localStream published.",NOT_SUPPORTED_SMALL_STREAM:"your browser does not support opening small stream.",INVALID_SMALL_STREAM_PROFILE:"small stream profile is invalid.",INVALID_PARAMETER_REMOTE_STREAM:"remoteStream is invalid.",INVALID_OPERATION_CHANGE_SMALL:"cannot switch to the small stream without subscribing to the video of remoteStream.",REMOTE_NOT_PUBLISH_SMALL_STREAM:"remote peer does not publish small stream.",INVALID_SWITCH_DEVICE:"cannot switch device on current stream.",INVALID_SWITCH_DEVICE_PUBLISHING:"cannot switch device when publishing localStream.",INVALID_REPLACE_TRACK:"cannot replace track when publishing localStream.",INVALID_INITIALIZE_LOCAL_STREAM:"local stream has not initialized yet.",INVALID_ADD_TRACK_REPETITIVE:"previous addTrack is ongoing, please avoid repetitive execution.",INVALID_ADD_TRACK_REMOVING:"cannot add track when a track is removing.",INVALID_ADD_TRACK_PUBLISHING:"cannot add track when publishing localStream.",INVALID_STREAM_INITIALIZED:"your local stream haven't been initialized yet.",INVALID_ADD_TRACK_NUMBER:"a Stream has at most one audio track and one video track.",INVALID_REMOVE_AUDIO_TRACK:"remove audio track is not supported on your browser.",INVALID_REMOVE_AUDIO_ADDING:"cannot remove track when a track is adding.",INVALID_REMOVE_AUDIO_ON:"previous removeTrack is ongoing, please avoid repetitive execution.",INVALID_REMOVE_TRACK_PUBLISHING:"cannot remove track when publishing localStream.",INVALID_REMOVE_TRACK_NOT_TRACK:"localStream has not this track.",INVALID_REMOVE_TRACK_NUMBER:"remove the only video track is not supported, please use replaceTrack or muteVideo.",INVALID_REPLACE_TRACK_NO_TRACK:e=>"cannot replace ".concat(e.kind," track because stream has not ").concat(e.kind," track"),NOT_BUG_PACKAGE:"You need to buy packages, refer to tencent console.",START_MIX_TRANSCODE_FAILED:e=>"startMixTranscode failed, errMsg: ".concat(e.message,"."),STOP_MIX_TRANSCODE_FAILED:e=>"stopMixTranscode failed, errMsg: ".concat(e.message,"."),MIX_TRANSCODE_NOT_STARTED:"mixTranscode has not been started.",CANNOT_LESS_THAN_ZERO(e){let{key:t,rule:r,fnName:i,value:n}=e;return"'".concat(t||r.name,"' cannot be less than 0 when calling ").concat(i,"().")},MIX_PARAMS_VIDEO_FRAMERATE:"'config.videoFramerate' should be an integer between 0 and 30, excluding 0.",MIX_PARAMS_VIDEO_GOP:"'config.videoGOP' should be an integer between 1 and 8.",MIX_PARAMS_AUDIO_BITRATE:"'config.audioBitrate' should be an integer between 32 and 192.",MIX_PARAMS_USER_Z_ORDER:e=>"'".concat(e,"' is required and must be between 1 and 15."),MIX_PARAMS_NOT_SELF:"'config.mixUsers' must contain self.",MIX_PARAMS_USER_STREAM:"'config.videoWidth' and 'config.videoHeight' of output stream should be contain all mix stream.",INVALID_PLAY:"duplicate play() call observed, please stop() firstly.",INVALID_ELEMENT_ID:e=>{let{key:t,fnName:r}=e;return"'".concat(t,"' is not found in the document object when calling ").concat(r,"().")},INVALID_ELEMENT_ID_TYPE:e=>{let{key:t,fnName:r,type:i}=e;return"the element corresponding to '".concat(t,"' must be instanceof HTMLElement when calling ").concat(r,"(), received: ").concat(i,".")},PLAY_FAILED:e=>"".concat(e.media," play failed, browser exception: ").concat(e.error.toString()),INVALID_USERID:"userId cannot be all spaces.",INVALID_CREATE_STREAM_SOURCE:"LocalStream must be created by createStream() with either audio/video or audioSource/videoSource, but can not be mixed with audio/video and audioSource/videoSource.",INVALID_CREATE_STREAM_SCREEN:"screen/video cannot be both true.",INVALID_CREATE_STREAM_AUDIO:"audio/screenAudio cannot be both true.",INVALID_CREATE_STREAM_SCREEN_AUDIO:"when screen is true, screenAudio can be configured.",NOT_SUPPORTED_HTTP:"http protocol does not support the ability to capture microphone, camera and screen. please use https to deploy your page.",NOT_SUPPORTED_WEBRTC:"your browser or environment does not support full WebRTC capabilities.",NOT_SUPPORTED_PROFILE:"your browser does not support setVideoProfile.",NOT_SUPPORTED_MEDIA:"your browser or environment does not support navigator.mediaDevices.",NOT_SUPPORTED_H264ENCODE:"your device does not support H.264 encoding.",NOT_SUPPORTED_H264DECODE:"your device does not support H.264 decoding.",NOT_SUPPORTED_TRACK:e=>"".concat(e,"Track is not supported on your browser."),NOT_SUPPORTED_SWITCH_DEVICE:"switchDevice is not supported on your browser.",NOT_SUPPORTED_CAPTURE:"Your browser or environment does not support screen sharing, please check whether the browser version.",MICROPHONE_NOT_FOUND:"no microphone detected, please check your microphone.",CAMERA_NOT_FOUND:"no camera detected, please check your camera.",SIGNAL_RESPONSE_FAILED:e=>"".concat(e.signalResponse," failed, response code is ").concat(e.code," , errMsg: ").concat(e.message,"."),CATCH_HANDLER_ERROR(e){let{name:t,event:r}=e;return"an error was caught in ".concat(t,".on('").concat(r,"', handler), please check your code in 'handler'.")},API_NOT_EXIST(e){let{name:t}=e;return"experimental api ".concat(t," does not exist.")},REPEAT_JOIN:e=>"please avoid repeated join.",CONNECTION_CLOSED:"remoteStream has been unsubscribed or unpublished by remote user.",SUBSCRIBE_ALL_FALSE:"cannot subscribe when both audio & video are false, use client.unsubscribe() instead",CLIENT_DESTROYED(e){let{funName:t}=e;return"failed to call ".concat(t,"() because client was destroyed.")},SEI_NOT_SUPPORT:e=>"not support to sendSEIMessage".concat(!1===e?" without using h264 codec":""),SEI_DISABLED:"SEI is disabled",SEI_BEFORE_PUBLISH:"please call sendSEIMessage() after publish() success",SEI_NOT_VIDEO:"cannot send sei when localStream has not video.",CALL_FREQUENCY_LIMIT:e=>{let{isSize:t,name:r,timesInSecond:i,maxSizeInSecond:n}=e;return"api ".concat(r," call ").concat(t?"size":"times"," is over ").concat(t?"".concat(n," bytes"):i," in a second.")},CONNECTION_ABORTED:e=>"connection aborted due to: ".concat(e),API_CALL_ABORTED(e){let t;return t=e.message.includes("REMOTE_STREAM_NOT_EXIST")?"Subscribe ".concat(e.userId," ").concat(e.streamType," stream aborted, reason: remote user ").concat(e.userId," unpublished stream."):"API aborted, reason: ".concat(e.message),t},DUPLICATE_AUX:"only one auxiliary stream can be published in a room.",NOT_SUPPORTED_AUX:"publish auxiliary stream is not supported on your browser.",INVALID_PARAMETER_STREAMTYPE:e=>"'streamType' is required when 'userId' is not '*', calling ".concat(e,"()")},KQ=(e,t)=>t?"".concat(wb,"/").concat(e,"/").concat(t):"".concat(wb,"/").concat(e,"/index.html"),zQ=()=>{if(window.TRTC_ERROR_INFO&&window.TRTC_ERROR_LINK)return{TRTC_ERROR_INFO:window.TRTC_ERROR_INFO,TRTC_ERROR_LINK:window.TRTC_ERROR_LINK};let e=null==localStorage?void 0:localStorage.getItem(Bb);if(e){e=JSON.parse(e);let t=document.createElement("script");t.type="text/javascript",t.text=e.message,document.body.appendChild(t);let r=window.TRTC_ERROR_INFO,i=window.TRTC_ERROR_LINK;return document.body.removeChild(t),{TRTC_ERROR_INFO:r,TRTC_ERROR_LINK:i}}return{}};function qQ(e){let{key:t,data:r,link:i,addDocLink:n=!0}=e,o="",a="",s="";cD(XQ[t])?o=XQ[t](r):lD(XQ[t])&&(o=XQ[t]);let{TRTC_ERROR_INFO:c,TRTC_ERROR_LINK:A}=zQ();i?s="".concat(i.className,".html#").concat(i.fnName):A&&A[t]&&(cD(A[t])?s=A[t](r):lD(A[t])&&(s=A[t]));let l=o;return iD()&&(c&&c[t]&&(cD(c[t])?a=c[t](r):lD(c[t])&&(a=c[t])),a&&(l=n?"".concat(a,"\n请查看文档: ").concat(KQ("zh-cn",s),"\n\n"):"".concat(a,"\n\n"),l+=o)),n&&(l+=" \nRefer to: ".concat(KQ("en",s),"\n")),l}var ZQ,$Q=VS(zS(),1),ek=class{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];jS(this,"countMap",new Map),jS(this,"distributionMap",new Map),jS(this,"version"),jS(this,"log",jO.createLogger({id:"kv"})),e&&(UO.on("102",(e=>{let{track:t,cost:r}=e;this.addSuccessEvent({key:t.kind===Vb.AUDIO?501700:511700,cost:r})})),UO.on("103",(e=>{let{track:t,error:r}=e;this.addFailedEvent({key:t.kind===Vb.AUDIO?501700:511700,error:r})})))}getReportData(){let e={msg_sdk_basic_info:{uint32_sdk_version:FD(this.version||db),uint32_terminal_type:15,bytes_device_name:"",bytes_os_version:"",uint32_framework:30,uint32_network_type:0},stats_count:[...this.countMap.entries()].map((e=>{let[t,r]=e;return{uint32_key:t,uint32_count:r}})),stats_distribution:[...this.distributionMap.entries()].map((e=>{let[t,r]=e;return{uint32_key:t,distribution_items:[...r.entries()].map((e=>{let[t,r]=e;return{uint32_item_key:t,uint32_item_value:r}}))}}))};return this.countMap.clear(),this.distributionMap.clear(),e}clear(){this.countMap.clear(),this.distributionMap.clear()}isEnumKey(e){let t=+String(e).slice(-3);return t>=700&&t<799}isErrorCodeKey(e){let t=+String(e).slice(-3);return t>=600&&t<699}isCountKey(e){let t=+String(e).slice(-3);return t>=0&&t<599}isNumberKey(e){let t=+String(e).slice(-3);return t>=800&&t<899}addCount(e){let{key:t,useUV:r=!1}=e;this.isCountKey(t)?r&&this.countMap.has(t)||this.countMap.set(t,(this.countMap.get(t)||0)+1):this.log.debug("".concat(t," is not count key, last 3 number should be 0~599"))}addEnum(e){let{key:t,value:r,useUV:i=!0}=e;var n;if(!this.isEnumKey(t))return this.log.debug("".concat(t," is not enum key, last 3 number should be 700~799"));if(i&&this.countMap.has(t))return;this.countMap.set(t,(this.countMap.get(t)||0)+1);let o=(null==(n=this.distributionMap)?void 0:n.get(t))||new Map;o.set(r,(o.get(r)||0)+1),this.distributionMap.set(t,o)}addNumber(e){let{key:t,value:r,split:i=100,useUV:n=!1}=e;var o;if(!this.isNumberKey(t))return this.log.debug("".concat(t," is not number key, last 3 number should be 800~899"));if(n&&this.countMap.has(t))return;this.countMap.set(t,(this.countMap.get(t)||0)+1);let a=(null==(o=this.distributionMap)?void 0:o.get(t))||new Map,s=0;if(uD(i))s=Math.floor(r/i);else for(let e=i.length-1;e>0;e--)if(r>i[e]){s=e;break}a.set(s,(a.get(s)||0)+1),this.distributionMap.set(t,a)}addSuccessEvent(e){let{key:t,cost:r,timeKey:i,split:n}=e;if(t&&(this.addEnum({key:t,value:1,useUV:!1}),r)){let e=+String(t).slice(-3);e<800&&e>=700?this.addNumber({key:i||t+100,value:r,split:n}):i||this.log.debug("time stat ignored, ".concat(t))}}addFailedEvent(e){let{key:t,error:r}=e;if(!t)return;let i=ib.UNKNOWN;r&&(uD(r)?i=r:(!AD(r.extraCode)||!AD(r.code))&&(i=r.extraCode||r.code)),this.addEnum({key:t,value:0,useUV:!1}),this.addEnum({key:t,value:i,useUV:!1})}},tk=((ZQ=tk||{})[ZQ.enterRoom=500700]="enterRoom",ZQ[ZQ.exitRoom=500701]="exitRoom",ZQ[ZQ.switchRole=500702]="switchRole",ZQ[ZQ.destroy=500703]="destroy",ZQ[ZQ.startLocalAudio=500704]="startLocalAudio",ZQ[ZQ.updateLocalAudio=500705]="updateLocalAudio",ZQ[ZQ.stopLocalAudio=500706]="stopLocalAudio",ZQ[ZQ.startLocalVideo=500707]="startLocalVideo",ZQ[ZQ.updateLocalVideo=500708]="updateLocalVideo",ZQ[ZQ.stopLocalVideo=500709]="stopLocalVideo",ZQ[ZQ.startScreenShare=500710]="startScreenShare",ZQ[ZQ.updateScreenShare=500711]="updateScreenShare",ZQ[ZQ.stopScreenShare=500712]="stopScreenShare",ZQ[ZQ.startRemoteVideo=500713]="startRemoteVideo",ZQ[ZQ.updateRemoteVideo=500714]="updateRemoteVideo",ZQ[ZQ.stopRemoteVideo=500715]="stopRemoteVideo",ZQ[ZQ.muteRemoteAudio=500716]="muteRemoteAudio",ZQ[ZQ.setRemoteAudioVolume=500717]="setRemoteAudioVolume",ZQ[ZQ.use=500718]="use",ZQ[ZQ.sendSEIMessage=5e5]="sendSEIMessage",ZQ[ZQ.sendCustomMessage=500001]="sendCustomMessage",ZQ),rk=(e=>(e[e.AudioMixer=550700]="AudioMixer",e[e.AIDenoiser=551700]="AIDenoiser",e[e.VirtualBackground=570700]="VirtualBackground",e[e.Beauty=571700]="Beauty",e[e.Watermark=572700]="Watermark",e[e.BasicBeauty=574700]="BasicBeauty",e[e.CDNStreaming=590700]="CDNStreaming",e[e.DeviceDetector=591700]="DeviceDetector",e[e.Debug=592700]="Debug",e))(rk||{}),ik=(e=>(e[e.AudioMixer=550701]="AudioMixer",e[e.AIDenoiser=551701]="AIDenoiser",e[e.VirtualBackground=570701]="VirtualBackground",e[e.Beauty=571701]="Beauty",e[e.Watermark=572701]="Watermark",e[e.BasicBeauty=574701]="BasicBeauty",e[e.CDNStreaming=590701]="CDNStreaming",e[e.DeviceDetector=591701]="DeviceDetector",e[e.Debug=592701]="Debug",e))(ik||{}),nk=(e=>(e[e.AudioMixer=550702]="AudioMixer",e[e.AIDenoiser=551702]="AIDenoiser",e[e.VirtualBackground=570702]="VirtualBackground",e[e.Beauty=571702]="Beauty",e[e.Watermark=572702]="Watermark",e[e.BasicBeauty=574702]="BasicBeauty",e[e.CDNStreaming=590702]="CDNStreaming",e[e.DeviceDetector=591702]="DeviceDetector",e[e.Debug=592702]="Debug",e))(nk||{}),ok=new ek(!0),ak=new ek(!1),sk=ok,ck={result:!1,detail:{isBrowserSupported:!1,isWebRTCSupported:!1,isWebCodecsSupported:!1,isMediaDevicesSupported:!1,isScreenShareSupported:!1,isSmallStreamSupported:!1,isH264EncodeSupported:!1,isVp8EncodeSupported:!1,isH264DecodeSupported:!1,isVp8DecodeSupported:!1}},Ak=new Map([[gB,["Firefox",pB]],[IB,["Edg",_B]],[uO,["Chrome",gO]],[pO,["Safari",mO]],[SB,["TBS",bB]],[RB,["XWEB",DB]],[kB&&sB,["WeChat",MB]],[xB,["QQ(Win)",UB]],[NB,["QQ(Mobile)",LB]],[PB,["QQ(Mobile X5)",LB]],[FB,["QQ(Mac)",VB]],[GB,["QQ(iPad)",jB]],[qB,["MI",ZB]],[$B,["HW",rO]],[iO,["Samsung",nO]],[oO,["OPPO",aO]],[sO,["VIVO",cO]],[mB,["EDGE",EB]],[yB,["SogouMobile",TB]],[vB,["Sogou",wB]]]);function lk(){let e=Ak.get(!0);return{browserName:e?e[0]:"unknown",browserVersion:e?e[1]:"unknown"}}var uk=function(){return!(KB||mB||IB&&CB<80||gB&&fB<56)},dk=function(){return["VideoDecoder","VideoEncoder","AudioEncoder","AudioDecoder","MediaStreamTrackGenerator"].every((e=>e in window))},hk=function(){if(!navigator.mediaDevices)return pk()||jO.error(XQ.NOT_SUPPORTED_MEDIA),!1;let e=["getUserMedia","enumerateDevices"];return e.filter((e=>e in navigator.mediaDevices)).length===e.length},gk=!1;function pk(){return"http:"===location.protocol&&!vO&&(gk||jO.error(qQ({key:JQ.NOT_SUPPORTED_HTTP})),gk=!0,!0)}var fk=function(){return(null==window?void 0:window.OffscreenCanvas)&&(null==window?void 0:window.MediaStreamTrackProcessor)&&(null==window?void 0:window.MediaStreamTrackGenerator)},mk=function(){return YS(this,null,(function*(){if(ck.detail.isH264EncodeSupported&&ck.detail.isVp8EncodeSupported)return{isH264EncodeSupported:ck.detail.isH264EncodeSupported,isVp8EncodeSupported:ck.detail.isVp8EncodeSupported};let e,t=!1,r=!1;try{let i=new RTCPeerConnection,n=document.createElement(Vb.CANVAS);n.getContext("2d");let o=n.captureStream(0);return i.addTrack(o.getVideoTracks()[0],o),e=yield i.createOffer(),-1!==e.sdp.toLowerCase().indexOf("h264")&&(t=!0),-1!==e.sdp.toLowerCase().indexOf("vp8")&&(r=!0),i.close(),ck.detail.isH264EncodeSupported=t,ck.detail.isVp8EncodeSupported=r,{isH264EncodeSupported:ck.detail.isH264EncodeSupported,isVp8EncodeSupported:ck.detail.isVp8EncodeSupported}}catch(e){return{isH264EncodeSupported:!1,isVp8EncodeSupported:!1}}}))},Ek=function(){return YS(this,null,(function*(){if(ck.detail.isH264DecodeSupported&&ck.detail.isVp8DecodeSupported)return{isH264DecodeSupported:ck.detail.isH264DecodeSupported,isVp8DecodeSupported:ck.detail.isVp8DecodeSupported};let e,t=!1,r=!1;try{let i=new RTCPeerConnection;return e=yield i.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}),-1!==e.sdp.toLowerCase().indexOf("h264")&&(t=!0),-1!==e.sdp.toLowerCase().indexOf("vp8")&&(r=!0),i.close(),{isH264DecodeSupported:t,isVp8DecodeSupported:r}}catch(e){return{isH264DecodeSupported:!1,isVp8DecodeSupported:!1}}}))},Ik=jD((()=>YS(void 0,null,(function*(){if(ck.result&&ck.detail.isH264EncodeSupported&&ck.detail.isVp8EncodeSupported&&ck.detail.isH264DecodeSupported&&ck.detail.isVp8DecodeSupported)return ck;let e=Date.now(),t=uk(),r=Wk(),i=dk(),n=hk(),{isH264EncodeSupported:o,isVp8EncodeSupported:a}=yield mk(),{isH264DecodeSupported:s,isVp8DecodeSupported:c}=yield Ek();if(!o||!a){let e=yield mk();jO.warn("detect encode again h264:".concat(o," vp8:").concat(a," result: ").concat(JSON.stringify(e))),o=e.isH264EncodeSupported,a=e.isVp8EncodeSupported}if(o&&s&&(oO||sO||EO)&&!SB&&AO()<79){let{encode:e,decode:t}=yield function(){return YS(this,null,(function*(){return yk||(yk=new Promise((e=>YS(this,null,(function*(){let t={encode:!1,decode:!1},r=()=>{};try{jO.warn("detectH264Supported start");let i=document.createElement("canvas"),n=i.getContext("2d");i.width=320,i.height=240;let o=setInterval((()=>{n.fillText("test",Math.floor(320*Math.random()),Math.floor(240*Math.random()))}),66),a=-1,s=-1;r=()=>{clearInterval(a),clearInterval(o),clearTimeout(s),A.close(),l.close(),c.getTracks().forEach((e=>e.stop()))},s=setTimeout((()=>{r(),e(t)}),2e3);let c=i.captureStream(),A=new RTCPeerConnection({}),l=new RTCPeerConnection({offerToReceiveAudio:!0,offerToReceiveVideo:!0});A.addEventListener("icecandidate",(e=>l.addIceCandidate(e.candidate))),l.addEventListener("icecandidate",(e=>A.addIceCandidate(e.candidate))),A.addTrack(c.getVideoTracks()[0],c);let u=yield A.createOffer();yield A.setLocalDescription(u),yield l.setRemoteDescription(u);let d=yield l.createAnswer(),h=$Q.default.parse(d.sdp),g=h.media[0].rtp.findIndex((e=>"H264"===e.codec));h.media[0].rtp=[h.media[0].rtp[g]],h.media[0].fmtp=h.media[0].fmtp.filter((e=>e.payload===h.media[0].rtp[0].payload)),h.media[0].rtcpFb&&(h.media[0].rtcpFb=h.media[0].rtcpFb.filter((e=>e.payload===h.media[0].rtp[0].payload))),d.sdp=$Q.default.write(h),yield l.setLocalDescription(d),yield A.setRemoteDescription(d),a=setInterval((()=>YS(this,null,(function*(){t.encode&&t.decode&&(r(),e(t));let i=yield A.getSenders()[0].getStats(),n=yield l.getReceivers()[0].getStats();t.encode||i.forEach((e=>{"outbound-rtp"===e.type&&e.mediaType===Vb.VIDEO&&e.bytesSent>0&&(t.encode=!0)})),t.decode||n.forEach((e=>{"inbound-rtp"===e.type&&e.mediaType===Vb.VIDEO&&e.bytesReceived>0&&(t.decode=!0)}))}))),100)}catch(i){r(),jO.warn(i),e(t)}})))).then((e=>((!e.encode||!e.decode)&&jO.warn("detectH264Supported encode: ".concat(e.encode," decode: ").concat(e.decode," ").concat(DO)),e))),yk)}))}();o=e,s=t}return ck.result=t&&r&&n&&(o||a)&&(s||c),ck.detail.isBrowserSupported=t,ck.detail.isWebRTCSupported=r,ck.detail.isWebCodecsSupported=i,ck.detail.isMediaDevicesSupported=n,ck.detail.isScreenShareSupported=Ck(),ck.detail.isSmallStreamSupported=Dk(),ck.detail.isH264EncodeSupported=o,ck.detail.isVp8EncodeSupported=a,ck.detail.isH264DecodeSupported=s,ck.detail.isVp8DecodeSupported=c,ck.result||jO.error("".concat(navigator.userAgent," ").concat(ND(ck.detail,!1))),YO.setItem(Zk,{ua:navigator.userAgent,checkResult:ck}),sk.addNumber({key:523800,value:Date.now()-e}),ck})))),_k=function(){return ck.result},Ck=function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)},yk=null,Tk=(e,t,r)=>{"http:"===location.protocol&&!vO&&(e[t]=()=>{throw new ob({code:ib.INVALID_OPERATION,message:XQ.NOT_SUPPORTED_HTTP})})},vk=function(e){return!("candidate-pair"!==e.type||!e.nominated||"in-progress"!==e.state&&"succeeded"!==e.state||dD(e.selected)&&!e.selected)};function wk(){let e="";if(screen.width){let t=screen.width?screen.width*window.devicePixelRatio:"",r=screen.height?screen.height*window.devicePixelRatio:"";e+="".concat(t," * ").concat(r)}return e}function Sk(){return navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function bk(){let e={isSupported:!1},t=["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"];for(let r=0;r<t.length;r++)if(t[r]in window){e.isSupported=!0;break}return e.isSupported}function Rk(){return"captureStream"in HTMLCanvasElement.prototype}function Dk(){return!(kB||AB||hO&&hO<63||!uk()||!Rk())}var Bk=function(){if(AD(window.RTCRtpTransceiver)||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let e=null,t=!1;try{e=new RTCPeerConnection({sdpSemantics:CR}),e.addTransceiver(Vb.AUDIO),t=!0}catch(e){}return null==e||e.close(),t};function Ok(){return"RTCPeerConnection"in window&&"getReceivers"in window.RTCPeerConnection.prototype}function Qk(){return"RTCPeerConnection"in window&&"getSenders"in window.RTCPeerConnection.prototype}function kk(){return"RTCPeerConnection"in window&&"getTransceivers"in window.RTCPeerConnection.prototype}function Mk(){return 11!==_O&&"RTCPeerConnection"in window&&"addTransceiver"in window.RTCPeerConnection.prototype}var Pk=!(!Mk()||lO&&hO<86);function Nk(){return"RTCRtpTransceiver"in window&&"stop"in window.RTCRtpTransceiver.prototype}var Lk="RTCRtpSender"in window;function xk(){return Lk&&"replaceTrack"in window.RTCRtpSender.prototype}function Uk(){return Lk&&"setParameters"in window.RTCRtpSender.prototype&&Qk()}var Fk="RTCRtpReceiver"in window&&"getSynchronizationSources"in window.RTCRtpReceiver.prototype,Vk=window.MediaStreamTrack&&"getSettings"in MediaStreamTrack.prototype,Gk=window.MediaStreamTrack&&"getCapabilities"in MediaStreamTrack.prototype,jk=Lk&&"createEncodedStreams"in window.RTCRtpSender.prototype&&AO()>=86,Hk="RTCRtpScriptTransform"in window,Yk=Lk&&(jk||Hk),Wk=function(){return["RTCPeerConnection","webkitRTCPeerConnection","RTCIceGatherer"].filter((e=>e in window)).length>0};function Jk(){let e={AudioDecoder:!1,AudioEncoder:!1,VideoDecoder:!1,VideoEncoder:!1,ImageDecoder:!1};return AD(window.AudioDecoder)||(e.AudioDecoder=!0),AD(window.AudioEncoder)||(e.AudioEncoder=!0),AD(window.VideoDecoder)||(e.VideoDecoder=!0),AD(window.VideoEncoder)||(e.VideoEncoder=!0),AD(window.ImageDecoder)||(e.ImageDecoder=!0),e}function Xk(){return"mediaSession"in navigator&&!AD(navigator.mediaSession.setActionHandler)}function Kk(){return!AD(window.WebTransport)}function zk(){return"undefined"!=typeof WebAssembly&&WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))}function qk(){let e={browser:"".concat(SO.name,"/").concat(SO.version),os:kO(),displayResolution:wk(),isScreenShareSupported:Ck(),isWebRTCSupported:Wk(),isGetUserMediaSupported:Sk(),isWebAudioSupported:bk(),isWebSocketsSupported:"WebSocket"in window&&2===window.WebSocket.CLOSING,isWebCodecSupported:Jk(),isMediaSessionSupported:Xk(),isWebTransportSupported:Kk()};return navigator.userAgent.includes("miniProgram")&&(e.browser="mini/".concat(e.browser)),e}var Zk="checkResult";function $k(){pk();let e=YO.getItem(Zk);e&&e.ua===navigator.userAgent&&(ck=e.checkResult),Ik()}function eM(){return"requestVideoFrameCallback"in HTMLVideoElement.prototype}var tM="RTCRtpReceiver"in window&&"jitterBufferTarget"in window.RTCRtpReceiver.prototype,rM=VS(WS(),1),iM=Symbol("instance"),nM=Symbol("cacheResult"),oM=class{constructor(e,t,r){this.oldState=e,this.newState=t,this.action=r,this.aborted=!1}abort(e){this.aborted=!0,lM.call(e,this.oldState,new Error("action '".concat(this.action,"' aborted")))}toString(){return"".concat(this.action,"ing")}},aM=class extends Error{constructor(e,t,r){super(t),this.state=e,this.message=t,this.cause=r}},sM=new Map;function cM(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(i,n,o)=>{let a=r.action||n;if(!r.context){let r=sM.get(i)||[];sM.has(i)||sM.set(i,r),r.push({from:e,to:t,action:a})}let s=o.value;o.value=function(){let i=this;for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];if(r.context&&(i=uM.get("function"==typeof r.context?r.context.call(this,...o):r.context)),i.state===t)return r.sync?i[nM]:Promise.resolve(i[nM]);i.state instanceof oM&&i.state.action==r.abortAction&&i.state.abort(i);let A=null;Array.isArray(e)?0==e.length?i.state instanceof oM&&i.state.abort(i):("string"!=typeof i.state||!e.includes(i.state))&&(A=new aM(i._state,"".concat(i.name," ").concat(a," to ").concat(t," failed: current state ").concat(i._state," not from ").concat(e.join("|")))):e!==i.state&&(A=new aM(i._state,"".concat(i.name," ").concat(a," to ").concat(t," failed: current state ").concat(i._state," not from ").concat(e)));let l=e=>{if(r.fail&&r.fail.call(this,e),r.sync){if(r.ignoreError)return e;throw e}return r.ignoreError?Promise.resolve(e):Promise.reject(e)};if(A)return l(A);let u=i.state,d=new oM(u,t,a);lM.call(i,d);let h=e=>{var n;return i[nM]=e,d.aborted||(lM.call(i,t),null===(n=r.success)||void 0===n||n.call(this,i[nM])),e},g=e=>(lM.call(i,u,e),l(e));try{let e=s.apply(this,o);return function(e){return"object"==typeof e&&e&&"then"in e}(e)?e.then(h).catch(g):r.sync?h(e):Promise.resolve(h(e))}catch(r){return g(new aM(i._state,"".concat(i.name," ").concat(a," from ").concat(e," to ").concat(t," failed: ").concat(r),r instanceof Error?r:new Error(String(r))))}}}}var AM="undefined"!=typeof window&&window.__AFSM__?(e,t)=>{window.dispatchEvent(new CustomEvent(e,{detail:t}))}:"undefined"!=typeof importScripts?(e,t)=>{postMessage({type:e,payload:t})}:()=>{};function lM(e,t){let r=this._state;this._state=e;let i=e.toString();e&&this.emit(i,r),this.emit(uM.STATECHANGED,e,r,t),this.updateDevTools({value:e,old:r,err:t instanceof Error?t.message:String(t)})}var uM=class e extends rM.default{constructor(t,r,i){super(),this.name=t,this.groupName=r,this._state=e.INIT,t||(t=Date.now().toString(36)),i?Object.setPrototypeOf(this,i):i=Object.getPrototypeOf(this),r||(this.groupName=this.constructor.name);let n=i[iM];n?this.name=n.name+"-"+n.count++:i[iM]={name:this.name,count:0},this.updateDevTools({diagram:this.stateDiagram})}get stateDiagram(){let e=Object.getPrototypeOf(this),t=sM.get(e)||[],r=new Set,i=[],n=[],o=new Set,a=Object.getPrototypeOf(e);sM.has(a)&&(a.stateDiagram.forEach((e=>r.add(e))),a.allStates.forEach((e=>o.add(e)))),t.forEach((e=>{let{from:t,to:r,action:o}=e;"string"==typeof t?i.push({from:t,to:r,action:o}):t.length?t.forEach((e=>{i.push({from:e,to:r,action:o})})):n.push({to:r,action:o})})),i.forEach((e=>{let{from:t,to:i,action:n}=e;o.add(t),o.add(i),o.add(n+"ing"),r.add("".concat(t," --\x3e ").concat(n,"ing : ").concat(n)),r.add("".concat(n,"ing --\x3e ").concat(i," : ").concat(n," 🟢")),r.add("".concat(n,"ing --\x3e ").concat(t," : ").concat(n," 🔴"))})),n.forEach((e=>{let{to:t,action:i}=e;r.add("".concat(i,"ing --\x3e ").concat(t," : ").concat(i," 🟢")),o.forEach((e=>{e!==t&&r.add("".concat(e," --\x3e ").concat(i,"ing : ").concat(i))}))}));let s=[...r];return Object.defineProperties(e,{stateDiagram:{value:s},allStates:{value:o}}),s}static get(t){let r;return"string"==typeof t?(r=e.instances.get(t),r||e.instances.set(t,r=new e(t,void 0,Object.create(e.prototype)))):(r=e.instances2.get(t),r||e.instances2.set(t,r=new e(t.constructor.name,void 0,Object.create(e.prototype)))),r}static getState(t){var r;return null===(r=e.get(t))||void 0===r?void 0:r.state}updateDevTools(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};AM(e.UPDATEAFSM,Object.assign({name:this.name,group:this.groupName},t))}get state(){return this._state}set state(e){lM.call(this,e)}};uM.STATECHANGED="stateChanged",uM.UPDATEAFSM="updateAFSM",uM.INIT="[*]",uM.ON="on",uM.OFF="off",uM.instances=new Map,uM.instances2=new WeakMap;var dM="undefined"!=typeof window,hM=dM&&window.requestIdleCallback||function(e){let t=Date.now();return setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1e3)},gM=dM&&window.cancelIdleCallback||function(e){clearTimeout(e)},pM=dM&&(window.cancelAnimationFrame||window.mozCancelAnimationFrame),fM=class e{static generateTaskID(){return this.currentTaskID++}static run(e,t,r){null!=r&&r.fps&&(r.delay=r.delay||Number((1e3/r.fps).toFixed(2))),r=LS("interval"===e?{delay:2e3,count:0,backgroundTask:!0}:"ric"===e?{delay:1e4,count:0}:"raf"===e?{fps:60,delay:16.6,count:0,backgroundTask:!0}:{delay:2e3,count:0,backgroundTask:!0},r);let i=xS(LS({taskID:this.generateTaskID(),loopCount:0,intervalID:null,timeoutID:null,rafID:null,ricID:null,taskName:e,callback:t},r),{delay:r.delay});return this.taskMap.set(i.taskID,i),this[e](i),i.taskID}static interval(t){return t.intervalID=setInterval((()=>{t.callback(),t.loopCount+=1,e.isBreakLoop(t)}),t.delay)}static intervalInWorker(t){e.sharedWorker||(e.sharedWorker=new Worker(URL.createObjectURL(new Blob(["\n        const timers = new Map();\n        self.onmessage = function(e) {\n          const { taskId, delay, type } = e.data;\n          if (type === 'start') {\n            timers.set(taskId, setInterval(() => {\n              self.postMessage({ type: 'tick', taskId });\n            }, delay));\n          } else if (type === 'stop') {\n            clearInterval(timers.get(taskId));\n            timers.delete(taskId);\n          }\n        };\n      "],{type:"application/javascript"}))),e.sharedWorker.onmessage=t=>{var r;if("tick"===t.data.type){let i=e.workerTasks.get(t.data.taskId);i&&(i.callback(),i.loopCount+=1,e.isBreakLoop(i)&&(null==(r=e.sharedWorker)||r.postMessage({type:"stop",taskId:i.taskID}),e.workerTasks.delete(i.taskID)))}}),e.workerTasks.set(t.taskID,t),e.sharedWorker.postMessage({taskId:t.taskID,delay:t.delay,type:"start"})}static timeout(t){let r=()=>{if(t.callback(),t.loopCount+=1,!e.isBreakLoop(t))return t.timeoutID=setTimeout(r,t.delay)};return t.timeoutID=setTimeout(r,t.delay)}static ric(t){let r,i=yD(),n=()=>{if(r=yD()-i,r>=t.delay&&(i=yD()-Math.floor(r%t.delay),t.callback(),t.loopCount+=1),!e.isBreakLoop(t))return t.ricID=hM(n,{timeout:t.delay})};return t.ricID=hM(n,{timeout:t.delay})}static raf(t){let r,i=yD(),n=()=>document.hidden&&t.backgroundTask?(r=yD()-i,i=yD(),t.callback(),t.loopCount+=1,e.isBreakLoop(t)?void 0:t.timeoutID=setTimeout(n,t.delay-Math.floor(r%t.delay))):(r=yD()-i,r>=t.delay&&(i=yD()-Math.floor(r%t.delay),t.callback(),t.loopCount+=1),e.isBreakLoop(t)?void 0:t.rafID=requestAnimationFrame(n));if(t.rafID=requestAnimationFrame(n),t.backgroundTask){let e=()=>{if(document.hidden){let e=yD()-i;e>=t.delay?n():t.timeoutID=setTimeout(n,t.delay-e)}};document.addEventListener("visibilitychange",e),t.onVisibilitychange=e,document.hidden&&e()}return t.taskID}static hasTask(e){return this.taskMap.has(e)}static clearTask(e){if(!this.taskMap.has(e))return!0;let{intervalID:t,timeoutID:r,rafID:i,ricID:n,onVisibilitychange:o,worker:a}=this.taskMap.get(e);return a&&a.terminate(),t&&clearInterval(t),r&&clearTimeout(r),i&&pM&&pM(i),n&&gM(n),o&&document.removeEventListener("visibilitychange",o),this.taskMap.delete(e),!0}static isBreakLoop(e){return!this.taskMap.has(e.taskID)||0!==e.count&&e.loopCount>=e.count&&(this.clearTask(e.taskID),!0)}};jS(fM,"taskMap",new Map),jS(fM,"currentTaskID",1),jS(fM,"sharedWorker",null),jS(fM,"workerTasks",new Map);var mM=fM;Vb.SEI_MESSAGE;var EM={LOADED_DATA:Vb.LOADEDDATA,LOADED_META_DATA:Vb.LOADEDMETADATA,MEDIA_TRACK_CHANGED:"media-track-changed",PLAYER_STATE_CHANGED:"player-state-changed",ERROR:"error"},IM={};FS(IM,{create:()=>CM,remove:()=>yM});var _M=new WeakMap;function CM(e,t){_M.has(e)||_M.set(e,[]);let r=_M.get(e),i={add:(e,n)=>("addEventListener"in t?(r.push(t.removeEventListener.bind(t,e,n)),t.addEventListener(e,n)):(r.push(t.off.bind(t,e,n)),t.on(e,n)),i)};return i}function yM(e){let t=_M.get(e);t&&(t.forEach((e=>e())),_M.delete(e))}var TM=new class{constructor(){jS(this,"_roomIdMap",new Map),jS(this,"_configs"),"undefined"==typeof registerProcessor&&(this._configs={sdkAppId:"",userId:"",version:db,env:Qb.QCLOUD,browserVersion:SO.name+SO.version,ua:navigator.userAgent})}setConfig(e){let{sdkAppId:t,env:r,userId:i,roomId:n}=e;t!==this._configs.sdkAppId&&(this._configs.sdkAppId=String(t)),this._configs.env=r,this._configs.userId=i,this._roomIdMap.set(i,String(n))}logSuccessEvent(e){vO||!jO.isAbleToUpload||this._configs.env===Qb.QCLOUD&&this.uploadEventToKibana(xS(LS({},e),{result:"success"}))}logFailedEvent(e){if(vO||!jO.isAbleToUpload)return;let{eventType:t,code:r,error:i,userId:n}=e,o={roomId:this._roomIdMap.get(n||this._configs.userId),userId:n,eventType:t,result:"failed",code:r||(null==i?void 0:i.extraCode)||(null==i?void 0:i.code)||ib.UNKNOWN};this._configs.env===Qb.QCLOUD&&this.uploadEventToKibana(xS(LS({},o),{error:i}))}uploadEventToKibana(e){let t="stat-".concat(e.eventType,"-").concat(e.result);("delta-join"===e.eventType||"delta-leave"===e.eventType||"delta-publish"===e.eventType)&&(t="".concat(e.eventType,":").concat(e.delta)),this.uploadEvent({log:t,userId:e.userId}),"failed"===e.result&&(t="stat-".concat(e.eventType,"-").concat(e.result,"-").concat(e.code),this.uploadEvent({log:t,userId:e.userId,error:e.error}))}uploadEvent(e){let{log:t,userId:r,error:i}=e,n={timestamp:cb(),sdkAppId:this._configs.sdkAppId,userId:r||this._configs.userId,version:db,log:t};i&&(n.errorInfo=i.message,i.stack&&(n.errorInfo+="\n".concat(i.stack))),this.sendRequest(YR(this._configs.sdkAppId,Ob.LOG),n)}sendRequest(e,t){setTimeout((()=>HD({url:e,body:JSON.stringify(t),priority:"low"}).catch((()=>{}))),2e3)}},vM=new WeakMap;function wM(e){let{settings:t={retries:5,timeout:2e3},onError:r,onRetrying:i,onRetryFailed:n}=e;return function(e,o,a){let s=zD({retryFunction:a.value,settings:t,onError(t){let{error:i,retry:n,reject:a,retryFuncArgs:s}=t;var c;r?r.call(this,i,(()=>{var t;null!=(t=vM.get(e))&&t.has(o)?n():a(i)}),a,s):null!=(c=vM.get(e))&&c.has(o)?n():a(i)},onRetrying(t,r){var n;JD(i)&&i.call(this,t,r),null!=(n=vM.get(e))&&n.has(o)&&(vM.get(e).get(o).stopRetry=r)},onRetryFailed:n});return a.value=function(){let t=vM.get(e);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return t?t.set(o,{args:i}):vM.set(e,new Map([[o,{args:i}]])),s.apply(this,i).finally((()=>{var t;return null==(t=vM.get(e))?void 0:t.delete(o)}))},a}}function SM(e){let{fnName:t,callback:r,validateArgs:i=!0}=e;return function(e,n,o){let a=o.value;return o.value=function(){for(var n,o,s=arguments.length,c=new Array(s),A=0;A<s;A++)c[A]=arguments[A];if(null!=(n=vM.get(e))&&n.has(t)){let{stopRetry:n,args:a}=vM.get(e).get(t),s=!0;if(i)for(let e of a)if(!c.find((t=>t===e))){s=!1;break}s&&(r&&r.apply(this,c),n&&n(),null==(o=vM.get(e))||o.delete(t))}return a.apply(this,c)},o}}var bM=class extends uM{constructor(e,t){super(e.id,"".concat(t,"-player")),this.kind=t,jS(this,"id"),jS(this,"element",null),jS(this,"track"),jS(this,"url"),jS(this,"attr"),jS(this,"mode"),jS(this,"muted"),jS(this,"_log"),jS(this,"_pausedRetryCount"),jS(this,"_isElementPlayingFired",!1),jS(this,"_interval"),jS(this,"_delayDestroyTimeoutId",0),jS(this,"_playSuccessResolve"),jS(this,"_isReplayByRecreateMediaStreamCalled",!1),jS(this,"isInAutoPlayFailedState",!1),this.id=e.id,this._log=e.log,this.track=e.track,this.muted=e.muted,this._pausedRetryCount=kR,this._state="STOPPED",this.bindTrackEvents(),this._log.info("create ".concat(t,"-player ").concat(this.id))}get isPlaying(){var e;return"PLAYING"===this._state&&(!1===(null==(e=this.element)?void 0:e.paused)||this.track&&"live"===this.track.readyState&&!this.track.muted)}get isStopped(){return"STOPPED"===this._state}setAttr(e){this.attr=e}setUrl(e){this.track&&(this.unbindTrackEvents(),this.element&&(this.element.srcObject=null),this.track=null),e!==this.url&&(this.url=e,null!==e&&this.element&&(this.element.crossOrigin="anonymous",this.element.src=e))}play(){return YS(this,null,(function*(){if(!this.isPlaying)try{this._delayDestroyTimeoutId&&(clearTimeout(this._delayDestroyTimeoutId),this._delayDestroyTimeoutId=0,this.bindTrackEvents(),this.bindElementEvents()),this.bindAutoPlayEvent(),yield new Promise(((e,t)=>{this._playSuccessResolve=e,this.element.play().then(e,t)}))}catch(e){let t=qQ({key:JQ.PLAY_FAILED,data:{media:this.kind,error:e}});if(this.track&&!this.track.muted&&this._log.warn(e),t.includes("NotAllowedError"))throw this.isInAutoPlayFailedState=!0,new ob({code:ib.PLAY_NOT_ALLOWED,message:t})}}))}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._isElementPlayingFired=!1,this.unbindEvents(),e>0&&!fO?this._delayDestroyTimeoutId||(this._log.info("destroy element after 3 * ".concat(e)),this._delayDestroyTimeoutId=setTimeout((()=>this.destroyElement()),3*e)):this.destroyElement(),this.handleStopped(Vb.ENDED),this._interval>0&&mM.clearTask(this._interval)}destroyElement(){this.element&&(this._log.debug("destroy element"),this.element.remove(),this.element.srcObject=null,this.element=null),clearTimeout(this._delayDestroyTimeoutId),this._delayDestroyTimeoutId=0}pause(){var e;this.isPlaying&&(null==(e=this.element)||e.pause())}resume(){return this._log.info("resume"),this.isPlaying?Promise.resolve():yO?this.replay():this.play().catch((()=>{}))}setMuted(e){this.element&&(this.element.muted=e),this.muted=e}replay(){return this.stop(),this.play().catch((()=>{}))}bindElementEvents(){if(this.element){let e=this.handleElementEvent.bind(this);return CM(this.element,this.element).add(Vb.PLAYING,e).add(Vb.ENDED,e).add(Vb.PAUSE,e).add(Vb.ERROR,e).add(Vb.LOADEDDATA,e).add(Vb.LOADEDMETADATA,e)}}bindTrackEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.track;if(e){let t=this.handleTrackEvent.bind(this);null==IM||IM.create(e,e).add(Vb.ENDED,t).add(Vb.MUTE,t).add(Vb.UNMUTE,t),e.readyState===Vb.ENDED&&this.handleTrackEvent({type:Vb.ENDED}),e.muted&&this.handleTrackEvent({type:Vb.MUTE})}}bindAutoPlayEvent(){UO.on(VO.AUTOPLAY_DIALOG_CLICK_CONFIRM,this.resume,this)}unbindTrackEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.track;e&&yM(e)}unbindEvents(){this.element&&yM(this.element),this.unbindTrackEvents(),UO.off(VO.AUTOPLAY_DIALOG_CLICK_CONFIRM,this.resume,this)}handleElementEvent(e){switch(e.type){case Vb.PLAYING:this.isInAutoPlayFailedState=!1,this._isElementPlayingFired=!0,this._log.info("".concat(this.kind," player is playing")),this.handlePlaying(Vb.PLAYING),this._interval&&(mM.clearTask(this._interval),this._interval=-1);break;case Vb.ENDED:this._log.info("".concat(this.kind," player is ended")),this.handleStopped(Vb.ENDED);break;case Vb.PAUSE:this._log.info("".concat(this.kind," player is paused")),this.handlePaused(Vb.PAUSE),AB&&(this._interval=mM.run("timeout",(()=>{this.element&&"PAUSED"===this._state&&this.resume()}),{delay:3e3}));break;case Vb.ERROR:if(this.element&&this.element.error){this.handlePaused(Vb.ERROR);let{code:e,message:t}=this.element.error;this._log.error("".concat(this.kind," ").concat(this._log.isLocal?"local":"remote"," MediaError code: ").concat(e," message: ").concat(t," userAgent: ").concat(navigator.userAgent)),TM.uploadEvent({log:"stat-".concat(this.kind,"-").concat(mR.PLAYER_ERROR,"-").concat(e,"-").concat(navigator.userAgent),error:this.element.error}),tO||eO?this.emit(EM.ERROR,this.element.error):this.replayByRecreateMediaStream(this.element.error)}break;case Vb.LOADEDDATA:this.kind===Vb.VIDEO&&this.emit(EM.LOADED_DATA);break;case Vb.LOADEDMETADATA:this.kind===Vb.VIDEO&&this.emit(EM.LOADED_META_DATA)}}replayByRecreateMediaStream(e){if(!this._isReplayByRecreateMediaStreamCalled)return this._isReplayByRecreateMediaStreamCalled=!0,this.doReplayByRecreateMediaStream(1e3).then((()=>{this._log.warn("replayByRecreateMediaStream success"),TM.uploadEvent({log:"stat-replayByRecreateMediaStream-success"}),sk.addSuccessEvent({key:this.kind===Vb.AUDIO?506700:516700})})).catch((()=>{var t;this._log.error("replayByRecreateMediaStream failed"),TM.uploadEvent({log:"stat-replayByRecreateMediaStream-failed"}),sk.addFailedEvent({key:this.kind===Vb.AUDIO?506700:516700,error:null==(t=this.element)?void 0:t.error}),this.emit(EM.ERROR,e)}))}doReplayByRecreateMediaStream(e){return this._log.warn("delay ".concat(e,"ms to recreate mediaStream")),new Promise(((t,r)=>{GD(e).then((()=>{this.element&&(this.element.srcObject=null,this.element.srcObject=new MediaStream([this.track]),this._log.warn("recreated mediaStream"),this.element.onerror=()=>{var e,t,i;this._log.warn("element onerror ".concat(null==(t=null==(e=this.element)?void 0:e.error)?void 0:t.code," fired after recreated mediaStream")),r(null==(i=this.element)?void 0:i.error)}),GD(5e3).then((()=>{var e,i;(!this.isPlaying||null!=(e=this.element)&&e.error)&&r(null==(i=this.element)?void 0:i.error),t()}))}))})).finally((()=>{this.element&&(this.element.onerror=null)}))}handleTrackEvent(e){switch(e.type){case Vb.ENDED:this.handleStopped(Vb.ENDED);break;case Vb.MUTE:this.handlePaused(Vb.MUTE);break;case Vb.UNMUTE:this._isElementPlayingFired?this.handlePlaying(Vb.UNMUTE):this.mode>0&&this.handlePlaying(this.mode.toString())}}handlePlaying(e){var t;null==(t=this._playSuccessResolve)||t.call(this,e),this.emit(EM.PLAYER_STATE_CHANGED,{type:this.kind,state:"PLAYING",reason:e})}handlePaused(e){this.emit(EM.PLAYER_STATE_CHANGED,{type:this.kind,state:"PAUSED",reason:e})}handleStopped(e){this.emit(EM.PLAYER_STATE_CHANGED,{type:this.kind,state:"STOPPED",reason:e})}getElement(){return this.element}};GS([wM({settings:{retries:2,timeout:0},onError(e,t,r,i){i[0]=(i[0]||1e3)+1e3,t()}})],bM.prototype,"doReplayByRecreateMediaStream",1),GS([cM([],"PLAYING",{sync:!0})],bM.prototype,"handlePlaying",1),GS([cM("PLAYING","PAUSED",{ignoreError:!0,sync:!0})],bM.prototype,"handlePaused",1),GS([cM([],"STOPPED",{sync:!0})],bM.prototype,"handleStopped",1);var RM,DM="trtc_autoplay",BM="".concat(DM,"_mask"),OM="".concat(DM,"_wrapper"),QM="".concat(DM,"_header"),kM="".concat(DM,"_content"),MM="".concat(DM,"_action_wrapper"),PM="".concat(DM,"_question"),NM="".concat(DM,"_collapse"),LM="".concat(DM,"_action_confirm"),xM="".concat(DM,"_detail"),UM="#2473E8",FM="dialog",VM="".concat(FM,"-show"),GM="".concat(FM,"-1"),jM="".concat(FM,"-2"),HM=!1,YM=()=>!!document.querySelector(".".concat(OM)),WM="".concat(wb,"/").concat(iD()?"zh-cn":"en","/tutorial-21-advanced-auto-play-policy.html"),JM="<br><a href='".concat(WM,"' target='_blank'>").concat(iD()?"其他方案？":"Any other solution?","</a>"),XM="".concat(iD()?"浏览器自动播放策略：在用户与页面产生交互（点击、触摸）之前，浏览器禁止播放有声媒体。该弹窗用于帮助用户恢复音视频播放。".concat(JM):"Autoplay Policy: Before user interacts with the web page (clicking, touching), page will not be allowed to play media with sound. This Dialog is used to help users resume playback. ".concat(JM)),KM=class{constructor(){if(jS(this,"content","音视频播放被浏览器拦截，请点击“恢复播放”。"),jS(this,"_dialogNode",null),jS(this,"_bodyPosition",""),jS(this,"_showDetail",!1),jS(this,"_isCollapseClicked",!1),jS(this,"_isQuestionClicked",!1),iD()||(this.content='Media playback failed. Click the "Resume" to resume playback.'),!HM){let e=document.createElement("style");e.innerHTML=".".concat(BM,"{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.").concat(BM," div:not(.").concat(MM,"){display:block !important;}.").concat(OM,"{padding:14px;background:#fff;border-radius:3px;box-shadow:0px 3px 15px #434343;border:1px solid #d1cfcf;max-width:500px;}.").concat(OM," a{color:").concat(UM,";}.").concat(QM,"{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.").concat(kM,"{margin:8px 0;}.").concat(MM,"{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.").concat(NM,"{margin-right:auto;cursor:pointer}.").concat(PM,"{height:100%;line-height:16px;cursor:pointer;}.").concat(LM,"{margin-left:8px;color:#fff;background:").concat(UM,";padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.").concat(LM,":hover{opacity:0.9;}.").concat(NM,",.").concat(LM,",.").concat(kM,",.").concat(PM,"{font-size:14px;}@media screen and (max-width:750px){.").concat(OM,"{width:80vw;}}"),document.head.appendChild(e),HM=!0}this.addDiaLog()}createDiaLog(){let e=document.createElement("template");e.innerHTML='<div class="'.concat(BM,"\"><div class='").concat(OM,"'><div class='").concat(QM,"'>").concat(location.host,"</div><div class='").concat(kM,"'>").concat(this.content,"</div><div class='").concat(xM,'\' style="visibility:hidden;width:100%;height:0;font-size:12px;color:gray;">').concat(XM,"</div><div class='").concat(MM,"'></div></div></div>").trim();let t=document.createElement("button");t.className=LM,t.innerText=iD()?"恢复播放":"Resume",t.onclick=this.onConfirm.bind(this);let r=document.createElement("div");r.className=PM,r.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n    <svg class="icon" width="18" height="18" p-id="2030" t="1639646523624" version="1.1" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">\n    <path d="m464 784.35c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z" p-id="2031"/>\n    <path d="m512 960c-247.04 0-448-200.96-448-448s200.96-448 448-448 448 200.96 448 448-200.96 448-448 448zm0-831.71c-211.58 0-383.71 172.13-383.71 383.71 0 211.55 172.13 383.71 383.71 383.71 211.55 0 383.71-172.16 383.71-383.71 0-211.58-172.16-383.71-383.71-383.71z" p-id="2032"/>\n    <path d="m512 673.7c-17.665 0-32.001-14.336-32.001-31.999v-54.112c0-52.353 40-92.352 75.328-127.65 25.887-25.92 52.672-52.672 52.672-74.017 0-53.343-43.072-96.735-95.999-96.735-53.823 0-95.999 41.536-95.999 94.559 0 17.665-14.336 31.999-32.001 31.999s-32.001-14.336-32.001-31.999c0-87.424 71.775-158.56 160-158.56s160 72.095 160 160.74c0 47.904-36.32 84.192-71.424 119.3-27.84 27.776-56.576 56.512-56.576 82.336v54.112c0 17.665-14.336 32.032-32.001 32.032z" p-id="2033"/>\n    </svg>\n    ',r.onclick=this.onQuestionClick.bind(this);let i=document.createElement("div");i.className=NM,i.innerText="".concat(iD()?"详情 >":"Detail >"),i.onclick=this.onCollapseClick.bind(this);let n=e.content.firstChild,o=n.querySelector(".".concat(MM));return o.appendChild(i),o.appendChild(r),o.appendChild(t),n}addDiaLog(){YM()||(this._dialogNode=this.createDiaLog(),document.body.appendChild(this._dialogNode),this._dialogNode.onclick=this.onConfirm.bind(this),this._dialogNode.querySelector(".".concat(OM)).onclick=e=>e.stopPropagation(),this._bodyPosition=document.body.style.position,document.body.style.position="fixed",jO.info("show autoplay dialog"),TM.uploadEvent({log:VM}))}deleteDiaLog(){this._dialogNode&&(document.body.removeChild(this._dialogNode),document.body.style.position=this._bodyPosition,this._dialogNode=null)}onConfirm(){jO.warn("confirm clicked, try resume stream"),UO.emit(VO.AUTOPLAY_DIALOG_CLICK_CONFIRM),this.deleteDiaLog()}onCollapseClick(){let e=this._dialogNode.querySelector(".".concat(xM));e.style.visibility="".concat(this._showDetail?"hidden":"visible"),e.style.height="".concat(this._showDetail?0:"fit-content"),this._showDetail=!this._showDetail,this._isCollapseClicked||TM.uploadEvent({log:GM}),this._isCollapseClicked=!0}onQuestionClick(){window.open(WM,"_blank"),this._isQuestionClicked||TM.uploadEvent({log:jM}),this._isQuestionClicked=!0}},zM=class extends bM{constructor(e){super(e,Vb.VIDEO),jS(this,"stat",{}),jS(this,"_calculateTimeout",-1),jS(this,"viewMirror",!1),jS(this,"objectFit"),jS(this,"container"),jS(this,"canvas"),jS(this,"canvasTrack"),this.mode=e.canvas?1:0,this.container=e.container,this.canvas=e.canvas,AD(e.viewMirror)||(this.viewMirror=e.viewMirror),AD(e.objectFit)||(this.objectFit=e.objectFit),this.initializeElement()}initializeElement(){var e;let t=document.createElement(Vb.VIDEO);this.track&&2!==this.mode&&(t.srcObject=new MediaStream([this.track])),t.muted=!0,t.setAttribute("id","video_".concat(this.id)),t.setAttribute("style",this.styleAttribute),this.canvas&&this.canvas.setAttribute("style",this.styleAttribute),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.element=t,null==(e=this.container)||e.appendChild(this.elementToRender),this.bindElementEvents(),this.calculateStat()}get styleAttribute(){let e="width: 100%; height: 100%; object-fit: ".concat(this.objectFit,";background-color: black;");return this.viewMirror&&(e+="transform: scaleX(-1);"),e}setContainer(e){var t;this.container=e,(this.track||this.canvasTrack)&&this.elementToRender&&(null==(t=this.container)||t.appendChild(this.elementToRender))}bindElementEvents(){let e=super.bindElementEvents();this.handleElementEvent=this.handleElementEvent.bind(this),e&&e.add(Vb.ENTER_PICTURE_IN_PICTURE,this.handleElementEvent).add(Vb.LEAVE_PICTURE_IN_PICTURE,this.handleElementEvent)}handleTrackEvent(e){var t;super.handleTrackEvent(e),e.type===Vb.MUTE&&null!=(t=this.stat)&&t.fps&&(this.stat.fps=0)}handleElementEvent(e){var t;if(2===this.mode)return;super.handleElementEvent(e);let r=e.type;if(r===Vb.PAUSE&&(this.container&&document.getElementById(this.container.id)||this._log.warn("".concat(this.kind," player has been remove, element ID: ").concat(null==(t=this.container)?void 0:t.id)),this._pausedRetryCount>0&&!YM()&&(this._log.info("".concat(this.kind," player auto resume when paused")),this.resume(),this._pausedRetryCount--),this.stat.fps&&(this.stat.fps=0)),this.viewMirror&&this.element){let e=this.element.style.transform;r===Vb.ENTER_PICTURE_IN_PICTURE?this.element.style.transform=e.replace("scaleX(-1)",""):r===Vb.LEAVE_PICTURE_IN_PICTURE&&!e.includes("scaleX")&&(this.element.style.transform="".concat(e," scaleX(-1)"))}}setCanvas(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var r,i,n,o;this.canvas!==e&&(null==(r=this.canvas)||r.remove(),null==e||e.setAttribute("style",this.styleAttribute),this.canvas=e,this.mode=e?t:0,2===this.mode&&this.setTrack(e.captureStream().getVideoTracks()[0]),e?(null==(i=this.element)||i.remove(),null==(n=this.container)||n.appendChild(e)):this.element&&(null==(o=this.container)||o.appendChild(this.element)))}setAttr(e){let t=Object.assign({autoplay:"autoplay",playsinline:"playsinline",muted:!0},e);t.style=Object.assign({width:"100%",height:"100%"},t.style),super.setAttr(t)}get mirror(){return this.viewMirror}setRect(e,t){this.elementToRender&&(this.elementToRender.style.width="".concat(e,"px"),this.elementToRender.style.height="".concat(t,"px"))}setViewMirror(e){this.elementToRender&&(this.elementToRender.style.transform=e?"scaleX(-1)":""),this.viewMirror=e}setObjectFit(e){this.elementToRender&&(this.elementToRender.style.objectFit="".concat(e)),this.objectFit=e}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t;super.stop(e),null==(t=this.canvas)||t.remove()}play(){return this.element?this.elementToRender&&this.elementToRender.parentElement!==this.container&&this.container&&this.container.append(this.elementToRender):this.initializeElement(),2===this.mode?Promise.resolve():super.play()}get elementToRender(){return this.canvas||this.element}setTrack(e){e!==this.track&&(this.unbindTrackEvents(),this.track=e,this.emit(EM.MEDIA_TRACK_CHANGED,e),null!==e&&(this.bindTrackEvents(),this.element&&2!==this.mode&&(this.element.srcObject=new MediaStream([e]),this.element.remove()),this.elementToRender&&this.elementToRender.parentElement!==this.container&&this.container&&this.container.append(this.elementToRender)))}getVideoFrame(){if(this.canvas)return this.canvas.toDataURL("image/png");if(!this.element)return"";let e=document.createElement("canvas");return e.width=this.element.videoWidth,e.height=this.element.videoHeight,e.getContext("2d").drawImage(this.element,0,0),e.toDataURL("image/png")}getElement(){return this.element}calculateStat(){try{if(eM()&&this.element&&this._calculateTimeout<0){let e=0,t=null,r=(i,n)=>{this.stat.width=n.width,this.stat.height=n.height,t&&(this.stat.fps=Math.round((n.presentedFrames-t.presentedFrames)/(i-e)*1e3)),e=i,t=n,this._calculateTimeout=-1,this.element&&(this._calculateTimeout=setTimeout((()=>{var e;return null==(e=this.element)?void 0:e.requestVideoFrameCallback(r)}),2e3))};this.element.requestVideoFrameCallback(r)}}catch(e){this._log.warn("init stat failed",e)}}};function qM(e,t){return YS(this,null,(function*(){if(!e.audioWorklet)return Promise.reject("audioWorklet is not supported");try{yield e.audioWorklet.addModule(t),jO.info("worklet addModule success")}catch(e){throw jO.info("worklet addModule catch error. ".concat(e.message)),e}}))}"undefined"!=typeof AudioContext?RM=AudioContext:"undefined"!=typeof webkitAudioContext?RM=webkitAudioContext:"undefined"!=typeof mozAudioContext&&(RM=mozAudioContext);var ZM,$M=-1;!function e(){try{if(ZM)return;(ZM=new RM({sampleRate:48e3})).onstatechange=()=>{jO.info("context state: ".concat(ZM.state).concat("running"!==ZM.state?" visibilityState: ".concat(document.visibilityState):"")),eP()},clearTimeout($M)}catch(t){jO.error("initAudioContext failed: ".concat(t," typeof AudioContextClass: ").concat(typeof RM)),$M=setTimeout(e,1e3)}}();var eP=()=>{"suspended"===ZM.state?(iP(),document.addEventListener("click",eP)):"interrupted"===ZM.state?iP():(document.removeEventListener("visibilitychange",eP),document.removeEventListener("click",eP))},tP=0,rP=-1;function iP(){return new Promise(((e,t)=>{if("running"===ZM.state)return e();Date.now()-tP<1e3?(clearTimeout(rP),rP=setTimeout((()=>{tP=Date.now(),ZM.resume().then(e,t)}),1e3)):(clearTimeout(rP),tP=Date.now(),ZM.resume().then(e,t))})).catch((e=>{jO.warn("context resume failed: ".concat(e)),document.addEventListener("visibilitychange",eP)}))}document.addEventListener("click",eP);var nP=e=>ZM,oP=class{constructor(){jS(this,"node"),jS(this,"pre",new Set),jS(this,"next",new Set),jS(this,"context"),jS(this,"connectedNodes",new Set),jS(this,"_channelCount",1)}get channelCount(){return this._channelCount}set channelCount(e){this._channelCount=e,this.node&&(this.node.channelCount=e),this.next.forEach((t=>t.channelCount=e))}setContext(e){this.context=e,this.node&&e.addMixWeight()}removeContext(){var e;this.node&&(null==(e=this.context)||e.reduceMixWeight()),delete this.context}setNode(e){var t;if(!this.node)try{null==(t=this.context)||t.addMixWeight(),this.node=e,this.node.channelCountMode="explicit",this.node.channelCount=this._channelCount,this.preNodeReconnect(),this.reconnect(),sk.addSuccessEvent({key:502701})}catch(e){jO.error(e),sk.addFailedEvent({key:502701,error:e})}}deleteNode(){var e;if(this.node)try{this._disconnect(),delete this.node,null==(e=this.context)||e.reduceMixWeight(),this.preNodeReconnect(),sk.addSuccessEvent({key:502702})}catch(e){jO.error(e),sk.addFailedEvent({key:502702,error:e})}}preNodeReconnect(){this.pre.forEach((e=>{e.node?e.reconnect():e.preNodeReconnect()}))}connectNext(e){this.next.forEach((t=>e._connect(t.node)||t.connectNext(e)))}_connect(e){return!(!this.node||!e||(this.node.connect(e),this.connectedNodes.add(e),0))}_disconnect(){this.connectedNodes.forEach((e=>{var t;return null==(t=this.node)?void 0:t.disconnect(e)})),this.connectedNodes.clear()}reconnect(){this._disconnect(),this.connectNext(this)}pipeTo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach((e=>{this.next.add(e),e.pre.add(this)})),this}},aP=class extends oP{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;super(),this.fftSize=e,jS(this,"dataArray",new Uint8Array(0))}setNode(e){e.fftSize=this.fftSize,this.dataArray=new Uint8Array(e.frequencyBinCount),super.setNode(e)}getByteTimeDomainData(){var e;return null==(e=this.node)||e.getByteTimeDomainData(this.dataArray),this.dataArray}get level(){var e;return null==(e=this.node)||e.getByteTimeDomainData(this.dataArray),Math.max(...this.dataArray)/128-1}get timeDomainPathData(){let e=this.getByteTimeDomainData(),t=0,r=0,i="M".concat(t,",").concat(r);for(let n=0;n<e.length;n++)r=e[n]/128*100/2,i+="L".concat(t,",").concat(r),t+=1;return i}},sP=class{constructor(){jS(this,"source",new oP),jS(this,"gain",new oP),jS(this,"destination",new oP)}get volume(){var e;return(null==(e=this.gain.node)?void 0:e.gain.value)||1}setVolume(e){1!==e?(this.gain.node||this.gain.setNode(this.source.node.context.createGain()),this.gain.node.gain.value=e):this.gain.node&&this.gain.deleteNode()}replaceSource(e){this.source.deleteNode(),this.source.setNode(uP(e))}get track(){var e;return null==(e=this.stream)?void 0:e.getAudioTracks()[0]}get stream(){var e;return null==(e=this.destination.node)?void 0:e.stream}},cP=class extends sP{constructor(e){super(),this.context=e,jS(this,"denoiser",new oP),this.source.pipeTo(this.denoiser.pipeTo(this.gain.pipeTo(this.destination)))}connect(){this.context.inputs.has(this)||(this.destination.setNode(this.context.destination),this.source.setContext(this.context),this.denoiser.setContext(this.context),this.gain.setContext(this.context),this.context.inputs.add(this))}disconnect(){this.context.inputs.has(this)&&(this.destination.deleteNode(),this.source.removeContext(),this.denoiser.removeContext(),this.gain.removeContext(),this.context.inputs.delete(this))}remove(){this.gain.deleteNode(),this.denoiser.deleteNode(),this.source.deleteNode(),this.disconnect()}setVolume(e){1!==e?(this.gain.node||this.gain.setNode(this.context.audioContext.createGain()),this.gain.node.gain.value=e):this.gain.node&&this.gain.deleteNode()}},AP=class{constructor(){jS(this,"audioContext",nP()),jS(this,"destination",this.audioContext.createMediaStreamDestination()),jS(this,"inputs",new Set),jS(this,"mixWeight",0)}addMixWeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.mixWeight+=e,this.mixWeight-1==e+1>>1&&this.mixOnChange()}reduceMixWeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.addMixWeight(-e)}close(){this.inputs.forEach((e=>e.remove()))}get mixTrack(){return this.destination.stream.getAudioTracks()[0]}},lP=new WeakMap;function uP(e){let t=lP.get(e);if(t)return t;let r=nP();if(e instanceof HTMLAudioElement)t=r.createMediaElementSource(e);else{if(!(e instanceof MediaStreamTrack))return e;t=r.createMediaStreamSource(new MediaStream([e]))}return lP.set(e,t),t}var dP=class e{constructor(e){jS(this,"_volume",0),jS(this,"_volumeDb",0),jS(this,"_log"),jS(this,"_scriptProcessorNode",null),jS(this,"_audioWorkletNode",null),jS(this,"_interval",200),jS(this,"ready",this.preload());let{log:t}=e;this._log=t,UO.on(VO.AUDIO_LEVEL_INTERVAL,this.handleAudioLevelInterval,this)}static get isRunning(){return Date.now()-e.lastMessageTime<2e3}get node(){return this._audioWorkletNode||this._scriptProcessorNode}preload(){if(!e.workletReady){let t='class VolumeMeterWorklet extends AudioWorkletProcessor{constructor(){super(),this.volume=0,this.intervalTime=200,this.tick=200,this.isStop=!1,this.cache=[],this.sentFirstInfo1=!1,this.unmute=!1,this.port.onmessage=t=>{var e=t.data;switch(e.name){case"chunk":this.cache.push(...e.data),this.sentFirstInfo1||(this.port.postMessage({cl:e.data.length}),this.sentFirstInfo1=!0);break;case"setIntervalTime":this.intervalTime=e.intervalTime;break;case"unmute":this.unmute=!0;break;case"stop":this.isStop=!0}}}process(t,s){t=t[0],s=s[0];if(t||s){if(this.isStop)return!1;var i=s&&s[0]?s[0].length:0,h=this.cache.length,a=(i<h?(s[0].set(this.cache.slice(0,i)),this.cache=this.cache.slice(i)):this.unmute&&s[0].set(t[0]),(i<h?s:t)[0]);if(a){let e=0;for(let t=0;t<a.length;++t)e=Math.max(Math.abs(a[t]),e);s=a.reduce((t,e)=>t+e*e,0)/a.length;this.volume=e,this.tick-=a.length,this.tick<0&&(this.tick+=this.intervalTime/1e3*sampleRate,this.port.postMessage({volume:this.volume,volumeDb:Math.max(10*Math.log10(s)+100,0)/100,cacheLen:h,outputLen:i}))}}return!0}}registerProcessor("volume-meter",VolumeMeterWorklet);';e.workletReady=qM(e.audioContext,URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}return e.workletReady.then((()=>this.initAudioWorklet())).catch((e=>(this._log.error("volumeMeter preload error: ".concat(e)),this.initScriptProcessor())))}initAudioWorklet(){if(!this._audioWorkletNode)try{this._audioWorkletNode=new AudioWorkletNode(e.audioContext,"volume-meter");let t=!1;this._audioWorkletNode.port.onmessage=r=>{e.lastMessageTime=Date.now(),this._volume=r.data.volume||0,this._volumeDb=r.data.volumeDb||0,!t&&r.data.cacheLen&&r.data.outputLen&&(this._log.warn("worklet play success"),t=!0)},this.handleAudioLevelInterval({interval:this._interval})}catch(e){this._log.error("volumeMeter init audio worklet error: ".concat(e)),TM.logFailedEvent({userId:this._log.userId,eventType:mR.LOAD_WORKLET,error:e}),this.initScriptProcessor()}}initScriptProcessor(){if(!this._scriptProcessorNode)try{this._scriptProcessorNode=nP().createScriptProcessor(2048,1,1),this._scriptProcessorNode.onaudioprocess=t=>{e.lastMessageTime=Date.now();let r=t.inputBuffer.getChannelData(0),i=0;for(let e=0;e<r.length;++e)i+=r[e]*r[e];this._volume=Math.sqrt(i/r.length)||0}}catch(e){this._log.error("volumeMeter init script processor error: ".concat(e))}}destroy(){this._scriptProcessorNode&&(this._scriptProcessorNode.onaudioprocess=null),this._audioWorkletNode&&(this._audioWorkletNode.port.postMessage({name:"stop"}),this._audioWorkletNode.port.onmessage=null),this._audioWorkletNode=null,this._scriptProcessorNode=null,UO.off(VO.AUDIO_LEVEL_INTERVAL,this.handleAudioLevelInterval,this)}getInternalAudioLevel(){return this._volume}getCalculatedVolume(){return parseFloat(this._volume.toFixed(2))}getVolumeDb(){return Math.floor(100*this._volumeDb)}handleAudioLevelInterval(e){var t;let{interval:r}=e;this._interval=r,null==(t=this._audioWorkletNode)||t.port.postMessage({name:"setIntervalTime",intervalTime:r})}};jS(dP,"lastMessageTime",0),jS(dP,"audioContext",nP()),jS(dP,"workletReady");var hP=dP,gP=class extends oP{constructor(e){super(),jS(this,"_volumeMeter"),this._volumeMeter=new hP(e)}deleteNode(){super.deleteNode(),this._volumeMeter.destroy()}init(){return YS(this,null,(function*(){yield this._volumeMeter.preload(),this.setNode(this._volumeMeter.node)}))}getCalculatedVolume(){return this._volumeMeter.getCalculatedVolume()}getInternalAudioLevel(){return this._volumeMeter.getInternalAudioLevel()}getVolumeDb(){return this._volumeMeter.getVolumeDb()}write(e){if(this.node){let t=e.allocationSize({planeIndex:0}),r=new Float32Array(t>>2);e.copyTo(r,{planeIndex:0}),this.node.port.postMessage({name:"chunk",data:r},[r.buffer]),e.close()}}},pP=hP,fP=VS(WS(),1),mP=e=>t=>t.deviceId===e,EP=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Input";jS(this,"kind"),jS(this,"type"),jS(this,"devices",[]),this.kind=e,this.type=t}update(e,t){let r=e.filter((e=>e.kind==="".concat(this.kind).concat(this.type.toLocaleLowerCase())));1===this.devices.length&&CP(this.devices[0])||t&&(r.forEach((e=>{if(e.deviceId&&!this.devices.find(mP(e.deviceId))){let r="".concat(this.kind).concat(this.type,"Added");jO.warn("".concat(r,": ").concat(JSON.stringify(e))),t.emit(r,e)}})),this.devices.forEach((e=>{if(e.deviceId&&!r.find(mP(e.deviceId))){let r="".concat(this.kind).concat(this.type,"Removed");jO.warn("".concat(r,": ").concat(JSON.stringify(e))),t.emit(r,e)}}))),this.devices=r}hasDevice(e){return!!this.devices.find((t=>t.deviceId===e))}},IP=class extends fP.EventEmitter{constructor(){super(),jS(this,"audioInputs",new EP(Vb.AUDIO)),jS(this,"videoInputs",new EP(Vb.VIDEO)),jS(this,"audioOutputs",new EP(Vb.AUDIO,"Output")),this.init(),navigator.mediaDevices&&(navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(()=>this.update())),"ondevicechange"in navigator.mediaDevices||mM.run("interval",(()=>{this.update()}),{delay:1e4}))}init(){yP().then((e=>{this.audioInputs.update(e),this.videoInputs.update(e),this.audioOutputs.update(e)}))}update(){return YS(this,arguments,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function*(){let r=yield yP(t);return e.audioInputs.update(r,e),e.videoInputs.update(r,e),e.audioOutputs.update(r,e),e}()}))}},_P=mb||fb?null:new IP;function CP(e){return e.deviceId===e.groupId&&""===e.groupId}function yP(){return YS(this,arguments,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function*(){if(pk()||!hk())return[];let t=yield navigator.mediaDevices.enumerateDevices();if(0!==e){let r={audio:!1,video:!1};if(t.forEach((e=>{CP(e)&&(e.kind===Vb.AUDIO_INPUT?r.audio=!0:e.kind===Vb.VIDEO_INPUT&&(r.video=!0))})),2===e&&(r.audio=!1),1===e&&(r.video=!1),r.audio||r.video){let e;try{e=yield navigator.mediaDevices.getUserMedia(r),r.audio&&iP()}catch(e){jO.debug("capture before getDevices failed: ",e)}t=yield navigator.mediaDevices.enumerateDevices(),null==e||e.getTracks().forEach((e=>e.stop()))}}return t.map(((e,t)=>{let r={kind:e.kind,deviceId:e.deviceId,groupId:e.groupId,label:e.label||"".concat(e.kind,"_").concat(t)};return e.deviceId.length>0&&bP.add("".concat(e.deviceId,"_").concat(e.kind)),e.getCapabilities&&(r.getCapabilities=()=>e.getCapabilities()),r}))}()}))}function TP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _P.update(e?1:0).then((e=>e.audioInputs.devices))}function vP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _P.update(e?2:0).then((e=>e.videoInputs.devices))}var wP=!1;function SP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return YS(this,null,(function*(){return(AB||pO)&&(e=!1),_P.update(e?1:0).then((e=>e.audioOutputs.devices))}))}var bP=new Set;function RP(e,t){return YS(this,null,(function*(){let r=(yield TP()).find((e=>e.deviceId===MR));return!t&&(null==r?void 0:r.groupId)===e||(null==r?void 0:r.groupId)===e&&r.label===t}))}var DP,BP=class extends sP{constructor(e){super(),this.log=e,jS(this,"volumeMeter"),jS(this,"volumeDestination"),jS(this,"analyser",new aP),this.volumeMeter=new gP({log:this.log}),this.volumeDestination=new oP,this.volumeMeter.pipeTo(this.volumeDestination)}destroy(){this.gain.deleteNode(),this.volumeMeter.deleteNode(),this.analyser.deleteNode(),this.source.deleteNode(),this.destination.deleteNode(),this.volumeDestination.deleteNode()}},OP=class e extends bM{constructor(e){super(e,Vb.AUDIO),jS(this,"_outputDeviceId"),jS(this,"_volume",1),jS(this,"_destination",nP().createMediaStreamDestination()),jS(this,"pipeline"),jS(this,"volumeMeterMode","worklet"),this.mode=0,this.pipeline=new BP(this._log)}getMediaStream(){return this.pipeline.stream||(this.track?new MediaStream([this.track]):null)}initializeElement(e){if(("15.2"===IO||"15.3"===IO||"15.4"===IO)&&this.muted)return void this._log.info("audioElement is muted.");let t=DP||new Audio;t.setAttribute("autoplay","autoplay"),t.srcObject=this.getMediaStream(),t.muted=this.muted,this.element=t,uD(e)&&(this.element.volume=Math.min(Math.max(e,0),1)),t===DP&&(DP=void 0),this.bindElementEvents()}play(t){return YS(this,null,(function*(){if(this.track)return this.pipeline.source.node||this.pipeline.replaceSource(this.track),this.element||this.initializeElement(null==t?void 0:t.volume),this._outputDeviceId&&(yield this.setSinkId(this._outputDeviceId)),"worklet"===this.volumeMeterMode?this.pipeline.volumeMeter.init():"analyser"===this.volumeMeterMode&&this.pipeline.analyser.setNode(nP().createAnalyser()),function(){YS(this,null,(function*(){try{wP||(wP=!0,jO.info("speakers:".concat((yield SP()).map((e=>" ".concat(e.deviceId.slice(0,8),": ").concat(e.label))))))}catch(e){}}))}(),HS(e.prototype,this,"play").call(this)}))}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.pipeline.destroy(),super.stop(e)}setSinkId(e){return YS(this,null,(function*(){var t,r;this._outputDeviceId!==e&&(this._outputDeviceId=e),this.element&&this.element.sinkId!==e&&(yield null==(r=(t=this.element).setSinkId)?void 0:r.call(t,e))}))}get useDestination(){return!!this.pipeline.stream}setLoop(e){this.element&&(this.element.loop=e)}getAudioLevel(){return this.pipeline.volumeMeter.getCalculatedVolume()}getInternalAudioLevel(){return this.pipeline.volumeMeter.getInternalAudioLevel()}},QP=class extends OP{constructor(e){super(e),this.pipeline.source.pipeTo(this.pipeline.volumeMeter,this.pipeline.destination)}setTrack(e){var t;this.track!==e&&(this.unbindTrackEvents(),this.track=e,this.emit(EM.MEDIA_TRACK_CHANGED,e),e?(this.bindTrackEvents(),this.pipeline.source.channelCount=(null==(t=e.getSettings())?void 0:t.channelCount)||1,this.pipeline.replaceSource(e),!this.useDestination&&this.element&&(this.element.srcObject=new MediaStream([e]))):this.pipeline.source.deleteNode())}setSourceNode(e){!e||this.pipeline.source.node===e||(this.pipeline.replaceSource(e),e instanceof MediaStreamAudioSourceNode?this.pipeline.destination.setNode(this._destination):this.pipeline.destination.deleteNode(),this.element&&(this.element.srcObject=this.getMediaStream(),this.element.play().catch((()=>{})),this.setVolume(this._volume)))}setVolume(e){this._volume=e,this.element&&(this.element.volume=e)}},kP=class extends OP{constructor(e){super(e),jS(this,"_sourceElement"),jS(this,"_output",new oP),this.pipeline.source.pipeTo(this.pipeline.gain.pipeTo(this.pipeline.volumeMeter.pipeTo(this._output),this.pipeline.destination))}setOutput(){this.mode=1,this._output.setNode(nP().destination)}write(e){this.pipeline.volumeMeter.write(e)}setTrack(e){var t,r,i;(null==(r=null==(t=this.element)?void 0:t.error)?void 0:r.code)!==MediaError.MEDIA_ERR_DECODE&&this.track!==e&&(this.unbindTrackEvents(),this.track=e,this.emit(EM.MEDIA_TRACK_CHANGED,e),e?(this.bindTrackEvents(),this._sourceElement?this._sourceElement.srcObject=new MediaStream([e]):!this.useDestination&&this.element&&(this.element.srcObject=new MediaStream([e])),this.pipeline.source.channelCount=(null==(i=e.getSettings())?void 0:i.channelCount)||1,this.pipeline.replaceSource(e)):this.pipeline.source.deleteNode())}setVolume(e){this._volume=e,this.useDestination?(this.pipeline.setVolume(e),this._log.info("set pipeline volume: ".concat(e))):e<=1?this.element?(this._log.info("set element volume: ".concat(e)),this.element.volume=e):this._log.info("set element volume: no element"):AB||(this._log.info("start set pipeline volume: ".concat(e)),this.pipeline.setVolume(e),this.element&&!this._sourceElement&&(this.pipeline.destination.setNode(this._destination),yM(this.element),this._sourceElement=this.element,this._sourceElement.muted=!0,this.element=null,this.play()))}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.pipeline.destroy();let t=this._sourceElement||this.element;t&&fO&&(DP=t),this._sourceElement&&(this._sourceElement.srcObject=null,delete this._sourceElement),super.stop(e)}},MP=class extends uM{constructor(e){let{userId:t,sdkAppId:r,mediaType:i,room:n,PlayerClass:o=(1===i?kP:zM)}=e;var a;super(),jS(this,"id",HO()),jS(this,"userId",""),jS(this,"isRemote"),jS(this,"mediaType"),jS(this,"room"),jS(this,"user"),jS(this,"_log"),jS(this,"_inputTrack"),jS(this,"_outputTrack"),jS(this,"isPlayCalled"),jS(this,"container",null),jS(this,"player"),jS(this,"subVideoPlayerMap"),jS(this,"muted",!1),jS(this,"abortCtrl"),jS(this,"objectFit","cover"),jS(this,"mirror"),jS(this,"isScreen",!1),jS(this,"manager"),jS(this,"trackSettings"),jS(this,"isFirstVideoFrameEmitted",!1),this.userId=t||"",this.mediaType=i,this._log=jO.createLogger({id:"".concat(this.kind[0],"t"),userId:null==(a=n||this.room)?void 0:a.userId,remoteUserId:this instanceof rN?void 0:this.userId,sdkAppId:r,type:2===this.mediaType?"auxiliary":"main",isLocal:this instanceof rN}),this.player=new o({id:this.userId||this.id,track:null,muted:!1,container:null,log:this._log}),this.player.on(EM.PLAYER_STATE_CHANGED,(e=>{UO.emit(VO.PLAYER_STATE_CHANGED,LS({track:this},e)),this.emit("player-state-changed",e)})),this.kind===Vb.VIDEO&&(this.player.on(EM.LOADED_DATA,(()=>{this.emitFirstVideoFrameEvent(EM.LOADED_DATA),UO.emit(VO.VIDEO_LOADED_DATA,{track:this})})),this.player.on(EM.LOADED_META_DATA,(()=>{this.emitFirstVideoFrameEvent(EM.LOADED_META_DATA)})),this.player.on(EM.MEDIA_TRACK_CHANGED,(e=>{var t;null==(t=this.subVideoPlayerMap)||t.forEach((t=>t.setTrack(e)))}))),this.onTrackMuted=this.onTrackMuted.bind(this),this.onTrackUnmuted=this.onTrackUnmuted.bind(this),this.onTrackEnded=this.onTrackEnded.bind(this),this.onPlayerError&&this.player.on(EM.ERROR,this.onPlayerError.bind(this))}get log(){return this._log||jO}get kind(){return 1===this.mediaType?Vb.AUDIO:Vb.VIDEO}get strMediaType(){return 4===this.mediaType?Vb.VIDEO:2===this.mediaType?Vb.SCREEN:Vb.AUDIO}get streamType(){return 2&this.mediaType?"auxiliary":"main"}get isMediaTrackActive(){return!!this.mediaTrack&&!this.mediaTrack.muted&&"live"===this.mediaTrack.readyState&&this.mediaTrack.enabled}play(e,t){return YS(this,null,(function*(){let r=gD(e)?e[0]:e;if(this.isPlayCalled)return this.log.info("play update options: ".concat(JSON.stringify(t))),t&&!AD(t.muted)&&this.setPlayerMute(t.muted),t&&!AD(t.objectFit)&&(this.objectFit=t.objectFit),void(this.player instanceof zM&&(this.player.setObjectFit(this.objectFit),this.container!==r&&r&&(this.container=r,this.player.setContainer(r)),gD(e)&&e.length>=1&&(yield this.playSubContainer(e.slice(1),t))));if(t&&!AD(t.muted)?this.setPlayerMute(t.muted):(!this.isRemote||this.kind===Vb.VIDEO)&&this.setPlayerMute(!0),t&&!AD(t.objectFit)&&(this.objectFit=t.objectFit),this.player instanceof zM&&this.player.setObjectFit(this.objectFit),this.isPlayCalled=!0,r&&(this.container=r,this.player instanceof zM&&this.player.setContainer(r)),UO.emit(VO.PLAY_TRACK_START,{track:this}),this._outputTrack){this._log.info("play with options: ".concat(JSON.stringify(t)));try{this.player.setTrack(this.playerMediaTrack),yield this.player.play(t),gD(e)&&e.length>1&&(yield this.playSubContainer(e.slice(1),t))}catch(e){throw this.handleAutoPlayFailed(e),e}}else this.log.info("play has not mediaTrack, abort")}))}setMirror(e,t){if(this.isScreen||this.kind!==Vb.VIDEO||AD(e)||e===this.mirror)return;this.mirror=e;let r=this.player;t&&(r=t);let i=this.manager;if(dD(this.mirror))return r.setViewMirror(this.mirror),void(i&&(i.mirror=!1));switch(this.mirror){case"view":i&&(i.mirror=!1),r.setViewMirror(!0);break;case"publish":i&&(i.mirror=!0),r.setViewMirror(!0);break;case"both":i&&(i.mirror=!0),r.setViewMirror(!1)}}playSubContainer(e,t){return YS(this,null,(function*(){if(!this._outputTrack||this.kind===Vb.AUDIO)return;this.subVideoPlayerMap||(this.subVideoPlayerMap=new Map),this.subVideoPlayerMap.forEach(((t,r)=>{var i;e.find((e=>r===e))||(t.stop(),null==(i=this.subVideoPlayerMap)||i.delete(r))}));for(let[r,i]of e.entries()){let e=this.subVideoPlayerMap.get(i);e?t&&(AD(t.objectFit)||e.setObjectFit(t.objectFit)):this.subVideoPlayerMap.set(i,new zM({id:this.userId||this.id,track:this.playerMediaTrack,container:i,muted:this.player.muted,objectFit:this.objectFit,log:this.log.createChild({id:"vp-sub".concat(r+1)})}))}let r=[...this.subVideoPlayerMap.values()];for(let e of r)e.setViewMirror(this.player.mirror),yield e.play()}))}setAudioOutput(e){return this.player.setSinkId(e)}setAudioVolume(e){this.player.setVolume(e)}getAudioLevel(){return this.player.getAudioLevel()||0}getInternalAudioLevel(){var e;return(null==(e=this.player)?void 0:e.getInternalAudioLevel())||0}stop(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isPlayCalled&&(this.isPlayCalled=!1,this.player&&(this.log.info("stop ".concat(this.kind," player")),this.player.stop(KD(this)&&!e?this.jitterBufferDelay:0)),this.subVideoPlayerMap&&this.subVideoPlayerMap.size>0&&this.subVideoPlayerMap.forEach((e=>{e.stop()})),this.container=null)}resume(){return YS(this,null,(function*(){var e;this.isPlayCalled&&(yield null==(e=this.player)?void 0:e.resume())}))}close(){this.log.info("close"),this.isPlayCalled&&this.stop(!0)}setMute(e){this.muted=e,this._inputTrack&&(this._inputTrack.enabled=!e),this._outputTrack&&(this._outputTrack.enabled=!e),this.emit(e?"mute":"unmute",this),UO.emit(e?VO.TRACK_MUTED:VO.TRACK_UNMUTED,{track:this})}setPlayerMute(e){this.player.setMuted(e)}get mediaTrack(){return this._inputTrack||null}get outMediaTrack(){return this._outputTrack||null}get playerMediaTrack(){return this.outMediaTrack}installTrackEvent(e){CM(e,e).add(Vb.MUTE,this.onTrackMuted).add(Vb.UNMUTE,this.onTrackUnmuted).add(Vb.ENDED,this.onTrackEnded),e.muted&&this.onTrackMuted(),e.readyState===Vb.ENDED&&this.onTrackEnded()}uninstallTrackEvent(e){yM(e)}setInputMediaStreamTrack(e){var t;let r=this._inputTrack;if(e!==r)return this._inputTrack=e,this.trackSettings=null==(t=e.getSettings)?void 0:t.call(e),e.enabled=!this.muted,r&&this.uninstallTrackEvent(r),this.installTrackEvent(e),this.emit("input-media-track-changed",e||null,r||null),this.manager?this.manager.changeInput(this):this.setOutputMediaStreamTrack(e)}setOutputMediaStreamTrack(e){var t;e!==this._outputTrack&&(this.isRemote?this.log.debug("setOutputMediaStreamTrack",e.label):this.log.info("setOutputMediaStreamTrack",null==(t=e.getSettings)?void 0:t.call(e).deviceId,e.label),this._outputTrack=e,this._inputTrack&&(this._outputTrack.contentHint=this._inputTrack.contentHint,this._outputTrack.enabled=this._inputTrack.enabled),this.updatePlayingState(!!e),this.emit("output-media-track-changed",e))}setMediaType(e){this.mediaType=e}updatePlayingState(e){if(this.isPlayCalled)if(e){if(this.player.setTrack(this.playerMediaTrack),this.player.isStopped)return this.player.play().catch((e=>this.handleAutoPlayFailed(e))),void this.log.info("playing state updated, play ".concat(this.kind))}else if(!this.player.isStopped)return this.player.stop(KD(this)?this.jitterBufferDelay:0),void this.log.info("playing state updated, stop ".concat(this.kind));this.log.debug("updatePlayingState abort ".concat(this.isPlayCalled," ").concat(e," ").concat(this.player.isStopped))}handleAutoPlayFailed(e){if(this.room&&this.room.enableAutoPlayDialog)new KM;else{let e=()=>{this.resume().then((()=>{document.removeEventListener("click",e,!0)}))};document.addEventListener("click",e,!0)}this.emit("error",e)}getVideoFrame(){return this.player instanceof zM?this.player.getVideoFrame():""}emitFirstVideoFrameEvent(e){var t,r,i;if(this.isFirstVideoFrameEmitted)return;let n=null==(t=this.mediaTrack)?void 0:t.getSettings(),o=(null==n?void 0:n.width)||(null==(r=this.player.element)?void 0:r.videoWidth)||0,a=(null==n?void 0:n.height)||(null==(i=this.player.element)?void 0:i.videoHeight)||0;e===EM.LOADED_META_DATA&&!o&&!a||(e===EM.LOADED_DATA&&!o&&!a&&this._log.warn("the dimension of video is 0x0 in first-video-frame event"),this.isFirstVideoFrameEmitted=!0,this.emit("first-video-frame",{width:o,height:a,streamType:this.streamType,userId:this.isRemote?this.userId:""}))}onTrackMuted(){this._log.warn("".concat(this.kind," track is unable to provide media output"))}onTrackUnmuted(){this._log.info("".concat(this.kind," track is able to provide media output"))}onTrackEnded(){this._log.warn("".concat(this.kind," track ended"))}};GS([cM([],uM.INIT,{sync:!0})],MP.prototype,"close",1);var PP=Object.prototype.hasOwnProperty,NP=function(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e||"function"==typeof e||Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(nD(e))switch(Object.prototype.toString.call(e)){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(let t in e)if(PP.call(e,t))return!1;return!0}return!1},LP=zD({retryFunction:function(e){return YS(this,null,(function*(){let t=function(e){return{audio:UP(e),video:FP(e)}}(e);jO.info("getUserMedia with constraints: ".concat(JSON.stringify(t)));let r=[],i=[],n=["label","deviceId","groupId"];t.audio&&(r=yield TP(),jO.info("microphones: ".concat(PD(r.map((e=>xS(LS({},e),{groupId:e.groupId.substring(0,8)}))),{keysToInclude:n})))),t.video&&(i=yield vP(),jO.info("cameras: ".concat(PD(i,{keysToInclude:n}))));try{let e=yield navigator.mediaDevices.getUserMedia(t);return Gk&&e.getTracks().forEach((e=>{jO.info("".concat(e.kind," capabilities: ").concat(PD(e.getCapabilities(),{keysToInclude:VR})))})),t.audio&&iP(),e}catch(t){let{message:n}=t;throw"NotFoundError"===t.name&&(e.video&&i&&0===i.length&&(n=qQ({key:JQ.CAMERA_NOT_FOUND})),e.audio&&r&&0===r.length&&(n=qQ({key:JQ.MICROPHONE_NOT_FOUND}))),new ob({code:ib.INITIALIZE_FAILED,name:t.name,message:n,constraint:t.constraint})}}))},settings:{retries:3,timeout:500},onError:e=>{let{error:t,retry:r,reject:i,retryFuncArgs:n,retriedCount:o}=e,a=o+1;"NotReadableError"===t.name||"OverconstrainedError"===t.name?(1===a?(n[0].video&&(n[0].maxResolution=!1,(!pO||n[0].width*n[0].height<=2073600)&&n[0].frameRate&&(n[0].frameRate=n[0].frameRate>10?10:5)),n[0].retryWhenExactFailed&&n[0].useExactDeviceId&&(n[0].useExactDeviceId=!1)):2===a?n[0].useDeviceIdOnly=!0:3===a&&!n[0].useExactDeviceId&&(n[0].useTrueAsConstraint=!0),r()):i(t),n[0].microphoneId&&xP(n[0].microphoneId,!1),n[0].cameraId&&xP(n[0].cameraId,!0)},onRetrying:e=>{jO.warn("getUserMedia NotReadableError observed, retrying [".concat(e,"/3]"))},onRetryFailed:e=>{TM.logFailedEvent({eventType:mR.GET_USER_MEDIA_RETRY,error:e})},onRetrySuccess:e=>{TM.logSuccessEvent({eventType:mR.GET_USER_MEDIA_RETRY}),TM.uploadEvent({log:"stat-".concat(mR.GET_USER_MEDIA_RETRY,"-success-").concat(e)})}});function xP(e,t){return YS(this,null,(function*(){let r=(t?yield vP():yield TP()).find((t=>t.deviceId===e));r&&cD(r.getCapabilities)&&jO.warn(PD(r.getCapabilities(),{keysToInclude:VR}))}))}function UP(e){if(!e.audio)return!1;if(e.useTrueAsConstraint)return!0;let t={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:e.sampleRate};return!NP(e.microphoneId)&&(t.deviceId=e.useExactDeviceId?{exact:e.microphoneId}:e.microphoneId,e.useDeviceIdOnly)?t:(uD(e.channelCount)&&(t.channelCount=e.channelCount),dD(e.echoCancellation)&&!e.echoCancellation&&(t.echoCancellation=!1),dD(e.noiseSuppression)&&!e.noiseSuppression&&(t.noiseSuppression=!1),dD(e.autoGainControl)&&!e.autoGainControl&&(t.autoGainControl=!1),!!NP(t)||t)}function FP(e){if(!e.video)return!1;if(e.useTrueAsConstraint)return!0;let{maxResolution:t=!0}=e,r={};return e.cameraId?r.deviceId=e.useExactDeviceId?{exact:e.cameraId}:e.cameraId:e.facingMode&&(r.facingMode=e.facingMode),e.useDeviceIdOnly&&!NP(r)?r:(e.width&&(r.width={ideal:e.width},t&&!gB&&(r.width.max=e.width)),e.height&&(r.height={ideal:e.height},t&&!gB&&(r.height.max=e.height)),gB&&YB&&e.width&&e.height&&e.width*e.height<101376&&(r.width=e.width,r.height=e.height),e.frameRate&&(r.frameRate=e.frameRate),!!NP(r)||r)}var VP=LP;function GP(e){return YP(((t,r)=>function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return YS(this,null,(function*(){return yield e.apply(this,i),t.apply(this,i)}))}))}function jP(e){return YP(((t,r)=>function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return YS(this,null,(function*(){let r=yield t.apply(this,i);return yield e.call(this,...i),r}))}))}function HP(e){return YP(((t,r)=>function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return YS(this,null,(function*(){try{return yield t.apply(this,i)}catch(t){e.call(this,t)}}))}))}function YP(e){return function(t,r,i){return i.value=e(i.value,r),i}}var WP=(()=>{let e=!1,t=document.visibilityState;return()=>{document.visibilityState!==t&&jO.info("visibility change: ".concat(document.visibilityState)),!e&&(document.addEventListener("visibilitychange",(()=>{jO.info("visibility change: ".concat(document.visibilityState)),t=document.visibilityState})),e=!0)}})(),JP=0,XP=class{constructor(){jS(this,"log",jO.createLogger({id:"fq".concat(++JP)})),jS(this,"isRunning",!1),jS(this,"queue",[])}get length(){return this.queue.length}get lastQueueItem(){return 0===this.length?null:this.queue[this.length-1]}push(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r,i;let n=LS({},e),o=new Promise(((e,t)=>{n.resolve=e,n.reject=t}));return n.promise=o,t?this.length<=1?this.queue.push(n):null==(i=null==(r=this.lastQueueItem)?void 0:r.promise)||i.then(n.resolve,n.reject):this.queue.push(n),this.log.debug("push ".concat(this.length)),this.isRunning||this.callNext(),o}shift(){let e=this.queue.shift();return this.log.debug("shift ".concat(this.length)),e}callNext(){if(this.isRunning||0===this.length)return;this.log.debug("callNext ",this.length);let{fn:e,args:t,context:r,resolve:i,reject:n}=this.queue[0];this.isRunning=!0,e.apply(r,t).then(i,n).finally((()=>{this.isRunning=!1,this.shift(),this.callNext()}))}},KP=new WeakMap,zP=new WeakMap;function qP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,r,i){let n=i.value;return i.value=function(){let t=KP.get(this)||new XP;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return KP.set(this,t),t.push({fn:n,args:i,context:this},e)},i}}function ZP(e){return function(t,r,i){let n=i.value;return i.value=function(){var t,r,i;let o=[];for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return null==(r=null==(t=KP.get(this))?void 0:t.queue)||r.forEach((e=>o.push(e))),null==(i=zP.get(this))||i.forEach((e=>null==e?void 0:e.queue.forEach((e=>o.push(e))))),o.forEach((t=>{t.reject(new ob({code:ib.API_CALL_ABORTED,message:e}))})),KP.delete(this),zP.delete(this),n.apply(this,s)},i}}function $P(e){return function(t,r,i){let n=i.value,o=t=>e(...t);return i.value=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let i=zP.get(this)||new Map,a=i.get(o(t))||new XP;return i.set(o(t),a),zP.set(this,i),a.push({fn:n,args:t,context:this})},i}}function eN(e,t){return YP(((r,i)=>function(){let i=e;try{for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];let e=r.apply(this,o),s=yD();return mD(e)?e.then((e=>(t?sk.addSuccessEvent({key:i,cost:yD()-s}):sk.addSuccessEvent({key:i}),e))).catch((e=>{throw sk.addFailedEvent({key:i,error:e}),e})):(sk.addSuccessEvent({key:i}),e)}catch(e){throw sk.addFailedEvent({key:i,error:e}),e}}))}var tN=class e extends MP{constructor(e,t){super({mediaType:e,PlayerClass:t}),jS(this,"isRemote",!1),jS(this,"deviceId"),jS(this,"groupId",""),jS(this,"label",""),jS(this,"_isRecapturing",!1),jS(this,"_lastRecaptureTime",0),jS(this,"_onMuteTimeoutId",-1),jS(this,"_encodeCheckTimeoutId",-1),jS(this,"profile")}get enableEncodeFrame(){return!1}get isPublishing(){return"publishing"===this.state.toString()}get isPublished(){return"publish"===this.state}encodeFrame(e,t){throw new Error("Method not implemented.")}installTrackEvent(e){CM(e,e).add(Vb.MUTE,this.onTrackMuted).add(Vb.UNMUTE,this.onTrackUnmuted).add(Vb.ENDED,this.onTrackEnded),e.muted&&this.onTrackMuted(),e.readyState===Vb.ENDED&&this.onTrackEnded()}uninstallTrackEvent(e){yM(e)}setStateToCapture(){}capture(e){return YS(this,null,(function*(){var t;try{let r,i=yD();UO.emit(VO.LOCAL_TRACK_CAPTURE_START,{track:this}),e.customSource?(r=new MediaStream,r.addTrack(e.customSource)):(null==(t=this.mediaTrack)||t.stop(),r=yield VP(e));let n=r.getTracks()[0];return yield this.setInputMediaStreamTrack(n),e.customSource||(this.updateDeviceIdInUse(),this.listenDeviceChange()),UO.emit(VO.LOCAL_TRACK_CAPTURE_SUCCESS,{track:this,cost:yD()-i}),r}catch(e){throw UO.emit(VO.LOCAL_TRACK_CAPTURE_FAILED,{track:this,error:e}),this.log.error("getUserMedia error observed ".concat(e)),e}}))}setInputMediaStreamTrack(e){return this.state===uM.INIT&&this.setStateToCapture(),super.setInputMediaStreamTrack(e)}setOutputMediaStreamTrack(e){var t;if(super.setOutputMediaStreamTrack(e),this.isPublishing||this.isPublished)return null==(t=this.room)?void 0:t.replaceTrack(this)}publish(e,t){return this.room=e,this.emit("4",{mediaType:this.strMediaType,state:"starting",prevState:"stopped"}),this.userId=e.userId,this._log.setUserId(e.userId),this._log.setSdkAppId(e.sdkAppId),t}unpublish(){this.room&&this.room.localTracks.delete(this),UO.emit(VO.LOCAL_TRACK_UNPUBLISHED,{track:this})}updateDeviceIdInUse(){return YS(this,null,(function*(){if(this.mediaTrack&&Vk){let{deviceId:e,groupId:t}=this.mediaTrack.getSettings(),{label:r}=this.mediaTrack;(yield function(e){return YS(this,arguments,(function(e){let{newDeviceId:t,oldDeviceId:r,oldGroupId:i,oldLabel:n,kind:o}=e;return function*(){return t===r&&(o!==Vb.AUDIO||t!==MR||(yield RP(i,n)))}()}))}({newDeviceId:e,oldDeviceId:this.deviceId,oldGroupId:this.groupId,oldLabel:this.label,kind:this.kind}))||(this.deviceId=e,this.label=r,t&&(this.groupId=t),yP().then((t=>{let r=t.find((t=>t.deviceId===e));r&&this.emit("2",r)})))}}))}setProfile(e){this.log.info("setProfile",e),Object.assign(this.profile,e)}isNeedToRecapture(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!(!this.deviceId||!this.mediaTrack||this.kind===Vb.AUDIO&&!function(e){if(e instanceof CanvasCaptureMediaStreamTrack||!(e instanceof MediaStreamTrack))return!1;let t=e.label.toLocaleLowerCase();if(t.includes("mic")||t.includes("麦克风"))return!0;let r="".concat(((null==e?void 0:e.getSettings())||{}).deviceId,"_").concat(Vb.AUDIO_INPUT);return!!bP.has(r)}(this.mediaTrack)||this.kind===Vb.VIDEO&&!function(e){if(e instanceof CanvasCaptureMediaStreamTrack||!(e instanceof MediaStreamTrack))return!1;let t=e.label.toLocaleLowerCase();if(t.includes("camera")||t.includes("webcam"))return!0;let r="".concat(((null==e?void 0:e.getSettings())||{}).deviceId,"_").concat(Vb.VIDEO_INPUT);return!!bP.has(r)}(this.mediaTrack)||this._isRecapturing||e&&YB&&pO)}onTrackMuted(){if(super.onTrackMuted(),WP(),this.isNeedToRecapture(!0)){if(Date.now()-this._lastRecaptureTime<FR)return void setTimeout((()=>this.onTrackMuted()),FR);this._onMuteTimeoutId=setTimeout((()=>YS(this,null,(function*(){var e;if(null!=(e=this.mediaTrack)&&e.muted){if((AB||lB)&&"visible"!==document.visibilityState)return;this.recapture(yield this.getRecoverCaptureDeviceId())}}))),5e3)}}onTrackUnmuted(){super.onTrackUnmuted(),this._onMuteTimeoutId>0&&clearTimeout(this._onMuteTimeoutId)}onTrackEnded(){return YS(this,null,(function*(){if(HS(e.prototype,this,"onTrackEnded").call(this),this.isNeedToRecapture()){if(Date.now()-this._lastRecaptureTime<FR)return void setTimeout((()=>this.onTrackEnded()),FR);this.recapture(yield this.getRecoverCaptureDeviceId())}}))}recapture(e){return YS(this,null,(function*(){var t;if(this._isRecapturing||!this._inputTrack)return;this.log.warn("recapture trying"),null==(t=this._inputTrack)||t.stop(),this._isRecapturing=!0,this._lastRecaptureTime=Date.now();let r={useExactDeviceId:!0};if("user"===e||"environment"===e)r.facingMode=e;else{let t;("audio"===this.kind?yield TP():yield vP()).find((t=>t.deviceId===e))&&(t=e),r.deviceId=t}return this.capture(r).then((()=>{this._isRecapturing=!1,this.log.warn("recapture success"),this.emit("1",{deviceId:this.deviceId}),UO.emit(VO.LOCAL_TRACK_RECAPTURE,{track:this})})).catch((e=>{this._isRecapturing=!1,this.log.warn("recapture failed ".concat(e.message)),this.emit("5",e),UO.emit(VO.LOCAL_TRACK_RECAPTURE,{track:this,error:e})}))}))}getRecoverCaptureDeviceId(){return YS(this,null,(function*(){let e=this instanceof cN;if(e&&this.facingMode)return this.facingMode;let{deviceId:t}=this;if(t){let r=(iN.get(t)||0)+1;if(iN.set(t,r),r>=3){let i=e?(yield vP()).find((e=>!iN.has(e.deviceId))):(yield TP()).find((e=>!iN.has(e.deviceId)));i&&(this.log.warn("".concat(t," capture fail ").concat(r," times, change new ").concat(i.deviceId)),t=i.deviceId)}}return t}))}close(){var e;super.close(),this._inputTrack&&(this._inputTrack.stop(),this.uninstallTrackEvent(this._inputTrack)),null==(e=this.manager)||e.removeInput(this)}};GS([cM(uM.INIT,"capture",{ignoreError:!0,sync:!0})],tN.prototype,"setStateToCapture",1),GS([qP()],tN.prototype,"capture",1),GS([cM("capture","publish",{ignoreError:!0,success(){var e,t;this.room.localTracks.add(this),UO.emit(VO.LOCAL_TRACK_PUBLISHED,{track:this}),this.emit("4",{mediaType:this.strMediaType,state:"started",prevState:"starting"}),!(((null==(t=null==(e=this.room)?void 0:e.networkQuality)?void 0:t.uplinkNetworkQuality)||0)>3)&&(this._encodeCheckTimeoutId=setTimeout((()=>{var e,t;if(!(((null==(t=null==(e=this.room)?void 0:e.networkQuality)?void 0:t.uplinkNetworkQuality)||0)>3)&&this.isPublished&&this.isMediaTrackActive){let e=this.kind===Vb.AUDIO,t=this.stat.bytesSent>0;sk[t?"addSuccessEvent":"addFailedEvent"]({key:e?503700:513702}),t||(sk.addEnum({key:e?503701:513703,value:MO()}),TM.uploadEvent({log:"stat-encode-failed-".concat(this.kind,"-").concat(OO()||PO()),userId:this.userId}),this.log.warn("encode failed"),this.emit("6",this))}}),5e3))},fail(e){let t="error";if(e.cause instanceof RTCError){let r=e.cause;r.message.includes("timeout")?t="timeout":r.code===ib.API_CALL_ABORTED&&(t="api-call")}this.emit("4",{mediaType:this.strMediaType,state:"stopped",prevState:"starting",reason:t,error:e.cause||e})}}),eN(521714,!1)],tN.prototype,"publish",1),GS([YP((e=>function(){return YS(this,null,(function*(){let t="publish"===this.state?"started":"starting";e.call(this),this.emit("4",{mediaType:this.strMediaType,state:"stopped",prevState:t,reason:"api-call"}),clearTimeout(this._encodeCheckTimeoutId)}))})),cM([],"capture",{sync:!0})],tN.prototype,"unpublish",1);var rN=tN,iN=new Map;UO.on(VO.SWITCH_DEVICE_SUCCESS,(e=>{e.track.deviceId&&iN.delete(e.track.deviceId)}));var nN=class e extends rN{constructor(e){super(1,QP),jS(this,"mediaType",1),jS(this,"volume",0),jS(this,"profile",{echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0,sampleRate:48e3,channelCount:1,bitrate:40}),jS(this,"playerMuted",!0),jS(this,"pipeline"),jS(this,"stat",{bytesSent:0,packetsSent:0,audioLevel:0,totalAudioEnergy:0}),this.manager=e,this.pipeline=new cP(e),this.handleMicrophoneAdded=this.handleMicrophoneAdded.bind(this),this.handleMicrophoneRemoved=this.handleMicrophoneRemoved.bind(this)}get dbVolume(){return pP.isRunning?this.player.pipeline.volumeMeter.getVolumeDb():Math.floor(Math.max(10*Math.log10(this.volume)+100,0))}getAudioLevel(){let e=(this.volume||super.getAudioLevel())*this.captureVolume;return e>1?1:e}get playerMediaTrack(){return this.mediaTrack}setInputMediaStreamTrack(t){return YS(this,null,(function*(){let r=this.trackSettings||{};sk.addEnum({key:501701,value:r.channelCount||0,useUV:!1}),sk.addEnum({key:501702,value:r.sampleRate||0,useUV:!1}),sk.addEnum({key:502700,value:0});let{sampleRate:i,channelCount:n}=r;this._log.info("local audio track input ".concat(JSON.stringify({sampleRate:i,channelCount:n}))),this.pipeline.source.channelCount=n||1,this.pipeline.replaceSource(t),yield HS(e.prototype,this,"setInputMediaStreamTrack").call(this,t),this.updatePlayingState(!!t)}))}capture(e){let{deviceId:t,customSource:r,useExactDeviceId:i=!0,retryWhenExactFailed:n=!0}=e;return super.capture({video:!1,audio:!0,microphoneId:t,echoCancellation:this.profile.echoCancellation,autoGainControl:this.profile.autoGainControl,noiseSuppression:this.profile.noiseSuppression,sampleRate:this.profile.sampleRate,channelCount:this.profile.channelCount,useExactDeviceId:i,retryWhenExactFailed:n,customSource:r})}switchDevice(e){return YS(this,null,(function*(){if(this.mediaTrack){if(this.deviceId===e){if(e!==MR)return;if(yield RP(this.groupId,this.label))return}try{this.log.info("switchDevice audio to: ".concat(e)),this.mediaTrack&&this.mediaTrack.stop(),yield this.capture({deviceId:e,useExactDeviceId:!0,retryWhenExactFailed:!1}),UO.emit(VO.SWITCH_DEVICE_SUCCESS,{track:this}),this.log.info("switch microphone success")}catch(e){throw this.log.error("switch microphone failed ".concat(e)),this.deviceId&&this.recapture(this.deviceId),e}}}))}listenDeviceChange(){_P&&!_P.listeners("audioInputRemoved").includes(this.handleMicrophoneRemoved)&&_P.on("audioInputRemoved",this.handleMicrophoneRemoved,this)}handleMicrophoneRemoved(e){return YS(this,null,(function*(){if(e.deviceId===this.deviceId){this.log.warn("current microphone is lost: ".concat(JSON.stringify(e))),Zx(this.userId,{eventId:2003,param1:6,streamType:1});let t=yield TP();t[0]?this.recapture(t[0].deviceId):_P.on("audioInputAdded",this.handleMicrophoneAdded,this)}}))}handleMicrophoneAdded(e){this.log.warn("microphone added: ".concat(JSON.stringify(e))),this.recapture(e.deviceId)}update3A(e){return YS(this,arguments,(function(e){var t=this;let{echoCancellation:r,noiseSuppression:i,autoGainControl:n}=e;return function*(){let e=!1;!AD(r)&&r!==t.profile.echoCancellation&&(t.profile.echoCancellation=r,e=!0),!AD(i)&&i!==t.profile.noiseSuppression&&(t.profile.noiseSuppression=i,e=!0),!AD(n)&&n!==t.profile.autoGainControl&&(t.profile.autoGainControl=n,e=!0),e&&t.deviceId&&(yield t.recapture(t.deviceId))}()}))}get captureVolume(){return this.pipeline.volume}setCaptureVolume(e){this.pipeline.setVolume(e/100),this.pipeline.gain.node&&sk.addEnum({key:502700,value:2}),this.resetPlayerSource()}enableTrackANS(e){if(!this._inputTrack)return;let t=this._inputTrack.getConstraints();return t.noiseSuppression=e,this._inputTrack.applyConstraints(t).catch((t=>this._log.warn("".concat(e?"enable":"disable"," ANS failed "),t)))}addDenoiser(e){var t;hO<=92&&48e3!==(null==(t=this.trackSettings)?void 0:t.sampleRate)?this._log.warn("denoiser only support sampleRate 48000 before chrome 93"):(sk.addEnum({key:502700,value:1}),this.pipeline.denoiser.setNode(e),this.resetPlayerSource(),this.enableTrackANS(!1))}removeDenoiser(e){this.pipeline.denoiser.node===e&&(this.pipeline.denoiser.deleteNode(),this.resetPlayerSource(),this.enableTrackANS(!0))}resetPlayerSource(){this.player.setSourceNode(this.pipeline.gain.node||this.pipeline.denoiser.node||this.pipeline.source.node)}close(){this.pipeline.remove(),_P.off("audioInputAdded",this.handleMicrophoneAdded,this),_P.off("audioInputRemoved",this.handleMicrophoneRemoved,this),super.close()}recapture(t){return YS(this,null,(function*(){try{yield HS(e.prototype,this,"recapture").call(this,t)}catch(r){let i=(yield TP()).find((e=>e.deviceId!==t));if(!i)throw r;yield HS(e.prototype,this,"recapture").call(this,i.deviceId)}}))}encodeFrame(e){return this.manager?this.manager.encodePipeline.reduceRight(((e,t)=>t?t({frame:e}):e),e):e}get enableEncodeFrame(){return!!this.manager&&this.manager.encodePipeline.some((e=>e))}},oN=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.dataView=e,this.isSEI&&(t?this.addPreventionByte():this.removePreventionByte())}addPreventionByte(){let e=this.seiPayloadStartIndex,t=this.dataView.byteLength-2,r=[],i=0;for(let n=e;n<=t;n++){let e=this.dataView.getInt8(n);switch(e){case 0:case 1:case 2:case 3:2===i&&(r.push(3),i=0),0==e?i++:i=0,r.push(e);break;default:i=0,r.push(e)}}r.push(this.dataView.getInt8(this.dataView.byteLength-1));let n=new DataView(new Uint8Array([...new Uint8Array(this.dataView.buffer).slice(0,e),...r]).buffer);this.dataView=n}removePreventionByte(){let e=this.seiPayloadStartIndex,t=this.dataView.byteLength-1,r=[],i=0;for(let n=e;n<=t;n++)switch(this.dataView.getInt8(n)){case 0:i++,r.push(this.dataView.getInt8(n));break;case 3:2!==i&&r.push(this.dataView.getInt8(n)),i=0;break;default:r.push(this.dataView.getInt8(n)),i=0}let n=new DataView(new Uint8Array([...new Uint8Array(this.dataView.buffer).slice(0,e),...r]).buffer);this.dataView=n}get isSEI(){return 6===this.dataView.getUint8(4)}get seiPayloadStartIndex(){let e=6;for(let t=6;t<this.dataView.buffer.byteLength&&(e++,255===this.dataView.getUint8(t));t++);return e}get seiPayloadType(){return this.isSEI?this.dataView.getUint8(5):null}get seiPayload(){if(!this.isSEI)return null;let e=0,t=6;for(let r=6;r<this.dataView.buffer.byteLength;r++){let i=this.dataView.getUint8(r);if(t++,255!==i){e+=i;break}e+=255}let r=new ArrayBuffer(e),i=new DataView(r);for(let e=0;e<r.byteLength;e++,t++)i.setInt8(e,this.dataView.getInt8(t));return i}},aN=class{constructor(){jS(this,"_seiMessageList",[]),jS(this,"_smallSeiMessageList",[]),jS(this,"_seiPayloadType",243)}encodeSEINalu(e){let t=e.byteLength,r=parseInt(String(t/255),10),i=t%255,n=[];n.push(0,0,0,1,6,this._seiPayloadType);for(let e=0;e<r;e++)n.push(255);n.push(i);let o=new DataView(e);return n.push(...new Uint8Array(o.buffer)),n.push(128),new oN(new DataView(new Uint8Array(n).buffer),!0)}sendSEI(e,t){null!=t&&t.seiPayloadType&&(this._seiPayloadType=t.seiPayloadType),this._seiMessageList.push(e),null!=t&&t.small&&this._smallSeiMessageList.push(e)}isEmpty(){return!this._seiMessageList.length}getNaluCount(e){let t=0,r=0,i=new DataView(e);for(let n=0;n<e.byteLength;n++)switch(i.getUint8(n)){case 0:t++;break;case 1:(2===t||3===t)&&r++,t=0;break;default:t=0}return r}encode(e,t){let r=t?this._smallSeiMessageList:this._seiMessageList;if(r.length>0&&e.data.byteLength>0){let t=9-this.getNaluCount(e.data);if(t<=0)return 0;let i=r.splice(0,t).reverse().map(this.encodeSEINalu.bind(this)),n=i.reduce(((e,t)=>e+t.dataView.byteLength),0),o=new ArrayBuffer(n+e.data.byteLength),a=new DataView(o),s=new DataView(e.data),c=0;for(let e=0;e<i.length;e++)for(let t=0;t<i[e].dataView.byteLength;t++)a.setInt8(c++,i[e].dataView.getInt8(t));for(let t=0;t<e.data.byteLength;t++)a.setInt8(c++,s.getInt8(t));return e.data=o,i.length}return 0}},sN=class e extends rN{constructor(e){super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,zM),jS(this,"profile",{width:640,height:480,frameRate:15,bitrate:500}),jS(this,"stat",{bytesSent:0,packetsSent:0,framesEncoded:0,framesSent:0,frameWidth:0,frameHeight:0,fpsCapture:0}),jS(this,"small"),jS(this,"isNeedToSetBandwidth"),jS(this,"muteImage"),jS(this,"manager"),jS(this,"_seiCodec",new aN),this.manager=e;let t=()=>{this.isAllowed2k4k(this.profile)?this.room&&this.settings.height>=1440&&"publish"===this.state&&this.room.sendAbilityStatus({"2k4k":1}):(this.log.warn("Resolution is reset to 1080p, need to upgrade ability here https://cloud.tencent.com/document/product/647/85386"),this.setProfile(xS(LS({},this.profile),{width:1920,height:1080})),this.applyProfile())};this.on("input-media-track-changed",t),this.on("publish",t),this.handleCameraAdded=this.handleCameraAdded.bind(this),this.handleCameraRemoved=this.handleCameraRemoved.bind(this)}get facingMode(){if(Vk&&this.mediaTrack)return this.mediaTrack.getSettings().facingMode}get isQosClearFirst(){var e;return"detail"===(null==(e=this._inputTrack)?void 0:e.contentHint)}setMute(t){return YS(this,null,(function*(){var r,i,n;if(lD(t)){if(this.muteImage===t)return;yield null==(r=this.manager)?void 0:r.deleteWatermark("mute"),yield null==(i=this.manager)?void 0:i.setWatermark({x:0,y:0,width:this.settings.width,height:this.settings.height,type:"mute",zIndex:999,imageUrl:t}),this.muteImage=t,HS(e.prototype,this,"setMute").call(this,!1)}else yield null==(n=this.manager)?void 0:n.deleteWatermark("mute"),this.muteImage=void 0,HS(e.prototype,this,"setMute").call(this,t)}))}capture(e){let{deviceId:t,facingMode:r,useExactDeviceId:i=!0,customSource:n,retryWhenExactFailed:o=!0}=e;return super.capture({audio:!1,video:!0,facingMode:r||this.facingMode,cameraId:t,width:this.profile.width,height:this.profile.height,frameRate:this.profile.frameRate,useExactDeviceId:i,retryWhenExactFailed:o,customSource:n})}setProfile(e){let t=LS({},e),r=t.width>t.height;t.width*t.height<=19200&&lB&&lO&&(this.log.warn("resolution is ".concat(t.width,"*").concat(t.height,", fallback to 240*180")),t.width=r?240:180,t.height=r?180:240,t.bitrate=Math.max(t.bitrate,150)),t.width*t.height>921600&&TO&&(t.width=r?1280:720,t.height=r?720:1280,this.log.warn("reset to 1280 * 720 on iOS 13~14")),t.bitrate&&(this.isNeedToSetBandwidth=t.bitrate!==this.profile.bitrate),this.isAllowed2k4k(this.profile)?super.setProfile(t):(this.log.warn("Resolution is reset to 1080p, need to upgrade ability here https://cloud.tencent.com/document/product/647/85386"),super.setProfile(xS(LS({},this.profile),{width:1920,height:1080})))}applyProfile(){return YS(this,null,(function*(){var e;if(!this.mediaTrack)return;let t=this.settings;return(t.height!==this.profile.height||t.width!==this.profile.width||t.frameRate!==this.profile.frameRate)&&this.deviceId&&(16===_O?yield this.recapture(this.deviceId):(yield null==(e=this.mediaTrack)?void 0:e.applyConstraints({width:this.profile.width,height:this.profile.height,frameRate:this.profile.frameRate}),this.manager&&this.manager.changeInput(this)),this.room&&this.settings.height>=1440&&"publish"===this.state&&this.room.sendAbilityStatus({"2k4k":1}),this.isNeedToSetBandwidth&&this.room&&this.room.setBandWidth)?(this.isNeedToSetBandwidth=!1,this.room.setBandWidth({bandwidth:this.profile.bitrate,type:Vb.VIDEO,videoType:Vb.BIG})):void 0}))}get settings(){let e={width:this.profile.width,height:this.profile.height,frameRate:this.profile.frameRate};return Vk&&this.mediaTrack&&Object.assign(e,this.mediaTrack.getSettings()),e}get scaleResolutionDownBy(){let{settings:e}=this;return e.width===this.profile.width&&e.height===this.profile.height?1:xD()&&this.profile.width>this.profile.height&&e.height>e.width?Math.max(e.width/this.profile.height,e.height/this.profile.width,1):Math.max(e.width/this.profile.width,e.height/this.profile.height,1)}isAllowed2k4k(e){var t;return!(this.room&&this.room.scheduleResult&&!this.isScreen&&!(e.height*e.width<3686400))||1===(null==(t=this.room.scheduleResult.trtcAutoConf)?void 0:t["2k4k"])}isNeedToSwitchDevice(e){return!(!this.mediaTrack||this.deviceId===e||this.facingMode===e)}switchDevice(e){return YS(this,null,(function*(){try{if(!this.isNeedToSwitchDevice(e))return;let t={useExactDeviceId:!0,retryWhenExactFailed:!1};"user"===e||"environment"===e?t.facingMode=e:t.deviceId=e,this.mediaTrack.stop(),yield this.capture(t),UO.emit(VO.SWITCH_DEVICE_SUCCESS,{track:this}),this.log.info("switch camera success")}catch(e){throw this.log.error("switch camera failed ".concat(e)),this.deviceId&&this.recapture(this.deviceId),e}}))}listenDeviceChange(){_P&&!_P.listeners("videoInputRemoved").includes(this.handleCameraRemoved)&&_P.on("videoInputRemoved",this.handleCameraRemoved,this)}handleCameraRemoved(e){return YS(this,null,(function*(){if(e.deviceId===this.deviceId){this.log.warn("current camera is lost: ".concat(JSON.stringify(e))),Zx(this.userId,{eventId:2003,param1:7,streamType:2});let t=yield vP();t[0]?this.recapture(t[0].deviceId):_P.on("videoInputAdded",this.handleCameraAdded,this)}}))}handleCameraAdded(e){return YS(this,null,(function*(){this.log.warn("camera added: ".concat(JSON.stringify(e))),this.recapture(e.deviceId)}))}encodeFrame(e,t){if(!this.manager)return e;let r=t?8:this.mediaType;return this.manager.encodePipeline.reduceRight(((e,t)=>t?t({frame:e,mediaType:r}):e),e)}get enableEncodeFrame(){return!!this.manager&&this.manager.encodePipeline.some((e=>e))}play(e,t){return AD(this.mirror)&&!this.isScreen&&this.setMirror("view"),super.play(e,t)}close(){_P.off("videoInputAdded",this.handleCameraAdded,this),_P.off("videoInputRemoved",this.handleCameraRemoved,this),super.close()}recapture(t){return YS(this,null,(function*(){try{yield HS(e.prototype,this,"recapture").call(this,t)}catch(r){let i=(yield vP()).find((e=>e.deviceId!==t));if(!i)throw r;yield HS(e.prototype,this,"recapture").call(this,i.deviceId)}}))}setContentHint(e){this.mediaTrack&&"contentHint"in this.mediaTrack&&(this.mediaTrack.contentHint!==e&&(this.log.info("setContentHint ".concat(e)),this.mediaTrack.contentHint=e),this.outMediaTrack&&this.outMediaTrack.contentHint!==e&&(this.outMediaTrack.contentHint=e))}};GS([jP((function(e){this.setContentHint(e.contentHint||"motion")}))],sN.prototype,"capture",1);var cN=sN,AN=HO();if("undefined"!=typeof navigator&&navigator.mediaDevices&&"setCaptureHandleConfig"in navigator.mediaDevices)try{navigator.mediaDevices.setCaptureHandleConfig({handle:AN,exposeOrigin:!0,permittedOrigins:["*"]})}catch(e){}var lN=class extends cN{constructor(e){super(e,2),jS(this,"profile",{width:1920,height:1080,frameRate:5,bitrate:1600}),jS(this,"objectFit","contain"),jS(this,"isScreen",!0),this._log.id="s-".concat(this._log.id)}capture(e){return YS(this,arguments,(function(e){var t=this;let{systemAudio:r=!1,autoGainControl:i,echoCancellation:n,noiseSuppression:o,audioTrack:a,videoTrack:s,captureElement:c,preferDisplaySurface:A}=e;return function*(){try{let e;return s||a?(e=new MediaStream,s&&e.addTrack(s),a&&e.addTrack(a)):e=yield function(e){return YS(this,null,(function*(){let t=null,r=function(e){let t={preferCurrentTab:"current-tab"===e.preferDisplaySurface||!!e.captureElement,systemAudio:"include",selfBrowserSurface:"include",surfaceSwitching:"include"},r={width:pO?{max:e.width}:{ideal:e.width,max:e.width},height:pO?{max:e.height}:{ideal:e.height,max:e.height},frameRate:e.frameRate,displaySurface:e.preferDisplaySurface||"monitor"};if(t.video=r,e.systemAudio){let{echoCancellation:r=!0,noiseSuppression:i=!1,autoGainControl:n=!1}=e;t.audio={echoCancellation:r,noiseSuppression:i,autoGainControl:n,sampleRate:48e3}}return t}(e);jO.info("getDisplayMedia with constraints: ".concat(JSON.stringify(r)));let i=yield navigator.mediaDevices.getDisplayMedia(r);e.systemAudio&&0===i.getAudioTracks().length&&(uO&&hO<74||pO||gB)&&jO.warn("Your browser not support capture system audio");let n=i.getVideoTracks()[0];if(n){if(e.frameRate)try{yield n.applyConstraints({frameRate:{min:e.frameRate,ideal:e.frameRate},width:e.width,height:e.height})}catch(e){jO.warn("screen applyConstraints failed: ".concat(e))}e.captureElement&&(yield function(e,t){return YS(this,null,(function*(){var r;if("CropTarget"in window&&"fromElement"in CropTarget&&cD(e.cropTo))try{if((null==(r=e.getCaptureHandle())?void 0:r.handle)!==AN)return;let i=yield CropTarget.fromElement(t);yield e.cropTo(i)}catch(e){jO.warn("cropTo target failed ".concat(e))}}))}(n,e.captureElement))}if(e.audio){let r=function(e){let t={echoCancellation:e.echoCancellation,autoGainControl:e.autoGainControl,noiseSuppression:e.noiseSuppression,sampleRate:e.sampleRate,channelCount:e.channelCount};return AD(e.microphoneId)||(t.deviceId=e.microphoneId),{audio:t,video:!1}}(e);jO.info("getUserMedia with constraints: ".concat(JSON.stringify(r))),t=yield navigator.mediaDevices.getUserMedia(r),i.addTrack(t.getAudioTracks()[0])}return i}))}({audio:!1,systemAudio:r,width:t.profile.width,height:t.profile.height,frameRate:t.profile.frameRate,autoGainControl:i,echoCancellation:n,noiseSuppression:o,captureElement:c,preferDisplaySurface:A}),yield t.setInputMediaStreamTrack(e.getVideoTracks()[0]),e}catch(e){throw t.log.error("getDisplayMedia error observed ".concat(e)),e instanceof ob?e:new ob({code:ib.INITIALIZE_FAILED,name:e.name,message:e.message})}}()}))}switchDevice(e){return YS(this,null,(function*(){throw new Error("Method not implemented.")}))}};GS([jP((function(e){this.setContentHint(e.contentHint||"detail")}))],lN.prototype,"capture",1);var uN,dN=class extends nN{constructor(e){super(e),this._log.id="s-".concat(this._log.id)}};function hN(e){return YS(this,null,(function*(){let t=nP();uN||(uN=qM(t,URL.createObjectURL(new Blob(["registerProcessor('dumper', class extends AudioWorkletProcessor {process(inputs) {this.port.postMessage(inputs);return true;}});"],{type:"application/javascript"})))),yield uN;let r=new AudioWorkletNode(t,"dumper",{numberOfInputs:e.length,numberOfOutputs:0});return e.forEach(((e,t)=>e.connect(r,0,t))),new ReadableStream({start(e){r.port.onmessage=t=>{e.enqueue(t.data)}},cancel(){e.forEach((e=>e.disconnect(r))),r.port.close()}})}))}var gN=class extends AP{constructor(e){super(),this.room=e,jS(this,"_localAudioTrack"),jS(this,"_localScreenAudioTrack"),jS(this,"log",jO.createLogger({id:"am"})),jS(this,"denoiser"),jS(this,"mixChangedDebounce"),jS(this,"encodePipeline",[]),jS(this,"decodePipeline",[]),e&&(this.log.setUserId(e.userId),this.log.setSdkAppId(e.sdkAppId))}get _localAudioPipline(){var e;return null==(e=this._localAudioTrack)?void 0:e.pipeline}dump(e){var t,r;if(!this._localAudioTrack)return;let i=[],n=[];null!=(t=this._localAudioPipline)&&t.source.node&&(i.push(this._localAudioPipline.source.node),n.push("mic")),null!=(r=this._localAudioPipline)&&r.denoiser.node&&(i.push(this._localAudioPipline.denoiser.node),n.push("mic-processed")),this.mixWeight>1&&(i.push(this.audioContext.createMediaStreamSource(this._localAudioPipline.stream)),n.push("mix")),this.log.info("dump audio track ".concat(n,", duration: ").concat(e));let o=new AbortController,a=[],s=setTimeout((()=>{this.log.info('dump audio track complete please input "download()" to download.'),o.abort("timeout")}),1e3*e),c=()=>{for(let e=0;e<n.length;e++){let t=URL.createObjectURL(new Blob(a[e])),r=document.createElement("a");r.href=t,r.download="".concat(n[e],".pcm"),r.style.display="none",document.body.appendChild(r),r.click(),URL.revokeObjectURL(t),r.remove()}clearTimeout(s),o.abort("download")},A=hN(i).then((e=>e.pipeTo(new WritableStream({write(e){e.forEach(((e,t)=>a[t]=a[t]?a[t].concat(e[0]):[e[0]]))}}),o).catch((e=>c))));return{then:A.then.bind(A),download:c}}getPCM(e){var t;if(AD(WritableStream))return void this.log.warn("getPCM failed: browser not support WritableStream");if(null==(t=this._localAudioPipline)||!t.source.node)return void this.log.warn("getPCM failed: no local audio track");this.log.warn("getPCM");let r=new Float32Array(1920),i=0,n=new AbortController;return hN([this._localAudioPipline.source.node]).then((t=>t.pipeTo(new WritableStream({write(t){t[0][0]&&(r.set(t[0][0],i),i+=t[0][0].length,i>=1920&&(i=0,e(r),r=new Float32Array(1920)))}}),n).catch((e=>this.log.warn("stop getPCM reason:".concat(e)))))),n}get hasScreenAudioTrack(){return null!==this._localScreenAudioTrack}get hasAudioTrack(){return!AD(this._localAudioTrack)}changeInput(e){return e instanceof dN?(this._localScreenAudioTrack=e,e.pipeline.connect(),this.mixOnChange()):e instanceof nN?(this._localAudioTrack=e,this.denoiser&&e.addDenoiser(this.denoiser),e.pipeline.connect(),this.mixOnChange()):e instanceof EN?e.setOutputMediaStreamTrack(e.mediaTrack):void 0}mixOnChange(){return this.mixChangedDebounce||(this.mixChangedDebounce=Promise.resolve().then((()=>{var e,t;return delete this.mixChangedDebounce,Promise.all([null==(e=this._localAudioTrack)?void 0:e.setOutputMediaStreamTrack(this.mixWeight>1?this.mixTrack:this._localAudioTrack.mediaTrack),null==(t=this._localScreenAudioTrack)?void 0:t.setOutputMediaStreamTrack(this.mixWeight>1?this.mixTrack:this._localScreenAudioTrack.mediaTrack)])}))),this.mixChangedDebounce}removeInput(e){e instanceof dN?delete this._localScreenAudioTrack:e instanceof nN&&delete this._localAudioTrack}addDenoiser(e){var t;this.denoiser=e,null==(t=this._localAudioTrack)||t.addDenoiser(e)}removeDenoiser(e){var t;delete this.denoiser,null==(t=this._localAudioTrack)||t.removeDenoiser(e)}destroy(){this.close()}addEncodeProcessor(e){let{processor:t,type:r}=e;var i;this.encodePipeline.includes(t)||(this.encodePipeline[r]=t,null==(i=this.room)||i.enableInsertableStreams())}addDecodeProcessor(e){let{processor:t,type:r}=e;var i;this.decodePipeline.includes(t)||(this.decodePipeline[r]=t,null==(i=this.room)||i.enableInsertableStreams())}removeEncodeProcessor(e){let{type:t}=e;this.encodePipeline[t]=void 0}removeDecodeProcessor(e){let{type:t}=e;this.decodePipeline[t]=void 0}};function pN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return YP(((r,i)=>function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return new Promise(((n,a)=>{let s=setTimeout((()=>{let r=new ob({code:ib.API_CALL_TIMEOUT,message:"checkPendingPromise ".concat(i,"() timeout ").concat(e,"s")});jO.warn(r),2===t?a(r):1===t&&n()}),1e3*e);r.apply(this,o).then(n,a).finally((()=>{clearTimeout(s)}))}))}))}var fN=class e extends MP{constructor(e,t,r){super({userId:t.userId,sdkAppId:e.sdkAppId,mediaType:r,room:e}),this.room=e,this.user=t,jS(this,"tinyId"),jS(this,"isRemote",!0),jS(this,"jitterBufferDelay",0),jS(this,"_decodeCheckTimeoutId",-1),this.tinyId=t.tinyId}setMute(e){this.isAvailable&&super.setMute(e)}setInputMediaStreamTrack(e){super.setInputMediaStreamTrack(e),this.isAvailable&&this.isSubscribed&&this.player.setTrack(this.outMediaTrack)}waitHasMediaTrack(){return new Promise((e=>{this.mediaTrack?e():this.once("input-media-track-changed",e)}))}get isSubscribing(){return"subscribeing"===this.state.toString()}get isSubscribed(){return this.state===e.STATE_SUBSCRIBE}subscribe(e){return e}unsubscribe(){this.player.setTrack(null),"main"===this.streamType&&"video"===this.kind&&this.room.changeType(!1,this.user)}reportDecodeResult(e,t){let r=this.kind===Vb.AUDIO;sk[e?"addSuccessEvent":"addFailedEvent"]({key:r?504700:514702}),e||(sk.addEnum({key:r?504701:514703,value:MO()}),TM.uploadEvent({log:"stat-decode-failed-".concat(this.kind,"-").concat(OO()||PO()),userId:this.room.userId}),this._log.warn("decode failed: isPlaying: ".concat(this.player.isPlaying," ").concat(this.kind===Vb.AUDIO?"audioLevel: ".concat(this.getAudioLevel()):"framesDecoded: ".concat(this.stat.framesDecoded>0))),this.emit("decode-failed",{error:t}))}updatePlayingState(e){if(this.isPlayCalled&&this.player.isStopped===e){if(e&&(!this.isSubscribed||!this.isAvailable||!this.outMediaTrack))return void this.log.info("abort play, isSubscribed: ".concat(this.isSubscribed," isAvailable: ").concat(this.isAvailable," hasTrack: ").concat(!!this.outMediaTrack," "));super.updatePlayingState(e)}}close(){super.close(),this.outMediaTrack&&this.uninstallTrackEvent(this.outMediaTrack)}onFlagChanged(){this.updatePlayingState(this.isAvailable)}onTrackMuted(){this.isAvailable&&(this.isSubscribed||this.isSubscribing)&&this.isPlayCalled&&super.onTrackMuted()}onTrackUnmuted(){this.isAvailable&&(this.isSubscribed||this.isSubscribing)&&this.isPlayCalled&&super.onTrackUnmuted()}onTrackEnded(){this.isAvailable&&(this.isSubscribed||this.isSubscribing)&&this.isPlayCalled&&super.onTrackEnded()}};jS(fN,"STATE_SUBSCRIBE","subscribe"),GS([pN(5,1)],fN.prototype,"waitHasMediaTrack",1),GS([cM(uM.INIT,fN.STATE_SUBSCRIBE,{success(){var e,t;this.log.info("subscribed"),UO.emit(VO.REMOTE_TRACK_SUBSCRIBED,{track:this}),this.updatePlayingState(!0),!(((null==(t=null==(e=this.room)?void 0:e.networkQuality)?void 0:t.downlinkNetworkQuality)||0)>3||this.player.isInAutoPlayFailedState)&&(this._decodeCheckTimeoutId=setTimeout((()=>{var e,t;if(!(((null==(t=null==(e=this.room)?void 0:e.networkQuality)?void 0:t.downlinkNetworkQuality)||0)>3||this.player.isInAutoPlayFailedState)&&this.isSubscribed&&this.isPlayCalled&&this.stat.bytesReceived>0){let e=this.kind===Vb.AUDIO,t=this.player.isPlaying||(e?this.getAudioLevel()>0:this.stat.framesDecoded>0);this.reportDecodeResult(t)}}),5e3),this.player.once(EM.ERROR,(e=>{e.code===MediaError.MEDIA_ERR_DECODE&&(clearTimeout(this._decodeCheckTimeoutId),this.reportDecodeResult(!1,3))})))},ignoreError:!0}),eN(521716,!1)],fN.prototype,"subscribe",1),GS([cM(fN.STATE_SUBSCRIBE,uM.INIT,{sync:!0,success(){this.log.info("unsubscribed"),this.updatePlayingState(!1),UO.emit(VO.REMOTE_TRACK_UNSUBSCRIBED,{track:this}),clearTimeout(this._decodeCheckTimeoutId)}})],fN.prototype,"unsubscribe",1);var mN=fN,EN=class extends mN{constructor(e,t){super(e,t,1),jS(this,"volume",0),jS(this,"mediaType",1),jS(this,"stat",{bytesReceived:0,packetsReceived:0,packetsLost:0,end2EndDelay:0,jitterBufferDelay:0}),this.manager=e.audioManager}get dbVolume(){return pP.isRunning?this.player.pipeline.volumeMeter.getVolumeDb():Math.floor(Math.max(10*Math.log10(this.volume)+100,0))}decodeFrame(e){if(!this.manager)return e;let t=e;for(let e of this.manager.decodePipeline)if(e&&(t=e({frame:t,track:this}),!t))return;return t}getAudioLevel(){let e=this.volume||super.getAudioLevel();return e>1?1:e}get isAvailable(){return this.user.muteState.audioAvailable}},IN=[-1,-1,1,-1,-1,1,1,1],_N=[0,0,1,0,0,1,1,1],CN=class extends uM{constructor(e,t){if(super(),this.context=e,jS(this,"name"),jS(this,"input"),jS(this,"output"),jS(this,"texture"),jS(this,"ctx2d",null),jS(this,"fbo"),jS(this,"width",0),jS(this,"height",0),jS(this,"x",0),jS(this,"y",0),jS(this,"program"),jS(this,"vertexShader"),jS(this,"fragmentShader"),jS(this,"totalFrames",0),jS(this,"dropFrames",0),jS(this,"matchInputSize",!0),jS(this,"texCoordBuffer"),jS(this,"positionBuffer"),jS(this,"lastInfo",{name:"",timestamp:0,totalFrames:0,x:0,y:0,width:0,height:0,fps:0}),jS(this,"cost",0),jS(this,"_canvas",null),jS(this,"_image"),jS(this,"log"),this.context.on("disconnect",this.close,this),this.name=t.name,this.log=t.logger,this.matchInputSize=!1!==t.matchInputSize,this.width=t.width||e.width,this.height=t.height||e.height,this._image=t.image,e instanceof Xx)e.ctx&&t.create2d&&("function"==typeof OffscreenCanvas&&16!==_O?this._canvas=new OffscreenCanvas(this.width,this.height):(this._canvas=document.createElement("canvas"),this._canvas.width=this.width,this._canvas.height=this.height),this.ctx2d=this._canvas.getContext("2d"),this._image=this._canvas);else try{let r=e.ctx;this.texCoordBuffer=this.createBuffer(_N),this.positionBuffer=this.createBuffer(IN),!1!==t.createTexture&&(this.texture=r.createTexture(),this.useTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.PACK_ALIGNMENT,1),r.pixelStorei(r.UNPACK_ALIGNMENT,1)),t.useFbo&&(this.fbo=r.createFramebuffer(),this.useBufferFrame(),this.useTexture(),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.texture,0)),t.useDefaultProgram?this.program=e.defaultProgam:(t.vertexShaderSource||t.fragmentShaderSource)&&(this.vertexShader=t.vertexShaderSource?e.createShader(r.VERTEX_SHADER,t.vertexShaderSource):e.defaultVShader,this.fragmentShader=t.fragmentShaderSource?e.createShader(r.FRAGMENT_SHADER,t.fragmentShaderSource):e.defaultFShader,this.program=e.createProgram(this.vertexShader,this.fragmentShader))}catch(e){this.context.destroy(new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:3,message:"create video node ".concat(this.name," error ").concat(e.message||e)}))}}get image(){return this._image}set image(e){this._image=e}createFramebuffer(e){let t=this.context.ctx,r=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),r}connect(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e.addInput(this,...r),this.output=e,e}addInput(e){this.input=e,this.matchInputSize&&e.width&&e.height&&this.resize(e.width,e.height)}requestFrame(e){let t=Date.now();return!!(this.context instanceof Jx&&this.render(e)||this.context instanceof Xx&&this.render2d(e))&&(this.totalFrames++,this.cost=Date.now()-t,!0)}render2d(e){var t;return!(null==(t=this.input)||!t.requestFrame(e))&&this.draw2d(this.input.image,0,0,this.width,this.height)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t;null==(t=this.output)||t.update(e)}disconnect(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];null==(e=this.output)||e.removeInput(this,...r),delete this.output}removeInput(e){delete this.input}close(){var e,t;if(this.context.off("disconnect",this.close,this),null==(e=this.output)||e.removeInput(this),delete this.output,null==(t=this.input)||t.disconnect(),this.context instanceof Jx){let e=this.context.ctx;e.deleteBuffer(this.texCoordBuffer),e.deleteBuffer(this.positionBuffer),this.fbo&&e.deleteFramebuffer(this.fbo),this.texture&&e.deleteTexture(this.texture),this.vertexShader&&this.vertexShader!==this.context.defaultVShader&&e.deleteShader(this.vertexShader),this.fragmentShader&&this.fragmentShader!==this.context.defaultFShader&&e.deleteShader(this.fragmentShader),this.program&&this.program!==this.context.defaultProgam&&e.deleteProgram(this.program)}this._canvas&&(this._canvas.width=0,this._canvas.height=0,this.ctx2d=null),this.removeAllListeners()}useTexture(){this.useTextures(this.texture)}useInputTexture(){var e;this.useTextures(null==(e=this.input)?void 0:e.texture)}useTextures(){let e=this.context.ctx;for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];r.forEach(((t,r)=>{t&&(e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,t))}))}useProgram(){this.context.ctx.useProgram(this.program)}useBufferFrame(){let e=this.context.ctx;e.bindFramebuffer(e.FRAMEBUFFER,this.fbo||null)}createBuffer(e){let t=this.context.ctx,r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),r}setTexBuffer(e){let t=this.context.ctx;t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}setPosBuffer(e){let t=this.context.ctx;t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}changeBufferData(e,t){let r=this.context.ctx;r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW)}setAttributes(){let e=this.context.ctx;for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];r.forEach(((t,r)=>{e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0)}))}getVertexPoint(e,t){return[e/this.width*2-1,t/this.height*2-1]}layout2texCoords(e){return[...this.getVertexPoint(e.x,e.y),...this.getVertexPoint(e.x+e.width,e.y),...this.getVertexPoint(e.x,e.y+e.height),...this.getVertexPoint(e.x+e.width,e.y+e.height)]}resize(e,t){if(this.width!==e||this.height!==t){if(this.width=e,this.height=t,this._canvas&&(this._canvas.width=e,this._canvas.height=t),this.texture&&this.fbo){this.useTexture();let r=this.context.ctx;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null)}this.output&&this.output.matchInputSize&&this.output.resize(e,t)}}draw(e,t){this.setAttributes(e||this.positionBuffer,t||this.texCoordBuffer);let r=this.context.ctx;r.drawArrays(r.TRIANGLE_STRIP,0,4)}draw2d(e,t,r,i,n){return!(!this.ctx2d||!e||(e instanceof ImageData?this.ctx2d.putImageData(e,t,r):(this.ctx2d.drawImage(e,t,r,i,n),"undefined"!=typeof VideoFrame&&e instanceof VideoFrame&&e.close()),0))}getInfo(){var e;let{totalFrames:t,x:r,y:i,width:n,height:o,name:a,cost:s}=this,c=Date.now(),A=(t-this.lastInfo.totalFrames)/((c-this.lastInfo.timestamp)/1e3)|0;return this.lastInfo={totalFrames:t,x:r,y:i,width:n,height:o,timestamp:c,fps:A,name:a,cost:s},LS({parent:null==(e=this.input)?void 0:e.getInfo()},this.lastInfo)}createTexture(e){let t=this.context.ctx,r=t.createTexture();return this.useTextures(r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.PACK_ALIGNMENT,1),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),r}};GS([cM(uM.INIT,"connected",{sync:!0})],CN.prototype,"connect",1),GS([cM("connected",uM.INIT,{ignoreError:!0,sync:!0})],CN.prototype,"disconnect",1),GS([cM([],"closed",{sync:!0})],CN.prototype,"close",1);var yN={};function TN(){}FS(yN,{Events:()=>xN,Inspect:()=>DN,LastSink:()=>BN,Sink:()=>ON,Subscribe:()=>QN,TimeoutError:()=>UN,audit:()=>jL,bindCallback:()=>EL,bindNodeCallback:()=>IL,buffer:()=>ZN,bufferCount:()=>qN,bufferTime:()=>Sx,call:()=>vN,catchError:()=>Rx,combineLatest:()=>JN,concat:()=>HN,concatMap:()=>gx,concatMapTo:()=>px,count:()=>wL,create:()=>MN,debounce:()=>WL,debounceTime:()=>JL,defer:()=>tL,delay:()=>bx,deliver:()=>PN,dispose:()=>SN,elementAt:()=>XL,empty:()=>yL,every:()=>$L,exhaustMap:()=>yx,exhaustMapTo:()=>Tx,filter:()=>DL,find:()=>KL,findIndex:()=>zL,first:()=>qL,fromAnimationFrame:()=>fL,fromArray:()=>oL,fromEvent:()=>lL,fromEventPattern:()=>AL,fromFetch:()=>dL,fromIterable:()=>hL,fromPromise:()=>uL,fromReadableStream:()=>pL,fromReader:()=>gL,groupBy:()=>vx,identity:()=>wN,ignoreElements:()=>BL,iif:()=>WN,inspect:()=>bN,interval:()=>aL,last:()=>ZL,map:()=>ix,mapTo:()=>nx,max:()=>SL,merge:()=>GN,mergeMap:()=>Ex,mergeMapTo:()=>Ix,min:()=>bL,never:()=>_L,nothing:()=>TN,of:()=>nL,pairwise:()=>tx,pipe:()=>kN,race:()=>jN,range:()=>mL,reduce:()=>vL,retry:()=>Mx,scan:()=>ex,share:()=>VN,shareReplay:()=>YN,skip:()=>PL,skipUntil:()=>NL,skipWhile:()=>LL,startWith:()=>KN,subject:()=>eL,subscribe:()=>Ox,sum:()=>RL,switchMap:()=>Ax,switchMapTo:()=>ux,take:()=>OL,takeLast:()=>ML,takeUntil:()=>QL,takeWhile:()=>kL,tap:()=>Qx,throttle:()=>VL,throwError:()=>CL,timeInterval:()=>wx,timeout:()=>kx,timer:()=>sL,toPromise:()=>Dx,toReadableStream:()=>Bx,withLatestFrom:()=>zN,zip:()=>XN});var vN=e=>e(),wN=e=>e;function SN(){this.dispose()}var bN=()=>"undefined"!=typeof __FASTRX_DEVTOOLS__,RN=1,DN=class extends Function{toString(){return"".concat(this.name,"(").concat(this.args.length?[...this.args].join(", "):"",")")}subscribe(e){let t=new LN(e,this,this.streamId++);return xN.subscribe({id:this.id,end:!1},{nodeId:t.sourceId,streamId:t.id}),this(t),t}},BN=class{constructor(){this.defers=new Set,this.disposed=!1}next(e){}complete(){this.dispose()}error(e){this.dispose()}get bindDispose(){return()=>this.dispose()}dispose(){this.disposed=!0,this.complete=TN,this.error=TN,this.next=TN,this.dispose=TN,this.subscribe=TN,this.doDefer()}subscribe(e){return e instanceof DN?e.subscribe(this):e(this),this}get bindSubscribe(){return e=>this.subscribe(e)}doDefer(){this.defers.forEach(vN),this.defers.clear()}defer(e){this.defers.add(e)}removeDefer(e){this.defers.delete(e)}reset(){this.disposed=!1,delete this.complete,delete this.next,delete this.dispose,delete this.next,delete this.subscribe}resetNext(){delete this.next}resetComplete(){delete this.complete}resetError(){delete this.error}},ON=class extends BN{constructor(e){super(),this.sink=e,e.defer(this.bindDispose)}next(e){this.sink.next(e)}complete(){this.sink.complete()}error(e){this.sink.error(e)}},QN=class extends BN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TN,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TN,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:TN;if(super(),this._next=t,this._error=r,this._complete=i,this.then=TN,e instanceof DN){let n={toString:()=>"subscribe",id:0,source:e};this.defer((()=>{xN.defer(n,0)})),xN.create(n),xN.pipe(n),this.sourceId=n.id,this.subscribe(e),xN.subscribe({id:n.id,end:!0}),t==TN?this._next=e=>xN.next(n,0,e):this.next=e=>{xN.next(n,0,e),t(e)},i==TN?this._complete=()=>xN.complete(n,0):this.complete=()=>{this.dispose(),xN.complete(n,0),i()},r==TN?this._error=e=>xN.complete(n,0,e):this.error=e=>{this.dispose(),xN.complete(n,0,e),r()}}else this.subscribe(e)}next(e){this._next(e)}complete(){this.dispose(),this._complete()}error(e){this.dispose(),this._error(e)}};function kN(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.reduce(((e,t)=>t(e)),e)}function MN(e,t,r){if(bN()){let i=Object.defineProperties(Object.setPrototypeOf(e,DN.prototype),{streamId:{value:0,writable:!0,configurable:!0},name:{value:t,writable:!0,configurable:!0},args:{value:r,writable:!0,configurable:!0},id:{value:0,writable:!0,configurable:!0}});xN.create(i);for(let e=0;e<r.length;e++){let t=r[e];"function"==typeof t&&t instanceof DN&&xN.addSource(i,t)}return i}return e}function PN(e,t){return function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return r=>{if(r instanceof DN){let n=MN((t=>{let o=new e(t,...i);o.sourceId=n.id,o.subscribe(r)}),t,arguments);return n.source=r,xN.pipe(n),n}return t=>r(new e(t,...i))}}}function NN(e,t){window.postMessage({source:"fastrx-devtools-backend",payload:{event:e,payload:t}})}var LN=class extends ON{constructor(e,t,r){super(e),this.source=t,this.id=r,this.sourceId=e.sourceId,this.defer((()=>{xN.defer(this.source,this.id)}))}next(e){xN.next(this.source,this.id,e),this.sink.next(e)}complete(){xN.complete(this.source,this.id),this.sink.complete()}error(e){xN.complete(this.source,this.id,e),this.sink.error(e)}},xN={addSource(e,t){NN("addSource",{id:e.id,name:e.toString(),source:{id:t.id,name:t.toString()}})},next(e,t,r){NN("next",{id:e.id,streamId:t,data:r&&r.toString()})},subscribe(e,t){let{id:r,end:i}=e;NN("subscribe",{id:r,end:i,sink:{nodeId:t&&t.nodeId,streamId:t&&t.streamId}})},complete(e,t,r){NN("complete",{id:e.id,streamId:t,err:r?r.toString():null})},defer(e,t){NN("defer",{id:e.id,streamId:t})},pipe(e){NN("pipe",{name:e.toString(),id:e.id,source:{id:e.source.id,name:e.source.toString()}})},update(e){NN("update",{id:e.id,name:e.toString()})},create(e){e.id||(e.id=RN++),NN("create",{name:e.toString(),id:e.id})}},UN=class extends Error{constructor(e){super("timeout after ".concat(e,"ms")),this.timeout=e}},FN=class extends BN{constructor(e){super(),this.source=e,this.sinks=new Set}add(e){e.defer((()=>this.remove(e))),1===this.sinks.add(e).size&&(this.reset(),this.subscribe(this.source))}remove(e){this.sinks.delete(e),0===this.sinks.size&&this.dispose()}next(e){this.sinks.forEach((t=>t.next(e)))}complete(){this.sinks.forEach((e=>e.complete())),this.sinks.clear()}error(e){this.sinks.forEach((t=>t.error(e))),this.sinks.clear()}};function VN(){return e=>{let t=new FN(e);if(e instanceof DN){let r=MN((e=>{t.add(e)}),"share",arguments);return t.sourceId=r.id,r.source=e,xN.pipe(r),r}return MN(t.add.bind(t),"share",arguments)}}function GN(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return MN((e=>{let r=new ON(e),i=t.length;r.complete=()=>{0==--i&&e.complete()},t.forEach(r.bindSubscribe)}),"merge",arguments)}function jN(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return MN((e=>{let r=new Map;t.forEach((t=>{let i=new ON(e);r.set(t,i),i.complete=()=>{r.delete(t),0===r.size?e.complete():i.dispose()},i.next=e=>{r.delete(t),r.forEach((e=>e.dispose())),i.resetNext(),i.resetComplete(),i.next(e)}})),t.forEach((e=>r.get(e).subscribe(e)))}),"race",arguments)}function HN(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return MN((e=>{let r=0,i=t.length,n=new ON(e);n.complete=()=>{r<i&&!n.disposed?(n.doDefer(),n.subscribe(t[r++])):e.complete()},n.complete()}),"concat",arguments)}function YN(e){return t=>{let r=new FN(t),i=[];return r.next=function(t){i.push(t),i.length>e&&i.shift(),this.sinks.forEach((e=>e.next(t)))},MN((e=>{e.defer((()=>r.remove(e))),i.forEach((t=>e.next(t))),r.add(e)}),"shareReplay",arguments)}}function WN(e,t,r){return MN((i=>e()?t(i):r(i)),"iif",arguments)}function JN(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return MN((e=>{let r=t.length,i=r,n=r,o=new Array(r),a=()=>{0==--n&&e.complete()};t.forEach(((t,r)=>{let n=new ON(e);n.next=t=>{0==--i?(n.next=t=>{o[r]=t,e.next(o)},n.next(t)):o[r]=t},n.complete=a,n.subscribe(t)}))}),"combineLatest",arguments)}function XN(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return MN((e=>{let r=t.length,i=r,n=new Array(r),o=()=>{0==--i&&e.complete()};t.forEach(((t,r)=>{let i=new ON(e),a=[];n[r]=a,i.next=t=>{a.push(t),n.every((e=>e.length))&&e.next(n.map((e=>e.shift())))},i.complete=o,i.subscribe(t)}))}),"zip",arguments)}function KN(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>MN((function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;for(;i<n&&!r.disposed;)r.next(t[i++]);r.disposed||r.subscribe(e)}),"startWith",arguments)}var zN=PN(class extends ON{constructor(e){super(e);let t=new ON(this.sink);for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];t.next=e=>this.buffer=e,t.complete=TN,t.subscribe(JN(...i))}next(e){this.buffer&&this.sink.next([e,...this.buffer])}},"withLatestFrom"),qN=PN(class extends ON{constructor(e,t,r){super(e),this.bufferSize=t,this.startBufferEvery=r,this.buffer=[],this.count=0,this.startBufferEvery&&(this.buffers=[[]])}next(e){this.startBufferEvery?(this.count++===this.startBufferEvery&&(this.buffers.push([]),this.count=1),this.buffers.forEach((t=>{t.push(e)})),this.buffers[0].length===this.bufferSize&&this.sink.next(this.buffers.shift())):(this.buffer.push(e),this.buffer.length===this.bufferSize&&(this.sink.next(this.buffer),this.buffer=[]))}complete(){this.buffer.length?this.sink.next(this.buffer):this.buffers.length&&this.buffers.forEach((e=>this.sink.next(e))),super.complete()}},"bufferCount"),ZN=PN(class extends ON{constructor(e,t){super(e),this.buffer=[];let r=new ON(e);r.next=t=>{e.next(this.buffer),this.buffer=[]},r.complete=TN,r.subscribe(t)}next(e){this.buffer.push(e)}complete(){this.buffer.length&&this.sink.next(this.buffer),super.complete()}},"buffer"),$N=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?n(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function eL(e){let t=arguments,r=VN()(MN((t=>{r.next=e=>t.next(e),r.complete=()=>t.complete(),r.error=e=>t.error(e),e&&t.subscribe(e)}),"subject",t));return r.next=TN,r.complete=TN,r.error=TN,r}function tL(e){return MN((t=>t.subscribe(e())),"defer",arguments)}var rL=e=>t=>{setTimeout((()=>e(t)))},iL=e=>rL((t=>{for(let r=0;!t.disposed&&r<e.length;r++)t.next(e[r]);t.complete()}));function nL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return MN(iL(t),"of",arguments)}function oL(e){return MN(iL(e),"fromArray",arguments)}function aL(e){return MN((t=>{let r=0,i=setInterval((()=>t.next(r++)),e);return t.defer((()=>{clearInterval(i)})),"interval"}),"interval",arguments)}function sL(e,t){return MN((r=>{let i=0,n=setTimeout((()=>{if(r.removeDefer(o),r.next(i++),t){let e=setInterval((()=>r.next(i++)),t);r.defer((()=>{clearInterval(e)}))}else r.complete()}),e),o=()=>{clearTimeout(n)};r.defer(o)}),"timer",arguments)}function cL(e,t){return r=>{let i=e=>r.next(e);r.defer((()=>t(i))),e(i)}}function AL(e,t){return MN(cL(e,t),"fromEventPattern",arguments)}function lL(e,t){if("on"in e&&"off"in e)return MN(cL((r=>e.on(t,r)),(r=>e.off(t,r))),"fromEvent",arguments);if("addListener"in e&&"removeListener"in e)return MN(cL((r=>e.addListener(t,r)),(r=>e.removeListener(t,r))),"fromEvent",arguments);if("addEventListener"in e)return MN(cL((r=>e.addEventListener(t,r)),(r=>e.removeEventListener(t,r))),"fromEvent",arguments);throw"target is not a EventDispachter"}function uL(e){return MN((t=>{e.then(t.next.bind(t),t.error.bind(t))}),"fromPromise",arguments)}function dL(e,t){return MN(tL((()=>uL(fetch(e,t)))),"fromFetch",arguments)}function hL(e){return MN(rL((t=>{try{for(let r of e){if(t.disposed)return;t.next(r)}t.complete()}catch(e){t.error(e)}})),"fromIterable",arguments)}function gL(e){let t=r=>$N(this,void 0,void 0,(function*(){if(r.disposed)return;let{done:i,value:n}=yield e.read();i?r.complete():(r.next(n),t(r))}));return MN((e=>{t(e)}),"fromReader",arguments)}function pL(e){return MN((t=>{let r=new AbortController,i=r.signal;t.defer((()=>r.abort("cancelled"))),e.pipeTo(new WritableStream({write(e){t.next(e)},close(){t.complete()},abort(e){t.error(e)}}),{signal:i}).then((()=>t.complete()),(e=>t.error(e)))}),"fromReadableStream",arguments)}function fL(){return MN((e=>{let t=requestAnimationFrame((function r(i){e.disposed||(e.next(i),t=requestAnimationFrame(r))}));e.defer((()=>cancelAnimationFrame(t)))}),"fromAnimationFrame",arguments)}function mL(e,t){return MN((function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t+e;for(;i<n&&!r.disposed;)r.next(i++);return r.complete(),"range"}),"range",arguments)}function EL(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return MN((r=>{let n=i.concat((e=>(r.next(e),r.complete())));e.apply(t,n)}),"bindCallback",arguments)}function IL(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return MN((r=>{let n=i.concat(((e,t)=>e?r.error(e):(r.next(t),r.complete())));e.apply(t,n)}),"bindNodeCallback",arguments)}function _L(){return MN((()=>{}),"never",arguments)}function CL(e){return MN((t=>t.error(e)),"throwError",arguments)}function yL(){return MN((e=>e.complete()),"empty",arguments)}var TL=class extends ON{constructor(e,t,r){super(e),this.f=t;let i=()=>{this.sink.next(this.acc),this.sink.complete()};void 0===r?this.next=e=>{this.acc=e,this.complete=i,this.resetNext()}:(this.acc=r,this.complete=i)}next(e){this.acc=this.f(this.acc,e)}},vL=PN(TL,"reduce"),wL=e=>PN(TL,"count")(((t,r)=>e(r)?t+1:t),0),SL=()=>PN(TL,"max")(Math.max),bL=()=>PN(TL,"min")(Math.min),RL=()=>PN(TL,"sum")(((e,t)=>e+t),0),DL=PN(class extends ON{constructor(e,t,r){super(e),this.filter=t,this.thisArg=r}next(e){this.filter.call(this.thisArg,e)&&this.sink.next(e)}},"filter"),BL=PN(class extends ON{next(e){}},"ignoreElements"),OL=PN(class extends ON{constructor(e,t){super(e),this.count=t}next(e){this.sink.next(e),0==--this.count&&this.complete()}},"take"),QL=PN(class extends ON{constructor(e,t){super(e);let r=new ON(e);r.next=()=>e.complete(),r.complete=SN,r.subscribe(t)}},"takeUntil"),kL=PN(class extends ON{constructor(e,t){super(e),this.f=t}next(e){this.f(e)?this.sink.next(e):this.complete()}},"takeWhile"),ML=e=>vL(((t,r)=>(t.push(r),t.length>e&&t.shift(),t)),[]),PL=PN(class extends ON{constructor(e,t){super(e),this.count=t}next(e){0==--this.count&&(this.next=super.next)}},"skip"),NL=PN(class extends ON{constructor(e,t){super(e),e.next=TN;let r=new ON(e);r.next=()=>{r.dispose(),e.resetNext()},r.complete=SN,r.subscribe(t)}},"skipUntil"),LL=PN(class extends ON{constructor(e,t){super(e),this.f=t}next(e){this.f(e)||(this.next=super.next,this.next(e))}},"skipWhile"),xL={leading:!0,trailing:!1},UL=class extends ON{constructor(e,t,r){super(e),this.durationSelector=t,this.trailing=r}cacheValue(e){this.last=e,this.disposed&&this.throttle(e)}send(e){this.sink.next(e),this.throttle(e)}throttle(e){this.reset(),this.subscribe(this.durationSelector(e))}next(){this.complete()}complete(){this.dispose(),this.trailing&&this.send(this.last)}},FL=class extends ON{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xL;super(e),this.durationSelector=t,this.config=r,this._throttle=new UL(this.sink,this.durationSelector,this.config.trailing),this._throttle.dispose()}next(e){this._throttle.disposed&&this.config.leading?this._throttle.send(e):this._throttle.cacheValue(e)}complete(){this._throttle.throttle=TN,this._throttle.complete(),super.complete()}},VL=PN(FL,"throttle"),GL={leading:!1,trailing:!0},jL=e=>PN(FL,"audit")(e,GL),HL=class extends ON{next(){this.complete()}complete(){this.dispose(),this.sink.next(this.last)}},YL=class extends ON{constructor(e,t){super(e),this.durationSelector=t,this._debounce=new HL(this.sink),this._debounce.dispose()}next(e){this._debounce.dispose(),this._debounce.reset(),this._debounce.last=e,this._debounce.subscribe(this.durationSelector(e))}complete(){this._debounce.complete(),super.complete()}},WL=PN(YL,"debounce"),JL=e=>PN(YL,"debounceTime")((t=>sL(e))),XL=PN(class extends ON{constructor(e,t,r){super(e),this.count=t,this.defaultValue=r}next(e){0==this.count--&&(this.defaultValue=e,this.complete())}complete(){void 0!==this.defaultValue?(this.sink.next(this.defaultValue),super.complete()):this.error(new Error("not enough elements in sequence"))}},"elementAt"),KL=e=>t=>OL(1)(LL((t=>!e(t)))(t)),zL=PN(class extends ON{constructor(e,t){super(e),this.f=t,this.i=0}next(e){this.f(e)?(this.sink.next(this.i++),this.complete()):++this.i}},"findIndex"),qL=PN(class extends ON{constructor(e,t,r){super(e),this.f=t,this.defaultValue=r,this.index=0}next(e){(!this.f||this.f(e,this.index++))&&(this.defaultValue=e,this.complete())}complete(){void 0!==this.defaultValue?(this.sink.next(this.defaultValue),super.complete()):this.error(new Error("no elements in sequence"))}},"first"),ZL=PN(class extends ON{constructor(e,t,r){super(e),this.f=t,this.defaultValue=r,this.index=0}next(e){(!this.f||this.f(e,this.index++))&&(this.defaultValue=e)}complete(){void 0!==this.defaultValue?(this.sink.next(this.defaultValue),super.complete()):this.error(new Error("no elements in sequence"))}},"last"),$L=PN(class extends ON{constructor(e,t){super(e),this.predicate=t,this.index=0}next(e){this.predicate(e,this.index++)?this.result=!0:(this.result=!1,this.complete())}complete(){void 0!==this.result?(this.sink.next(this.result),super.complete()):this.error(new Error("no elements in sequence"))}},"every"),ex=PN(class extends ON{constructor(e,t,r){super(e),this.f=t,void 0===r?this.next=e=>{this.acc=e,this.resetNext(),this.sink.next(this.acc)}:this.acc=r}next(e){this.sink.next(this.acc=this.f(this.acc,e))}},"scan"),tx=PN(class extends ON{constructor(){super(...arguments),this.hasLast=!1}next(e){this.hasLast?this.sink.next([this.last,e]):this.hasLast=!0,this.last=e}},"pairwise"),rx=class extends ON{constructor(e,t,r){super(e),this.mapper=t,this.thisArg=r}next(e){super.next(this.mapper.call(this.thisArg,e))}},ix=PN(rx,"map"),nx=e=>PN(rx,"mapTo")((t=>e)),ox=class extends ON{constructor(e,t,r){super(e),this.data=t,this.context=r}next(e){let t=this.context.combineResults;t?this.sink.next(t(this.data,e)):this.sink.next(e)}tryComplete(){this.context.resetComplete(),this.dispose()}},ax=class extends ON{constructor(e,t,r){super(e),this.makeSource=t,this.combineResults=r,this.index=0}subInner(e,t){let r=this.currentSink=new t(this.sink,e,this);this.complete=this.tryComplete,r.complete=r.tryComplete,r.subscribe(this.makeSource(e,this.index++))}tryComplete(){this.currentSink.resetComplete(),this.dispose()}},sx=class extends ox{},cx=class extends ax{next(e){this.subInner(e,sx),this.next=e=>{this.currentSink.dispose(),this.subInner(e,sx)}}},Ax=PN(cx,"switchMap");function lx(e){return(t,r)=>e((()=>t),r)}var ux=lx(PN(cx,"switchMapTo")),dx=class extends ox{tryComplete(){this.dispose(),this.context.sources.length?this.context.subNext():(this.context.resetNext(),this.context.resetComplete())}},hx=class extends ax{constructor(){super(...arguments),this.sources=[],this.next2=this.sources.push.bind(this.sources)}next(e){this.next2(e),this.subNext()}subNext(){this.next=this.next2,this.subInner(this.sources.shift(),dx),this.disposed&&0===this.sources.length&&this.currentSink.resetComplete()}tryComplete(){0===this.sources.length&&this.currentSink.resetComplete(),this.dispose()}},gx=PN(hx,"concatMap"),px=lx(PN(hx,"concatMapTo")),fx=class extends ox{tryComplete(){this.context.inners.delete(this),super.dispose(),0===this.context.inners.size&&this.context.resetComplete()}},mx=class extends ax{constructor(){super(...arguments),this.inners=new Set}next(e){this.subInner(e,fx),this.inners.add(this.currentSink)}tryComplete(){1===this.inners.size?this.inners.forEach((e=>e.resetComplete())):this.dispose()}},Ex=PN(mx,"mergeMap"),Ix=lx(PN(mx,"mergeMapTo")),_x=class extends ox{dispose(){this.context.resetNext(),super.dispose()}},Cx=class extends ax{next(e){this.next=TN,this.subInner(e,_x)}},yx=PN(Cx,"exhaustMap"),Tx=lx(PN(Cx,"exhaustMapTo")),vx=PN(class extends ON{constructor(e,t){super(e),this.f=t,this.groups=new Map}next(e){let t=this.f(e),r=this.groups.get(t);void 0===r&&(r=eL(),r.key=t,this.groups.set(t,r),super.next(r)),r.next(e)}complete(){this.groups.forEach((e=>e.complete())),super.complete()}error(e){this.groups.forEach((t=>t.error(e))),super.error(e)}},"groupBy"),wx=PN(class extends ON{constructor(){super(...arguments),this.start=new Date}next(e){this.sink.next({value:e,interval:Number(new Date)-Number(this.start)}),this.start=new Date}},"timeInterval"),Sx=PN(class extends ON{constructor(e,t){super(e),this.miniseconds=t,this.buffer=[],this.id=setInterval((()=>{this.sink.next(this.buffer.concat()),this.buffer.length=0}),this.miniseconds)}next(e){this.buffer.push(e)}complete(){this.sink.next(this.buffer),super.complete()}dispose(){clearInterval(this.id),super.dispose()}},"bufferTime"),bx=PN(class extends ON{constructor(e,t){super(e),this.buffer=[],this.delayTime=t}dispose(){clearTimeout(this.timeoutId),super.dispose()}delay(e){this.timeoutId=setTimeout((()=>{let e=this.buffer.shift();if(e){let{time:t,data:r}=e;super.next(r),this.buffer.length&&this.delay(Number(this.buffer[0].time)-Number(t))}}),e)}next(e){this.buffer.length||this.delay(this.delayTime),this.buffer.push({time:new Date,data:e})}complete(){this.timeoutId=setTimeout((()=>super.complete()),this.delayTime)}},"delay"),Rx=PN(class extends ON{constructor(e,t){super(e),this.selector=t}error(e){this.dispose(),this.selector(e)(this.sink)}},"catchError"),Dx=()=>e=>new Promise(((t,r)=>{let i;new QN(e,(e=>i=e),r,(()=>t(i)))})),Bx=()=>e=>{let t;return new ReadableStream({start(r){t=new QN(e,r.enqueue.bind(r),r.error.bind(r),r.close.bind(r))},cancel(){t.dispose()}})},Ox=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TN,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TN;return i=>new QN(i,e,t,r)},Qx=PN(class extends ON{constructor(e,t){super(e),t instanceof Function?this.next=r=>{t(r),e.next(r)}:(t.next&&(this.next=r=>{t.next(r),e.next(r)}),t.complete&&(this.complete=()=>{t.complete(),e.complete()}),t.error&&(this.error=r=>{t.error(r),e.error(r)}))}},"tap"),kx=PN(class extends ON{constructor(e,t){super(e),this.timeout=t,this.id=setTimeout((()=>this.error(new UN(this.timeout))),this.timeout)}next(e){super.next(e),clearTimeout(this.id),this.next=super.next}dispose(){clearTimeout(this.id),super.dispose()}},"timeout"),Mx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;return t=>{if(t instanceof DN){let r=MN((i=>{let n=e,o=new ON(i);o.error=e=>{n-- >0?o.subscribe(t):i.error(e)},o.sourceId=r.id,o.subscribe(t)}),"retry",[e]);return r.source=t,xN.pipe(r),r}return r=>{let i=e,n=new ON(r);n.error=e=>{i-- >0?t(n):r.error(e)},t(n)}}},Px=kN(aL(250),ix((()=>performance.now())),VN()),Nx=[0,1,1,1,0,0,1,0],Lx=class extends CN{constructor(e,t){super(e,Object.assign({useDefaultProgram:!0,createTexture:!1,name:"destination"},t)),jS(this,"_intervalId",0),jS(this,"_sequence",0),jS(this,"checkGLError",!1),jS(this,"checkVisibilityChange"),e instanceof Xx?this.ctx2d=e.ctx||null:e.available&&null!=t&&t.mirrorUpAndDown&&this.setTexBuffer(Nx)}start(e){this.log.info("".concat(this.name," start render ").concat(e," fps")),mM.clearTask(this._intervalId),this._intervalId=mM.run("intervalInWorker",(()=>{if(e!==this.context.frameRate&&(mM.clearTask(this._intervalId),this.start(this.context.frameRate)),this.requestFrame(this._sequence++),this.checkGLError&&this.context instanceof Jx){let e=this.context.ctx.getError();e&&this.context.destroy(new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:5,message:"".concat(this.name," req ").concat(this._sequence," render ").concat(this.totalFrames," faild ").concat(e)}))}}),{fps:this.context.frameRate})}render(e){var t;return!(null==(t=this.input)||!t.requestFrame(e)||(this.useProgram(),this.useBufferFrame(),this.useInputTexture(),this.draw(),0))}addInput(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];super.addInput(e,...r),this.start(this.context.frameRate)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._intervalId&&(mM.clearTask(this._intervalId),this._intervalId=0,1===e)){this.log.info("".concat(this.name," use requestVideoFrameCallback"));let e=()=>{document.hidden&&(this.start(this.context.frameRate),this.log.info("".concat(this.name," use timer")),document.removeEventListener("visibilitychange",e))};document.addEventListener("visibilitychange",e)}this.requestFrame(this._sequence++)}removeInput(e){super.removeInput(e),mM.clearTask(this._intervalId)}resize(e,t){super.resize(e,t),this.context.setSize(e,t)}close(){super.close(),mM.clearTask(this._intervalId),document.removeEventListener("visibilitychange",this.checkVisibilityChange)}},xx=class extends Lx{constructor(e,t){super(e,t),jS(this,"_videoTrack"),jS(this,"_muteOb"),jS(this,"_closedOb",lL(this,"closed")),jS(this,"_subscription"),jS(this,"_canvasContainer"),Number(mO)<17&&(this._canvasContainer=document.createElement("div"),this._canvasContainer.style.display="none"),[this._videoTrack]=e._canvas.captureStream().getVideoTracks(),this._muteOb=lL(this._videoTrack,"mute"),kN(lL(this._videoTrack,"ended"),QL(this._closedOb),Ox((()=>{this.context.destroy(new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:8,message:"video track ended"}))})))}enableCheckMute(){this._subscription=kN(this._muteOb,QL(this._closedOb),ux((e=>{let t=performance.now();kN(Px,LL((e=>e-t<5e3)),OL(1))(e)})),Ox((()=>{var e;null!=(e=this._videoTrack)&&e.muted&&this.context.destroy(new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:7,message:"video track muted"}))})))}disableCheckMute(){var e;null==(e=this._subscription)||e.dispose()}get videoTrack(){return this._videoTrack}putCanvasIntoDom(){!this.context._canvas||!this._canvasContainer||document.getElementById(this.context._canvas.id)||(this.log.info("".concat(this.name," put canvas to body")),document.body.appendChild(this._canvasContainer),this._canvasContainer.appendChild(this.context._canvas))}render(e){return this.putCanvasIntoDom(),super.render(e)}render2d(e){return this.putCanvasIntoDom(),super.render2d(e)}close(){var e,t;super.close(),null==(e=this._videoTrack)||e.stop(),delete this._videoTrack,null==(t=this._canvasContainer)||t.remove()}},Ux=class extends xx{render(e){var t;return!(null==(t=this.input)||!t.requestFrame(e))}},Fx=class extends xx{constructor(e,t,r){super(e,{name:"smallDestination",logger:r}),this.resolution=t}resize(e,t){let r,i=e*t,n=this.resolution.width*this.resolution.height;this.log.info("big res: ".concat(e,"*").concat(t," small res: ").concat(this.resolution.width,"*").concat(this.resolution.height," ")),i>n?r=i/n:(this.log.warn("Small stream resolution is not smaller than big stream, which is invalid. big: ".concat(e," * ").concat(t," small: ").concat(this.resolution.width," * ").concat(this.resolution.height)),r=i/19200),super.resize(e/Math.sqrt(r),t/Math.sqrt(r))}},Vx=class extends CN{constructor(e,t){super(e,LS({name:"imageSource"},t)),jS(this,"_lastImage"),jS(this,"_totalFrames",0),jS(this,"_autoResize",!1),jS(this,"_canvasRendered"),jS(this,"_videoCallbackId",0),this._autoResize=!1!==(null==t?void 0:t.autoResize),16===_O&&(this._canvasRendered=eL(),kN(this._canvasRendered,KN(this._image),Ax((e=>e instanceof HTMLCanvasElement?lL(e,"rendered"):yL())),QL(lL(this,"closed")),Ox((()=>{this.update()}))))}tryVideoFrameCallback(e){this._videoCallbackId&&e.cancelVideoFrameCallback(this._videoCallbackId),eM()&&!document.hidden&&(this._videoCallbackId=e.requestVideoFrameCallback(((e,t)=>{document.hidden||(this._totalFrames=t.presentedFrames,this.update(1))})))}_render(e,t){var r;let{width:i,height:n}=this,{image:o}=this;if(o instanceof HTMLVideoElement){if(this.tryVideoFrameCallback(o),({videoWidth:i,videoHeight:n}=o),!i||!n)return!1;o.width=i,o.height=n}else if(o instanceof HTMLImageElement||o instanceof ImageData||o instanceof ImageBitmap){if(({width:i,height:n}=o),o!==this._lastImage)this._lastImage=o;else if(i===this.width&&n===this.height)return!1}else o instanceof HTMLCanvasElement||o instanceof OffscreenCanvas?(({width:i,height:n}=o),this._lastImage=o):"undefined"!=typeof VideoFrame&&o instanceof VideoFrame&&(({displayWidth:i,displayHeight:n}=o),null==(r=this._lastImage)||r.close(),this._lastImage=o);if(!this._autoResize)return!0;if(this.width===i&&this.height===n&&this.totalFrames){if(t){this.useTexture();let e=this.context.ctx;e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,o)}}else{if(t){this.useTexture();let e=this.context.ctx;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o)}this.resize(i,n)}return!0}get image(){return this._image}set image(e){var t;null==(t=this._canvasRendered)||t.next(e),this._image=e}render(e){return this._render(e,!0)}render2d(e){return this._render(e,!1)}},Gx=class extends Vx{constructor(e,t,r){super(e,r),this._player=t,this.name="videoPlayerSource",kN(lL(this._player,EM.PLAYER_STATE_CHANGED),QL(lL(this,"closed")),DL((e=>{let{state:t}=e;return"PLAYING"===t})),Ox((()=>{this.tryVideoFrameCallback(this._player.element)})))}get image(){return this._player.element}},jx=class extends Gx{constructor(e,t,r){super(e,new zM({id:r.name,track:t,muted:!0,container:null,objectFit:"contain",log:r.logger}),r),this.name="videoTrackSource",this._player.play()}replaceTrack(e){this._player.setTrack(e),this._player.play()}close(){super.close(),this._player.stop()}},Hx=class extends uM{constructor(e){super(),jS(this,"frameRate"),jS(this,"_canvas"),jS(this,"log"),jS(this,"hasAlpha",!1),jS(this,"name"),jS(this,"error"),this.name=e.name,this.log=e.logger.createChild({id:"vc-".concat(this.name)}),this.frameRate=e.frameRate}set width(e){this._canvas&&(this._canvas.width=e)}get width(){var e;return(null==(e=this._canvas)?void 0:e.width)||0}set height(e){this._canvas&&(this._canvas.height=e)}get height(){var e;return(null==(e=this._canvas)?void 0:e.height)||0}setSize(e,t){this._canvas&&(this._canvas.width=e,this._canvas.height=t)}createVideoTrackSource(e,t){return new jx(this,e,{logger:this.log,name:t})}createVideoTrackDestination(e){return new xx(this,e)}createVideoImageSource(e,t){return new Vx(this,t?Object.assign(t,{logger:this.log,image:e}):{logger:this.log,image:e})}createVideoPlayerSource(e,t){return new Gx(this,e,t?Object.assign(t,{logger:this.log}):{logger:this.log})}get available(){return"created"===this.state}disconnect(){this.emit("disconnect")}};jS(Hx,"_ids",0);var Yx={alpha:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0,powerPreference:"low-power"},Wx=class extends Hx{constructor(){super(...arguments),jS(this,"defaultProgam"),jS(this,"defaultVShader"),jS(this,"defaultFShader"),jS(this,"ctx")}create(){if(this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.id="trtc_".concat(this.name,"_").concat(Hx._ids++)),this.ctx=this._canvas.getContext("webgl2",Yx),!this.ctx)throw new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:2,message:"webgl2 not supported"});this.defaultVShader=this.createShader(this.ctx.VERTEX_SHADER,"\n// 顶点着色器\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  gl_Position = a_position;\n  v_texCoord = a_texCoord;\n}\n"),this.defaultFShader=this.createShader(this.ctx.FRAGMENT_SHADER,"\n// 片元着色器\nprecision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_texture;\n\nvoid main() {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n} "),this.defaultProgam=this.createProgram(this.defaultVShader,this.defaultFShader),this._canvas.addEventListener("webglcontextlost",(()=>{this.destroy(new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:4,message:"webgl context lost"}))})),this.log.info("video context created use webgl")}destroy(e){let t="";return e&&(t=e.message,this.error=e,sk.addFailedEvent({key:512702,error:e})),this.disconnect(),this.log.info("video context destroy".concat(t)?": ".concat(t):0),this.ctx&&(this.ctx.deleteShader(this.defaultVShader),this.ctx.deleteShader(this.defaultFShader),this.ctx.deleteProgram(this.defaultProgam),delete this.ctx),e}set width(e){var t;null==(t=this.ctx)||t.viewport(0,0,e,this.height),super.width=e}set height(e){var t;null==(t=this.ctx)||t.viewport(0,0,this.width,e),super.height=e}setSize(e,t){var r;null==(r=this.ctx)||r.viewport(0,0,e,t),super.setSize(e,t)}createShader(e,t){let r=this.ctx,i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}createProgram(e,t){let r=this.ctx,i=r.createProgram();return r.attachShader(i,e),r.attachShader(i,t),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||this.log.error(r.getProgramInfoLog(i)),i}};jS(Wx,"UNAVAILABLE","unavailable"),GS([cM(uM.INIT,"created",{sync:!0,fail(e){sk.addFailedEvent({key:512700,error:e.cause||e})},success(){sk.addSuccessEvent({key:512700})}})],Wx.prototype,"create",1),GS([cM("created",uM.INIT,{ignoreError:!0,sync:!0,success(e){e&&this.emit(Wx.UNAVAILABLE,e),this.removeAllListeners()}})],Wx.prototype,"destroy",1);var Jx=Wx,Xx=class extends Hx{constructor(){super(...arguments),jS(this,"ctx")}create(e){if(this.hasAlpha=e.alpha,this._canvas=document.createElement("canvas"),this._canvas.id="trtc_".concat(this.name,"_").concat(Hx._ids++),this.ctx=this._canvas.getContext("2d",{alpha:e.alpha}),!this.ctx)throw new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:2,message:"2d context not supported"});this.log.info("video context created use 2d")}destroy(e){let t="";e&&(t=e.message,this.error=e,sk.addFailedEvent({key:512703,error:e})),this.disconnect(),this.log.info("video context destroy ".concat(t?": ".concat(t):"")),delete this.ctx,this._canvas&&(this._canvas.remove(),this._canvas.width=0,this._canvas.height=0,delete this._canvas),this.removeAllListeners(),sk.addSuccessEvent({key:512703})}};GS([cM(uM.INIT,"created",{sync:!0,fail(e){sk.addFailedEvent({key:512701,error:e.cause||e})},success(){sk.addSuccessEvent({key:512701})}})],Xx.prototype,"create",1),GS([cM("created",uM.INIT,{ignoreError:!0,sync:!0})],Xx.prototype,"destroy",1);var Kx=class extends mN{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:4),jS(this,"mediaType",4),jS(this,"source"),jS(this,"stat",{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0,end2EndDelay:0,jitterBufferDelay:0}),this.manager=e.videoManager,this.once("first-video-frame",(e=>{this.room.emit("first-video-frame",e)}))}play(e,t){return(dD(null==t?void 0:t.canvasRender)?t.canvasRender:17===_O)&&!this.source&&this.useCanvasPlayer(),super.play(e,t).then((()=>{this.player.calculateStat()}))}useCanvasPlayer(){if(this.log.info("useCanvasPlayer(), has element:".concat(!!this.player.element)),!this.player.element)return;let e=new Xx({frameRate:15,logger:this.log,name:this.userId});e.create({alpha:!1});let t=new Lx(e,{name:"remotePlayer",logger:this.log});this.source=e.createVideoPlayerSource(this.player),this.source.connect(t),this.player.setCanvas(e._canvas),eM()||(this.updateCanvasPlayerFPS=this.updateCanvasPlayerFPS.bind(this,e),this.room.on("heartbeat-report",this.updateCanvasPlayerFPS,this))}updateCanvasPlayerFPS(e){let t=this.decodeFPS,r=(i=t,[15,30,45,60].reduce(((e,t)=>Math.abs(t-i)<Math.abs(e-i)?t:e)));var i;!uD(t)||t<=0?this.log.debug("updateCanvasPlayerFPS() ignore decoder: ".concat(t," ")):r!==e.frameRate?(this.log.info("updateCanvasPlayerFPS() decoder: ".concat(t,", closest: ").concat(r,", current: ").concat(e.frameRate)),e.frameRate=r):this.log.debug("updateCanvasPlayerFPS() ignore ClosestFPS ".concat(r," == ").concat(e.frameRate))}get decodeFPS(){var e;let{msg_video_status:t}=(null==(e=this.room.heartbeatReport)?void 0:e.msg_down_stream_info.find((e=>e.msg_user_info.str_identifier===this.userId)))||{},r=2===this.mediaType?7:this.isSmall?3:2;if(!t||0===t.length)return 0;let i=t.find((e=>e.uint32_video_stream_type===r));return(null==i?void 0:i.uint32_video_dec_fps)||0}stop(){return this.room.off("heartbeat-report",this.updateCanvasPlayerFPS,this),super.stop()}decodeFrame(e){if(!this.manager)return e;for(let t of this.manager.decodePipeline)if(t&&!(e=t({frame:e,track:this})))return;return e}get isBig(){return 4===this.mediaType}get isSmall(){return 8===this.mediaType}changeType(e){this.room.changeType(e,this.user)}get isAvailable(){return this.user.muteState.videoAvailable}setMirror(e){"publish"===e||"both"===e||super.setMirror(e)}onDecodeDowngradeStateChanged(e){this.emit("decode-downgrade-state-changed",e)}},zx=class extends Kx{constructor(e,t){super(e,t,2),jS(this,"mediaType",2),jS(this,"objectFit","contain")}get isAvailable(){return this.user.muteState.hasAuxiliary}},qx=new Map;function Zx(e,t){let r=xS(LS({},t),{timestamp:sb()});qx.has(e)?qx.get(e).push(r):qx.set(e,[r])}UO.on(VO.JOIN_SUCCESS,(e=>{let{room:t}=e;Zx(t.userId,{eventId:32788})})),UO.on(VO.LEAVE_START,(e=>{let{room:t}=e;Zx(t.userId,{eventId:32789})})),UO.on(VO.LOCAL_TRACK_PUBLISHED,(e=>{let{track:t}=e;if(t.room){let e=32769;4===t.mediaType?e=32768:2===t.mediaType&&(e=32805),Zx(t.room.userId,{eventId:e})}})),UO.on(VO.LOCAL_TRACK_UNPUBLISHED,(e=>{let{track:t}=e;if(t.room){let e=32771;4===t.mediaType?e=32770:2===t.mediaType&&(e=32806),Zx(t.room.userId,{eventId:e})}})),UO.on(VO.TRACK_MUTED,(e=>{let{track:t}=e;t.room&&(t.kind===Vb.AUDIO?Zx(t.room.userId,{eventId:t.isRemote?32785:32772,remoteUserId:t.isRemote?t.userId:void 0}):Zx(t.room.userId,{eventId:t.isRemote?32784:32773,remoteUserId:t.isRemote?t.userId:void 0}))})),UO.on(VO.TRACK_UNMUTED,(e=>{let{track:t}=e;t.room&&(t.kind===Vb.AUDIO?Zx(t.room.userId,{eventId:t.isRemote?32787:32774,remoteUserId:t.isRemote?t.userId:void 0}):Zx(t.room.userId,{eventId:t.isRemote?32786:32775,remoteUserId:t.isRemote?t.userId:void 0}))})),UO.on(VO.REMOTE_TRACK_SUBSCRIBED,(e=>{let{track:t}=e;t.room&&(1===t.mediaType&&Zx(t.room.userId,{eventId:32777,remoteUserId:t.userId}),4===t.mediaType&&Zx(t.room.userId,{eventId:32776,remoteUserId:t.userId}),8===t.mediaType&&Zx(t.room.userId,{eventId:32803,remoteUserId:t.userId}))})),UO.on(VO.REMOTE_TRACK_UNSUBSCRIBED,(e=>{let{track:t}=e;t.room&&(1===t.mediaType&&Zx(t.room.userId,{eventId:32779,remoteUserId:t.userId}),4===t.mediaType&&Zx(t.room.userId,{eventId:32778,remoteUserId:t.userId}),8===t.mediaType&&Zx(t.room.userId,{eventId:32804,remoteUserId:t.userId}))})),UO.on(VO.SWITCH_DEVICE_SUCCESS,(e=>{let{track:t}=e;t.room&&Zx(t.room.userId,{eventId:t.kind===Vb.VIDEO?32780:32781})})),UO.on(VO.LOCAL_TRACK_REPLACED,(e=>{let{track:t}=e;t.room&&Zx(t.room.userId,{eventId:t.kind===Vb.VIDEO?32782:32783})})),UO.on(VO.SIGNAL_CONNECTION_STATE_CHANGED,(e=>{let t,{room:r,prevState:i,state:n}=e;switch(n){case"CONNECTED":t="RECONNECTING"===i?32795:32791;break;case"DISCONNECTED":t="RECONNECTING"===i?32796:32790;break;case"RECONNECTING":t=32794}t&&Zx(r.userId,{eventId:t})})),UO.on(VO.PEER_CONNECTION_STATE_CHANGED,(e=>{let t,{room:r,prevState:i,state:n,remoteUserId:o}=e,a=!!o;switch(n){case"CONNECTED":t="RECONNECTING"===i?a?32801:32798:a?32793:32792;break;case"DISCONNECTED":"RECONNECTING"===i&&(t=a?32802:32799);break;case"RECONNECTING":t=a?32800:32797}t&&Zx(r.userId,{eventId:t,remoteUserId:o})})),UO.on(VO.VIDEO_CODEC_IMPLEMENTATION_CHANGED,(e=>{let{implementation:t,userId:r,remoteUserId:i,codec:n,isHWCodec:o,prevImplementation:a,streamType:s}=e,c=o?1:0;a||(c=o?3:2);let A="h264"===n?0:2,l={eventId:4004,param1:c,param2:A,streamType:s||2};i&&(l.remoteUserId=i,l.eventId=4005),Zx(r,l),sk.addEnum({key:i?514701:513701,value:c}),sk.addEnum({key:i?514700:513700,value:A})})),UO.on(VO.LOCAL_TRACK_RECAPTURE,(e=>{let{track:t,error:r}=e;if(t.userId){let e={eventId:2003,param1:0};t.kind===Vb.AUDIO?(e.streamType=1,r&&(e.param1=2)):(e.streamType="auxiliary"===t.streamType?7:2,r&&(e.param1=8)),Zx(t.userId,e)}}));var $x=VS(WS(),1),eU=class extends $x.EventEmitter{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"userId";super(),this.mySelfId=e,this._log=t,this.key=r,jS(this,"userMap",new Map),jS(this,"remotePublishedUserMap",new Map)}get hasRobotUser(){return!![...this.remotePublishedUserMap.values()].find((e=>e.isRobot))}getPublishedUser(e){return this.remotePublishedUserMap.get(e)}addUser(e){let t=e[this.key],{userId:r,tinyId:i,role:n}=e;if(this.userMap.has(t))return;let o={userId:r,tinyId:i,role:20===n?"anchor":"audience"};this.userMap.set(t,o),this.emit("1",o)}deleteUser(e,t){let r=this.userMap.get(e);if(!r)return;let i="peer leave [".concat(e,"]");AD(t)||(i+=":".concat(xR[t])),this._log.info(i);let n=this.remotePublishedUserMap.get(e);if(n){let t=n.muteState;n.flag=0,this.emit("5",n.userId),this.deleteRemotePublishedUser(e),this.emit("6",{prevMuteState:t,muteState:n.muteState,flag:0})}this.userMap.delete(e),this.emit("2",r.userId)}setUserList(e){this.userMap.forEach((t=>{e.findIndex((e=>e[this.key]===t[this.key]))<0&&this.deleteUser(t[this.key],0)})),e.forEach((e=>{!this.userMap.has(e[this.key])&&e[this.key]!==this.mySelfId&&this.addUser(e)}))}addRemotePublishedUser(e){this.remotePublishedUserMap.has(e[this.key])||this.remotePublishedUserMap.set(e[this.key],e)}deleteRemotePublishedUser(e){this.remotePublishedUserMap.has(e)&&this.remotePublishedUserMap.delete(e)}setRemotePublishedUserList(e){this.remotePublishedUserMap.forEach((t=>{let r=t[this.key];if(e.findIndex((e=>e[this.key]===t[this.key]))<0){this._log.info("remote [".concat(r,"] unpublish"));let e=t.muteState;t.flag=0,this.emit("5",t.userId),this.deleteRemotePublishedUser(r),this.emit("6",{prevMuteState:e,muteState:t.muteState,flag:0})}})),e.forEach((e=>{var t;let r=e[this.key];if(r===this.mySelfId)return;let{flag:i,userId:n,tinyId:o}=e,a=bD(i,n),s=null==(t=this.remotePublishedUserMap.get(r))?void 0:t.muteState;if(s){let e=this.remotePublishedUserMap.get(r);e&&e.flag!==i&&(e.flag=i,this._log.info("remote publish updated: ".concat(JSON.stringify(e.muteState))),this.emit("6",{prevMuteState:s,muteState:a,flag:i}))}else this._log.info("remote publish. state: ".concat(JSON.stringify(a))),this.addUser({userId:n,tinyId:o,role:20}),this.emit("3",e),this.emit("6",{prevMuteState:bD(0,n),muteState:a,flag:i})}))}clear(){this.userMap.clear(),this.remotePublishedUserMap.clear()}};function tU(e){let{timesInSecond:t,maxSizeInSecond:r,getSize:i}=e;return YP(((e,n)=>{let o=new WeakMap;return UO.on(VO.ROOM_DESTROY,(e=>{let{room:t}=e;return o.delete(t)})),function(){let a=o.get(this);for(var s=arguments.length,c=new Array(s),A=0;A<s;A++)c[A]=arguments[A];if(a||(a={callCountInSecond:0,timestamp:0,totalSizeInSecond:0},o.set(this,a)),0===a.timestamp?a.timestamp=Date.now():Date.now()-a.timestamp>1e3&&(a.timestamp=Date.now(),a.callCountInSecond=0,a.totalSizeInSecond=0),i&&(a.totalSizeInSecond+=i(...c)),0!==a.timestamp&&Date.now()-a.timestamp<1e3&&(a.callCountInSecond>=t||a.totalSizeInSecond>r))throw new ob({code:ib.INVALID_OPERATION,message:qQ({key:JQ.CALL_FREQUENCY_LIMIT,data:{isTimes:a.callCountInSecond>=t,isSize:a.totalSizeInSecond>r,name:n,timesInSecond:t,maxSizeInSecond:r}})});a.callCountInSecond++,e.call(this,...c)}}))}var rU,iU=!0,nU={SCENE_LIVE:"live",SCENE_RTC:"rtc",ROLE_ANCHOR:"anchor",ROLE_AUDIENCE:"audience",STREAM_TYPE_MAIN:"main",STREAM_TYPE_SUB:"sub",AUDIO_PROFILE_STANDARD:"standard",AUDIO_PROFILE_STANDARD_STEREO:"standard-stereo",AUDIO_PROFILE_HIGH:"high",AUDIO_PROFILE_HIGH_STEREO:"high-stereo",QOS_PREFERENCE_SMOOTH:"smooth",QOS_PREFERENCE_CLEAR:"clear",SPEAKER:"Speakerphone",HEADSET:"Headset earpiece"},oU={INVALID_PARAMETER:5e3,INVALID_OPERATION:5100,ENV_NOT_SUPPORTED:5200,DEVICE_ERROR:5300,SERVER_ERROR:5400,OPERATION_FAILED:5500,OPERATION_ABORT:5998,UNKNOWN_ERROR:5999},aU=((rU=aU||{})[rU.INVALID_PARAMETER=5e3]="INVALID_PARAMETER",rU[rU.INVALID_PARAMETER_REQUIRED=5001]="INVALID_PARAMETER_REQUIRED",rU[rU.INVALID_PARAMETER_TYPE=5002]="INVALID_PARAMETER_TYPE",rU[rU.INVALID_PARAMETER_EMPTY=5003]="INVALID_PARAMETER_EMPTY",rU[rU.INVALID_PARAMETER_INSTANCE=5004]="INVALID_PARAMETER_INSTANCE",rU[rU.INVALID_PARAMETER_RANGE=5005]="INVALID_PARAMETER_RANGE",rU[rU.INVALID_PARAMETER_LESS_THAN_ZERO=5006]="INVALID_PARAMETER_LESS_THAN_ZERO",rU[rU.INVALID_PARAMETER_MIN=5007]="INVALID_PARAMETER_MIN",rU[rU.INVALID_PARAMETER_MAX=5008]="INVALID_PARAMETER_MAX",rU[rU.INVALID_ELEMENT_ID=5009]="INVALID_ELEMENT_ID",rU[rU.INVALID_ELEMENT_ID_TYPE=5010]="INVALID_ELEMENT_ID_TYPE",rU[rU.INVALID_STREAM_ID=5011]="INVALID_STREAM_ID",rU[rU.INVALID_ROOM_ID_STRING=5012]="INVALID_ROOM_ID_STRING",rU[rU.INVALID_ROOM_ID_INTEGER=5013]="INVALID_ROOM_ID_INTEGER",rU[rU.INVALID_STREAM_TYPE=5014]="INVALID_STREAM_TYPE",rU[rU.INVALID_ROOM_ID_REQUIED=5015]="INVALID_ROOM_ID_REQUIED",rU[rU.INVALID_ROOM_ID_INTEGER_STRING=5016]="INVALID_ROOM_ID_INTEGER_STRING",rU[rU.INVALID_BUFFER_EMPTY=5017]="INVALID_BUFFER_EMPTY",rU[rU.INVALID_BUFFER_OVERSIZE=5018]="INVALID_BUFFER_OVERSIZE",rU[rU.INVALID_OPERATION=5100]="INVALID_OPERATION",rU[rU.INVALID_OPERATION_NOT_JOINED=5101]="INVALID_OPERATION_NOT_JOINED",rU[rU.INVALID_OPERATION_REMOTE_USER_NOT_EXIST=5102]="INVALID_OPERATION_REMOTE_USER_NOT_EXIST",rU[rU.INVALID_OPERATION_STREAM_TYPE_NOT_EXIST=5103]="INVALID_OPERATION_STREAM_TYPE_NOT_EXIST",rU[rU.INVALID_OPERATION_REPEAT_CALL=5104]="INVALID_OPERATION_REPEAT_CALL",rU[rU.INVALID_OPERATION_NEED_VIDEO=5105]="INVALID_OPERATION_NEED_VIDEO",rU[rU.INVALID_OPERATION_NEED_AUDIO=5106]="INVALID_OPERATION_NEED_AUDIO",rU[rU.INVALID_ROLE_AUDIENCE=5107]="INVALID_ROLE_AUDIENCE",rU[rU.INVALID_NOT_ENABLE_SEI=5108]="INVALID_NOT_ENABLE_SEI",rU[rU.INVALID_NEED_CALL_PUBLISHED=5109]="INVALID_NEED_CALL_PUBLISHED",rU[rU.ENV_NOT_SUPPORTED=5200]="ENV_NOT_SUPPORTED",rU[rU.NOT_SUPPORTED_HTTP=5201]="NOT_SUPPORTED_HTTP",rU[rU.NOT_SUPPORTED_WEBRTC=5202]="NOT_SUPPORTED_WEBRTC",rU[rU.NOT_SUPPORTED_H264_ENCODE=5203]="NOT_SUPPORTED_H264_ENCODE",rU[rU.NOT_SUPPORTED_H264_DECODE=5204]="NOT_SUPPORTED_H264_DECODE",rU[rU.NOT_SUPPORTED_SCREEN_SHARE=5205]="NOT_SUPPORTED_SCREEN_SHARE",rU[rU.NOT_SUPPORTED_SMALL_VIDEO=5206]="NOT_SUPPORTED_SMALL_VIDEO",rU[rU.NOT_SUPPORTED_SEI=5207]="NOT_SUPPORTED_SEI",rU[rU.NOT_SUPPORTED_WEBGL=5208]="NOT_SUPPORTED_WEBGL",rU[rU.NOT_SUPPORTED_CHROME_VERSION=5209]="NOT_SUPPORTED_CHROME_VERSION",rU[rU.NOT_SUPPORTED_PLUGIN=5210]="NOT_SUPPORTED_PLUGIN",rU[rU.DEVICE_ERROR=5300]="DEVICE_ERROR",rU[rU.DEVICE_NOT_FOUND_ERROR=5301]="DEVICE_NOT_FOUND_ERROR",rU[rU.DEVICE_NOT_ALLOWED_ERROR=5302]="DEVICE_NOT_ALLOWED_ERROR",rU[rU.DEVICE_NOT_READABLE_ERROR=5303]="DEVICE_NOT_READABLE_ERROR",rU[rU.DEVICE_OVERCONSTRAINED_ERROR=5304]="DEVICE_OVERCONSTRAINED_ERROR",rU[rU.DEVICE_INVALID_STATE_ERROR=5305]="DEVICE_INVALID_STATE_ERROR",rU[rU.DEVICE_SECURITY_ERROR=5306]="DEVICE_SECURITY_ERROR",rU[rU.DEVICE_ABORT_ERROR=5307]="DEVICE_ABORT_ERROR",rU[rU.CAMERA_RECOVER_FAILED=5308]="CAMERA_RECOVER_FAILED",rU[rU.MICROPHONE_RECOVER_FAILED=5309]="MICROPHONE_RECOVER_FAILED",rU[rU.SERVER_ERROR=5400]="SERVER_ERROR",rU[rU.NEED_TO_BUY=5401]="NEED_TO_BUY",rU[rU.ACCOUNT_NO_MONEY=-100013]="ACCOUNT_NO_MONEY",rU[rU.OPERATION_FAILED=5500]="OPERATION_FAILED",rU[rU.FIREWALL_RESTRICTION=5501]="FIREWALL_RESTRICTION",rU[rU.REJOIN_FAILED=5502]="REJOIN_FAILED",rU[rU.EVENT_HANDLER_ERROR=5503]="EVENT_HANDLER_ERROR",rU[rU.VIDEO_CONTEXT_ERROR=5504]="VIDEO_CONTEXT_ERROR",rU[rU.VIDEO_DECODE_ERROR=5505]="VIDEO_DECODE_ERROR",rU[rU.OPERATION_ABORT=5998]="OPERATION_ABORT",rU[rU.UNKNOWN_ERROR=5999]="UNKNOWN_ERROR",rU),sU=xS(LS({},XQ),{INVALID_PARAMETER(e){let{fnName:t}=e;return"the parameters of the '".concat(t,"' you called does not meet the requirements, please check the API documentation.")},INVALID_PARAMETER_REQUIRED(e){let{key:t,rule:r,fnName:i,value:n}=e;return"'".concat(t||r.name,"' is a required param when calling ").concat(i,"(), received: ").concat(n,".")},INVALID_PARAMETER_TYPE(e){let{key:t,rule:r,fnName:i,value:n}=e,o="".concat(t||r.name),a="";return a=Array.isArray(r.type)?r.type.join("|"):r.type,"'".concat(o,"' must be type of ").concat(a," when calling ").concat(i,"(), received type: ").concat(sD(n),".")},INVALID_PARAMETER_EMPTY(e){let{key:t,rule:r,fnName:i,value:n}=e;return"'".concat(t||r.name,"' cannot be '").concat(n,"' when calling ").concat(i,"().")},INVALID_PARAMETER_INSTANCE(e){let{key:t,rule:r,fnName:i,value:n}=e,o="".concat(t||r.name),a="".concat(r.instanceOf.name||r.instanceOf);return"'".concat(o,"' must be instanceof ").concat(a," when calling ").concat(i,"(), received type: ").concat(sD(n),".")},INVALID_PARAMETER_RANGE(e){let{key:t,rule:r,fnName:i,value:n}=e;return"'".concat(t||r.name,"' must be one of ").concat(r.values.join("|")," when calling ").concat(i,"(), received: ").concat(n,".")},INVALID_PARAMETER_LESS_THAN_ZERO(e){let{key:t,rule:r,fnName:i}=e;return"'".concat(t||r.name,"' cannot be less than 0 when calling ").concat(i,"().")},INVALID_PARAMETER_MIN(e){let{key:t,rule:r,value:i}=e;return"the min value of ".concat(t||r.name," is ").concat(r.min,", received: ").concat(i,".")},INVALID_PARAMETER_MAX(e){let{key:t,rule:r,value:i}=e;return"the max value of ".concat(t||r.name," is ").concat(r.max,", received: ").concat(i,".")},INVALID_ELEMENT_ID(e){let{key:t,fnName:r}=e;return"'".concat(t,"' is not found in the document object when calling ").concat(r,"().")},INVALID_ELEMENT_ID_TYPE(e){let{key:t,fnName:r,type:i}=e;return"the element corresponding to '".concat(t,"' must be instanceof HTMLElement when calling ").concat(r,"(), received: ").concat(i,".")},INVALID_STREAM_ID(e){let{key:t}=e;return"'".concat(t,"' can only consist of uppercase and lowercase english letters (a-zA-Z), numbers (0-9), hyphens and underscores.")},INVALID_ROOM_ID_STRING(e){let{key:t}=e;return"'".concat(t,"' must be a valid string.")},INVALID_ROOM_ID_INTEGER(e){let{key:t}=e;return"'".concat(t,"' must be an integer between [1, 4294967294].")},INVALID_ROOM_ID_INTEGER_STRING(e){let{key:t}=e;return"'".concat(t,"' must be an integer but go a string, use 'parseInt' to convert it or use 'strRoomId' instead.")},INVALID_ROOM_ID_REQUIED:()=>"at least one of 'roomId'(between [1, 4294967294]) and 'strRoomId'(not empty) is required.",INVALID_STREAM_TYPE:e=>{let{fnName:t}=e;return"'streamType' is required when 'userId' is not '*', calling ".concat(t,"()")},INVALID_IMAGE_URL:"The 'src' param must be filled in when the background type is image.",INVALID_OPERATION(e){let{fnName:t}=e;return"the API '".concat(t,"' you called does not meet the requirements, please check the API documentation.")},INVALID_OPERATION_NOT_JOINED(e){let{fnName:t}=e;return"cannot ".concat(t," because you are not enter room yet.")},INVALID_OPERATION_REMOTE_USER_NOT_EXIST(e){let{fnName:t,value:r}=e;return"cannot ".concat(t," because remote user(userId: ").concat(r.userId,") does not publishing stream.")},INVALID_OPERATION_STREAM_TYPE_NOT_EXIST(e){let{fnName:t,value:r}=e;return"cannot ".concat(t," because remote user(userId: ").concat(r.userId,") does not publishing ").concat(r.streamType," video.")},INVALID_OPERATION_REPEAT_CALL(e){let{fnName:t}=e;return"you are already ".concat(t,"(), cannot repeated call '").concat(t,"'.")},INVALID_OPERATION_NEED_VIDEO(e){let{fnName:t}=e;return"cannot call '".concat(t,"' because the camera is not turned on.")},INVALID_OPERATION_NEED_AUDIO(e){let{fnName:t}=e;return"cannot call '".concat(t,"' because the microphone is not turned on.")},INVALID_BUFFER_EMPTY:e=>{let{key:t}=e;return"the buffer size of paramerter '".concat(t,"' cannot be empty")},INVALID_BUFFER_OVERSIZE:()=>"buffer size is over 1000 Bytes",INVALID_ROLE_AUDIENCE:()=>"role: 'audience' cannot call this api.",INVALID_NOT_ENABLE_SEI:()=>"you need to enable SEI in TRTC.create({ enableSEI: true })",INVALID_NEED_CALL_PUBLISHED:e=>{let{fnName:t}=e;return"you need to call ".concat(t,"() after publish stream.")},ENV_NOT_SUPPORTED(e){let{fnName:t}=e;return"the current browser does not support the capability of the function '".concat(t,"' you are calling, please check the API documentation.")},NOT_SUPPORTED_WEBRTC:"the current browser does not support WebRTC capability, please check the SDK documentation.",NOT_SUPPORTED_H264_ENCODE:"this browser does not support H264 encode.",NOT_SUPPORTED_H264_DECODE:"this browser does not support H264 decode.",NOT_SUPPORTED_SCREEN_SHARE:"this browser does not support screen share, please check the browser version.",NOT_SUPPORTED_SMALL_VIDEO:"this browser does not support small video, please check the browser version.",NOT_SUPPORTED_SEI:"this browser does not support SEI, please check the browser version.",NOT_SUPPORTED_WEBGL:"this browser does not support WebGL, please check the browser version.",NOT_SUPPORTED_CHROME_VERSION(e){let{fnName:t}=e;return"cannot call ".concat(t," because the browser version is too low, please upgrade to the latest version")},DEVICE_ERROR(e){let{fnName:t,error:r}=e;return"'".concat(t,"' got device exception").concat(r?", error: ".concat(r.toString(),"."):".")},DEVICE_NOT_FOUND_ERROR(e){let{fnName:t,deviceType:r=cU(t),error:i}=e;return"NotFoundError, no ".concat(r," detected, please check your device and the configuration on '").concat(t,"'").concat(i?", error: ".concat(i.toString(),"."):".")},DEVICE_NOT_ALLOWED_ERROR(e){let{fnName:t,deviceType:r=cU(t),error:i}=e;return"NotAllowedError, you have disabled ".concat(r," access, please allow the current application to use the ").concat(r).concat(i?", error: ".concat(i.toString(),"."):".")},DEVICE_NOT_READABLE_ERROR(e){let{fnName:t,deviceType:r=cU(t),error:i}=e;return"NotReadableError, the ".concat(r," maybe in use by another APP, please check if the device is pre-occupied by another APP.")},DEVICE_OVERCONSTRAINED_ERROR(e){let{fnName:t,deviceType:r=cU(t),error:i}=e;return"OverconstrainedError, the device ID is incorrect, please check whether the device ID passed in is correct".concat(i?", error: ".concat(i.toString(),"."):".")},DEVICE_INVALID_STATE_ERROR(e){let{fnName:t,deviceType:r=cU(t),error:i}=e;return"InvalidStateError, after the user clicks and interacts with the page, turn on the ".concat(r).concat(i?", error: ".concat(i.toString(),"."):".")},DEVICE_SECURITY_ERROR(e){let{fnName:t,deviceType:r=cU(t),error:i}=e;return"SecurityError, check whether the system security policy restricts the use of the ".concat(r,", and it is recommended to turn on the ").concat(r," after the user interacts with the page").concat(i?", error: ".concat(i.toString(),"."):".")},DEVICE_ABORT_ERROR(e){let{fnName:t,deviceType:r=cU(t),error:i}=e;return"AbortError, an unknown exception in the system makes the device unusable, recommended to change the device or browser and re-check whether the device is normal".concat(i?" error: ".concat(i.toString(),"."):".")},CAMERA_RECOVER_FAILED(e){let{error:t}=e;return"camera recover capture failed ".concat((null==t?void 0:t.name)||"",": ").concat((null==t?void 0:t.originMessage)||(null==t?void 0:t.message))},MICROPHONE_RECOVER_FAILED(e){let{error:t}=e;return"microphone recover capture failed ".concat((null==t?void 0:t.name)||"",": ").concat((null==t?void 0:t.originMessage)||(null==t?void 0:t.message))},OPERATION_FAILED(e){let{fnName:t,error:r}=e;return"'".concat(t,"' failed, reason: ").concat(null==r?void 0:r.toString())},FIREWALL_RESTRICTION:()=>"media connection failure due to firewall restrictions, please try to change your network.",EVENT_HANDLER_ERROR(e){let{eventName:t}=e;return"an error was caught on trtc.on('".concat(t,"', handler), please check your code on 'handler'.")},VIDEO_CONTEXT_ERROR(e){let{reason:t,error:r}=e;return"video context error ".concat(t," ").concat((null==r?void 0:r.name)||""," ").concat((null==r?void 0:r.message)||"")},SERVER_ERROR(e){let{fnName:t,error:r}=e;return"'".concat(t,"' got server error: ").concat(null==r?void 0:r.toString(),", please check the SDK documentation.")},NEED_TO_BUY(e){let{value:t,url:r}=e;return"You need to buy packages for ".concat(t,". Refer to: ").concat(r)},ACCOUNT_NO_MONEY:e=>{let{fnParams:t}=e;return"your TRTC account run out of credit, please recharge.".concat(t.sdkAppId?" SDKAppId: ".concat(t.sdkAppId):"")},OPERATION_ABORT(e){let{fnName:t}=e;return"'".concat(t,"' abort")},UNKNOWN_ERROR(e){let{fnName:t,error:r}=e;return"'".concat(t,"' throw unknown exception").concat(r?", error: ".concat(r.toString(),"."):".")}});function cU(e){if(!e)return"camera";let t=e.toLowerCase();return t.includes("screen")?"screen share":t.includes("audio")?"microphone":"camera"}var AU=class e extends Error{constructor(e){let{code:t,extraCode:r,message:i="",messageParams:n,fnName:o="",originError:a}=e;var s;let c;c=i||function(e){let t,{code:r,params:i,enableDocLink:n=!1}=e,o="",a=aU[r];try{t=sU[a]}catch(e){t=sU.UNKNOWN_ERROR}return cD(t)?o=t(i):lD(t)&&(o=t),i.fnName&&!o.includes(i.fnName)&&("."!==o[o.length-1]&&(o+="."),o+=" thrown from ".concat(i.fnName,"()")),n&&(o+=" doc:"),o}({code:t===oU.SERVER_ERROR?t:r||t,params:LS({fnName:o,error:a},n)}),super(c),jS(this,"name","RtcError"),jS(this,"code"),jS(this,"extraCode"),jS(this,"functionName"),jS(this,"message"),jS(this,"handler"),jS(this,"originError"),this.name=aU[t],this.code=t,this.extraCode=r,this.functionName=o,this.originError=a,this.message=c,5302===this.extraCode&&null!=(s=this.originError)&&s.message.includes("system")&&(this.handler=()=>{let e=document.createElement("a");HB?e.href="ms-settings:privacy-".concat({startLocalVideo:"webcam",startLocalAudio:"microphone"}[this.functionName]):YB&&(e.href="x-apple.systempreferences:com.apple.preference.security?Privacy_".concat({startLocalVideo:"Camera",startLocalAudio:"Microphone",startScreenShare:"ScreenCapture"}[this.functionName])),e.href.length>0&&e.click()})}static convertFrom(t,r,i){let n=t;if(t instanceof ob){let{stack:o}=t,a={code:oU.UNKNOWN_ERROR,fnName:r,originError:t};switch(t.getCode()){case ib.INVALID_PARAMETER:a.code=oU.INVALID_PARAMETER,a.message=t.message;break;case ib.INVALID_OPERATION:a.code=oU.INVALID_OPERATION;break;case ib.NOT_SUPPORTED:case ib.NOT_SUPPORTED_H264:a.code=oU.ENV_NOT_SUPPORTED,t.getCode()===ib.NOT_SUPPORTED_H264&&(a.extraCode=t.message.includes(XQ.NOT_SUPPORTED_H264ENCODE)?5203:5204);break;case ib.JOIN_ROOM_FAILED:a.messageParams={fnParams:i};case ib.SERVER_TIMEOUT:case ib.SWITCH_ROLE_FAILED:a.code=oU.SERVER_ERROR,a.extraCode=t.getExtraCode();break;case ib.API_CALL_ABORTED:a.code=oU.OPERATION_ABORT;break;case ib.DEVICE_NOT_FOUND:case ib.DEVICE_AUTO_RECOVER_FAILED:case ib.INITIALIZE_FAILED:a.code=5300,t.name&&(a.extraCode=function(e){let t;switch(e){case"NotFoundError":t=5301;break;case"NotAllowedError":t=5302;break;case"NotReadableError":t=5303;break;case"OverconstrainedError":t=5304;break;case"InvalidStateError":t=5305;break;case"SecurityError":t=5306;break;case"AbortError":t=5307;break;default:t=5300}return t}(t.name));break;case ib.UNKNOWN:break;default:a.code=oU.OPERATION_FAILED}n=new e(a),o&&(n.stack+=o.substr(o.indexOf("\n")))}else{if(t instanceof e)return t;n=new e({code:oU.UNKNOWN_ERROR,fnName:r,originError:t})}return n}},lU=AU,uU={type:"object",properties:{cameraId:{type:"string"},useFrontCamera:{type:"boolean"},fillMode:{type:"string",values:["contain","cover","fill"]},mirror:{type:["string","boolean"],values:[!0,!1,"view","publish","both"]},small:{properties:{width:{type:"number"},height:{type:"number"},frameRate:{type:"number"},bitrate:{type:"number"}}},videoTrack:{instanceOf:MediaStreamTrack}}},dU={type:"object",properties:{systemAudio:{type:"boolean"},fillMode:{type:"string",values:["contain","cover","fill"]},profile:{type:["string","object"],properties:{width:{type:"number"},height:{type:"number"},frameRate:{type:"number"},bitrate:{type:"number"}}},videoTrack:{instanceOf:MediaStreamTrack},audioTrack:{instanceOf:MediaStreamTrack}}},hU={type:["string",HTMLElement,null,"array"],arrayItem:{instanceOf:HTMLElement},validate(e,t,r){if(lD(e)&&!document.getElementById(e))throw new lU({code:oU.INVALID_PARAMETER,extraCode:5009,fnName:r,messageParams:{key:t}})}},gU={name:"userId",required:!0,type:"string"},pU={type:"object",properties:{microphoneId:{type:"string"},audioTrack:{instanceOf:MediaStreamTrack},captureVolume:{type:"number",min:0},earMonitorVolume:{type:"number",min:0,max:100},profile:{values:[nU.AUDIO_PROFILE_STANDARD,nU.AUDIO_PROFILE_STANDARD_STEREO,nU.AUDIO_PROFILE_HIGH,nU.AUDIO_PROFILE_HIGH_STEREO]},echoCancellation:{type:"boolean"},autoGainControl:{type:"boolean"},noiseSuppression:{type:"boolean"}}};function fU(e,t){if(!e)throw new lU({code:oU.INVALID_OPERATION,extraCode:5101,fnName:t})}function mU(e,t,r){if(!e)throw new lU({code:oU.INVALID_OPERATION,extraCode:5102,fnName:t,messageParams:{value:r}})}var EU={create:[{name:"RoomConfig",instanceOf:Function},{name:"CreateConfig",type:"object",properties:{plugins:{type:"array",arrayItem:{instanceOf:Function}}}}],enterRoom:{name:"EnterRoomConfig",type:"object",required:!0,validate(e,t,r){if(this._room.isJoined)throw new lU({code:oU.INVALID_OPERATION,extraCode:5104,fnName:r});if(e.roomId){if(lD(e.roomId))throw new lU({code:oU.INVALID_PARAMETER,extraCode:5016,fnName:r,messageParams:{key:t}});if(!(/^[1-9]\d*$/.test(String(e.roomId))&&e.roomId<4294967295))throw new lU({code:oU.INVALID_PARAMETER,extraCode:5013,fnName:r,messageParams:{key:t}})}else{if(!e.strRoomId)throw new lU({code:oU.INVALID_PARAMETER,extraCode:5015,fnName:r});if(!/^[A-Za-z\d\s!#$%&()+\-:;<=.>?@[\]^_{}|~,]{1,64}$/.test(e.strRoomId))throw new lU({code:oU.INVALID_PARAMETER,extraCode:5012,fnName:r,messageParams:{key:t}})}},properties:{sdkAppId:{required:!0,type:"number",allowEmpty:!1},userId:{required:!0,type:"string",allowEmpty:!1},userSig:{required:!0,type:"string",allowEmpty:!1},scene:{type:"string",values:["live","rtc"]},role:{type:"string",values:["audience","anchor"]},roomId:{type:["string","number"]},strRoomId:{type:"string"},proxy:{type:["object","string"],properties:{websocketProxy:{type:"string"},turnServer:{type:["object","array"],properties:{url:{required:!0,type:"string"},username:{type:"string"},credential:{type:"string"},credentialType:{type:"string",values:["password"]}}},loggerProxy:{type:"string"},webtransportProxy:{type:"string"}}},enableAutoPlayDialog:{type:"boolean"},userDefineRecordId:{type:"string"},latencyLevel:{type:"number"}}},startLocalVideo:{name:"LocalVideoConfig",type:"object",properties:{view:hU,mute:{type:["boolean","string"]},publish:{type:"boolean"},option:uU},validate(e){var t;if((null==(t=null==e?void 0:e.option)||!t.videoTrack)&&pk())throw new lU({code:oU.ENV_NOT_SUPPORTED,extraCode:5201})}},updateLocalVideo:{name:"updateLocalVideoConfig",type:"object",required:!0,properties:{view:xS(LS({},hU),{required:!1}),publish:{type:"boolean"},mute:{type:["boolean","string"]},option:uU}},startLocalAudio:{name:"LocalAudioConfig",type:"object",properties:{publish:{type:"boolean"},option:pU},validate(e){var t;if((null==(t=null==e?void 0:e.option)||!t.audioTrack)&&pk())throw new lU({code:oU.ENV_NOT_SUPPORTED,extraCode:5201})}},updateLocalAudio:{name:"updateLocalAudioConfig",type:"object",required:!0,properties:{publish:{type:"boolean"},mute:{type:"boolean"},option:pU}},startScreenShare:{name:"ScreenShareConfig",type:"object",properties:{view:hU,publish:{type:"boolean"},option:dU},validate(e,t,r,i,n){var o;if((null==(o=null==e?void 0:e.option)||!o.videoTrack)&&pk())throw new lU({code:oU.ENV_NOT_SUPPORTED,extraCode:5201});if(!Ck())throw new lU({code:oU.ENV_NOT_SUPPORTED,fnName:r,extraCode:5205})}},updateScreenShare:{name:"updateScreenShareConfig",type:"object",required:!0,properties:{view:hU,publish:{type:"boolean"},option:dU}},muteRemoteAudio:[gU,{name:"mute",required:!0,type:"boolean"}],setRemoteAudioVolume:[gU,{name:"volume",required:!0,type:"number",min:0}],startRemoteVideo:{name:"startRemoteVideoConfig",type:"object",required:!0,properties:{view:hU,userId:{type:"string",required:!0},streamType:{values:["main","sub"],required:!0},option:{type:"object",properties:{fillMode:{type:"string",values:["contain","cover","fill"]},mirror:{type:"boolean"}}}},validate(e,t,r){fU(this._room.isJoined,r);let i=this._room.remotePublishedUserMap.get(e.userId);if(mU(!!i,r,e),i&&("main"===e.streamType&&!i.muteState.videoAvailable||"sub"===e.streamType&&!i.muteState.hasAuxiliary))throw new lU({code:oU.INVALID_OPERATION,extraCode:5103,fnName:r,messageParams:{value:e}})}},updateRemoteVideo:{name:"updateRemoteVideoConfig",type:"object",required:!0,properties:{view:xS(LS({},hU),{required:!1}),userId:{type:"string",required:!0},streamType:{values:["main","sub"],required:!0},option:{type:"object",properties:{fillMode:{type:"string",values:["contain","cover","fill"]},mirror:{type:"boolean"}}}},validate(e,t,r){fU(this._room.isJoined,r);let i=this._room.remotePublishedUserMap.get(e.userId);if(mU(!!i,r,e),i&&("main"===e.streamType&&!i.muteState.videoAvailable||"sub"===e.streamType&&!i.muteState.hasAuxiliary))throw new lU({code:oU.INVALID_OPERATION,extraCode:5103,fnName:r,messageParams:{value:e}})}},stopRemoteVideo:{name:"stopRemoteVideoConfig",type:"object",required:!0,properties:{userId:{type:"string",required:!0},streamType:{values:["main","sub"]}},validate(e,t,r){if("*"!==e.userId&&AD(e.streamType))throw new lU({code:oU.INVALID_PARAMETER,extraCode:5014,fnName:r})}},switchRole:{name:"role",required:!0,values:["anchor","audience"],validate(e,t,r){fU(this._room.isJoining||this._room.isJoined,r)}},enableAudioVolumeEvaluation:[{name:"interval",type:"number"},{name:"enableInBackground",type:"boolean"}],sendSEIMessage:[{name:"buffer",required:!0,instanceOf:ArrayBuffer,validate(e,t,r,i){if(!Yk)throw new lU({code:oU.ENV_NOT_SUPPORTED,fnName:r,extraCode:5207});if(!this._room.enableSEI)throw new lU({code:oU.INVALID_OPERATION,fnName:r,extraCode:5108});if(e.byteLength>1e3)throw new lU({code:oU.INVALID_PARAMETER,extraCode:5018,fnName:r});if(0===e.byteLength)throw new lU({code:oU.INVALID_PARAMETER,extraCode:5017,messageParams:{key:t},fnName:r});fU(this._room.isJoined,r)}},{name:"options",type:"object",properties:{seiPayloadType:{type:"number",values:[5,243]},toSubStream:{type:"boolean",validate(e,t,r){if(!e&&!this._room.isMainStreamPublished||e&&!this._room.isAuxStreamPublished)throw new lU({code:oU.INVALID_OPERATION,extraCode:5109,messageParams:{key:t},fnName:r})}}}}],sendCustomMessage:{name:"message",required:!0,type:"object",properties:{cmdId:{type:"number",required:!0,min:1,max:10},data:{instanceOf:ArrayBuffer,required:!0,validate(e,t,r,i){if(e.byteLength>1e3)throw new lU({code:oU.INVALID_PARAMETER,extraCode:5018,fnName:r});if(0===e.byteLength)throw new lU({code:oU.INVALID_PARAMETER,extraCode:5017,fnName:r,messageParams:{key:t}})}}},validate(e,t,r){if(fU(this._room.isJoined,r),"live"===this._room.scene&&"audience"===this._room.role)throw new lU({code:oU.INVALID_OPERATION,extraCode:5107,fnName:r,messageParams:{key:t}})}}},IU={TRTC:EU},_U=class extends Error{};function CU(e,t){let r=OD(e);for(let e=0;e<t.length;e++)BD(r[e],t[e]);return r}function yU(e){this._resolve=Promise.resolve(e)}function TU(e){this._reject=Promise.reject(e)}var vU=class e{constructor(t,r){this.instance=t,this.group=r,jS(this,"started",!1),jS(this,"ops",[]),jS(this,"startSame",(()=>!0)),jS(this,"mergeUpdate",CU);let i=e.instances.get(t);i?i.set(r,this):e.instances.set(t,new Map([[r,this]]))}static get(t,r){if(!r)return;let i=e.instances.get(t);return i&&i.get(r)||new e(t,r)}static gets(t,r){let i=e.instances.get(t),n=[];return i&&i.forEach(((e,t)=>{r.test(t)&&n.push(e)})),n}action(e,t,r){let i=t=>{var r;return 0===e?this.started=!0:3===e&&(this.started=!1),this.ops.shift(),null==(r=this.currentOp)||r.action(),t},n=t=>{var r,i;throw this.ops.shift(),0===e&&2===(null==(r=this.currentOp)?void 0:r.type)&&this.ops.shift().reject(new _U("start failed")),null==(i=this.currentOp)||i.action(),t},o={type:e,action:()=>t(...o.args).then(i,n),args:r,resolve:yU,reject:TU};try{switch(this.state){case 1:if(0===e)throw new _U("already started");break;case 4:if(2===e)throw new _U("not started");break;default:return this.cacheOp(o)}}catch(e){return Promise.reject(e)}return this.ops.push(o),o.promise=t(...o.args).then(i,n)}cacheOp(e){if(1===this.ops.length)switch(this.state){case 0:case 2:if(0===e.type)throw new _U("already start");break;case 3:switch(e.type){case 2:throw new _U("update not allowed when stopping");case 3:return this.currentOp.promise}break;default:throw new _U("unknown state")}else switch(e.type){case 3:if(3===this.lastOpType)return this.lastOp.promise;{let e=new _U("keep stop");if(this.ops.slice(1).forEach((t=>t.reject(e))),this.ops=this.ops.slice(0,1),3===this.state)return this.currentOp.promise}break;case 2:switch(this.lastOpType){case 2:return this.lastOp.args=this.mergeUpdate(this.lastOp.args,e.args),this.lastOp.promise;case 3:throw new _U("update not allowed after stop")}break;case 0:switch(this.lastOpType){case 2:throw new _U("start not allowed after update");case 0:throw new _U("duplicate start");case 3:if(this.startSame(this.currentOp.args,e.args))throw this.ops.pop().reject(new _U("keep start")),new _U("already start")}}e.promise=new Promise(((t,r)=>{e._resolve?e._resolve.then(t):e.resolve=t,e._reject?e._reject.catch(r):e.reject=r}));let{action:t}=e;return e.action=()=>t().then(e.resolve,e.reject),this.ops.push(e),e.promise}get lastOp(){return this.ops[this.ops.length-1]}get lastOpType(){return this.lastOp.type}get currentOp(){return this.ops[0]}get state(){return this.currentOp?this.currentOp.type:this.started?1:4}};jS(vU,"instances",new WeakMap);var wU=vU,SU=new WeakMap,bU=(e,t)=>{if(t instanceof _U){let{stack:r}=t;t=new lU({code:oU.OPERATION_ABORT,message:"".concat(e," abort: ").concat(t.message),fnName:e}),r&&(t.stack+=r.substr(r.indexOf("\n")))}throw t};function RU(e,t){return YP(((r,i)=>function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];let s=wU.get(this,"string"==typeof e?e:e.call(this,...o));return s?(t&&(s.startSame=t.bind(this)),s.action(0,r.bind(this),o).catch(bU.bind(null,i))):r.apply(this,o)}))}function DU(e,t){let{merge:r,debounce:i}=t||{};return YP(((t,n)=>function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];let c=wU.get(this,"string"==typeof e?e:e.call(this,...a));if(!c)return t.apply(this,a);if(r&&(c.mergeUpdate=r.bind(this)),i&&i.isNeedToDebounce.apply(this,a)){let{delay:e,getKey:r}=i;return new Promise(((i,o)=>{var s,A;let l=null==(s=SU.get(this))?void 0:s.get(r(...a));if(l){let{timeoutId:e,resolve:t}=l;clearTimeout(e),t()}let u=setTimeout((()=>{if(3===c.state||4===c.state)return i();c.action(2,t.bind(this),a).catch(bU.bind(null,n)).then(i,o)}),e);SU.has(this)?null==(A=SU.get(this))||A.set(r(...a),{timeoutId:u,resolve:i}):SU.set(this,new Map([[r(...a),{timeoutId:u,resolve:i}]]))}))}return c.action(2,t.bind(this),a).catch(bU.bind(null,n))}))}function BU(e){return YP(((t,r)=>function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];let a="function"==typeof e?e.call(this,...n):e;if(a instanceof RegExp)return Promise.all(wU.gets(this,a).map((e=>e.action(3,(()=>Promise.resolve()),n)))).then((()=>t.call(this,...n)));let s=wU.get(this,a);return s?s.action(3,t.bind(this),n).catch(bU.bind(null,r)):t.apply(this,n)}))}var OU={ERROR:"error",AUTOPLAY_FAILED:"autoplay-failed",KICKED_OUT:"kicked-out",REMOTE_USER_ENTER:"remote-user-enter",REMOTE_USER_EXIT:"remote-user-exit",REMOTE_AUDIO_AVAILABLE:"remote-audio-available",REMOTE_AUDIO_UNAVAILABLE:"remote-audio-unavailable",REMOTE_VIDEO_AVAILABLE:"remote-video-available",REMOTE_VIDEO_UNAVAILABLE:"remote-video-unavailable",AUDIO_VOLUME:"audio-volume",AUDIO_FRAME:"audio-frame",NETWORK_QUALITY:"network-quality",CONNECTION_STATE_CHANGED:"connection-state-changed",AUDIO_PLAY_STATE_CHANGED:"audio-play-state-changed",VIDEO_PLAY_STATE_CHANGED:"video-play-state-changed",SCREEN_SHARE_STOPPED:"screen-share-stopped",DEVICE_CHANGED:"device-changed",PUBLISH_STATE_CHANGED:"publish-state-changed",TRACK:"track",STATISTICS:"statistics",SEI_MESSAGE:"sei-message",CUSTOM_MESSAGE:"custom-message",VIDEO_DECODE_DOWNGRADE_STATE_CHANGED:"video-decode-downgrade-state-changed",LAYER_DATA:"layerData",FIRST_VIDEO_FRAME:"first-video-frame"},QU=new Set([OU.ERROR,OU.AUTOPLAY_FAILED,OU.KICKED_OUT,OU.REMOTE_USER_ENTER,OU.REMOTE_USER_EXIT,OU.REMOTE_AUDIO_AVAILABLE,OU.REMOTE_AUDIO_UNAVAILABLE,OU.REMOTE_VIDEO_AVAILABLE,OU.REMOTE_VIDEO_UNAVAILABLE,OU.CONNECTION_STATE_CHANGED,OU.PUBLISH_STATE_CHANGED,OU.SCREEN_SHARE_STOPPED,OU.DEVICE_CHANGED,OU.FIRST_VIDEO_FRAME]);function kU(e){return"sub"===e?"auxiliary":"auxiliary"===e?"sub":"main"}function MU(e){return e===nU.QOS_PREFERENCE_CLEAR?"detail":e===nU.QOS_PREFERENCE_SMOOTH?"motion":""}var PU={};FS(PU,{bytes2ms:()=>ZR,convertObjectNumberToInt:()=>VD,copyProperties:()=>qR,deepClone:()=>OD,deepMerge:()=>BD,delay:()=>GD,fibonacci:()=>oD,formatedTime:()=>MD,getConstructorName:()=>ID,getContainerFromElement:()=>kD,getEnv:()=>jR,getInternalVersion:()=>vD,getLoggerUrl:()=>YR,getMuteStateFromFlag:()=>bD,getNetworkType:()=>JR,getNumNetworkType:()=>zR,getReconnectionTimeout:()=>aD,getStringByteLength:()=>LD,getTurnServer:()=>RD,getUint32Version:()=>FD,getValueType:()=>sD,getViewListFromView:()=>QD,glog:()=>rD,ipv4ToUint32:()=>DD,isArray:()=>gD,isAudioWorkletSupported:()=>_D,isBoolean:()=>dD,isConstructor:()=>ED,isEmpty:()=>SD,isFunction:()=>cD,isLangChinese:()=>iD,isMediaStreamTrack:()=>pD,isNumber:()=>uD,isObject:()=>hD,isOverseaSdkAppId:()=>HR,isPlainObject:()=>nD,isPortrait:()=>xD,isPromise:()=>mD,isRemoteTrack:()=>fD,isString:()=>lD,isUndefined:()=>AD,loadImage:()=>UD,ms2bytes:()=>eD,ms2samples:()=>tD,performanceNow:()=>yD,promiseAny:()=>CD,samples2ms:()=>$R,setNetworkType:()=>KR,stringify:()=>PD,stringifyIncludeValue:()=>ND,throttlePromise:()=>jD});var NU={};FS(NU,{getAbilityConfigUrl:()=>HU,getScheduleDomain:()=>YU,isNeedToSchedule:()=>xU,scheduleProxy:()=>VU,sendScheduleRequest:()=>FU,setIsNeedToSchedule:()=>UU,setScheduleProxy:()=>GU});var LU=null,xU=!0;function UU(e){dD(e)&&e!==xU&&(xU=e,jO.info("setIsNeedToSchedule ".concat(e)))}function FU(e){return YS(this,arguments,(function(e){let{userId:t,sdkAppId:r,useStringRoomId:i,roomId:n,userSig:o,version:a,frameWorkType:s,role:c,latencyLevel:A}=e;return function*(){if(!xU&&LU)return{isCached:!0,result:LU};let e={delta:0,count:[1,1],msg:[],detail:[]};try{let l=new FormData;l.append("userId",String(t)),l.append("sdkAppId",String(r)),l.append("isStrGroupId",String(i)),l.append("groupId",String(n)),l.append("sdkVersion",a),l.append("userSig",String(o)),c&&l.append("role",String(c)),A&&l.append("latencyLevel",String(A)),s&&l.append("frameWorkType",String(s));let u=yD(),d=yield function(e,t,r){return new Promise(((i,n)=>{let o=null;CD([JU((e=>t.count[0]=e+1),(e=>{let{error:i,retry:n,retriedCount:a,retryFuncArgs:s}=e;t.msg[0]=i.message,o||(a>=1&&(s[0]=jU(r,Vb.MAIN,!0)),n())}))(jU(r,Vb.MAIN),e,{get timeout(){return 1e3*oD(2+t.count[0])}}),JU((e=>t.count[1]=e+1),(e=>{let{error:i,retry:n,retriedCount:a,retryFuncArgs:s}=e;t.msg[1]=i.message,o||(a>=2&&(s[0]=jU(r,Vb.BACKUP,!0)),n())}))(jU(r,Vb.BACKUP),e,{get timeout(){return 1e3*oD(2+t.count[1])}})]).then((e=>{o=e,i(o)})).catch(n)}))}(l,e,r);d.config&&(d.config.loggerDomain&&_b(d.config.loggerDomain),dD(d.config.scheduleCache)&&UU(!d.config.scheduleCache)),e.delta=yD()-u;let h=function(e,t,r){let i={totalCost:0,local:0,dns:0,tcp:0,tls:0,request:0,response:0};try{let n=performance.getEntriesByType("resource"),o=jU(e,Vb.MAIN),a=jU(e,Vb.BACKUP);for(let e of n)if(e.startTime>=r&&(e.name===o||e.name===a)&&e.transferSize>0){let r=e.name===o?Vb.MAIN:Vb.BACKUP,n=Math.round(e.duration),a=Math.round(e.domainLookupStart-e.startTime),s=e.redirectStart>0?Math.round(e.redirectEnd-e.redirectStart):0,c=e.fetchStart>0?Math.round(e.domainLookupStart-e.fetchStart):0,A=Math.round(e.domainLookupEnd-e.domainLookupStart),l=Math.round(e.requestStart-e.secureConnectionStart),u=Math.round(e.secureConnectionStart-e.connectStart),d=Math.round(e.responseStart-e.requestStart),h=Math.round(e.responseEnd-e.responseStart),g=[A,l,u,d,h];TM.uploadEvent({log:"stat-schedule-net:".concat(n,"(").concat(a,"(").concat(s,"->").concat(c,")->").concat(g.join("->"),") ").concat(r),userId:t}),i=xS(LS({},i),{totalCost:n,local:a,dns:A,tcp:u,tls:l,request:d,response:h});break}}catch(e){jO.error("getScheduleDetailCost error",e)}return i}(Number(r),t,u);return LU=d,{isCached:!1,result:d,detailCost:h}}catch(e){let t=gD(e)?e[0]:e,r=uD(t.code)?t.code:0,i="schedule failed".concat(t.message?": ".concat(t.message):""),n=new ob({code:ib.SCHEDULE_FAILED,extraCode:r,message:qQ({key:JQ.JOIN_ROOM_FAILED,data:{error:i,code:r}})});throw jO.error(i,r),n}}()}))}"undefined"!=typeof document&&document.head.insertAdjacentHTML("beforeend",Object.values(BR).map((e=>'<link rel="dns-prefetch" href="https://'.concat(e,'">'))).join("\r\n")),UO.on("28",(()=>UU(!0))),UO.on("63",(()=>UU(!0))),UO.on("84",(()=>UU(!0))),UO.on("201",(e=>{"RECONNECTING"===e.state&&UU(!0)})),UO.on("202",(e=>{"RECONNECTING"===e.state&&UU(!0)}));var VU={main:"",backup:""};function GU(e){gD(e)?(VU.main=e[0],VU.backup=e[1]):VU.main=e}function jU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vb.MAIN,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"https://".concat(VU[t]||YU(e,t,r),"/api/v1/config")}function HU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vb.MAIN;return"https://".concat(VU[t]||YU(e,t),"/api/v1/trtcAutoConf")}function YU(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vb.MAIN,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=HR(e)?i?r===Vb.MAIN?BR.MAIN_OVERSEA_BACKUP:BR.BACKUP_OVERSEA:r===Vb.MAIN?BR.MAIN_OVERSEA:BR.BACKUP_OVERSEA:r===Vb.MAIN?BR.MAIN:BR.BACKUP,t}function WU(e,t,r){return new Promise(((i,n)=>{HD({url:e,body:t,timeout:r.timeout,priority:"high"}).then((e=>{0===e.data.code?i(e.data.data):n({code:e.data.code,message:e.data.msg})})).catch(n)}))}var JU=(e,t)=>zD({retryFunction:WU,settings:{retries:3,timeout:0},onError:t,onRetrying:e}),XU=class{constructor(){jS(this,"_log"),this._log=jO.createLogger({id:"fd"})}download(e,t){return YS(this,null,(function*(){let{type:r="blob"}=t||{};try{let t,i=yD();if(t=cD(fetch)?yield this.downloadWithFetch(e,r):yield this.downloadWithXHR(e,r),!t||!t.data)throw new Error("data is empty");let n=yD()-i;return this._log.info("downloaded: ".concat(e,", return type: ").concat(r,", cost: ").concat(n,"ms")),sk.addSuccessEvent({key:522700,cost:yD()-i}),t.data}catch(t){throw this._log.error("failed to download: ".concat(e,", error: ").concat(t)),sk.addFailedEvent({key:522700,error:t}),t}}))}downloadWithFetch(e,t){return YS(this,null,(function*(){this._log.info("download with fetch: ".concat(e,", return type: ").concat(t));try{let r,i=yield fetch(e);if(!i.ok)throw new Error("network response was not ok");return r="arraybuffer"===t?yield i.arrayBuffer():yield i.blob(),{data:r}}catch(e){throw e}}))}downloadWithXHR(e,t){return this._log.info("download with xhr: ".concat(e,", return type: ").concat(t)),new Promise(((r,i)=>{let n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType=t,n.onload=()=>{200===n.status||0===n.status&&n.response?r({data:n.response}):i(new Error("XHR failed"))},n.onerror=i,n.send(null)}))}loadWasm(e,t){return YS(this,null,(function*(){this._log.info("loadWasm ".concat(e,", importObject: ").concat(JSON.stringify(t)));let r=yD(),i=null,n=null;if(cD(WebAssembly.instantiateStreaming)&&!e.startsWith("data:application/octet-stream;base64,")&&!(e=>e.startsWith("file://"))(e)&&cD(fetch))try{let r=fetch(e);i=(yield WebAssembly.instantiateStreaming(r,t)).instance}catch(e){n=e}if(!i)try{let r=yield this.download(e,{type:"arraybuffer"});i=(yield WebAssembly.instantiate(r,t)).instance}catch(e){n=e}if(i){let t=yD()-r;return this._log.info("loadedWasm ".concat(e,", cost: ").concat(t,"ms")),sk.addSuccessEvent({key:522701,cost:t}),i}throw this._log.error("failed to loadWasm ".concat(e,", error: ").concat(n)),sk.addFailedEvent({key:522701,error:n}),n}))}};GS([wM({settings:{timeout:0,retries:3},onRetrying(e){this._log.warn("download retrying: ".concat(e))}})],XU.prototype,"download",1);var KU=new XU;function zU(e){let{TRTC:t,room:r,errorModule:i,assetsPath:n}=e;return{TRTC:t,room:r,assetsPath:n,fileDownloader:KU,innerEmitter:UO,constants:lb,environment:ZD,utils:PU,eventLogger:TM,log:this.room.getLogger(),loggerManager:jO,errorModule:i,kvStatManager:sk,rtcDectection:WO,trtc:this,rx:yN,enums:JO,schedule:NU,clearStarted:(e,t)=>{let r=e.getAlias(),i=wU.instances.get(this);if(i)if(t){let e=i.get(r+t);if(!e)return;e.started=!1}else i.forEach(((e,t)=>{t.startsWith(r)&&(e.started=!1)}))},startGetPCM:hN,createAudioNode:uP}}var qU=new WeakMap;function ZU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YP(((e,r)=>function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];try{eF.call(this,t,n,r,this._name)}catch(e){return Promise.reject(e)}return e.apply(this,n)}))}function $U(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YP(((e,r)=>function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];try{eF.call(this,t,n,r,this._name)}catch(e){throw e}return e.apply(this,n)}))}function eF(e,t,r,i){if(gD(e))for(let n=0;n<e.length;n++)tF.call(this,{rule:e[n],value:t[n],key:e[n].name,fnName:r,className:i});else tF.call(this,{rule:e,value:t[0],key:e.name,fnName:r,className:i})}function tF(e){let{rule:t,value:r,key:i,fnName:n,className:o}=e;function a(e){return{code:oU.INVALID_PARAMETER,extraCode:e,fnName:n,messageParams:{key:i,rule:t,value:r}}}if(AD(r)){if(t.required)throw new lU(a(5001));if(AD(t.defaultValue))return void(cD(t.validate)&&t.validate.call(this,r,i,n,o,this));r=t.defaultValue}if(Array.isArray(t.type)){let e=!1;for(let i=0;i<t.type.length;i++)null===t.type[i]&&null===r&&(e=!0),cD(t.type[i])&&r instanceof t.type[i]&&(e=!0),lD(t.type[i])&&sD(r)===t.type[i].toLowerCase()&&(e=!0);if(!e)throw new lU({code:oU.INVALID_PARAMETER,extraCode:5002,fnName:n,messageParams:{key:i,rule:{type:t.type.map((e=>ED(e)?ID(e):lD(e)?e:sD(e)))},value:r}})}else if(!AD(t.type)&&sD(r)!==t.type)throw new lU(a(5002));if(!1===t.allowEmpty){let e=uD(r)&&(0===r||Number.isNaN(r)),t=lD(r)&&""===r.trim();if(e||t)throw new lU(a(5003))}if(t.notLessThanZero&&uD(r)&&r<0)throw new lU(a(5006));if(!AD(t.min)&&uD(r)&&r<t.min)throw new lU(a(5007));if(!AD(t.max)&&uD(r)&&r>t.max)throw new lU(a(5008));if(lD(t.instanceOf)){if(!r||r._name!==t.instanceOf)throw new lU(a(5004))}else if(cD(t.instanceOf)&&!(r instanceof t.instanceOf))throw new lU(a(5004));if(Array.isArray(t.values)&&!t.values.includes(r))throw new lU(a(5005));let{properties:s}=t;nD(s)&&hD(r)&&Object.keys(s).forEach((e=>{tF.call(this,{rule:s[e],value:r&&r[e],key:"".concat(e),fnName:n,className:o})}));let{arrayItem:c}=t;nD(c)&&gD(r)&&r.forEach(((e,t)=>{tF.call(this,{rule:c,value:e,key:"".concat(i,"[").concat(t,"]"),fnName:n,className:o})})),cD(t.validate)&&t.validate.call(this,r,i,n,o,this)}function rF(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{getRemoteId:t=()=>"",replaceArg:r,getKVReportKey:i,ignoreLog:n}=e;return YP(((e,o)=>function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];var A;function l(e,t,i){if(i&&i.includes(e))return"hided";if(r){let e=r(...s);if(s[e.argIndex]===t)return e.value}if(t===s||e in s)return t;try{return t instanceof HTMLElement?"id: ".concat(t.id," type:").concat(sD(t)):(JSON.stringify(t),t)}catch(e){return"type:".concat(sD(t))}}let u=this._log||jO;if(null!=n&&n(...s))return e.apply(this,s);s.length>0?u.info("".concat(o,"() ").concat(JSON.stringify(s,((e,t)=>l(e,t,["userSig","privateMapKey"]))))):u.info("".concat(o,"()"));let d=i?i(...s):tk[o];try{let r=e.apply(this,s),i=yD();return mD(r)?r.then((e=>(u.info("".concat(o,"() success ").concat(t.call(this,...s))),sk.addSuccessEvent({key:d,cost:yD()-i}),e))).catch((e=>{var r;let i=(e=lU.convertFrom.call(this,e,o,1===s.length?s[0]:s)).extraCode||e.code,n=null!=(r=e.message)&&r.includes(i)?"":" code:".concat(i);throw u.error("".concat(o,"() failed ").concat(t.call(this,...s)," ").concat(e).concat(n," params: ").concat(JSON.stringify(s,l))),sk.addFailedEvent({key:d,error:e}),e})):(sk.addSuccessEvent({key:d}),r)}catch(e){let t=(e=lU.convertFrom.call(this,e,o)).extraCode||e.code,r=null!=(A=e.message)&&A.includes(t)?"":" code:".concat(t);throw u.error("".concat(o,"() failed ").concat(e).concat(r," params: ").concat(JSON.stringify(s,l))),sk.addFailedEvent({key:d,error:e}),e}}))}var iF=e=>YP(((t,r)=>function(i,n){return YS(this,null,(function*(){let o=this._plugins.get(i);if(!o)throw this._log.error("plugin ".concat(String(i)," is not found")),new lU({code:oU.OPERATION_ABORT,message:"plugin ".concat(String(i)," is not found"),fnName:r});if(cD(o.constructor.isSupported)&&!o.constructor.isSupported())throw this._log.error("plugin ".concat(String(i)," is not supported")),new lU({code:oU.ENV_NOT_SUPPORTED,message:"plugin ".concat(String(i)," is not supported"),extraCode:5210,fnName:r});return eF.call(this,o.getValidateRule(e),[n],r,"TRTC"),t.call(this,o,n)}))})),nF=0,oF=class{constructor(e,t){jS(this,"player"),jS(this,"publisher"),jS(this,"mixInput"),this.mixInput=new cP(t),e.url?(this.player=new Audio(e.url),this.player.crossOrigin="anonymous",this.publisher=new Audio(e.url),this.publisher.crossOrigin="anonymous",this.mixInput.replaceSource(this.publisher)):this.mixInput.replaceSource(e.track),this.mixInput.connect()}updateSettings(e){this.player&&(AD(e.volume)||(this.volume=e.volume),AD(e.loop)||(this.loop=e.loop),AD(e.playbackRate)||(this.playbackRate=e.playbackRate))}updateListener(e){if(this.player){if(e.onDurationChange){let{onDurationChange:t}=e;this.player.ondurationchange=e=>{t(e.target.duration)}}if(e.onTimeUpdate){let t=e.onTimeUpdate,{player:r}=this;r.ontimeupdate=()=>{t(r.currentTime,r.duration)}}e.onEnded&&(this.player.onended=e.onEnded)}}reset(){this.seek(0),this.mixInput.connect()}seek(e){this.player&&(e<0&&e>this.player.duration||(this.player.currentTime=e,this.publisher.currentTime=e))}play(){var e,t;return null==(e=this.publisher)||e.play(),null==(t=this.player)?void 0:t.play()}pause(){var e,t;null==(e=this.player)||e.pause(),null==(t=this.publisher)||t.pause()}stop(){var e;null==(e=this.player)||e.pause(),this.mixInput.disconnect()}setOperation(e){"pause"===e&&this.pause(),"resume"===e&&(this.pause(),this.play()),"stop"===e&&(this.pause(),this.seek(0))}set volume(e){!this.player||!this.publisher||(this.player.volume=e,this.publisher.volume=e)}set loop(e){!this.player||!this.publisher||(this.player.loop=e,this.publisher.loop=e)}set playbackRate(e){!this.player||!this.publisher||(this.player.playbackRate=e,this.publisher.playbackRate=e)}};function aF(e,t){if(t&&"function"!=typeof t)throw new lU({code:oU.INVALID_PARAMETER,message:"start audioMixer plugin: param ".concat(e," should be a function.")})}var sF=class e{constructor(e){this.core=e,jS(this,"log"),jS(this,"mixedMusicMap",new Map),jS(this,"cacheMusicMap",new Map),nF+=1,this.log=e.log.createChild({id:"".concat(this.getAlias()).concat(nF)}),this.log.info("[audioMixer] created id=".concat(this.getAlias()).concat(nF)),this.core=e}getName(){return e.Name}getAlias(){return"ax"}getGroup(e){return null==e?void 0:e.id}getValidateRule(t){switch(t){case"start":return e.startValidateRule;case"update":return e.updateValidateRule;case"stop":return e.stopValidateRule}}start(e){return YS(this,null,(function*(){let{room:t}=this.core;this.log.info("add music source, id: ".concat(e.id," url: ").concat(e.url,", track: ").concat(e.track));let{id:r,url:i}=e;if(this.mixedMusicMap.has(r))return;let n=this.cacheMusicMap.get(r);n?e.url?n.reset():(n.mixInput.replaceSource(e.track),n.mixInput.connect()):(n=new oF(e,t.audioManager),this.cacheMusicMap.set(r,n)),n.updateListener(e),n.updateSettings(e),yield n.play(),this.mixedMusicMap.set(r,n),this.log.info("start mix audio track ".concat(r," success.")),sk.addEnum({key:502700,value:3}),this.kvUpload(e)}))}update(e){return YS(this,null,(function*(){let{id:t,operation:r,seekFrom:i,playbackRate:n}=e;this.log.info("update music source, ".concat(JSON.stringify(e)));let o=this.mixedMusicMap.get(t);o?(o.updateSettings(e),o.updateListener(e),AD(r)||o.setOperation(r),AD(i)||o.seek(i),this.kvUpload(e)):this.log.warn("update music source failed, music id: ".concat(t," not found."))}))}stop(e){return YS(this,arguments,(function(e){var t=this;let{id:r}=e;return function*(){var e;t.mixedMusicMap.has(r)&&(t.log.info("remove music source, music id: ".concat(r)),null==(e=t.mixedMusicMap.get(r))||e.stop(),t.mixedMusicMap.delete(r)),"*"===r&&t.destroyAllMusic()}()}))}kvUpload(e){let{track:t,loop:r,volume:i,playbackRate:n,operation:o,seekFrom:a,onTimeUpdate:s,onDurationChange:c,onEnded:A}=e;t&&sk.addCount({key:502711}),r&&sk.addCount({key:502703}),i&&sk.addCount({key:502704}),n&&sk.addCount({key:502705}),o&&sk.addCount({key:502706}),a&&sk.addCount({key:502707}),"function"!=typeof s&&sk.addCount({key:502709}),"function"!=typeof A&&sk.addCount({key:502710}),"function"!=typeof c&&sk.addCount({key:502708})}destroyAllMusic(){this.log.info("destroy all music source."),this.mixedMusicMap.forEach(((e,t)=>this.stop({id:t})))}destroyAllCache(){this.log.info("destroy all music cache."),this.cacheMusicMap.clear()}destroy(){this.log.info("destroy audio mixer plugin."),this.destroyAllMusic(),this.destroyAllCache()}};jS(sF,"startValidateRule",{name:"options",required:!0,type:"object",properties:{id:{type:"string",required:!0},url:{type:"string",required:!1},track:{required:!1},loop:{type:"boolean"},volume:{type:"number"}},validate(e,t,r){if(e.url&&"*"!==e.url){let t=e.url.split("?")[0],i=["mp3","ogg","wav","flac"],n=t.split(".").pop(),o=i.indexOf(n)>=0,a=t.startsWith("blob"),s=t.startsWith("data");if(!(o||a||s))throw new lU({code:oU.INVALID_PARAMETER,message:"start audioMixer plugin: music url is invalid, please check your file format.",fnName:r})}if(!e.url&&!e.track)throw new lU({code:oU.INVALID_PARAMETER,message:"start audioMixer plugin: param url or track is required.",fnName:r});aF("onTimeUpdate",e.onTimeUpdate),aF("onEnded",e.onEnded),aF("onDurationChange",e.onDurationChange)}}),jS(sF,"updateValidateRule",{name:"options",required:!0,type:"object",properties:{id:{type:"string",required:!0},loop:{type:"boolean"},volume:{type:"number"},seekFrom:{type:"number"},operation:{type:"string",values:["pause","resume","stop"]}},validate(e,t,r){aF("onTimeUpdate",e.onTimeUpdate),aF("onEnded",e.onEnded),aF("onDurationChange",e.onDurationChange)}}),jS(sF,"stopValidateRule",{name:"options",type:"object",required:!0,properties:{id:{type:"string",required:!0}}}),jS(sF,"Name","AudioMixer");var cF,AF=sF,lF=0,uF=class e{constructor(e){this.core=e,jS(this,"log"),jS(this,"audioContext",nP()),jS(this,"workletNode"),lF+=1,this.log=e.log.createChild({id:"".concat(this.getAlias()).concat(lF)}),this.log.info("[audioDenoiser] created id=".concat(this.getAlias()).concat(lF)),e.assetsPath&&this.preload("".concat(e.assetsPath,"/denoiser-wasm.js"))}static startValidateRule(e){return{name:"options",required:!0,type:"object",properties:{sdkAppId:{type:"number",required:!0},userId:{type:"string",required:!0},userSig:{type:"string",required:!0}},validate(t,r,i,n){if(!e.room.audioManager.hasAudioTrack)throw new lU({code:oU.INVALID_OPERATION,extraCode:5106,fnName:i})}}}preload(e){return cF||(cF=this.doPreload(e)),cF}doPreload(e){return YS(this,null,(function*(){let t=yield this.core.fileDownloader.download(e,{type:"blob"}),r=URL.createObjectURL(t);try{yield qM(this.audioContext,r)}finally{URL.revokeObjectURL(r)}}))}getName(){return e.Name}getAlias(){return"ad"}getGroup(){return"AIDenoiser_".concat(Date.now())}getValidateRule(t){switch(t){case"start":return e.startValidateRule(this.core);case"update":return e.updateValidateRule;case"stop":return e.stopValidateRule}}start(e){return YS(this,null,(function*(){let{room:t}=this.core;if(yield this.preload("".concat(e.assetsPath,"/denoiser-wasm.js")),!this.workletNode){let t=String(Date.now()).slice(0,-3),{auth:r,sign:i,status:n,message:o}=yield function(e){return YS(this,arguments,(function(e){let{sdkAppId:t,userId:r,userSig:i,timestamp:n}=e;return function*(){let e="".concat(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vb.MAIN;return"https://".concat(VU[t]||YU(e,t),"/api/v1/audioAiAuth")}(t),"?sdkAppId=").concat(t,"&userId=").concat(r,"&userSig=").concat(i,"&timestamp=").concat(n),o=yield fetch(e),{data:{errCode:a,errMsg:s,sign:c,status:A}}=yield o.json();if("1"===A)return{auth:!0,sign:c,status:A,message:s};let l="Init RTCAIDenoiser failed.",u="";switch(a){case 1:u="Please check your params.";break;case 2:u="You need to buy packages. Refer to: https://cloud.tencent.com/document/product/647/44247";break;case 3:u="Server is invalid. Please contact our engineer. ";break;case 4:u="Your packages is not active. Refer to: https://cloud.tencent.com/document/product/647/44247";break;case 5:u="Your packages is expired. Refer to: https://cloud.tencent.com/document/product/647/44247";break;case 6:u="Your version is not supported."}return{auth:!1,status:A,message:s?"".concat(l," Reason: ").concat(s,". ").concat(u):"".concat(l,", ").concat(u)}}()}))}(xS(LS({},e),{timestamp:t}));if(!r)throw this.log.info("RTCAIDenoiser: ".concat(e.userId," auth result: ").concat(r,". Message: ").concat(o)),new lU({code:oU.INVALID_PARAMETER,message:o});this.workletNode=new AudioWorkletNode(this.audioContext,"trtc-denoiser-processor",{numberOfInputs:1,numberOfOutputs:1}),this.workletNode.port.postMessage({type:"init",data:{sdkAppId:String(e.sdkAppId),userId:e.userId,timestamp:t,sign:i,status:n}}),this.workletNode.port.onmessage=e=>{let{data:t}=e;"cost"===t.type&&this.log.debug("[RTCAIDenoiser] ".concat(t.value))}}this.workletNode.port.postMessage({type:"enable"}),t.audioManager.addDenoiser(this.workletNode),t.sendAbilityStatus({ai_denoise:1})}))}update(){return YS(this,null,(function*(){}))}stop(){return YS(this,null,(function*(){if(!this.workletNode)return;let{room:e}=this.core;this.workletNode.port.postMessage({type:"disable"}),yield e.audioManager.removeDenoiser(this.workletNode)}))}destroy(){this.workletNode&&(this.workletNode.port.onmessage=null)}};jS(uF,"updateValidateRule",{type:"object"}),jS(uF,"stopValidateRule",{type:"object"}),jS(uF,"Name","AIDenoiser");var dF=uF,hF=VS(WS(),1),gF=class extends hF.EventEmitter{constructor(){super(),jS(this,"observer"),jS(this,"state","nominal"),this.onPressureChange=this.onPressureChange.bind(this)}get stateNum(){switch(this.state){case"nominal":return 1;case"fair":return 2;case"serious":return 3;case"critical":return 4}}start(){return YS(this,null,(function*(){if(!this.observer)try{"PressureObserver"in window&&!lB&&(this.observer=new PressureObserver(this.onPressureChange),yield this.observer.observe("cpu",{sampleInterval:2e3}))}catch(e){TM.uploadEvent({log:"stat-pressure-detector-start-failed",error:e})}}))}onPressureChange(e){let t=this.stateNum,r=e[e.length-1];this.state=r.state,(this.stateNum>3||t>3)&&jO.info("".concat(r.source,": ").concat(r.state)),this.emit("state-changed",{type:r.source,state:this.state})}destroy(){var e;try{null==(e=this.observer)||e.disconnect(),this.observer=null}catch(e){TM.uploadEvent({log:"stat-pressure-detector-destroy-failed",error:e})}}},pF=new gF;function fF(e){let[t,r]=e,i=r.byteLength,n=parseInt(String(i/255),10),o=i%255,a=[];a.push(0,0,0,1,6,t);for(let e=0;e<n;e++)a.push(255);a.push(o);let s=new DataView(r);return a.push(...new Uint8Array(s.buffer)),a.push(128),new oN(new DataView(new Uint8Array(a).buffer),!0)}function mF(e){return"empty"===e.type||0===e.data.byteLength}function EF(e){return 1===e.getInt32(0)&&6===e.getInt8(4)}function IF(e){let t=0,r=0,i=new DataView(e);for(let n=0;n<e.byteLength;n++)switch(i.getUint8(n)){case 0:t++;break;case 1:(2===t||3===t)&&r++,t=0;break;default:t=0}return r}function _F(e){let{frame:t,seiMessageList:r}=e;if(!r||0===r.length||0===t.data.byteLength)return t;let i=9-IF(t.data);if(i<=0)return t;let n=r.splice(0,i).reverse().map(fF),o=n.reduce(((e,t)=>e+t.dataView.byteLength),0),a=new ArrayBuffer(o+t.data.byteLength),s=new DataView(a),c=new DataView(t.data),A=0;for(let e=0;e<n.length;e++)for(let t=0;t<n[e].dataView.byteLength;t++)s.setInt8(A++,n[e].dataView.getInt8(t));for(let e=0;e<t.data.byteLength;e++)s.setInt8(A++,c.getInt8(e));return t.data=a,t}function CF(e){let{frame:t,onSEI:r}=e;try{let e=new DataView(t.data);if(mF(t)||!EF(e))return t;let i=[],n=0,o=-1,a=-1;for(let r=0;r<t.data.byteLength;r++){let s=e.getUint8(r);if(0===s)n++;else if(1===s){if(2===n||3===n){let s=r-n;if(-1===o?o=s:-1===a&&(a=s,i.push(new oN(new DataView(e.buffer.slice(o,a)))),o=s,a=-1),6!==e.getUint8(r+1)){t.data=e.buffer.slice(s);break}}n=0}else n=0}null==r||r(i.reverse())}catch(e){}return t}var yF=0,TF=class e{constructor(e){this.core=e,jS(this,"log"),jS(this,"_seiMessageList",[]),jS(this,"_smallSeiMessageList",[]),jS(this,"_subStreamSeiMessageList",[]),yF++,this.log=e.log.createChild({id:"".concat(this.getAlias()).concat(yF)}),this.log.info("[sei] created id=".concat(this.getAlias()).concat(yF)),this.core=e,this.encode=this.encode.bind(this),this.decode=this.decode.bind(this)}encode(e){let{frame:t,mediaType:r}=e;try{return _F({frame:t,seiMessageList:8===r?this._smallSeiMessageList:2===r?this._subStreamSeiMessageList:this._seiMessageList})}catch(e){this.log.warn(e)}return t}decode(e){let{frame:t,track:r}=e;return CF({frame:t,onSEI:e=>{e.forEach((e=>{this.core.trtc.emit(OU.SEI_MESSAGE,{seiPayloadType:e.seiPayloadType,data:e.seiPayload.buffer,userId:r.userId,streamType:2===r.mediaType?"sub":"main"})}))}})}destroy(){this.log.debug("destory"),this.stop(),delete this.core}getValidateRule(e){switch(e){case"start":case"update":case"stop":return{type:"object"}}}start(){this.core.room.videoManager.addEncodeProcessor({processor:jk?this.encode:_F,type:2}),this.core.room.videoManager.addDecodeProcessor({processor:jk?this.decode:CF,type:2})}stop(){this.core.room.videoManager.removeEncodeProcessor({type:2}),this.core.room.videoManager.removeDecodeProcessor({type:2})}update(e){let{buffer:t,options:r}=e;var i;let n=[r.seiPayloadType,t],o=!!r.small;r.toSubStream?this._subStreamSeiMessageList.push(n):(this._seiMessageList.push(n),o&&this._smallSeiMessageList.push(n)),null==(i=this.core.room.scriptTransformWorker)||i.postMessage({type:"sei",data:n,isMain:!r.toSubStream,small:o})}getName(){return e.Name}getAlias(){return"sei"}getGroup(){return"sei"}};jS(TF,"autoStart",!0),jS(TF,"Name","SEI");var vF=TF;function wF(e){let{frame:t,onDump:r}=e;return null==r||r(),t}function SF(e){let{frame:t,onDump:r}=e;return null==r||r(),t}var bF={"play() error: NotAllowedError:":{tips:e=>e.includes("main <video>")||e.includes("main <audio>")?"Remote stream auto play is restricted and playback fails":"Local stream playback failure, generally only occurs in Android WeChat devices, no need to handle",color:"red",class:"red"},"updateStream() try to recover local stream":{tips:"Device acquisition exception, automatic recovery is in progress"},"updateStream() recover local stream successfully":{tips:"Device acquisition exception, automatic recovery is successful"},"updateStream() failed to recover local stream":{tips:"Device acquisition exception, automatic recovery failed"},"main stream - video track is muted":{tips:"Indicates that the received video data is not enough for playback. This is usually caused by network reasons. When enough data is received for playback, the state will change to unmuted."},"main stream - audio track is muted":{tips:"Indicates that the received audio data is not enough for playback. This is usually caused by network reasons. When enough data is received for playback, the state will change to unmuted."},"auxiliary stream - video track is muted":{tips:"Indicates that the received screen sharing data is not enough for playback. This is usually caused by network reasons. When enough data is received for playback, the state will change to unmuted."},"main stream - video track is unable to provide media output":{tips:"Indicates that the received video data is not enough for playback. This is usually caused by network reasons. When enough data is received for playback, the state will change to unmuted."},"main stream - audio track is unable to provide media output":{tips:"Indicates that the received audio data is not enough for playback. This is usually caused by network reasons. When enough data is received for playback, the state will change to unmuted."},"auxiliary stream - video track is unable to provide media output":{tips:"Indicates that the received screen sharing data is not enough for playback. This is usually caused by network reasons. When enough data is received for playback, the state will change to unmuted."},"main stream - video track is unmuted":{tips:"Received enough playback video data"},"main stream - audio track is unmuted":{tips:"Received enough playback audio data"},"auxiliary stream - video track is unmuted":{tips:"Received enough playback screen sharing data"},"main stream - audio player track is ended":{tips:"Remote audio track stopped"},"main stream - video player track is ended":{tips:"Remote video track stopped"},"auxiliary stream - video player track is ended":{tips:"Received enough playback screen sharing data"},"stream - video track is muted":{tips:"Camera capture is paused, usually due to the device being occupied by other applications or the browser media permission being revoked. The client needs to re-capture.",color:"orange"},"stream - video track is unable to provide media output":{tips:"The camera acquisition is paused, usually because the device is occupied by other applications or the browser media permissions are revoked, and the customer needs to re-acquire. SDK v4.11.4+ will automatically resume acquisition without customer intervention",color:"orange"},"video track is unable to provide media output":{tips:e=>e.includes("↓")?"The remote track is temporarily unable to decode data, which may be caused by network fluctuations":"The camera acquisition is paused, usually because the device is occupied by other applications or the browser media permissions are revoked. The SDK will automatically resume the acquisition.",color:"orange"},"stream - video player track is ended":{tips:"The camera acquisition stops, usually because the device is unplugged. In this case, the SDK will automatically resume acquisition, and the access side does not need to handle it. It may also be caused by the device being occupied by other applications or the browser media permissions being reclaimed. It is recommended to remind the user to re-acquire on the page."},"video player track is ended":{tips:"The camera acquisition stops, usually because the device is unplugged. In this case, the SDK will automatically resume acquisition, and the access side does not need to handle it. It may also be caused by the device being occupied by other applications or the browser media permissions being reclaimed. It is recommended to remind the user to re-acquire on the page."},"stream - audio track is muted":{tips:"Microphone capture is paused, usually due to the device being occupied by other applications or the browser media permission being revoked. The client needs to re-capture.",color:"orange"},"audio track is unable to provide media output":{tips:e=>e.includes("↓")?"The remote track is temporarily unable to decode data, which may be caused by network fluctuations":"Microphone acquisition is paused, usually because the device is occupied by other applications or the browser media permissions are revoked. The SDK will automatically resume the acquisition.",color:"orange"},"stream - audio track is unable to provide media output":{tips:"The microphone acquisition is paused, usually because the device is occupied by other applications or the browser media permissions are revoked. The SDK will automatically resume the acquisition.",color:"orange"},"stream - audio player track is ended":{tips:"The microphone acquisition stops, usually because the device is unplugged. In this case, the SDK will automatically resume acquisition, and the access side does not need to handle it. It may also be caused by the device being occupied by other applications or the browser media permissions being reclaimed. It is recommended to remind the user to re-acquire on the page."},"audio player track is ended":{tips:"The microphone acquisition stops, usually because the device is unplugged. In this case, the SDK will automatically resume acquisition, and the access side does not need to handle it. It may also be caused by the device being occupied by other applications or the browser media permissions being reclaimed. It is recommended to remind the user to re-acquire on the page."},"is adding audio track to current published local stream":{tips:"add audio track",color:"orange"},"is removing audio track from current published local stream":{tips:"remove audio track",color:"orange"},"is removing video track from current published local stream":{tips:"remove video track",color:"orange"},"is adding video track to current published local stream":{tips:"add video track",color:"orange"},"is replacing audio track to current published local main stream":{tips:"replace audio track",color:"orange"},"is replacing video track to current published local main stream":{tips:"replace video track",color:"orange"},"downlink network quality change":{tips:"Downstream network quality change: 1: excellent, 2: good, 3: average, 4: poor, 5: extremely poor"},"uplink network quality change":{tips:"Upstream network quality change: 1: excellent, 2: good, 3: average, 4: poor, 5: extremely poor"},"localStream mute video":{tips:"mute upstream video stream",color:"orange"},"localStream unmute video":{tips:"unmute upstream video stream",color:"orange"},"localStream mute audio":{tips:"mute upstream audio stream",color:"orange"},"localStream unmute audio":{tips:"unmute upstream audio stream",color:"orange"},"black detected":{tips:"Detect black screen, which means fps = 0. It is usually caused by network, and the network will be recovered after a while. If the network is normal but has not been restored, it is an abnormal situation."},'main stream start to play with options: {"muted":true}':{tips:"Play the remote stream in silent mode. Generally, the remote stream does not need to be played in silent mode. You need to confirm whether the parameters passed in the client stream.play API call are correct.",color:"orange"},"main stream - audio player is starting playing":{tips:"Remote stream audio playback success",color:"#0dd90d",class:"success"},"main stream - video player is starting playing":{tips:"Remote stream video playback success",color:"#0dd90d",class:"success"},"video player is playing":{tips:"Local video playback success",color:"#0dd90d",class:"success"},"audio player is playing":{tips:"Local audio playback success",color:"#0dd90d",class:"success"},"stream - video player is starting playing":{tips:"Local video playback success",color:"#0dd90d",class:"success"},"stream - audio player is starting playing":{tips:"Local audio playback success",color:"#0dd90d",class:"success"},"switch camera success":{tips:"Switch camera success",color:"#0dd90d",class:"success"},"switch microphone success":{tips:"Switch microphone success",color:"#0dd90d",class:"success"},gotStream:{tips:"Local stream capture success"},"local stream is published successfully":{tips:"Publish success",color:"#0dd90d",class:"success"},"encoderImplementation change to OpenH264":{tips:"Use software encoding"},"encoderImplementation change to ExternalEncoder":{tips:"Use hardware encoding"},"getUserMedia with constraints":{tips:"Start media (camera/microphone) capture"},"getDisplayMedia with constraints":{tips:"Start screen sharing capture"},"client-banned":{tips:"Kicked out of the room",color:"red",class:"red",textColor:"#fff"},user_timeout:{tips:"The backend is too long without receiving SDK heartbeat, which is usually caused by the JS thread being blocked for a long time. If the reproduction probability is high, the application browser Performance tool analyzes where the JS thread is blocked.",color:"red",class:"red",textColor:"#fff"},"schedule failed":{tips:"Signaling request failed, does not affect the normal room entry process, SDK will connect to the default signaling domain."},"updateStream() video flag is true, but no camera detected, set video to false":{tips:"When trying to resume camera acquisition, the camera acquisition is not resumed because it is detected that there is no camera.",color:"orange",class:"orange",textColor:"#fff"},"qualityLimitationReason change to bandwidth":{tips:"bandwidth estimation is not enough to limit the quality of the encoding, which may cause the code rate, frame rate, and resolution to be lowered.",color:"orange",class:"orange",textColor:"#fff"},"qualityLimitationReason change to cpu":{tips:"cpu load is too high to limit the quality of the encoding, which may cause the code rate, frame rate, and resolution to be lowered.",color:"orange",class:"orange",textColor:"#fff"},"visibility change: hidden":{tips:"User page switched to backend, in mobile devices, this will cause the device to pause the capture, and it will be restored when the user switches backend to the frontend.",color:"orange",class:"orange",textColor:"#fff"},"visibility change: visible":{tips:"User page switched to frontend",color:"orange",class:"orange",textColor:"#fff"},"main stream - audio player is paused":{tips:"The remote stream audio playback is paused, which usually has two possibilities:\n        1. The business side passes in the div tag container for playing audio and video to be removed by the business side from the DOM.\n        2. If the user is in Chrome 70 and below, when the div container is moved, the playback will be paused.",color:"orange",class:"orange",textColor:"#fff"},"main stream - video player is paused":{tips:"The remote stream video playback is paused, which usually has two possibilities:\n 1. The business side passes in the div tag container for playing audio and video to be removed by the business side from the DOM.\n 2. If the user is in Chrome 70 and below, when the div container is moved, the playback will be paused.",color:"orange",class:"orange",textColor:"#fff"},'"displaySurface":"window"':{tips:"Screen sharing captures the application window",color:"blue",class:"blue",textColor:"#fff"},'"displaySurface":"monitor"':{tips:"Screen sharing captures the entire screen",color:"blue",class:"blue",textColor:"#fff"},'"displaySurface":"browser"':{tips:"Screen sharing captures a certain tab page",color:"blue",class:"blue",textColor:"#fff"},updateMediaSettings:{tips:"The resolution and frame rate below are the actual resolution and frame rate captured",color:"blue",class:"blue",textColor:"#fff"},"main stream start to play with":{tips:"Call remoteStream.play interface",color:"blue",class:"blue",textColor:"#fff"},"stream start to play with":{tips:"Call localStream.play interface",color:"blue",class:"blue",textColor:"#fff"},"main setAudioVolume to 0":{tips:"Business side calls remoteStream.setAudioVolume(0) interface to set the playback volume to 0, which will cause the playback to be silent",color:"orange",class:"orange",textColor:"#fff"},"screen sharing was stopped because the video track is ended":{tips:"Screen sharing capture stopped, possible reasons: user clicks the stop button, the window/page shared by the user is closed, etc.",color:"orange",class:"orange",textColor:"#fff"},"Join() => joining room":{tips:"Call client.join interface",color:"blue",class:"blue",textColor:"#fff"},"publish() => publishing local stream":{tips:"Call client.publish interface",color:"blue",class:"blue",textColor:"#fff"},"subscribe() => subscribe to":{tips:"Call client.subscribe interface",color:"blue",class:"blue",textColor:"#fff"},"switchRole() => switch role":{tips:"Call client.switchRole interface",color:"blue",class:"blue",textColor:"#fff"}};["enterRoom","exitRoom","switchRole","destroy","startLocalAudio","updateLocalAudio","stopLocalAudio","startLocalVideo","updateLocalVideo","stopLocalVideo","startScreenShare","updateScreenShare","stopScreenShare","startRemoteVideo","updateRemoteVideo","stopRemoteVideo","muteRemoteAudio","setRemoteAudioVolume"].forEach((e=>{bF["".concat(e,"()")]={tips:"Call trtc.".concat(e),color:"blue",class:"blue",textColor:"#fff"}}));var RF,DF=0,BF=class e{constructor(e){this.core=e,jS(this,"_core"),jS(this,"log"),jS(this,"dumpLocalVideoMap",{}),jS(this,"dumpRemoteVideoMap",{}),jS(this,"dialog"),this._core=e,this.log=e.log.createChild({id:"".concat(this.getAlias()).concat(++DF)}),this.log.info("created")}getName(){return e.Name}getAlias(){return"dm"}getGroup(){return"dm"}getValidateRule(e){switch(e){case"start":return{name:"StartDebugOptions",required:!1};case"update":return{name:"UpdateDebugOptions",required:!1};case"stop":return{name:"StopDebugOptions",required:!1}}}start(){return YS(this,null,(function*(){var e;!new URLSearchParams(location.search).has("trtcDebug")&&"true"!==(null==(e=window.sessionStorage)?void 0:e.getItem("TRTC_ENABLE_DEBUG_PLUGIN"))||(yield this.openDebugDiaLog(),this.addVideoProcessor())}))}update(){}stop(){this.closeDebugDiaLog(),this.removeVideoProcessor()}destroy(){this.stop()}openDebugDiaLog(){return YS(this,null,(function*(){try{if(RF)yield RF;else{let e=Date.now();RF=this.loadScript("https://web.sdk.qcloud.com/trtc/webrtc/assets/debug/debug-dialog@".concat(db,".js")),yield RF,this.log.info("download debug dialog script cost: ".concat(Date.now()-e,"ms"))}this.dialog=new TRTCDebugDialog(this._core,this.log,this.dumpLocalVideoMap,this.dumpRemoteVideoMap),this._core.kvStatManager.addSuccessEvent({key:592705})}catch(e){this._core.kvStatManager.addFailedEvent({key:592705}),this.log.error("load debug dialog script failed: ",JSON.stringify(e))}}))}closeDebugDiaLog(){var e;null==(e=this.dialog)||e.closeDialog(),this.dialog=null}addVideoProcessor(){this._core.room.videoManager.addEncodeProcessor({processor:this._core.rtcDectection.IS_INSERTABLE_STREAM_SUPPORTED?this.encodeVideo.bind(this):wF,type:1}),this._core.room.videoManager.addDecodeProcessor({processor:this._core.rtcDectection.IS_INSERTABLE_STREAM_SUPPORTED?this.decodeVideo.bind(this):SF,type:1})}removeVideoProcessor(){this._core.room.videoManager.removeEncodeProcessor({type:1}),this._core.room.videoManager.removeDecodeProcessor({type:1})}encodeVideo(e){let{frame:t,mediaType:r}=e;return wF({frame:t,onDump:()=>{if(!r)return;let e=2===r?"sub":"main",i=this.dumpLocalVideoMap[e];i&&(i.data.push(t.data),i.duration>0&&Date.now()-i.startTimestamp>1e3*i.duration&&i.onDumpEnd())}})}decodeVideo(e){let{frame:t,track:r}=e;return SF({frame:t,onDump:()=>{if(!r)return;let e=this.dumpRemoteVideoMap["".concat(r.userId,"-").concat(r.streamType)];e&&(e.data.push(t.data),e.duration>0&&Date.now()-e.startTimestamp>1e3*e.duration&&e.onDumpEnd())}})}loadScript(e){return new Promise(((t,r)=>{this.log.info("loading debug dialog from ".concat(e));let i=document.createElement("script");i.type="text/javascript",i.onload=t,i.onerror=r,i.crossOrigin="anonymous",i.src=e,document.head.append?document.head.append(i):document.getElementsByTagName("head")[0].appendChild(i)}))}};jS(BF,"Name","Debug"),jS(BF,"autoStart",!0),GS([wM({settings:{timeout:3e3,retries:3},onError(e,t,r){var i;null!=(i=null==e?void 0:e.message)&&i.includes("timeout")?t():r(e)}})],BF.prototype,"loadScript",1);var OF=BF,QF=e=>{switch(e){case"webCodecs":return 504703;case"wasm":return 504704}throw new Error("decoder type not supported")},kF=class{constructor(e,t,r){jS(this,"trackDoneOB"),jS(this,"startOB"),jS(this,"stopOB"),jS(this,"inputFrameCount",0),jS(this,"decodedFrameCount",0),jS(this,"type","auto"),jS(this,"config"),jS(this,"decoder"),jS(this,"_decodeSink");let{kvStatManager:i,trtc:n}=e;this.config=r.config,this.trackDoneOB=lL(t,uM.INIT),this.stopOB=eL(this.trackDoneOB),this.startOB=eL(),"auto"===r.type?this.type="webCodecs":this.type=r.type;let o=eL();kN(this.startOB,KN(0),Ax((e=>{let r=this.pipe(t);return o.next("STARTING"),t.log.info("decoder type: ".concat(this.type)),kN(r,QL(this.stopOB),Ox((()=>{}),(r=>{t.log.error(r),i.addFailedEvent({key:QF(this.type),error:r}),e>4?this.startOB.error(r):this.startOB.next(e+1)}))),kN(r,OL(1),Rx(yL))})),QL(this.stopOB),Ox((()=>{t.player.setOutput(),o.next("STARTED")}),(e=>{o.next("FAILED")}),(()=>{i.addSuccessEvent({key:QF(this.type)}),i.addSuccessEvent({key:504702})})))}mock(e){this._decodeSink?this._decodeSink.error(e):this.startOB.next(0)}close(e){this.stopOB.next(e)}pipe(e){return VN()((t=>YS(this,null,(function*(){this._decodeSink=t,t.defer((()=>{var e;null==(e=this.decoder)||e.close()}));let{type:r}=this;try{"webCodecs"===r&&(this.decoder=new AudioDecoder({error:r=>{e.log.error(r),t.error(4)},output:r=>{this.decodedFrameCount++,t.next(r),e.player.write(r)}})),this.decoder.configure(this.config)}catch(i){e.log.error(i),t.error("webCodecs"===r?2:6)}}))))}decodeFrame(e){var t;this.inputFrameCount++,"configured"===(null==(t=this.decoder)?void 0:t.state)&&this.decoder.decode(new EncodedAudioChunk({data:e.data,timestamp:e.timestamp,type:"key"}))}},MF={type:"object"},PF=class e{constructor(e){this.core=e,jS(this,"log"),jS(this,"contextMap",new Map),jS(this,"decodeProcessorMap",new WeakMap),this.log=e.log.createChild({id:"".concat(this.getAlias())})}getAlias(){return e.Name}getGroup(e){return e.track.userId+e.track.streamType}getName(){return e.Name}getValidateRule(e){return MF}start(e){let{track:t}=e;this.decodeProcessorMap.set(t,this.decode(e)),this.core.room.audioManager.addDecodeProcessor({processor:e=>{let{frame:t,track:r}=e;return this.decodeProcessorMap.has(r)?this.decodeProcessorMap.get(r)({frame:t,track:r}):t},type:3})}decode(e){return t=>{let{frame:r,track:i}=t;if(i!==e.track)return r;if(this.contextMap.has(i))return this.contextMap.get(i).decodeFrame(r);let n=new kF(this.core,i,e);return kN(n.trackDoneOB,OL(1),Ox((()=>{this.core.clearStarted(this,this.getGroup(e)),this.stop({track:i})}))),this.contextMap.set(i,n),n.decodeFrame(r)}}stop(e){let{track:t}=e,r=this.contextMap.get(t);r&&(r.close("stop"),this.contextMap.delete(t),0===this.contextMap.size&&this.core.room.audioManager.removeDecodeProcessor({type:3}))}update(e){let t=this.contextMap.get(e.track);if(t){if("mock"===e.type)return void t.mock(10);t.close("update"),this.contextMap.set(e.track,new kF(this.core,e.track,e))}}};jS(PF,"Name","TRTCAudioDecoder");var NF=PF,LF=0,xF=new Set,UF=null;hb("5.9.1"),YO.checkStorage(),$k();var FF={RtcError:lU,ErrorCode:oU,ErrorCodeDictionary:aU},VF=class e extends tb.EventEmitter{constructor(t,r){super(),jS(this,"_room"),jS(this,"_eventListened",new Set),jS(this,"_localVideoTrack",null),jS(this,"_localAudioTrack",null),jS(this,"_localScreenTrack",null),jS(this,"_localScreenAudioTrack",null),jS(this,"_localVideoConfig",null),jS(this,"_localScreenConfig",null),jS(this,"_localAudioConfig",null),jS(this,"_remoteVideoConfigMap",new Map),jS(this,"_remoteAudioConfigMap",new Map),jS(this,"_remoteAudioVolumeMap",new Map),jS(this,"_remoteAudioMuteMap",new Map),jS(this,"_mediaTrackMap",new WeakMap),jS(this,"_log",jO.createLogger({id:"t".concat(++LF)})),jS(this,"_plugins",new Map),jS(this,"_networkQuality",null),jS(this,"_speakerId"),jS(this,"_getPCMAbortCtrl"),this._room=new t(LS({logger:this._log,frameWorkType:e.frameWorkType},r)),this._room.videoDecodeFallbackType=r.videoDecodeFallback,this._log.debug("TRTC.create() ".concat(JSON.stringify(r,((e,t)=>"plugins"===e?t.map((e=>e.Name)):t)))),Object.defineProperties(this,{dumpAudio:{enumerable:!1,value(e){return this._room.audioManager.dump(e)}}}),r.plugins&&r.plugins.forEach((e=>{this._use(e,r.assetsPath)})),this._use(AF,r.assetsPath),this._use(dF,r.assetsPath),this._use(NF,r.assetsPath||Sb),this._use(OF),r.enableSEI&&Yk&&this._use(vF),this._room.on("audio-volume",(e=>{!e.find((e=>""===e.userId))&&this._localAudioTrack&&e.push({userId:"",volume:Math.floor(100*this._localAudioTrack.getAudioLevel())}),1===r.volumeType&&e.forEach((e=>{var t;let r=""===e.userId?this._localAudioTrack:null==(t=this.room.remotePublishedUserMap.get(e.userId))?void 0:t.remoteAudioTrack;r&&(e.volume=r.dbVolume)})),this.emit(OU.AUDIO_VOLUME,{result:e.sort(((e,t)=>t.volume-e.volume))})})),this._room.videoManager.on("error",(e=>{this._log.error(new lU({code:oU.OPERATION_FAILED,extraCode:5504,message:e.message,originError:e}))})),this._listenEvents(),this._initActiveSpeaker(),(e=>{let{emit:t}=e;e.emit=function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];try{return t.apply(e,i)}catch(e){let t=qQ({key:JQ.CATCH_HANDLER_ERROR,data:{name:"trtc",event:i[0]},addDocLink:!1});return jO.warn("".concat(t,"\n\n").concat(e.stack)),!1}}})(this)}static create(e){}static _create(t,r){var i;iU&&(iU=!1,5!==jO.getLogLevel()&&(console.info("******************************************************************************"),console.info("*   TRTC Web SDK"),console.info("*   API Document: ".concat(wb,"/en/index.html")),console.info("*   Changelog: ".concat(wb,"/en/tutorial-01-info-changelog.html")),console.info("*   Report issues: https://github.com/LiteAVSDK/TRTC_Web/issues"),console.info("******************************************************************************")),jO.info("TRTC Web SDK Version:",db),vO||jO.debug("Build Time:","2025-03-07 15:39:01"),jO.info("UA:",navigator.userAgent),jO.info("URL: ".concat(location.href).concat("IFRAME"===(null==(i=self.frameElement)?void 0:i.tagName)?" in iframe":"")),BO().then((e=>{e&&jO.info(DO)})));let n=new e(t,r||{});return xF.add(n),n}get room(){return this._room}_listenEvents(){CM(this,this._room).add("peer-join",(e=>{let{userId:t}=e;this.emit(OU.REMOTE_USER_ENTER,{userId:t})})).add("peer-leave",(e=>{this.emit(OU.REMOTE_USER_EXIT,{userId:e}),this._remoteAudioVolumeMap.delete(e)})).add("banned",(e=>{this._exitRoom().then((()=>{this.emit(OU.KICKED_OUT,{reason:e.reason})}))})).add("error",(e=>{this._exitRoom().then((()=>{this.emit(OU.ERROR,lU.convertFrom(e))}))})).add("signal-connection-state-changed",(e=>{this.emit(OU.CONNECTION_STATE_CHANGED,e)})).add("network-quality",(e=>{this._networkQuality=e;let t=xS(LS({},e),{uplinkRTT:Math.min(e.uplinkRTT,GR),downlinkRTT:Math.min(e.downlinkRTT,GR)});this.emit(OU.NETWORK_QUALITY,t)})).add("remote-published",(e=>{[e.remoteAudioTrack,e.remoteVideoTrack,e.remoteAuxiliaryTrack].forEach((t=>{CM(t,t).add("player-state-changed",(r=>{let i=xS(LS({},r),{userId:e.userId});t.kind===Vb.VIDEO&&(i.streamType=kU(t.streamType)),this.emit(t.kind===Vb.AUDIO?OU.AUDIO_PLAY_STATE_CHANGED:OU.VIDEO_PLAY_STATE_CHANGED,i)})).add("error",(e=>{e.getCode()===ib.PLAY_NOT_ALLOWED&&this.emit(OU.AUTOPLAY_FAILED,{userId:t.userId,resume:()=>t.player.resume()})}))}))})).add("remote-unpublished",(e=>{[e.remoteAudioTrack,e.remoteVideoTrack,e.remoteAuxiliaryTrack].forEach((e=>{yM(e)}))})).add("remote-publish-state-changed",(e=>{let{prevMuteState:t,muteState:r}=e,{userId:i}=r,n=t.audioAvailable,o=t.videoAvailable,{audioAvailable:a,videoAvailable:s}=r;a||this._remoteAudioConfigMap.delete(i),s||this._remoteVideoConfigMap.delete("".concat(i,"_main")),r.hasAuxiliary||this._remoteVideoConfigMap.delete("".concat(i,"_sub")),o!==s&&(s?this._onVideoAvailable({userId:i,streamType:"main"}):this._onVideoUnavailable({userId:i,streamType:"main"}),this.emit(s?OU.REMOTE_VIDEO_AVAILABLE:OU.REMOTE_VIDEO_UNAVAILABLE,{userId:i,streamType:"main"})),n!==a&&(a?this._onAudioAvailable({userId:i}):this._onAudioUnavailable({userId:i,muteState:r}),this.emit(a?OU.REMOTE_AUDIO_AVAILABLE:OU.REMOTE_AUDIO_UNAVAILABLE,{userId:i})),t.hasAuxiliary!==r.hasAuxiliary&&(r.hasAuxiliary?this._onVideoAvailable({userId:i,streamType:"sub"}):this._onVideoUnavailable({userId:i,streamType:"sub"}),this.emit(r.hasAuxiliary?OU.REMOTE_VIDEO_AVAILABLE:OU.REMOTE_VIDEO_UNAVAILABLE,{userId:i,streamType:"sub"}))})).add("sei-message",(e=>{this.emit(OU.SEI_MESSAGE,xS(LS({},e),{streamType:kU(e.streamType)}))})).add("firewall-restriction",(()=>{this.emit(OU.ERROR,new lU({code:oU.OPERATION_FAILED,extraCode:5501}))})).add("heartbeat-report",(e=>{var t,r,i,n,o,a,s;let c={2:"big",3:"small",7:"sub"},A={rtt:Math.min(e.msg_up_stream_info.msg_network_status.uint32_rtt||(null==(t=e.msg_down_stream_info[0])?void 0:t.msg_network_status.uint32_rtt)||(null==(r=this._networkQuality)?void 0:r.uplinkRTT)||(null==(i=this._networkQuality)?void 0:i.downlinkRTT)||0,GR),upLoss:(null==(n=this._networkQuality)?void 0:n.uplinkLoss)||0,downLoss:(null==(o=this._networkQuality)?void 0:o.downlinkLoss)||0,bytesSent:e.bytes_sent||0,bytesReceived:e.bytes_received||0,localStatistics:{audio:{bitrate:((null==(a=e.msg_up_stream_info.msg_audio_status)?void 0:a.uint32_audio_codec_bitrate)||0)/1e3,audioLevel:((null==(s=e.msg_up_stream_info.msg_audio_status)?void 0:s.uint32_audio_level)||0)/LQ},video:e.msg_up_stream_info.msg_video_status.filter((e=>c[e.uint32_video_stream_type])).map((e=>({bitrate:(e.uint32_video_codec_bitrate||0)/1e3,width:e.uint32_video_width,height:e.uint32_video_height,frameRate:e.uint32_video_enc_fps,videoType:c[e.uint32_video_stream_type]})))},remoteStatistics:e.msg_down_stream_info.map((e=>({userId:e.msg_user_info.str_identifier,audio:{bitrate:(e.msg_audio_status.uint32_audio_codec_bitrate||0)/1e3,audioLevel:(e.msg_audio_status.uint32_audio_level||0)/LQ},video:e.msg_video_status.map((e=>({bitrate:(e.uint32_video_codec_bitrate||0)/1e3,width:e.uint32_video_width,height:e.uint32_video_height,frameRate:e.uint32_video_dec_fps,videoType:c[e.uint32_video_stream_type]})))})))};this.emit(OU.STATISTICS,A)})).add("custom-message",(e=>{this.emit(OU.CUSTOM_MESSAGE,e)})).add("layerData",(e=>this.emit(OU.LAYER_DATA,e))).add("first-video-frame",(e=>{this.emit(OU.FIRST_VIDEO_FRAME,xS(LS({},e),{streamType:kU(e.streamType)}))})),CM(this,_P).add("audioInputAdded",(e=>{this.emit(OU.DEVICE_CHANGED,{type:"microphone",action:"add",device:e})})).add("audioInputRemoved",(e=>{this.emit(OU.DEVICE_CHANGED,{type:"microphone",action:"remove",device:e})})).add("videoInputAdded",(e=>{this.emit(OU.DEVICE_CHANGED,{type:"camera",action:"add",device:e})})).add("videoInputRemoved",(e=>{this.emit(OU.DEVICE_CHANGED,{type:"camera",action:"remove",device:e})})).add("audioOutputAdded",(e=>YS(this,null,(function*(){if(this.emit(OU.DEVICE_CHANGED,{type:"speaker",action:"add",device:e}),UF&&UF.deviceId===PR){let e=(yield SP()).find((e=>e.deviceId===PR));e&&UF.groupId!==e.groupId&&(UF=e,this.emit(OU.DEVICE_CHANGED,{type:"speaker",action:"active",device:e}))}})))).add("audioOutputRemoved",(e=>YS(this,null,(function*(){this.emit(OU.DEVICE_CHANGED,{type:"speaker",action:"remove",device:e});let t=(yield SP())[0];if(!t||!UF||UF.groupId===t.groupId)return;let r=UF.deviceId===e.deviceId,i=UF.deviceId===PR&&UF.deviceId===t.deviceId;(r||i)&&(UF=t,this.emit(OU.DEVICE_CHANGED,{type:"speaker",action:"active",device:t}))}))))}use(e){let t,r;"plugin"in e?(t=e.plugin,r=e.assetsPath):t=e,this._use(t,r||Sb)}_use(t,r){if(this._plugins.get(t.Name))return void this._log.warn("duplicate install plugin",t.Name);let i=new t(zU.call(this,{TRTC:e,room:this._room,errorModule:FF,assetsPath:r}));this._plugins.set(t.Name,i),t.autoStart&&this.startPlugin(t.Name)}enterRoom(t){return YS(this,null,(function*(){var r,i;let{scene:n="rtc",enableAutoPlayDialog:o=!0,autoReceiveAudio:a=!0,autoReceiveVideo:s=!1}=t;t.proxy&&(this._room.setProxyServer(t.proxy),!lD(t.proxy)&&t.proxy.turnServer&&(null==(i=(r=this._room).setTurnServer)||i.call(r,t.proxy.turnServer,t.proxy.iceTransportPolicy))),this._room.enableAutoPlayDialog=o,this._room.autoReceiveAudio=a,this._room.autoReceiveVideo=s,dD(t.preferHW)&&(this._room.preferHW=t.preferHW);let c={sdkAppId:t.sdkAppId,userId:t.userId,userSig:t.userSig,privateMapKey:t.privateMapKey||null,latencyLevel:t.latencyLevel,role:"audience"===t.role?21:20,roomId:t.roomId||0,strRoomId:t.strRoomId||"",businessInfo:t.businessInfo||null,streamId:null,userDefineRecordId:t.userDefineRecordId||null,frameWorkType:t.frameWorkType,component:t.component,language:t.language,priority:t.priority,useVp8:t.useVp8};t.strRoomId&&!t.roomId?this._room.useStringRoomId=!0:this._room.useStringRoomId=!1,yield this._room.join(c,n,e.frameWorkType),this._checkTrackToPublish(),pF.start()}))}exitRoom(){return YS(this,null,(function*(){return yield this._exitRoom()}))}switchRole(e,t){return YS(this,null,(function*(){null!=t&&t.privateMapKey&&(this._room.privateMapKey=t.privateMapKey),null!=t&&t.latencyLevel&&(this._room.latencyLevel=t.latencyLevel),yield this._room.switchRole(e),"anchor"===e&&this._checkTrackToPublish()}))}destroy(){yM(this),this.removeAllListeners(),this._room.destroy(),xF.delete(this),0===xF.size&&pF.destroy(),this._localAudioTrack&&this.stopLocalAudio(),this._localVideoTrack&&this.stopLocalVideo(),this._localScreenTrack&&this.stopScreenShare(),this._plugins.forEach((e=>{var t;return null==(t=e.destroy)?void 0:t.call(e)})),this._plugins.clear(),UO.off("102",this._onLocalTrackCaptured,this)}startLocalAudio(){return YS(this,arguments,(function(){var t=this;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{publish:!0};return function*(){if(t._localAudioTrack)return void t._log.warn("local audio is already started");let{publish:i=!0,mute:n,option:o}=r,a=new nN(t._room.audioManager),s={},c={muted:!0};o&&(AD(o.microphoneId)?AD(o.audioTrack)||(s.customSource=o.audioTrack):s.deviceId=o.microphoneId,o&&uD(o.captureVolume)&&a.setCaptureVolume(o.captureVolume),AD(o.profile)||(lD(o.profile)?xb[o.profile]&&a.setProfile(xb[o.profile]):a.setProfile(o.profile)),uD(o.earMonitorVolume)&&(c.muted=!(o.earMonitorVolume>0),c.volume=o.earMonitorVolume),AD(o.echoCancellation)||(a.profile.echoCancellation=o.echoCancellation),AD(o.noiseSuppression)||(a.profile.noiseSuppression=o.noiseSuppression),AD(o.autoGainControl)||(a.profile.autoGainControl=o.autoGainControl)),a.on("5",(e=>{t.emit(OU.ERROR,new lU({code:oU.DEVICE_ERROR,extraCode:5309,messageParams:{error:e}}))})),a.on("2",(e=>{t.emit(OU.DEVICE_CHANGED,{type:"microphone",action:"active",device:e})})),a.on("4",(e=>{let r;e.error&&(r=lU.convertFrom(e.error)),t.emit(OU.PUBLISH_STATE_CHANGED,xS(LS({},e),{error:r}))})),t._listenOutputTrackChanged(a),t._speakerId&&a.setAudioOutput(t._speakerId),yield a.capture(s),AD(n)||a.setMute(n),CM(a,a).add("player-state-changed",(e=>{t.emit(OU.AUDIO_PLAY_STATE_CHANGED,xS(LS({},e),{userId:""}))})),t.listeners(OU.AUDIO_FRAME).length>0&&(t._getPCMAbortCtrl=t._room.audioManager.getPCM((r=>{t.emit(e.EVENT.AUDIO_FRAME,{data:r})}))),t._getPCMAbortCtrl&&a.on("input-media-track-changed",(()=>{t._getPCMAbortCtrl&&(t._getPCMAbortCtrl.abort("inputMediaTrackChanged"),t._getPCMAbortCtrl=t._room.audioManager.getPCM((r=>{t.emit(e.EVENT.AUDIO_FRAME,{data:r})})))})),i&&t._room.isJoined&&t._room.publish(a).catch((()=>{})),t._localAudioTrack=a,t._localAudioConfig=xS(LS({},r),{publish:i}),yield t._updateAudioPlayOption({playOption:c,track:a})}()}))}updateLocalAudio(e){return YS(this,null,(function*(){if(!this._localAudioTrack||!this._localAudioConfig)return;let{publish:t,mute:r,option:i}=e,n={};i&&(i.microphoneId?yield this._localAudioTrack.switchDevice(i.microphoneId):AD(i.audioTrack)||(yield this._localAudioTrack.setInputMediaStreamTrack(i.audioTrack)),AD(i.captureVolume)||this._localAudioTrack.setCaptureVolume(i.captureVolume),AD(i.earMonitorVolume)||(n.muted=!(i.earMonitorVolume>0),n.volume=i.earMonitorVolume),yield this._localAudioTrack.update3A(i)),this._room.isJoined&&!AD(t)&&(t&&!this._localAudioConfig.publish&&this._room.publish(this._localAudioTrack).catch((()=>{})),this._localAudioConfig.publish&&!t&&this._room.unpublish(this._localAudioTrack).catch((()=>{}))),AD(r)||this._localAudioTrack.setMute(r),yield this._updateAudioPlayOption({playOption:n,track:this._localAudioTrack,prevConfig:this._localAudioConfig}),BD(this._localAudioConfig,e)}))}stopLocalAudio(){return YS(this,null,(function*(){this._localAudioTrack&&(this._room.isJoined&&(yield this._room.unpublish(this._localAudioTrack).catch((()=>{}))),this._localAudioTrack.stop(),this._localAudioTrack.close(),this._room.audioManager.removeInput(this._localAudioTrack),yM(this._localAudioTrack),this._localAudioTrack=null,this._localAudioConfig=null,this._getPCMAbortCtrl&&(this._getPCMAbortCtrl.abort("stopLocalAudio"),delete this._getPCMAbortCtrl))}))}startLocalVideo(){return YS(this,arguments,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{publish:!0,view:null};return function*(){if(e._localVideoTrack)return void e._log.warn("local video is already started");let{view:r,publish:i=!0,mute:n,option:o}=t,a=new cN(e._room.videoManager),s={},c={};o&&(o.cameraId?s.deviceId=o.cameraId:AD(o.useFrontCamera)?AD(o.videoTrack)||(s.customSource=o.videoTrack):s.facingMode=o.useFrontCamera?Vb.FACING_MODE_USER:Vb.FACING_MODE_ENVIRONMENT,o.qosPreference&&(s.contentHint=MU(o.qosPreference)),AD(o.profile)||(lD(o.profile)?Ub[o.profile]&&a.setProfile(Ub[o.profile]):a.setProfile(o.profile)),AD(o.fillMode)||(c.objectFit=o.fillMode),AD(o.mirror)||(c.mirror=o.mirror),AD(o.small)||(Dk()?lD(o.small)?a.small=Ub[o.small]:!0===o.small?a.small=Ub["120p"]:a.small=o.small:e._log.warn("small stream is not supported"))),a.once("first-video-frame",(t=>{e.emit(OU.FIRST_VIDEO_FRAME,xS(LS({},t),{streamType:kU(t.streamType)}))})),a.on("5",(t=>{e.emit(OU.ERROR,new lU({code:oU.DEVICE_ERROR,extraCode:5308,messageParams:{error:t}}))})),a.on("2",(t=>{e.emit(OU.DEVICE_CHANGED,{type:"camera",action:"active",device:t})})),a.on("4",(t=>{let r;t.error&&(r=lU.convertFrom(t.error)),e.emit(OU.PUBLISH_STATE_CHANGED,xS(LS({},t),{error:r}))})),e._listenOutputTrackChanged(a),yield a.capture(s),AD(n)||(yield a.setMute(n)),CM(a,a).add("player-state-changed",(t=>{e.emit(OU.VIDEO_PLAY_STATE_CHANGED,xS(LS({},t),{userId:"",streamType:"main"}))})),i&&e._room.isJoined&&e._room.publish(a).catch((()=>{})),e._localVideoTrack=a,e._localVideoConfig=xS(LS({},t),{view:r,publish:i}),yield e._updateVideoPlayOption({view:r,playOption:c,track:a})}()}))}updateLocalVideo(e){return YS(this,null,(function*(){if(!this._localVideoTrack||!this._localVideoConfig)return;let{view:t,publish:r,mute:i,option:n}=e,o={};if(n)if(AD(n.profile)||(lD(n.profile)?Ub[n.profile]&&this._localVideoTrack.setProfile(Ub[n.profile]):this._localVideoTrack.setProfile(n.profile),(!n.cameraId||!this._localVideoTrack.isNeedToSwitchDevice(n.cameraId))&&AD(n.useFrontCamera)&&this._localVideoTrack.applyProfile()),n.cameraId?yield this._localVideoTrack.switchDevice(n.cameraId):AD(n.useFrontCamera)?AD(n.videoTrack)||(yield this._localVideoTrack.setInputMediaStreamTrack(n.videoTrack)):yield this._localVideoTrack.switchDevice(n.useFrontCamera?Vb.FACING_MODE_USER:Vb.FACING_MODE_ENVIRONMENT),AD(n.fillMode)||(o.objectFit=n.fillMode),AD(n.mirror)||(o.mirror=n.mirror),n.qosPreference&&this._localVideoTrack.mediaTrack&&this._localVideoTrack.setContentHint(MU(n.qosPreference)),n.small){let e=!this._localVideoTrack.small;Dk()?(!0===n.small?this._localVideoTrack.small=Ub["120p"]:lD(n.small)?this._localVideoTrack.small=Ub[n.small]:this._localVideoTrack.small=n.small,this._room.videoManager.update(),e&&this._room.enableSmall(!0)):this._log.warn("small stream is not supported")}else!1===n.small&&this._localVideoTrack.small&&(delete this._localVideoTrack.small,this._room.videoManager.update(),this._room.enableSmall(!1));this._room.isJoined&&!AD(r)&&(r&&!this._localVideoConfig.publish&&this._room.publish(this._localVideoTrack).catch((()=>{})),this._localVideoConfig.publish&&!r&&this._room.unpublish(this._localVideoTrack).catch((()=>{}))),AD(i)||(yield this._localVideoTrack.setMute(i)),yield this._updateVideoPlayOption({view:t,playOption:o,track:this._localVideoTrack,prevConfig:this._localVideoConfig}),BD(this._localVideoConfig,e)}))}stopLocalVideo(){return YS(this,null,(function*(){this._localVideoTrack&&(this._room.isJoined&&(yield this._room.unpublish(this._localVideoTrack).catch((()=>{}))),this._localVideoTrack.stop(),this._localVideoTrack.close(),yM(this._localVideoTrack),this._localVideoTrack=null,this._localVideoConfig=null)}))}startScreenShare(){return YS(this,arguments,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{publish:!0,view:null};return function*(){if(e._localScreenTrack)return void e._log.warn("screen share is already started");let{view:r=null,publish:i=!0,option:n}=t,o=new lN(e._room.videoManager);o.on("4",(t=>{let r;t.error&&(r=lU.convertFrom(t.error)),e.emit(OU.PUBLISH_STATE_CHANGED,xS(LS({},t),{error:r}))})),o.once("first-video-frame",(t=>{e.emit(OU.FIRST_VIDEO_FRAME,xS(LS({},t),{streamType:kU(t.streamType)}))})),e._listenOutputTrackChanged(o),"main"===t.streamType&&(o.mediaType=4);let a=null,s={},c={};n&&(AD(n.profile)||(lD(n.profile)?Fb[n.profile]&&o.setProfile(Fb[n.profile]):o.setProfile(n.profile)),n.systemAudio&&(s.systemAudio=!0,s.echoCancellation=n.echoCancellation,s.noiseSuppression=n.noiseSuppression,s.autoGainControl=n.autoGainControl),AD(n.fillMode)||(c.objectFit=n.fillMode),n.videoTrack&&(s.videoTrack=n.videoTrack),n.audioTrack&&(s.audioTrack=n.audioTrack),n.captureElement&&(s.captureElement=n.captureElement),n.preferDisplaySurface&&(s.preferDisplaySurface=n.preferDisplaySurface),n.qosPreference&&(s.contentHint=MU(n.qosPreference)));let A=yield o.capture(s);if(o.mediaTrack.addEventListener(Vb.ENDED,(()=>{e._stopScreenShare(),e.emit(OU.SCREEN_SHARE_STOPPED)})),A.getAudioTracks()[0]&&(a=new dN(e._room.audioManager),yield a.setInputMediaStreamTrack(A.getAudioTracks()[0]),e._speakerId&&a.setAudioOutput(e._speakerId)),CM(o,o).add("player-state-changed",(t=>{e.emit(OU.VIDEO_PLAY_STATE_CHANGED,xS(LS({},t),{userId:"",streamType:"sub"}))})),i&&e._room.isJoined){let t=[o];a&&t.push(a),e._room.publish(...t).catch((()=>{}))}e._localScreenTrack=o,e._localScreenAudioTrack=a,e._localScreenConfig=xS(LS({},t),{view:r,publish:i}),yield e._updateVideoPlayOption({view:r,playOption:c,track:o})}()}))}updateScreenShare(e){return YS(this,null,(function*(){if(!this._localScreenTrack||!this._localScreenConfig)return;let{view:t,publish:r,option:i}=e,n={};if(i&&(AD(i.fillMode)||(n.objectFit=i.fillMode),i.qosPreference)){let e=MU(i.qosPreference);this._localScreenTrack.setContentHint(e)}this._room.isJoined&&!AD(r)&&(r&&!this._localScreenConfig.publish&&(this._room.publish(this._localScreenTrack).catch((()=>{})),this._localScreenAudioTrack&&this._room.publish(this._localScreenAudioTrack).catch((()=>{}))),this._localScreenConfig.publish&&!r&&(this._room.unpublish(this._localScreenTrack).catch((()=>{})),this._localScreenAudioTrack&&this._room.unpublish(this._localScreenAudioTrack).catch((()=>{})))),yield this._updateVideoPlayOption({view:t,playOption:n,track:this._localScreenTrack,prevConfig:this._localScreenConfig}),BD(this._localScreenConfig,e)}))}stopScreenShare(){return YS(this,null,(function*(){return yield this._stopScreenShare()}))}startRemoteVideo(e){return YS(this,null,(function*(){let{view:t,userId:r,streamType:i,option:n}=e,o="".concat(r,"_").concat(i);if(this._remoteVideoConfigMap.has(o))return void this._log.warn("remote video has already started. userId:".concat(r,", streamType:").concat(i));let a=this._room.remotePublishedUserMap.get(r);if(!a)return;let s={},c="main"===i?a.remoteVideoTrack:a.remoteAuxiliaryTrack;this._listenOutputTrackChanged(c),n&&(AD(n.fillMode)||(s.objectFit=n.fillMode),AD(n.mirror)||(s.mirror=n.mirror),s.canvasRender=n.canvasRender,"main"===i&&!AD(n.small)&&(!a.remoteVideoTrack.isSubscribing&&!a.remoteVideoTrack.isSubscribed&&a.remoteVideoTrack.setMediaType(n.small?8:4),this._room.changeType(n.small,c.user))),yield this._room.subscribe(c),yield this._enableVideoDecodeFallback(c,i),yield this._updateVideoPlayOption({view:t,playOption:s,track:c}),this._emitTrackEvent(c),this._remoteVideoConfigMap.set(o,{config:e}),n&&!AD(n.receiveWhenViewVisible)&&this._observeView({remoteTrack:c,view:t,receiveWhenViewVisible:n.receiveWhenViewVisible,viewRoot:null==n?void 0:n.viewRoot})}))}updateRemoteVideo(e){return YS(this,null,(function*(){var t,r;let{view:i,userId:n,streamType:o,option:a}=e,s="".concat(n,"_").concat(o),c=this._remoteVideoConfigMap.get(s);if(!c||!this._room.remotePublishedUserMap.has(n))return;let A={};a&&(AD(a.fillMode)||(A.objectFit=a.fillMode),AD(a.mirror)||(A.mirror=a.mirror));let l=null,u=this._room.remotePublishedUserMap.get(n);if("main"===o&&null!=u&&u.muteState.hasVideo&&(l=u.remoteVideoTrack),"sub"===o&&null!=u&&u.muteState.hasAuxiliary&&(l=u.remoteAuxiliaryTrack),!l)return;let{config:d}=c;"main"===o&&a&&!AD(a.small)&&this._room.changeType(a.small,l.user),yield this._updateVideoPlayOption({view:i,playOption:A,track:l,prevConfig:d}),BD(d,e);let h=AD(null==a?void 0:a.receiveWhenViewVisible)?null==(t=d.option)?void 0:t.receiveWhenViewVisible:a.receiveWhenViewVisible,g=AD(i)?d.view:i,p=AD(null==a?void 0:a.viewRoot)?null==(r=d.option)?void 0:r.viewRoot:a.viewRoot;this._observeView({remoteTrack:l,view:g,receiveWhenViewVisible:h,viewRoot:p})}))}stopRemoteVideo(e){return YS(this,null,(function*(){return this._stopRemoteVideo(e)}))}_stopRemoteVideo(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return YS(this,null,(function*(){let r=[],i=this._room.remotePublishedUserMap.get(e.userId);if(i){let{muteState:t,remoteVideoTrack:n,remoteAuxiliaryTrack:o}=i;"main"===e.streamType&&(n.stop(),t.hasVideo&&r.push(n)),"sub"===e.streamType&&(o.stop(),t.hasAuxiliary&&r.push(o))}for(let e of r)t&&(yield this._room.unsubscribe(e),this._mediaTrackMap.delete(e.outMediaTrack));let n=this._remoteVideoConfigMap.get("".concat(e.userId,"_").concat(e.streamType));n&&n.observer&&n.observer.disconnect(),this._remoteVideoConfigMap.delete("".concat(e.userId,"_").concat(e.streamType))}))}muteRemoteAudio(e,t){return YS(this,null,(function*(){this._remoteAudioMuteMap.set(e,t);try{if("*"===e)if(t)yield this._stopRemoteAudio({userId:e});else{let e=[...this._room.remotePublishedUserMap.values()];for(let t of e)t.muteState.hasAudio&&!this._remoteAudioConfigMap.has(t.userId)&&(yield this._startRemoteAudio({userId:t.userId}))}else t?yield this._stopRemoteAudio({userId:e}):this._remoteAudioConfigMap.has(e)||(yield this._startRemoteAudio({userId:e}))}catch(t){throw this._remoteAudioMuteMap.delete(e),t}}))}setRemoteAudioVolume(e,t){if("*"===e){let e=[...this._room.remotePublishedUserMap.values()];for(let r of e)this._remoteAudioVolumeMap.set(r.userId,t),r.remoteAudioTrack.isSubscribed&&this._updateAudioPlayOption({playOption:{volume:t},track:r.remoteAudioTrack})}else if(e){let r=this._room.remotePublishedUserMap.get(e);this._remoteAudioVolumeMap.set(e,t),r&&r.remoteAudioTrack.isSubscribed&&this._updateAudioPlayOption({playOption:{volume:t},track:r.remoteAudioTrack})}}startPlugin(e,t){return YS(this,null,(function*(){return e.start(t)}))}updatePlugin(e,t){return YS(this,null,(function*(){return e.update(t)}))}stopPlugin(e,t){return YS(this,null,(function*(){return e.stop(t)}))}enableAudioVolumeEvaluation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._room.enableAudioVolumeEvaluation(e,t)}on(t,r,i){return this.listeners(t).includes(r)||(this._log.debug("on",t),super.on(t,r,i),this._eventListened.add(t),t===e.EVENT.AUDIO_FRAME&&!this._getPCMAbortCtrl&&(this._getPCMAbortCtrl=this._room.audioManager.getPCM((t=>{this.emit(e.EVENT.AUDIO_FRAME,{data:t})})),this._localAudioTrack&&this._localAudioTrack.on("input-media-track-changed",(()=>{this._getPCMAbortCtrl&&(this._getPCMAbortCtrl.abort("inputMediaTrackChanged"),this._getPCMAbortCtrl=this._room.audioManager.getPCM((t=>{this.emit(e.EVENT.AUDIO_FRAME,{data:t})})))})))),this}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];try{QU.has(e)&&this._log.debug("emit ".concat(e," ").concat(JSON.stringify(r)))}catch(e){}return super.emit(e,...r)}off(t,r,i){var n,o;return this._log.debug("off",t),"*"===t?(this._eventListened.clear(),this.removeAllListeners(),null==(n=this._getPCMAbortCtrl)||n.abort("off"),delete this._getPCMAbortCtrl):(super.off(t,r,i),t===e.EVENT.AUDIO_FRAME&&(null==(o=this._getPCMAbortCtrl)||o.abort("off"),delete this._getPCMAbortCtrl)),this}getAudioTrack(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userId:"",streamType:"main"},r=null,i="main",n=!1;if(lD(t)?e=t:(e=t.userId,n=!0===t.processed,t.streamType&&(i=t.streamType)),e){let t=this._room.remotePublishedUserMap.get(e);t&&(r=t.remoteAudioTrack)}else r="sub"===i?this._localScreenAudioTrack:this._localAudioTrack;return r?n&&r.outMediaTrack&&r.outMediaTrack!==r.mediaTrack?r.outMediaTrack.clone():r.mediaTrack:null}getVideoTrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userId:"",streamType:"main"},{userId:t="",streamType:r="main",processed:i=!1}=e,n=null;if(""===t)"main"===r&&this._localVideoTrack&&(n=this._localVideoTrack),"sub"===r&&this._localScreenTrack&&(n=this._localScreenTrack);else{let e=this._room.remotePublishedUserMap.get(t);e&&(n="main"===r?e.remoteVideoTrack:e.remoteAuxiliaryTrack)}return n?i&&n.outMediaTrack&&n.outMediaTrack!==n.mediaTrack?n.outMediaTrack.clone():n.mediaTrack:null}getVideoSnapshot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{userId:t,streamType:r="main"}=e;if(t){let e=this._room.remotePublishedUserMap.get(t);if("main"===r&&null!=e&&e.muteState.hasVideo)return e.remoteVideoTrack.getVideoFrame();if("sub"===r&&null!=e&&e.muteState.hasAuxiliary)return e.remoteAuxiliaryTrack.getVideoFrame()}else{if("main"===r&&this._localVideoTrack)return this._localVideoTrack.getVideoFrame();if("sub"===r&&this._localScreenTrack)return this._localScreenTrack.getVideoFrame()}return""}_setCurrentSpeaker(e){var t,r;this._speakerId=e,null==(t=this._localAudioTrack)||t.setAudioOutput(e),null==(r=this._localScreenAudioTrack)||r.setAudioOutput(e),this._room.remotePublishedUserMap.forEach((t=>t.remoteAudioTrack.setAudioOutput(e)))}setCurrentSpeaker(e){return YS(this,null,(function*(){(yield SP()).forEach((t=>{t.deviceId===e&&(this._setCurrentSpeaker(e),this.emit(OU.DEVICE_CHANGED,{type:"speaker",action:"active",device:t}),UF=t)})),this._log.warn('the "setCurrentSpeaker" method of the instance will be deprecated in the future, please use "TRTC.setCurrentSpeaker" instead. For more information, please visit: https://web.sdk.qcloud.com/trtc/webrtc/v5/doc/en/TRTC.html#.setCurrentSpeaker')}))}_startRemoteAudio(e){return this._doStartRemoteAudio(e)}_doStartRemoteAudio(e){return YS(this,null,(function*(){let{userId:t}=e;if(this._remoteAudioConfigMap.has(t))return void this._log.warn("remote audio has already started. userId:".concat(t));let r=this._room.remotePublishedUserMap.get(t);if(!r)return;let i={},n=r.remoteAudioTrack;this._listenOutputTrackChanged(n),this._speakerId&&n.setAudioOutput(this._speakerId);try{let r=this._remoteAudioVolumeMap.get(t),o=uD(r)?r:100;i.volume=o,this._remoteAudioConfigMap.set(t,e),yield this._room.subscribe(n),kN(lL(n,"decode-failed"),QL(lL(n,uM.INIT)),Ox((()=>{this.startPlugin(NF.Name,{track:n,type:"auto",config:{codec:"opus",sampleRate:48e3,numberOfChannels:1}})}))),yield this._updateAudioPlayOption({playOption:i,track:n})}catch(e){throw this._remoteAudioConfigMap.delete(t),e}this._emitTrackEvent(n)}))}_stopRemoteAudio(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return YS(this,null,(function*(){let r=this._room.remotePublishedUserMap.get(e.userId);r&&(r.remoteAudioTrack.stop(),r.muteState.hasAudio&&t&&(yield this._room.unsubscribe(r.remoteAudioTrack)),this._mediaTrackMap.delete(r.remoteAudioTrack.outMediaTrack)),this._remoteAudioConfigMap.delete("".concat(e.userId))}))}_enableVideoDecodeFallback(e,t){let r=this._room.videoDecodeFallbackType;!r||!this._plugins.has("TRTCVideoDecoder")||(this._log.debug("remote video will fall back when decode failed"),kN(lL(e,"decode-failed"),QL(lL(e,uM.INIT)),Qx((()=>{this.startPlugin("TRTCVideoDecoder",{type:"auto",renderer:"videoFrame",track:e,config:{codec:"avc1.420028"},fallback:r})})),ux(lL(e,"decode-downgrade-state-changed")),Ox((r=>{this.emit(OU.VIDEO_DECODE_DOWNGRADE_STATE_CHANGED,xS(LS({},r),{streamType:t,userId:e.userId}))}),(e=>{this._log.error("fallback",e)}),(()=>this._log.info("fallback complete")))))}_updateVideoPlayOption(e){return YS(this,arguments,(function(e){let{view:t,playOption:r,track:i,prevConfig:n}=e;return function*(){if(i.setMirror(r.mirror),AD(t)&&n&&n.view&&!SD(r)){let e=QD(n.view);e.length>0&&(yield i.play(e,r))}if(!AD(t)){let e=QD(t);e.length>0?yield i.play(e,r):i.stop()}}()}))}_updateAudioPlayOption(e){return YS(this,arguments,(function(e){let{playOption:t={},track:r,prevConfig:i}=e;return function*(){if(!r.isPlayCalled)try{yield r.play(null,t)}catch(e){}AD(t.muted)||r.setPlayerMute(t.muted),AD(t.volume)||r.setAudioVolume(t.volume/100)}()}))}_listenOutputTrackChanged(e){0===e.listeners("output-media-track-changed").length&&e.on("output-media-track-changed",(()=>this._emitTrackEvent(e,!1)))}_emitTrackEvent(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.isRemote?e.userId:"";e.outMediaTrack&&(t&&this._mediaTrackMap.get(e.outMediaTrack)===r||(this._mediaTrackMap.set(e.outMediaTrack,r),this.emit(OU.TRACK,{userId:r,streamType:kU(e.streamType),track:e.outMediaTrack,sourceTrack:e.mediaTrack})))}_checkTrackToPublish(){var e,t,r;let i=[];if(null!=(e=this._localAudioConfig)&&e.publish&&this._localAudioTrack&&i.push(this._localAudioTrack),null!=(t=this._localVideoConfig)&&t.publish&&this._localVideoTrack&&i.push(this._localVideoTrack),null!=(r=this._localScreenConfig)&&r.publish&&(this._localScreenTrack&&i.push(this._localScreenTrack),this._localScreenAudioTrack&&i.push(this._localScreenAudioTrack)),0!==i.length)return this._room.publish(...i).catch((()=>{}))}_observeView(e){let{remoteTrack:t,view:r,receiveWhenViewVisible:i=!1,viewRoot:n}=e;if(AD(r))return;let o=this._remoteVideoConfigMap.get("".concat(t.userId,"_").concat(kU(t.streamType)));if(!o)return;let a=o.observer||void 0;if(null===r||gD(r)&&0===r.length||!i)return null==a||a.disconnect(),void(t.isSubscribed||this._room.subscribe(t).catch((()=>{})));let s=o.visibleViewMap||new Map,c=-1;(!a||a.root!==n)&&(null==a||a.disconnect(),s.clear(),a=new IntersectionObserver((e=>{e.forEach((e=>{s.set(e.target,e.isIntersecting)})),clearTimeout(c),c=window.setTimeout((()=>{[...s.values()].find((e=>e))?t.isSubscribed||this._room.subscribe(t).catch((()=>{})):t.isSubscribed&&this._room.unsubscribe(t).catch((()=>{}))}),200)}),{root:n}));let A=new Set(QD(r));s.forEach(((e,t)=>{A.has(t)||(a.unobserve(t),s.delete(t))})),A.forEach((e=>{s.set(e,!0),a.observe(e)})),a.takeRecords().forEach((e=>{s.set(e.target,e.isIntersecting)})),o.visibleViewMap=s,o.observer=a}_exitRoom(){return YS(this,null,(function*(){this._room.isJoined&&(yield this._room.leave()),new Set([...this._remoteAudioConfigMap.keys(),...this._remoteAudioMuteMap.keys()]).forEach((e=>{this._stopRemoteAudio({userId:e}).catch()})),[...this._remoteVideoConfigMap.keys()].forEach((e=>{let t=e.includes("main")?"main":"sub",r=e.split("_".concat(t))[0];r&&this._stopRemoteVideo({userId:r,streamType:t}).catch()})),this._remoteVideoConfigMap.clear(),this._remoteAudioConfigMap.clear(),this._remoteAudioMuteMap.clear(),this._remoteAudioVolumeMap.clear(),function(e){let t=qU.get(e);t&&(t.forEach((e=>clearTimeout(e))),qU.delete(e))}(this),this._room.remotePublishedUserMap.forEach((e=>{yM(e.remoteAudioTrack),yM(e.remoteVideoTrack),yM(e.remoteAuxiliaryTrack)}))}))}_stopScreenShare(){return YS(this,null,(function*(){var e;if(this._localScreenTrack){if(this._room.isJoined){let t=[this._localScreenTrack];this._localScreenAudioTrack&&t.push(this._localScreenAudioTrack),yield null==(e=this._room)?void 0:e.unpublish(...t).catch((()=>{}))}this._localScreenTrack.stop(),this._localScreenTrack.close(),this._localScreenAudioTrack&&(this._localScreenAudioTrack.stop(),this._localScreenAudioTrack.close(),this._room.audioManager.removeInput(this._localScreenAudioTrack),this._localScreenAudioTrack=null),yM(this._localScreenTrack),this._localScreenTrack=null,this._localScreenConfig=null}}))}_onLocalTrackCaptured(e){let{track:t}=e;"audio"===t.kind&&(!UF||CP(UF))&&(this._initActiveSpeaker(),UO.off("102",this._onLocalTrackCaptured,this))}_initActiveSpeaker(){return YS(this,null,(function*(){if(UF&&!CP(UF))this.emit(OU.DEVICE_CHANGED,{type:"speaker",action:"active",device:UF});else{let e=yield SP();e[0]&&!CP(e[0])?(UF=e[0],this.emit(OU.DEVICE_CHANGED,{type:"speaker",action:"active",device:e[0]})):UO.on("102",this._onLocalTrackCaptured,this)}}))}_onAudioAvailable(e){let{userId:t}=e,r=this._remoteAudioMuteMap.has(t)?this._remoteAudioMuteMap.get(t):this._remoteAudioMuteMap.get("*");(!1===r||this._room.autoReceiveAudio&&!r)&&this._doStartRemoteAudio({userId:t}).catch((()=>{}))}_onVideoAvailable(e){let{userId:t,streamType:r}=e;if(!this._room.autoReceiveVideo)return;let i=this._room.remotePublishedUserMap.get(t);if(i){let e="main"===r?i.remoteVideoTrack:i.remoteAuxiliaryTrack,t=[e];this._room.autoReceiveAudio&&i.remoteAudioTrack.isAvailable&&t.push(i.remoteAudioTrack),this._room.subscribe(...t).then((()=>{this._emitTrackEvent(e)})).catch((()=>{}))}}_onAudioUnavailable(e){let{userId:t,muteState:r}=e;r.hasAudio&&r.audioMuted||this._stopRemoteAudio({userId:t},!1).catch((()=>{}))}_onVideoUnavailable(e){let{userId:t,streamType:r}=e;this._stopRemoteVideo({userId:t,streamType:r},!1).catch((()=>{}))}sendSEIMessage(e,t){var r;let i=this._plugins.get("SEI");i&&(i.update({buffer:e,options:xS(LS({seiPayloadType:243},t),{small:!(null==(r=this._localVideoTrack)||!r.small)})}),sk.addCount({key:5e5,useUV:!0}))}sendCustomMessage(e){var t,r;null==(r=(t=this._room).sendCustomMessage)||r.call(t,e),sk.addCount({key:500001,useUV:!0})}static setLogLevel(e,t){jO.setLogLevel(e),AD(t)||(t?jO.enableUploadLog():jO.disableUploadLog())}static isSupported(){return Ik()}static getCameraList(){return vP(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}static getMicrophoneList(){return TP(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}static getSpeakerList(){return SP(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}static setCurrentSpeaker(t){return YS(this,null,(function*(){if(!lB||t!==nU.SPEAKER&&t!==nU.HEADSET)(yield SP()).forEach((e=>{e.deviceId===t&&(xF.forEach((r=>{r._setCurrentSpeaker(t),r.emit(OU.DEVICE_CHANGED,{type:"speaker",action:"active",device:e})})),UF=e)}));else{let r=yield e.getMicrophoneList(),i="";if(r.forEach((e=>{e.label===t&&(i=e.deviceId)})),!i)return;xF.forEach((e=>YS(this,null,(function*(){e._localAudioTrack&&(yield e.updateLocalAudio({option:{microphoneId:i}}))}))))}}))}static _addKVStat(e){let{type:t,key:r,value:i,base:n,useUV:o,version:a}=e;switch(a&&(ak.version=a),t){case"count":ak.addCount({key:r,useUV:o});break;case"enum":ak.addEnum({key:r,value:i,useUV:o});break;case"number":ak.addNumber({key:r,value:i,split:n})}}};jS(VF,"_loggerManager",jO),jS(VF,"EVENT",OU),jS(VF,"ERROR_CODE",oU),jS(VF,"TYPE",nU),jS(VF,"frameWorkType",30),GS([rF({replaceArg:e=>({argIndex:0,value:{name:"plugin"in e?e.plugin.Name:e.Name,assetsPath:"assetsPath"in e?null==e?void 0:e.assetsPath:"default"}})})],VF.prototype,"use",1),GS([ZU(IU.TRTC.enterRoom),RU("room",((e,t)=>{let[r]=e,[i]=t;return(r.roomId||r.strRoomId)===(i.roomId||i.strRoomId)&&r.userId===i.userId&&r.sdkAppId===i.sdkAppId})),YP((e=>function(t){return this._log.setUserId(t.userId),this._log.setSdkAppId(t.sdkAppId),e.call(this,t)})),rF()],VF.prototype,"enterRoom",1),GS([rF()],VF.prototype,"exitRoom",1),GS([ZU(IU.TRTC.switchRole),DU("room",{merge:(e,t)=>t}),rF()],VF.prototype,"switchRole",1),GS([rF()],VF.prototype,"destroy",1),GS([ZU(IU.TRTC.startLocalAudio),RU("audio",((e,t)=>{let[r]=e,[i]=t;var n,o;return(null==(n=null==r?void 0:r.option)?void 0:n.microphoneId)===(null==(o=null==i?void 0:i.option)?void 0:o.microphoneId)})),rF()],VF.prototype,"startLocalAudio",1),GS([ZU(IU.TRTC.updateLocalAudio),DU("audio",{debounce:{delay:200,getKey:()=>"".concat(LF,"-localAudio"),isNeedToDebounce:e=>{var t;return!AD(null==(t=e.option)?void 0:t.captureVolume)}}}),rF()],VF.prototype,"updateLocalAudio",1),GS([BU("audio"),rF()],VF.prototype,"stopLocalAudio",1),GS([ZU(IU.TRTC.startLocalVideo),RU("video",((e,t)=>{let[r]=e,[i]=t;var n,o;return(null==(n=null==r?void 0:r.option)?void 0:n.cameraId)===(null==(o=null==i?void 0:i.option)?void 0:o.cameraId)})),rF()],VF.prototype,"startLocalVideo",1),GS([ZU(IU.TRTC.updateLocalVideo),DU("video"),rF()],VF.prototype,"updateLocalVideo",1),GS([BU("video"),rF()],VF.prototype,"stopLocalVideo",1),GS([ZU(IU.TRTC.startScreenShare),RU("screen",(()=>!0)),rF()],VF.prototype,"startScreenShare",1),GS([ZU(IU.TRTC.updateScreenShare),DU("screen"),rF()],VF.prototype,"updateScreenShare",1),GS([rF()],VF.prototype,"stopScreenShare",1),GS([ZU(IU.TRTC.startRemoteVideo),RU((e=>"v".concat(e.userId).concat(e.streamType)),(()=>!0)),rF({getRemoteId:e=>"".concat(e.userId,"_").concat(e.streamType)})],VF.prototype,"startRemoteVideo",1),GS([ZU(IU.TRTC.updateRemoteVideo),DU((e=>"v".concat(e.userId).concat(e.streamType))),rF({getRemoteId:e=>"".concat(e.userId,"_").concat(e.streamType)})],VF.prototype,"updateRemoteVideo",1),GS([ZU(IU.TRTC.stopRemoteVideo),YP((e=>function(t){return YS(this,null,(function*(){if("*"===t.userId){let e=[];return this._room.remotePublishedUserMap.forEach((t=>{this._remoteVideoConfigMap.has("".concat(t.userId,"_main"))&&e.push(this.stopRemoteVideo({streamType:"main",userId:t.userId}).catch((()=>{}))),this._remoteVideoConfigMap.has("".concat(t.userId,"_sub"))&&e.push(this.stopRemoteVideo({streamType:"sub",userId:t.userId}).catch((()=>{})))})),Promise.all(e)}return e.call(this,t)}))})),rF({getRemoteId:e=>"".concat(e.userId,"_").concat(e.streamType)})],VF.prototype,"stopRemoteVideo",1),GS([BU((e=>"v".concat(e.userId).concat(e.streamType)))],VF.prototype,"_stopRemoteVideo",1),GS([ZU(...IU.TRTC.muteRemoteAudio),rF({getRemoteId:e=>e})],VF.prototype,"muteRemoteAudio",1),GS([$U(...IU.TRTC.setRemoteAudioVolume),YP(((e,t)=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];let n=qU.get(this);n||(n=new Map,qU.set(this,n));let o=(e=>e)(...r),a=n.get(o);if(!a||a<=0){e.apply(this,r);let t=setTimeout((()=>{var e;null==(e=qU.get(this))||e.delete(o)}),200);n.set(o,t)}else{clearTimeout(a);let t=window.setTimeout((()=>{var t;e.apply(this,r),null==(t=qU.get(this))||t.delete(o)}),200);n.set(o,t)}})),rF({getRemoteId:e=>e})],VF.prototype,"setRemoteAudioVolume",1),GS([iF("start"),jP((e=>{var t;return null==(t=e.afterStart)?void 0:t.call(e)})),RU(((e,t)=>e.disableRandomCall?null:e.getAlias()+e.getGroup(t))),rF({replaceArg:e=>({argIndex:0,value:e.getName()}),getKVReportKey:e=>rk[e.getName()],ignoreLog:e=>"Debug"===e.getName()})],VF.prototype,"startPlugin",1),GS([iF("update"),DU(((e,t)=>e.disableRandomCall?null:e.getAlias()+e.getGroup(t))),rF({replaceArg:e=>({argIndex:0,value:e.getName()}),getKVReportKey:e=>ik[e.getName()]})],VF.prototype,"updatePlugin",1),GS([iF("stop"),BU(((e,t)=>{if(e.disableRandomCall)return null;let r=e.getGroup(t),i=e.getAlias();return"*"===r?new RegExp("".concat(i,".*")):i+r})),rF({replaceArg:e=>({argIndex:0,value:e.getName()}),getKVReportKey:e=>nk[e.getName()]})],VF.prototype,"stopPlugin",1),GS([$U(...IU.TRTC.enableAudioVolumeEvaluation)],VF.prototype,"enableAudioVolumeEvaluation",1),GS([rF()],VF.prototype,"getVideoSnapshot",1),GS([rF()],VF.prototype,"_setCurrentSpeaker",1),GS([RU((e=>"a".concat(e.userId)),(()=>!0))],VF.prototype,"_startRemoteAudio",1),GS([YP((e=>function(t){return YS(this,null,(function*(){return"*"===t.userId?Promise.all([...this._room.remotePublishedUserMap.values()].map((e=>this._stopRemoteAudio(xS(LS({},t),{userId:e.userId})).catch((()=>{}))))):e.call(this,t)}))})),BU((e=>"a".concat(e.userId)))],VF.prototype,"_stopRemoteAudio",1),GS([BU("room")],VF.prototype,"_exitRoom",1),GS([BU("screen")],VF.prototype,"_stopScreenShare",1),GS([ZU(...IU.TRTC.sendSEIMessage),tU({timesInSecond:30,maxSizeInSecond:8e3,getSize:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[0].byteLength}})],VF.prototype,"sendSEIMessage",1),GS([ZU(IU.TRTC.sendCustomMessage),tU({timesInSecond:30,maxSizeInSecond:8e3,getSize:e=>e.data.byteLength})],VF.prototype,"sendCustomMessage",1),GS([ZU(IU.TRTC.create)],VF,"_create",1);var GF=VF,jF=class{constructor(){jS(this,"_set",new Set),UO.on(VO.LEAVE_SUCCESS,this.delete,this)}add(e){let{room:t,roomId:r}=e;if("rtc"===t.scene)return;let i=this.getKey(t.userId,r||t.roomId,t.sdkAppId,t.useStringRoomId);this._set.add(i)}delete(e){let{room:t,roomId:r}=e;if("rtc"===t.scene)return;let i=this.getKey(t.userId,t.roomId||r,t.sdkAppId,t.useStringRoomId);this._set.delete(i)}getKey(e,t,r,i){return"".concat(r,"_").concat(t,"_").concat(e,"_").concat(i)}isJoined(e){let{userId:t,roomId:r,sdkAppId:i,room:n}=e;return"rtc"!==n.scene&&this._set.has(this.getKey(t,r,i,n.useStringRoomId))}};function HF(){return YS(this,null,(function*(){let e,t;try{let t=yield TP();e=t&&t.length}catch(e){}try{let e=yield vP();t=e&&e.length}catch(e){}let r={microphone:e,camera:t},{isH264EncodeSupported:i,isVp8EncodeSupported:n,isH264DecodeSupported:o,isVp8DecodeSupported:a}=this.checkSystemResult.detail,s=WO.basis(),c={webRTC:s.isWebRTCSupported,getUserMedia:s.isGetUserMediaSupported,webSocket:s.isWebSocketsSupported,screenShare:s.isScreenShareSupported,webAudio:s.isWebAudioSupported,h264Encode:i,h264Decode:o,vp8Encode:n,vp8Decode:a},A={browser:s.browser,os:s.os,trtc:c,devices:r},l={isWebCodecSupported:s.isWebCodecSupported,isMediaSessionSupported:s.isMediaSessionSupported,isWebTransportSupported:s.isWebTransportSupported};TM.uploadEvent({log:"trtcstats-".concat(JSON.stringify(A)),userId:this.userId}),this._log.info("TrtcStats-".concat(JSON.stringify(A))),TM.uploadEvent({log:"trtcadvancedstats-".concat(JSON.stringify(l)),userId:this.userId})}))}var YF=VS(WS()),WF="3",JF="5",XF={CLIENT_BANNED:9,CHANNEL_SETUP_RESULT:19,CHANNEL_RECONNECT_RESULT:514,JOIN_ROOM_RESULT:20,PEER_JOIN:4134,PEER_LEAVE:4135,STREAM_ADDED:16,STREAM_REMOVED:18,UPLINK_NETWORK_STATS:22,UPDATE_REMOTE_MUTE_STAT:23,PUBLISH_RESULT:4098,PUBLISH_STATE_CHANGE_RESULT:4112,UNPUBLISH_RESULT:4100,SUBSCRIBE_RESULT:4102,UNSUBSCRIBE_RESULT:4104,SUBSCRIBE_CHANGE_RESULT:4106,MUTE_RESULT:4108,UPDATE_OFFER_RESULT:4128,START_PUBLISH_TENCENT_CDN_RES:1286,STOP_PUBLISH_TENCENT_CDN_RES:1288,START_PUBLISH_GIVEN_CDN_RES:777,STOP_PUBLISH_GIVEN_CDN_RES:779,START_MIX_TRANSCODE_RES:781,STOP_MIX_TRANSCODE_RES:783,START_PUBLISH_CDN_STREAM_RES:8196,UPDATE_PUBLISH_CDN_STREAM_RES:8198,STOP_PUBLISH_CDN_STREAM_RES:8200,USER_LIST_RES:4137,SWITCH_ROLE_RES:4110,UPDATE_CONSTRAINT_CONFIG_RES:772,REBUILD_PEER_CONNECTION_RES:4150,SPC_PUBLISH_RESULT:4146,SPC_SUBSCRIBE_RESULT:4156,ABILITY_STATUS_REPORT_RESULT:4158,SERVER_FIRST_PACKAGE_RECEIVED:5e3,RECEIVE_CUSTOM_MSG:4140},KF=[XF.UPDATE_REMOTE_MUTE_STAT,XF.UPLINK_NETWORK_STATS,XF.USER_LIST_RES,XF.MUTE_RESULT,XF.SERVER_FIRST_PACKAGE_RECEIVED,XF.RECEIVE_CUSTOM_MSG],zF={CLIENT_BANNED:"client-banned",CHANNEL_SETUP_RESULT:"channel-setup-result",CHANNEL_RECONNECT_RESULT:"channel-reconnect-result",JOIN_ROOM_RESULT:"join-room-result",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",UPLINK_NETWORK_STATS:"uplink-network-stats",UPDATE_REMOTE_MUTE_STAT:"update-remote-mute-stat",PUBLISH_RESULT:"publish-result",PUBLISH_STATE_CHANGE_RESULT:"publish-state-change-result",UNPUBLISH_RESULT:"unpublish-result",SUBSCRIBE_RESULT:"subscribe-result",SUBSCRIBE_CHANGE_RESULT:"subscribe-change-result",UNSUBSCRIBE_RESULT:"unsubscribe-result",UPDATE_OFFER_RESULT:"update-offer-result",START_PUBLISH_TENCENT_CDN_RES:"start-publish-tencent-cdn-res",STOP_PUBLISH_TENCENT_CDN_RES:"stop-publish-tencent-cdn-res",START_PUBLISH_GIVEN_CDN_RES:"start-publish-given-cdn-res",STOP_PUBLISH_GIVEN_CDN_RES:"stop-publish-given-cdn-res",START_MIX_TRANSCODE_RES:"start-mix-transcode-res",STOP_MIX_TRANSCODE_RES:"stop-mix-transcode-res",START_PUBLISH_CDN_STREAM_RES:"start-publish-cdn-stream-res",UPDATE_PUBLISH_CDN_STREAM_RES:"update-publish-cdn-stream-res",STOP_PUBLISH_CDN_STREAM_RES:"stop-publish-cdn-stream-res",USER_LIST_RES:"user-list-res",SWITCH_ROLE_RES:"switch_role_res",MUTE_RESULT:"mute-result",UPDATE_CONSTRAINT_CONFIG_RES:"update-contraint-config-res",REBUILD_PEER_CONNECTION_RES:"rebuild-pc-res",SPC_PUBLISH_RESULT:"spc-publish-result",SPC_SUBSCRIBE_RESULT:"spc-subscribe-result",ABILITY_STATUS_REPORT_RESULT:"ability-status-report",SERVER_FIRST_PACKAGE_RECEIVED:"first-pkg-received",RECEIVE_CUSTOM_MSG:"receive-custom-msg"},qF="mute_uplink",ZF="publish_state_change",$F="unpublish",eV="unsubscribe",tV="subscribe_change",rV="update_constraint_config",iV=new Set,nV=class extends YF.default{constructor(e){var t,r;super(),jS(this,"room"),jS(this,"url"),jS(this,"backupUrl"),jS(this,"race"),jS(this,"destroyed",!1),jS(this,"_socketInUse"),jS(this,"_socket"),jS(this,"_backupSocket"),jS(this,"_signalInfo",{tinyId:void 0,clientIp:"",signalIp:"",relayIp:"",relayInnerIp:"",relayPort:0,endReportExtend:void 0}),jS(this,"_currentState","DISCONNECTED"),jS(this,"_isReconnecting",!1),jS(this,"_seq",0),jS(this,"_log"),jS(this,"_lastMessageTime",-1),jS(this,"_connnectStartTime",-1),jS(this,"_stopConnectRetry"),jS(this,"bytesSent",0),jS(this,"bytesReceived",0),jS(this,"keepAlive",!1),jS(this,"signalDomainWhenUnifiedProxy"),jS(this,"stopKeepAliveTimeout"),jS(this,"rtt",0),this.room=e.room,this.race=!!AD(e.race)||e.race,this.signalDomainWhenUnifiedProxy=e.signalDomainWhenUnifiedProxy,((null==(r=null==(t=this.room.scheduleResult)?void 0:t.config)?void 0:r.keepAliveClient)||0)-iV.size>0&&this.room.enableSPC&&(this.keepAlive=!0,iV.add(this)),this.url=e.url,this.backupUrl=e.backupUrl,this._seq=0,this._log=jO.createLogger({id:"ws",userId:this.userId,sdkAppId:this.sdkAppId}),this.onmessage=this.onmessage.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this)}get urlParam(){let e="?sdkAppId=".concat(encodeURIComponent(this.sdkAppId),"&userId=").concat(encodeURIComponent(this.userId),"&userSig=").concat(encodeURIComponent(this.userSig),"&keepAlive=").concat(encodeURIComponent(Number(this.keepAlive)));this.signalDomainWhenUnifiedProxy&&(e+="&signalDomain=".concat(encodeURIComponent(this.signalDomainWhenUnifiedProxy)));let t=new URLSearchParams(location.search).get("clientIp");return t&&(e+="&clientIp=".concat(t)),this.race?"".concat(e,"&race=1"):e}get _urlWithParam(){return"".concat(this.url).concat(this.race?"/v2/ws":"").concat(this.urlParam)}get _backupUrlWithParam(){return"".concat(this.backupUrl).concat(this.race?"/v2/ws":"").concat(this.urlParam)}get isConnected(){return"CONNECTED"===this._currentState}get isConnecting(){return"CONNECTING"===this._currentState}get sdkAppId(){return this.room.sdkAppId}get userId(){return this.room.userId}get userSig(){return this.room.userSig}get isOnline(){return"CONNECTED"===this._currentState&&Date.now()-this._lastMessageTime<12e3}connect(){return YS(this,arguments,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return function*(){if(e.isConnected)return Promise.resolve();e._log.info("connect to [".concat(e.url,", ").concat(e.backupUrl,"]").concat(t?" timeout: ".concat(t):""," keepAlive: ").concat(Number(e.keepAlive))),e.emitConnectionStateChanged("CONNECTING"),e._connnectStartTime=yD();let r=[e.connectWS({url:e._urlWithParam,isMain:!0,timeout:t})];e.race&&e._backupUrlWithParam!==e._urlWithParam&&r.push(e.connectWS({url:e._backupUrlWithParam,isMain:!1,timeout:t})),e._socketInUse=yield CD(r),e.unbindAndCloseSocket(e._socketInUse===e._socket?Vb.BACKUP:Vb.MAIN),e.emitConnectionStateChanged("CONNECTED")}()}))}connectWS(e){let{url:t,timeout:r,isMain:i}=e,n=new WebSocket(t);this.bindSocket(n),i?this._socket=n:this._backupSocket=n;let o=-1;return new Promise(((e,t)=>{n.onclose=t,n.onerror=t,n.onopen=()=>e(n),r&&(o=setTimeout((()=>{this.unbindAndCloseSocket(i?Vb.MAIN:Vb.BACKUP),t(new ob({code:ib.SIGNAL_CHANNEL_SETUP_FAILED,message:"ws connect timeout"}))}),r))})).finally((()=>{n.onclose=null,n.onerror=null,n.onopen=null,clearTimeout(o)}))}bindSocket(e){e.addEventListener("close",this.onclose),e.addEventListener("error",this.onerror),e.addEventListener("message",this.onmessage)}unbindSocket(e){e.removeEventListener("close",this.onclose),e.removeEventListener("error",this.onerror),e.removeEventListener("message",this.onmessage)}unbindAndCloseSocket(e){if(e===Vb.MAIN){if(this._socket){this.unbindSocket(this._socket);try{this._socket.close(1e3)}catch(e){}this._socket=null}}else if(this._backupSocket){this.unbindSocket(this._backupSocket);try{this._backupSocket.close(1e3)}catch(e){}this._backupSocket=null}}onclose(e){e.target===this._socketInUse&&(this._log.warn("".concat(e.target===this._socket?"main":"backup"," is closed code:").concat(e.code," ").concat(e.reason)),this.emitConnectionStateChanged("DISCONNECTED"),(!e.wasClean||1e3!==e.code)&&this.startReconnection(),this.room.isJoining&&this.emit(JF,new ob({code:ib.SIGNAL_CHANNEL_SETUP_FAILED,message:"websocket onclose"})))}onerror(e){this._log.error("".concat(e.target===this._socket?"main":"backup"," error observed")),this.emitConnectionStateChanged("DISCONNECTED"),e.target===this._socketInUse&&(this.unbindAndCloseSocket(Vb.MAIN),this.unbindAndCloseSocket(Vb.BACKUP),this._socketInUse=null,this.reconnect()),this.room.isJoining&&this.emit(JF,new ob({code:ib.SIGNAL_CHANNEL_SETUP_FAILED,message:"websocket onerror"}))}onmessage(e){if(!this.isConnected)return;this._lastMessageTime=Date.now(),this.bytesReceived+=LD(e.data);let t=JSON.parse(e.data),{cmd:r,data:i}=t,n=Object.values(XF),o=Object.keys(XF)[n.indexOf(r)],a=zF[o]||r;switch(KF.includes(r)||(this._log.debug("received ".concat(r," msg: ").concat(e.data)),a&&this._log.info("Received event: [ ".concat(a," ]"))),r){case XF.CHANNEL_SETUP_RESULT:if(0===t.code)this._signalInfo.clientIp=i.clientIp,this._signalInfo.signalIp=i.signalInnerIp,i.svrTime&&function(e){ab=e-(new Date).getTime();let t=new Date;t.setTime(e),jO.info("baseTime from server: ".concat(t," offset: ").concat(ab))}(i.svrTime),this._log.info("ChannelSetup Success ".concat(yD()-this._connnectStartTime)),sk.addSuccessEvent({key:521701,cost:yD()-this._connnectStartTime}),this._connnectStartTime=-1,this.emit("1",{signalInfo:this._signalInfo});else{let e=new ob({code:ib.SIGNAL_CHANNEL_SETUP_FAILED,extraCode:t.code,message:qQ({key:JQ.SIGNAL_CHANNEL_SETUP_FAILED,data:{errorCode:t.code,errorMsg:t.message}})});this._log.error("".concat(t.code,", ").concat(t.message)),this.close(),sk.addFailedEvent({key:521701,error:e}),this.emit(JF,e)}break;case XF.JOIN_ROOM_RESULT:0===t.code&&(this._signalInfo.relayIp=i.relayOuterIp,this._signalInfo.relayInnerIp=i.relayInnerIp,this._signalInfo.relayPort=i.relayPort,this._signalInfo.tinyId=t.tinyId,this._signalInfo.endReportExtend=i.endReportExtend,this._log.info("signalIp:".concat(this._signalInfo.signalIp," clientIp:").concat(this._signalInfo.clientIp," relayIp: ").concat(this._signalInfo.relayIp))),this.emit(a,{data:t});break;default:this.emit(String(a),{data:t})}}reGetSignalChannelUrl(){return YS(this,null,(function*(){try{if(!this.room.joinParams)return;UU(!0),yield this.room.schedule(this.room.joinParams);let{mainUrl:e,backupUrl:t}=this.room.getSignalChannelUrl();this.url=e,this.backupUrl=t}catch(e){}}))}startReconnection(){if(!this._socketInUse)return;this._socketInUse.onclose=null,this._socketInUse.close(4011);let e=this._socketInUse===this._socket;this.unbindAndCloseSocket(e?Vb.MAIN:Vb.BACKUP),this._socketInUse=null,this.emitConnectionStateChanged("DISCONNECTED"),this.reconnect()}reconnect(){return YS(this,null,(function*(){if(!this._isReconnecting){if(!this.room.isJoined&&this.keepAlive)return void this.close();this._isReconnecting=!0;try{this._log.warn("reconnect"),yield this.connect();let{roomId:e,useStringRoomId:t}=this.room,{relayIp:r,relayInnerIp:i,relayPort:n}=this._signalInfo,{data:o}=yield this.sendWaitForResponse({command:"reconnect",data:{roomId:e,useStringRoomId:t,relayInnerIp:i,relayOuterIp:r,relayPort:n},responseCommand:zF.CHANNEL_RECONNECT_RESULT});0===o.code?(this._log.warn("reconnect success"),this.stopReconnection(),sk.addSuccessEvent({key:521702,cost:yD()-this._connnectStartTime}),this._connnectStartTime=-1,this.room.syncUserList(),this.room.checkConnectionsToReconnect()):(sk.addFailedEvent({key:521702,error:o.code}),this._log.warn("reconnect failed, ".concat(o.code," ").concat(o.message)),this.room.reJoin())}catch(e){this._log.error(e),this.room.reJoin()}}}))}send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isConnected&&!this.room.isLeft){let r={cmd:e,data:t,userId:this.userId,tinyId:this._signalInfo.tinyId,seq:++this._seq},i=JSON.stringify(r);return this._socketInUse.send(i),this.bytesSent+=LD(i),r.seq}}sendWaitForResponse(e){let{command:t,data:r,timeout:i=5e3,responseCommand:n,commandDesc:o,enableLog:a=!0,addReceiveTime:s=!1}=e;return new Promise(((e,c)=>{let A=setTimeout((()=>{this.off(n,l);let e=new ob({code:ib.API_CALL_TIMEOUT,message:qQ({key:JQ.API_CALL_TIMEOUT,data:{commandDesc:o,command:t}})});a&&this._log.warn(e),c(e)}),i),l=t=>{t.data.seq===u&&(clearTimeout(A),this.off(n,l),s&&(t.data.receiveTime=Date.now()),e(t))};this.on(n,l);let u=this.send(t,r)}))}sendWaitForResponseWithRetry(e){let{commandDesc:t,command:r,retries:i=0,retryTimeout:n=0}=e;return zD({retryFunction:this.sendWaitForResponse,onError:e=>{let{retry:t}=e;this.isOnline?t():(this._log.warn("retry ".concat(r," when connected")),this.once(WF,t))},onRetrying:e=>{this._log.warn("".concat(t||r," timeout observed, retrying [").concat(e,"/").concat(i,"]"))},settings:{retries:i,timeout:n},context:this})(e)}getCurrentState(){return this._currentState}getSignalInfo(){return this._signalInfo}stopReconnection(){this._isReconnecting=!1,this._stopConnectRetry&&this._stopConnectRetry()}close(){this._log.info("closed"),clearTimeout(this.stopKeepAliveTimeout),iV.delete(this),this.stopReconnection(),this._signalInfo={tinyId:void 0,clientIp:"",signalIp:"",relayIp:"",relayInnerIp:"",relayPort:0,endReportExtend:void 0},this._socketInUse=null,this.bytesSent=0,this.bytesReceived=0,this._stopConnectRetry&&this._stopConnectRetry(),this.unbindAndCloseSocket(Vb.MAIN),this.unbindAndCloseSocket(Vb.BACKUP),this.emitConnectionStateChanged("DISCONNECTED")}destroy(){this.close(),this.destroyed=!0}stopKeepAliveIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3600;if(this.keepAlive){this._log.info("stopKeepAlive in ".concat(e,"s")),this.stopKeepAliveTimeout=setTimeout((()=>{this.keepAlive=!1,this._log.info("close due to not used ".concat(e,"s")),this.close(),this.off(zF.JOIN_ROOM_RESULT,t)}),1e3*e);let t=e=>{0===e.data.code&&(this._log.info("stopKeepAlive clear timeout"),clearTimeout(this.stopKeepAliveTimeout),this.off(zF.JOIN_ROOM_RESULT,t))};this.on(zF.JOIN_ROOM_RESULT,t)}}emitConnectionStateChanged(e){e!==this._currentState&&(this._log.info("".concat(this._currentState," -> ").concat(e)),this.emit("2",{prevState:this._currentState,state:e}),this._currentState=e,"CONNECTED"===e?this.emit(WF):"DISCONNECTED"===e&&this.emit("6"))}};GS([wM({settings:{retries:1/0,timeout:2e3},onError(e,t){!this.room.isDestroyed&&!this.destroyed&&t()},onRetrying(e,t){this._log.warn("retrying to connect ".concat(e)),e>=3&&e%3==0&&this.reGetSignalChannelUrl(),t&&(this._stopConnectRetry=t,(this.room.isDestroyed||this.destroyed)&&t())}})],nV.prototype,"connect",1);var oV=VS(WS()),aV=0,sV=!1,cV=new Set,AV=!1,lV=class{constructor(e){jS(this,"userId"),jS(this,"tinyId"),jS(this,"_sdpSemantics"),jS(this,"_isUplink"),jS(this,"_room"),jS(this,"_log"),jS(this,"_signalChannel"),jS(this,"_isErrorObserved",!1),jS(this,"_waitForPeerConnectionConnectedPromise"),jS(this,"_waitForPeerConnectionConnectedPromiseReject",null),jS(this,"_peerConnection",null),jS(this,"_emitter",new oV.default),jS(this,"_currentState","DISCONNECTED"),jS(this,"_isReconnecting",!1),jS(this,"_reconnectionCount",0),jS(this,"_reconnectionTimer",-1),jS(this,"_isFirstConnection",!0),jS(this,"_prevTime",-1),jS(this,"_localAddress"),jS(this,"_remoteAddress"),this.userId=e.userId,this.tinyId=e.tinyId,this._room=e.room,this._sdpSemantics=e.room.sdpSemantics,this._isUplink=e.isUplink,this._log=jO.createLogger({id:"n-mpc",userId:this._room.userId,remoteUserId:this.userId,sdkAppId:this._room.sdkAppId,isLocal:this._isUplink}),this._signalChannel=e.signalChannel}beforeConnect(){this._prevTime<0&&(this._prevTime=yD())}afterConnect(){try{this._isFirstConnection?(this._isFirstConnection=!1,sk.addSuccessEvent({key:521705,cost:Math.min(yD()-this._prevTime,3e4)})):this._isReconnecting&&sk.addSuccessEvent({key:521706,cost:yD()-this._prevTime}),this._prevTime=-1}catch(e){throw this._isFirstConnection?(this._isFirstConnection=!1,sk.addFailedEvent({key:521705,error:e})):this._isReconnecting&&this._reconnectionCount>=3&&sk.addFailedEvent({key:521706,error:e}),e}}initialize(){let e={iceServers:this._room.getIceServers(),iceTransportPolicy:this._room.getIceTransportPolicy(),sdpSemantics:this._sdpSemantics,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",tcpCandidatePolicy:"disable",IceTransportsType:"nohost"};this._peerConnection=new RTCPeerConnection(e),this._peerConnection.onconnectionstatechange=this.onConnectionStateChange.bind(this)}close(e){this._log.info("close connection"),this._emitter.emit("closed",e),this._isReconnecting&&this.stopReconnection(),this.closePeerConnection(),cV.delete(this)}closePeerConnection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._peerConnection&&(this._log.info("close pc"),this._peerConnection.onconnectionstatechange=null,this._peerConnection.close(),this._peerConnection=null,e&&this.emitConnectionStateChangedEvent("DISCONNECTED")),this._waitForPeerConnectionConnectedPromiseReject&&this._waitForPeerConnectionConnectedPromiseReject(new ob({code:ib.API_CALL_ABORTED,message:"connection closed"}))}getDTLSTransportState(){if(!this._peerConnection)return lR;let e=null;if(this._isUplink){if(!Qk()||0===this._peerConnection.getSenders().length)return lR;e=this._peerConnection.getSenders()[0].transport}else{if(!Ok()||0===this._peerConnection.getReceivers().length)return lR;e=this._peerConnection.getReceivers()[0].transport}return e?e.state:lR}onConnectionStateChange(e){let t=this._peerConnection.iceConnectionState,r=this.getDTLSTransportState();if(this._log.info("connectionState: ".concat(e.target.connectionState,", ICE: ").concat(t,", DTLS: ").concat(r)),e.target.connectionState===uR.CONNECTING&&this.emitConnectionStateChangedEvent("CONNECTING"),e.target.connectionState===uR.FAILED||e.target.connectionState===uR.CLOSED){let i="connection ".concat(e.target.connectionState,". ICE Transport state: ").concat(t,", DTLS Transport state: ").concat(r),n=new ob({message:i,code:ib.ICE_TRANSPORT_ERROR});this.emitConnectionStateChangedEvent("DISCONNECTED"),this.startReconnection(),this._isErrorObserved||this._emitter.emit("error",n)}(e.target.connectionState===uR.CONNECTED||e.target.connectionState===uR.COMPLETED)&&(this.logSelectedCandidate(),TM.logSuccessEvent({userId:this._room.userId,eventType:mR.ICE_CONNECTION_STATE}),this.emitConnectionStateChangedEvent("CONNECTED"))}emitConnectionStateChangedEvent(e){return e!==this._currentState&&("CONNECTED"===e?(aV=0,sV=!1,AV=!0,cV.add(this)):cV.delete(this),UO.emit(VO.PEER_CONNECTION_STATE_CHANGED,{room:this._room,prevState:this._currentState,state:e,remoteUserId:this._isUplink?void 0:this.userId}),this._emitter.emit("connection-state-changed",{prevState:this._currentState,state:e}),this._currentState=e,!0)}getPeerConnection(){return this._peerConnection}getRoom(){return this._room}getUserId(){return this.userId}getTinyId(){return this.tinyId}logSelectedCandidate(){return YS(this,null,(function*(){if(!this._peerConnection)return;let e=yield this._peerConnection.getStats();for(let[,t]of e)if(vk(t)){let r=e.get(t.localCandidateId),i=e.get(t.remoteCandidateId);r&&(this._log.info("local candidate: ".concat(r.candidateType," ").concat(r.protocol,":").concat(r.ip||r.address,":").concat(r.port," ").concat(r.networkType||""," ").concat("relay"===r.candidateType?"relayProtocol:".concat(r.relayProtocol):"")),this._localAddress="".concat(r.ip||r.address,":").concat(r.port)),i&&(this._log.info("remote candidate: ".concat(i.candidateType," ").concat(i.protocol,":").concat(i.ip||i.address,":").concat(i.port)),this._remoteAddress="".concat(i.protocol,":").concat(i.ip||i.address));break}}))}getCurrentState(){return this._currentState}waitForPeerConnectionConnected(){return this._waitForPeerConnectionConnectedPromise||(this._waitForPeerConnectionConnectedPromise=new Promise(((e,t)=>{if("CONNECTED"===this._currentState)return e();this._waitForPeerConnectionConnectedPromiseReject=t;let r=t=>{"CONNECTED"===t.state&&(clearTimeout(o),n(),e())},i=e=>{let{room:r}=e;r===this._room&&(clearTimeout(o),n(),t(new ob({code:ib.API_CALL_ABORTED,message:qQ({key:JQ.CONNECTION_ABORTED,data:"leave room"})})))},n=()=>{UO.off(VO.LEAVE_SUCCESS,i,this),this._emitter.off("connection-state-changed",r,this)},o=setTimeout((()=>{n();let e=new ob({code:ib.API_CALL_TIMEOUT,message:"connection timeout"});var r;aV+=1,r=this._signalChannel.isConnected,aV>2&&!sV&&0===cV.size&&r&&(this._log.warn("firewall restriction"),sV=!0,this._emitter.emit("firewall-restriction")),t(e)}),DR);UO.on(VO.LEAVE_SUCCESS,i,this),this._emitter.on("connection-state-changed",r,this)})),this._waitForPeerConnectionConnectedPromise=this._waitForPeerConnectionConnectedPromise.finally((()=>{this._waitForPeerConnectionConnectedPromise=null,this._waitForPeerConnectionConnectedPromiseReject=null}))),this._waitForPeerConnectionConnectedPromise}getReconnectionCount(){return this._reconnectionCount}startReconnection(){this._isReconnecting=!0,this.reconnect()}clearReconnectionTimer(){-1!==this._reconnectionTimer&&(clearTimeout(this._reconnectionTimer),this._reconnectionTimer=-1)}stopReconnection(){this._log.info("stop reconnection"),this._isReconnecting=!1,this._reconnectionCount=0,this.clearReconnectionTimer(),this._signalChannel.off(WF,this.reconnect,this)}beforeReconnect(){if(-1!==this._reconnectionTimer)return this._log.warn("reconnect() is reconnecting, ignore"),-1;if(this._reconnectionCount>=gR()){this._log.warn("SDK has tried reconnect for ".concat(this._reconnectionCount," times, but all failed, please check your network")),this.stopReconnection();let e=new ob({code:this._isUplink?ib.UPLINK_RECONNECTION_FAILED:ib.DOWNLINK_RECONNECTION_FAILED,message:qQ({key:this._isUplink?JQ.UPLINK_RECONNECTION_FAILED:JQ.DOWNLINK_RECONNECTION_FAILED})});return this.emitConnectionStateChangedEvent("DISCONNECTED"),this._emitter.emit("error",e),-1}return this._signalChannel.isConnected?(this._reconnectionCount+=1,this._log.warn("reconnect() trying [".concat(this._reconnectionCount,"]")),1):(this._log.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this._signalChannel.once(WF,this.reconnect,this),-1)}on(e,t,r){this._emitter.on(e,t,r)}off(e,t,r){this._emitter.off(e,t,r)}getIsReconnecting(){return this._isReconnecting}get isH264(){var e,t;return!(null==(t=null==(e=this._peerConnection)?void 0:e.remoteDescription)||!t.sdp.includes("H264"))}setOffer(e){var t;return null==(t=this._peerConnection)?void 0:t.setLocalDescription(e)}setAnswer(e){var t;return null==(t=this._peerConnection)?void 0:t.setRemoteDescription(e)}};GS([eN(521712,!1)],lV.prototype,"setOffer",1),GS([eN(521713,!1)],lV.prototype,"setAnswer",1);var uV=VS(eb()),dV=function(e){return uV.default.parse(e)},hV=function(e){return uV.default.write(e)};function gV(e){return Object.keys(e).filter((t=>e[t]))}var pV=class e extends lV{constructor(e){super(xS(LS({},e),{isUplink:!1})),jS(this,"_flag",0),jS(this,"isRobot",!1),jS(this,"role","anchor"),jS(this,"remoteAudioTrack"),jS(this,"remoteVideoTrack"),jS(this,"remoteAuxiliaryTrack"),jS(this,"ssrc",{audio:0,video:0,auxiliary:0}),jS(this,"_isSDPExchanging",!1),this.flag=e.flag,this.isRobot=e.isRobot||!1,this.remoteAudioTrack=e.remoteAudioTrack||new EN(this._room,this),this.remoteVideoTrack=e.remoteVideoTrack||new Kx(this._room,this),this.remoteAuxiliaryTrack=e.remoteAuxiliaryTrack||new zx(this._room,this)}get videoCodec(){var e,t;let r=null==(t=null==(e=this._peerConnection)?void 0:e.remoteDescription)?void 0:t.sdp;return r?r.includes("H264")?"h264":"vp8":"h264"}get subscribeState(){let e={audio:!1,video:!1,auxiliary:!1,smallVideo:!1};return this.remoteVideoTrack.isSubscribed&&(8&this.remoteVideoTrack.mediaType?e.smallVideo=!0:e.video=!0),this.remoteAudioTrack.isSubscribed&&(e.audio=!0),this.remoteAuxiliaryTrack.isSubscribed&&(e.auxiliary=!0),e}get muteState(){return bD(this.flag,this.userId)}get flag(){return this._flag}set flag(e){var t,r,i;e!==this._flag&&(this._flag=e,null==(t=this.remoteAudioTrack)||t.onFlagChanged(),null==(r=this.remoteVideoTrack)||r.onFlagChanged(),null==(i=this.remoteAuxiliaryTrack)||i.onFlagChanged())}get hasMainStream(){return this.muteState.hasAudio||this.muteState.hasVideo||this.muteState.hasSmall}get hasAuxStream(){return this.muteState.hasAuxiliary}get isMainStreamSubscribed(){return(this.subscribeState.audio||this.subscribeState.video||this.subscribeState.smallVideo)&&(this.muteState.hasAudio||this.muteState.hasVideo||this.muteState.hasSmall)}get isAuxStreamSubscribed(){return this.subscribeState.auxiliary&&this.muteState.hasAuxiliary}get isSmallStreamSubscribed(){return this.subscribeState.smallVideo&&this.muteState.hasSmall}get isBigStreamSubscribed(){return this.subscribeState.video&&this.muteState.hasVideo}isStreamUnpublished(e){return e===Vb.MAIN?!this.muteState.hasAudio&&!this.muteState.hasVideo:!this.muteState.hasAuxiliary}initialize(){super.initialize(),this.installEvents(),this._peerConnection.ontrack=this.onTrack.bind(this)}close(e){super.close(e),this.emitConnectionStateChangedEvent("DISCONNECTED"),this.remoteAudioTrack.close(),this.remoteVideoTrack.close(),this.remoteAuxiliaryTrack.close(),this.uninstallEvents()}installEvents(){}uninstallEvents(){this._emitter.removeAllListeners()}emitConnectionStateChangedEvent(e){var t,r;let i=this._currentState,n=super.emitConnectionStateChangedEvent(e);return n&&i!==e&&(null==(t=this.remoteVideoTrack)||t.emit("connection-state-changed",{prevState:i,state:e}),null==(r=this.remoteAuxiliaryTrack)||r.emit("connection-state-changed",{prevState:i,state:e})),n}onTrack(e){let t=e.streams[0],{track:r}=e,i=t.id===$b?Vb.MAIN:Vb.AUXILIARY;this._log.debug("ontrack ".concat(i," ").concat(r.kind));let n=Vb.AUDIO;r.kind===Vb.VIDEO&&(n=i===Vb.MAIN?Vb.VIDEO:Vb.AUXILIARY);let o=this.remoteAudioTrack;n===Vb.VIDEO?o=this.remoteVideoTrack:n===Vb.AUXILIARY&&(o=this.remoteAuxiliaryTrack),o.setInputMediaStreamTrack(r)}addRRTRLine(e){let t=e.split("\r\n"),r=new Map;t.forEach(((e,i)=>{/^a=rtcp-fb:/.test(e)&&t[i+1]&&!/^a=rtcp-fb:/.test(t[i+1])&&r.set(i+1,"".concat(e.match(/^a=rtcp-fb:\d+/)[0]," rrtr"))}));let i=[...r];for(let e=0;e<i.length;e++){let[r,n]=i[e];t.splice(r+e,0,n)}return t.join("\r\n")}addSPSDescription(e){let t=dV(e);return t.media.forEach((e=>{e.type===Vb.VIDEO&&e.fmtp.forEach((e=>{e.config+=";sps-pps-idr-in-keyframe=1"}))})),hV(t)}removeSDESDescription(e){let t=["urn:ietf:params:rtp-hdrext:sdes:mid","urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id","urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id"],r=dV(e);return r.media.forEach((e=>{e.ext&&(e.ext=e.ext.filter((e=>!t.includes(e.uri))))})),hV(r)}isSubscriptionStateNotChanged(e){return JSON.stringify(e)===JSON.stringify(this.subscribeState)}subscribe(e,t){return YS(this,null,(function*(){var r,i;try{if(((null==(r=this._peerConnection)?void 0:r.connectionState)===uR.NEW||(null==(i=this._peerConnection)?void 0:i.connectionState)===uR.CONNECTING)&&(yield this.waitForPeerConnectionConnected()),this.isSubscriptionStateNotChanged(e))return void(this._peerConnection||(this.initialize(),yield this.connect(e)));if(this._log.info("subscribe ".concat(t," ").concat(JSON.stringify(e))),this._peerConnection||this._isSDPExchanging){let t="subscribe_change";Object.values(e).find((e=>!0===e))||(t="unsubscribe"),yield this.sendSubscription(t,e)}else this.initialize(),yield this.connect(e)}catch(e){throw this._room.isJoined&&this.isStreamUnpublished(t)?(this._log.warn("".concat(e.message," ").concat(JSON.stringify(this.muteState))),new ob({code:ib.REMOTE_STREAM_NOT_EXIST,message:"remote user ".concat(this.userId," unpublished stream")})):e}}))}unsubscribe(e){return YS(this,arguments,(function(e){var t=this;let{remoteTracks:r,streamType:i}=e;return function*(){if("CONNECTED"===t._currentState&&("main"===i&&!t.isMainStreamSubscribed||"auxiliary"===i&&!t.isAuxStreamSubscribed))return void t._log.info("".concat(i," stream already unsubscribed"));let e=LS({},t.subscribeState);r.forEach((t=>{switch(t.mediaType){case 1:e.audio=!1;break;case 4:e.video=!1;break;case 8:e.smallVideo=!1;break;case 2:e.auxiliary=!1}}));let n="subscribe_change";Object.values(e).find((e=>!0===e))||(n="unsubscribe"),t._log.info("".concat("unsubscribe"===n?n:"subscribe"," ").concat(i," [").concat(gV(e),"]")),yield t.sendSubscription(n,e),"unsubscribe"===n&&(t.closePeerConnection(),t.emitConnectionStateChangedEvent("DISCONNECTED"))}()}))}sendSubscription(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subscribeState,r={srcTinyId:this.tinyId,srcUserId:this.userId},i=eV,n=zF.UNSUBSCRIBE_RESULT;return"subscribe_change"===e&&(r={audio:t.audio,bigVideo:t.video,auxVideo:t.auxiliary,smallVideo:t.smallVideo,srcTinyId:this.tinyId},i=tV,n=zF.SUBSCRIBE_CHANGE_RESULT),this._signalChannel.sendWaitForResponse({command:i,data:r,responseCommand:n,timeout:1e4}).then((t=>{let{data:r}=t;if(0!==r.code){let t=new ob({code:r.code,message:qQ({key:JQ.ERROR_MESSAGE,data:{type:e,message:r.message}})});throw this._log.error(t),t}}))}connect(){return YS(this,arguments,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.subscribeState;return function*(){try{yield e.exchangeSDP(t),yield e.waitForPeerConnectionConnected()}catch(t){throw e.closePeerConnection(!0),t}}()}))}exchangeSDP(e){return YS(this,null,(function*(){try{this._isSDPExchanging=!0,yield this.createOffer(),this._log.info("createOffer success, sending offer");let{type:t,sdp:r}=this._peerConnection.localDescription,i={type:t,sdp:r,srcUserId:this.userId,srcTinyId:this.tinyId,audio:e.audio,bigVideo:e.video,auxVideo:e.auxiliary,smallVideo:e.smallVideo},n=yield this._signalChannel.sendWaitForResponse({command:"subscribe",commandDesc:"exchange sdp",data:i,responseCommand:zF.SUBSCRIBE_RESULT,timeout:_R});if(!this._peerConnection){let e=new ob({code:ib.INVALID_OPERATION,message:qQ({key:JQ.CONNECTION_CLOSED})});throw this._log.warn(e),e}yield this.onSubscribeResult(n),this._isSDPExchanging=!1}catch(e){throw this._isSDPExchanging=!1,e}}))}createOffer(){return YS(this,null,(function*(){let e={voiceActivityDetection:!1};Mk()&&this._sdpSemantics===CR?(this._peerConnection.addTransceiver(Vb.AUDIO,{direction:Gb.RECVONLY}),this._peerConnection.addTransceiver(Vb.VIDEO,{direction:Gb.RECVONLY}),this._peerConnection.addTransceiver(Vb.VIDEO,{direction:Gb.RECVONLY})):(e.offerToReceiveAudio=!0,e.offerToReceiveVideo=!0);let t=yield this._peerConnection.createOffer(e);if(t.sdp){let{isH264DecodeSupported:e}=yield Ek();e||(this._log.warn("remove h264 desc from sdp"),t.sdp=function(e){let t=dV(e);return t.media.forEach((e=>{var t,r;if(e.type===Vb.VIDEO){let i=new Set;e.rtp.forEach((e=>{let{payload:t,codec:r}=e;return"H264"===r&&i.add(t)})),e.fmtp.forEach((e=>{let{payload:t,config:r}=e,n=r.match(/apt=(\d+)/);n&&n[1]&&i.has(Number(n[1]))&&i.add(t)}));let n=e=>{let{payload:t}=e;return!i.has(t)};e.rtp=e.rtp.filter(n),e.rtcpFb=null==(t=e.rtcpFb)?void 0:t.filter(n),e.fmtp=e.fmtp.filter(n),e.payloads=null==(r=e.payloads)?void 0:r.split(" ").filter((e=>!i.has(Number(e)))).join(" ")}})),hV(t)}(t.sdp)),t.sdp=this.addRRTRLine(t.sdp),t.sdp=this.addSPSDescription(t.sdp),t.sdp=function(e){let t=dV(e);return t.media.forEach((e=>{e.type===Vb.AUDIO&&e.fmtp.forEach((e=>{e.config+=";sprop-stereo=1;stereo=1"}))})),hV(t)}(t.sdp),this._sdpSemantics===CR&&(t.sdp=this.removeSDESDescription(t.sdp))}yield this.setOffer(t)}))}onSubscribeResult(e){return YS(this,null,(function*(){let{code:t,message:r=""}=e&&e.data||{},{type:i,sdp:n}=e&&e.data&&e.data.data||{};if(t===TR)throw new ob({code:ib.NOT_SUPPORTED_H264,message:qQ({key:JQ.NOT_SUPPORTED_H264DECODE})});try{if(0!==t)throw new ob({code:t,message:qQ({key:JQ.EXCHANGE_SDP_FAILED,data:{errMsg:r}})});this._log.debug("accept remote answer: ".concat(n)),yield this.setAnswer({type:i,sdp:n}),this.updateSSRC(n)}catch(e){throw this._log.error(e),e}}))}updateSSRC(e){try{dV(e).media.forEach((e=>{if(e.ssrcs)if(e.type===Vb.AUDIO){let t=e.ssrcs.find((e=>{var t;return null==(t=e.value)?void 0:t.includes($b)}));t&&(this.ssrc.audio=Number(t.id))}else{let t=e.ssrcs.find((e=>{var t;return null==(t=e.value)?void 0:t.includes($b)})),r=e.ssrcs.find((e=>{var t;return null==(t=e.value)?void 0:t.includes(eR)}));t&&(this.ssrc.video=Number(t.id)),r&&(this.ssrc.auxiliary=Number(r.id))}}))}catch(e){}}getMainStreamVideoTrackId(){return this.remoteVideoTrack&&this.remoteVideoTrack.mediaTrack?this.remoteVideoTrack.mediaTrack.id:""}getAuxStreamVideoTrackId(){return this.remoteAuxiliaryTrack&&this.remoteAuxiliaryTrack.mediaTrack?this.remoteAuxiliaryTrack.mediaTrack.id:""}reconnect(){return YS(this,null,(function*(){if(!(HS(e.prototype,this,"beforeReconnect").call(this)<0))try{this.closePeerConnection(),this.initialize(),yield this.connect(),this.stopReconnection(),this._log.warn("reconnect() success")}catch(e){let t=aD(this._reconnectionCount);this._log.warn("reconnect() timeout, try again after ".concat(t/1e3,"s")),this._reconnectionTimer=setTimeout((()=>{this.clearReconnectionTimer(),this.reconnect()}),t)}}))}getIsReconnecting(){return this._isReconnecting}clearReconnectionTimer(){-1!==this._reconnectionTimer&&(clearTimeout(this._reconnectionTimer),this._reconnectionTimer=-1)}getCurrentState(){return this._currentState}setDelay(e){let{audioDelay:t,videoDelay:r}=e;this.remoteAudioTrack.stat.end2EndDelay=t,this.remoteVideoTrack.stat.end2EndDelay=r}get audioReceiver(){var e;return(null==(e=this._peerConnection)?void 0:e.getReceivers()[0])||null}};GS([YP((e=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return new Promise(((t,i)=>{let n=e=>{this._emitter.off("closed",n),i(new ob({code:ib.API_CALL_ABORTED,message:qQ({key:JQ.CONNECTION_ABORTED,data:e})}))};this._emitter.on("closed",n),e.apply(this,r).then(t,i).finally((()=>{this._emitter.off("closed",n)}))}))}))],pV.prototype,"subscribe",1),GS([eN(521717,!1)],pV.prototype,"unsubscribe",1),GS([jP(lV.prototype.afterConnect),GP(lV.prototype.beforeConnect)],pV.prototype,"connect",1);var fV=pV,mV={voiceActivityDetection:!1},EV=class e extends lV{constructor(e){super(xS(LS({},e),{isUplink:!0})),jS(this,"localMainAudioTrack",null),jS(this,"localMainVideoTrack",null),jS(this,"localAuxAudioTrack",null),jS(this,"localAuxVideoTrack",null),jS(this,"ssrc",{audio:0,video:0,small:0,auxiliary:0}),jS(this,"_isPublishingAux",!1),jS(this,"_publishingLocalAudioTrack"),jS(this,"_publishingLocalVideoTrack"),jS(this,"_mediaSettings",{videoCodec:"",videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioCodec:"opus",audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0,auxVideoWidth:0,auxVideoHeight:0,auxVideoFps:0,auxVideoBps:0}),jS(this,"flag",0)}get videoCodec(){return this._mediaSettings.videoCodec.toLowerCase()||"h264"}get isMainStreamPublished(){return!(!this.localMainAudioTrack&&!this.localMainVideoTrack)}get isAuxStreamPublished(){return!(!this.localAuxVideoTrack&&!this.localAuxAudioTrack)}get publishState(){var e,t,r,i;let n={audio:!1,bigVideo:!1,smallVideo:!1,auxVideo:!1};if(this._peerConnection){let o=this._peerConnection.getSenders();o&&(kk()?(n.audio=!(null==(e=o[0])||!e.track),n.bigVideo=!(null==(t=o[1])||!t.track),n.smallVideo=!(null==(r=o[2])||!r.track),n.auxVideo=!(null==(i=o[3])||!i.track)):o.forEach((e=>{e.track&&(e.track.kind===Vb.AUDIO?n.audio=!0:(n.bigVideo=!0,this._room.videoManager.hasSmall&&(n.smallVideo=!0)))})))}return n}initialize(){super.initialize(),this.installEvents()}reset(){this._isReconnecting&&this.stopReconnection(),this.closePeerConnection(),this.uninstallEvents()}close(e){super.close(e),this.reset(),this.emitConnectionStateChangedEvent("DISCONNECTED")}installEvents(){this._emitter.listeners("connection-state-changed").includes(this.handleConnectionStateChange)||this._emitter.on("connection-state-changed",this.handleConnectionStateChange,this)}uninstallEvents(){this._emitter.off("connection-state-changed",this.handleConnectionStateChange,this)}emitConnectionStateChangedEvent(e,t){var r,i,n;let o=this._currentState,a=super.emitConnectionStateChangedEvent(e);return a&&o!==e&&(t?t.emit("connection-state-changed",{prevState:o,state:e}):(null==(r=this.localMainVideoTrack)||r.emit("connection-state-changed",{prevState:o,state:e}),null==(i=this.localAuxVideoTrack)||i.emit("connection-state-changed",{prevState:o,state:e}),null==(n=this._publishingLocalVideoTrack)||n.emit("connection-state-changed",{prevState:o,state:e}))),a}publish(e){return YS(this,arguments,(function(e){var t=this;let{localAudioTrack:r,localVideoTrack:i,isAuxiliary:n}=e;return function*(){let e;t._peerConnection||t.initialize(),r&&(t._publishingLocalAudioTrack=r),i&&(t._publishingLocalVideoTrack=i),t._isPublishingAux=n,i&&!n&&i.small&&(e=t._room.videoManager.smallTrack),t.sendMediaSettings(),Mk()?yield t.publishByTransceiver({localAudioTrack:r,localVideoTrack:i,smallTrack:e,isAuxiliary:n}):yield t.publishByAddTrack({localAudioTrack:r,localVideoTrack:i,smallTrack:e}),t._publishingLocalAudioTrack=null,t._publishingLocalVideoTrack=null,t._isPublishingAux=!1,n?(i&&(t.localAuxVideoTrack=i),r&&(t.localAuxAudioTrack=r)):(i&&(t.localMainVideoTrack=i),r&&(t.localMainAudioTrack=r)),t.installTrackMuteEvents(r,i),t.sendMutedFlag()}()}))}publishByTransceiver(e){return YS(this,arguments,(function(e){var t=this;let{localAudioTrack:r,localVideoTrack:i,smallTrack:n,isAuxiliary:o}=e;return function*(){t._log.info("publish by transceiver");let e=new MediaStream,a=null==i?void 0:i.outMediaTrack,s=null==r?void 0:r.outMediaTrack;s&&e.addTrack(s),a&&e.addTrack(a);let c=t._peerConnection.getTransceivers();if(0===c.length)t._peerConnection.addTransceiver(s||Vb.AUDIO,{direction:Gb.SENDONLY,streams:[e]}),t._peerConnection.addTransceiver(o?Vb.VIDEO:a||Vb.VIDEO,{direction:Gb.SENDONLY,streams:[e]}),t._peerConnection.addTransceiver(n||Vb.VIDEO,{direction:Gb.SENDONLY,streams:[e]}),t._peerConnection.addTransceiver(o&&a||Vb.VIDEO,{direction:Gb.SENDONLY,streams:[e]}),yield t.connect();else{let e=[];if(s&&(c[0].sender.track||e.push(0),yield c[0].sender.replaceTrack(s),yield t.setBandwidth({bandwidth:(null==r?void 0:r.profile.bitrate)||40,type:Vb.AUDIO})),a){let r=o?3:1;yield c[r].sender.replaceTrack(a),yield t.setBandwidth({bandwidth:i.profile.bitrate,type:Vb.VIDEO,videoType:o?Vb.AUXILIARY:Vb.BIG}),e.push(r),n&&(yield c[2].sender.replaceTrack(n),yield t.setBandwidth({bandwidth:i.small.bitrate,type:Vb.VIDEO,videoType:Vb.SMALL}),e.push(2))}yield t.setTransceiverDirection(Gb.SENDONLY,e),yield t.doPublishChange(),null==i||i.emit("connection-state-changed",{prevState:"DISCONNECTED",state:"CONNECTING"}),null==i||i.emit("connection-state-changed",{prevState:"CONNECTING",state:"CONNECTED"})}}()}))}publishByAddTrack(e){return YS(this,arguments,(function(e){var t=this;let{localAudioTrack:r,localVideoTrack:i,smallTrack:n}=e;return function*(){t._log.info("publish by addtrack");let e=null==i?void 0:i.outMediaTrack,o=null==r?void 0:r.outMediaTrack;if(t._peerConnection&&"new"!==t._peerConnection.connectionState)return r&&o&&(yield t.addTrack(r)),void(e&&(yield t.addTrack(i)));let a=new MediaStream;if(o&&a.addTrack(o),e&&a.addTrack(e),o&&t._peerConnection.addTrack(o,a),e&&(t._peerConnection.addTrack(e,a),n)){let e=new MediaStream;e.addTrack(n),t._peerConnection.addTrack(n,e)}yield t.connect()}()}))}enableSmall(e){return YS(this,null,(function*(){let t=this._peerConnection.getTransceivers();e?this._room.videoManager.smallTrack&&(yield t[2].sender.replaceTrack(this._room.videoManager.smallTrack),yield this.setTransceiverDirection(Gb.SENDONLY,[2])):(yield t[2].sender.replaceTrack(null),yield this.setTransceiverDirection(Gb.INACTIVE,[2])),this.updateMediaSettings(),yield this.doPublishChange()}))}installTrackMuteEvents(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{e&&(null==e||e.on("mute",this.sendMutedFlag,this),null==e||e.on("unmute",this.sendMutedFlag,this))}))}uninstallTrackMuteEvents(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{e&&(null==e||e.off("mute",this.sendMutedFlag,this),null==e||e.off("unmute",this.sendMutedFlag,this))}))}unpublish(e){return YS(this,arguments,(function(e){var t=this;let{localAudioTrack:r,localVideoTrack:i}=e;return function*(){if(!kk())return r&&r.outMediaTrack&&!i&&t.localMainVideoTrack?(yield t.removeTrack(r),void(t.localMainAudioTrack=null)):i&&i.outMediaTrack&&!r&&t.localMainAudioTrack?(yield t.removeTrack(i),void(t.localMainVideoTrack=null)):(yield t.doUnpublish(),t.uninstallTrackMuteEvents(r,i),void t.emitConnectionStateChangedEvent("DISCONNECTED",i));let e=i&&i===t.localAuxVideoTrack,n=null==i?void 0:i.outMediaTrack,o=t._peerConnection.getSenders(),a=[];r&&(e?t.localAuxAudioTrack=null:t.localMainAudioTrack=null,!t.localAuxAudioTrack&&!t.localMainAudioTrack&&(yield o[0].replaceTrack(null),a.push(0))),n&&(e?(yield o[3].replaceTrack(null),t.localAuxVideoTrack=null,t._mediaSettings=xS(LS({},t._mediaSettings),{auxVideoBps:0,auxVideoFps:0,auxVideoWidth:0,auxVideoHeight:0}),a.push(3)):(yield o[1].replaceTrack(null),yield o[2].replaceTrack(null),t.localMainVideoTrack=null,t._mediaSettings=xS(LS({},t._mediaSettings),{videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0}),a.push(1,2))),t.isMainStreamPublished||t.isAuxStreamPublished?(yield t.setTransceiverDirection(Gb.INACTIVE,a),yield t.doPublishChange(!1)):yield t.doUnpublish(),t.uninstallTrackMuteEvents(r,i),null==i||i.emit("connection-state-changed",{prevState:t._currentState,state:"DISCONNECTED"})}()}))}doPublishChange(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return YS(this,null,(function*(){let t={state:this.publishState,constraintConfig:this._mediaSettings},r=yield this._signalChannel.sendWaitForResponse({command:ZF,data:t,responseCommand:zF.PUBLISH_STATE_CHANGE_RESULT,enableLog:e});this.checkPublishResultCode(r.data.code,r.data.message)}))}doUnpublish(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._signalChannel.sendWaitForResponse({command:$F,commandDesc:"unpublish",responseCommand:zF.UNPUBLISH_RESULT,enableLog:e}).catch((e=>{if(e.getCode()===ib.API_CALL_TIMEOUT)return Promise.resolve();throw e}))}updateMediaSettings(){let{detail:{isH264EncodeSupported:e,isVp8EncodeSupported:t}}=this._room.checkSystemResult;e?this._mediaSettings.videoCodec="H264":t&&(this._mediaSettings.videoCodec="VP8");let r=this._publishingLocalAudioTrack||this.localMainAudioTrack||this.localAuxAudioTrack,{localMainVideoTrack:i,localAuxVideoTrack:n}=this;if(this._publishingLocalVideoTrack&&(this._isPublishingAux?n=this._publishingLocalVideoTrack:i=this._publishingLocalVideoTrack),Vk){if(r&&r.outMediaTrack){let e=r.outMediaTrack.getSettings();this._mediaSettings.audioChannel=e.channelCount||1,this._mediaSettings.audioBps=1e3*r.profile.bitrate,this._mediaSettings.audioFs=e.sampleRate||0}if(i&&i.outMediaTrack){let e=i.outMediaTrack.getSettings();this._mediaSettings.videoWidth=e.width||0,this._mediaSettings.videoHeight=e.height||0,this._mediaSettings.videoFps=e.frameRate||0,this._mediaSettings.videoBps=1e3*i.profile.bitrate,i.small&&(this._mediaSettings.smallVideoWidth=i.small.width,this._mediaSettings.smallVideoHeight=i.small.height,this._mediaSettings.smallVideoFps=i.small.frameRate,this._mediaSettings.smallVideoBps=1e3*i.small.bitrate)}if(n&&n.outMediaTrack){let e=n.outMediaTrack.getSettings();this._mediaSettings.auxVideoWidth=e.width||0,this._mediaSettings.auxVideoHeight=e.height||0,this._mediaSettings.auxVideoFps=e.frameRate||0,this._mediaSettings.auxVideoBps=1e3*n.profile.bitrate}}else r&&r.outMediaTrack&&(this._mediaSettings.audioChannel=r.profile.channelCount,this._mediaSettings.audioBps=1e3*r.profile.bitrate,this._mediaSettings.audioFs=r.profile.sampleRate),i&&i.outMediaTrack&&(this._mediaSettings.videoWidth=i.profile.width,this._mediaSettings.videoHeight=i.profile.height,this._mediaSettings.videoFps=i.profile.frameRate,this._mediaSettings.videoBps=1e3*i.profile.bitrate);this._log.info("updateMediaSettings: ".concat(JSON.stringify(this._mediaSettings)))}sendMediaSettings(){this.updateMediaSettings(),this._signalChannel.sendWaitForResponse({command:rV,data:this._mediaSettings,responseCommand:zF.UPDATE_CONSTRAINT_CONFIG_RES}).then((e=>{0!==e.data.code&&this._log.warn(e.data.message)})).catch((()=>{}))}addTrack(e){return YS(this,null,(function*(){if(!this._peerConnection)return;let t=e===this.localAuxAudioTrack||e===this.localAuxVideoTrack;this._log.info("is adding ".concat(e.kind," track to current published local ").concat(t?Vb.AUXILIARY:Vb.MAIN," stream")),Mk()?yield this.addTrackByTransceiver(e,t):yield this.addTrackBySender(e)}))}addTrackByTransceiver(e,t){return YS(this,null,(function*(){var r;if(!e.mediaTrack)return;let i=this._peerConnection.getTransceivers();if(e.kind===Vb.AUDIO)yield i[0].sender.replaceTrack(e.outMediaTrack);else{let n=t?3:1;yield i[n].sender.replaceTrack(e.outMediaTrack),1===n&&null!=(r=this.localMainVideoTrack)&&r.small&&(yield i[2].sender.replaceTrack(this._room.videoManager.smallTrack)),i[n].direction===Gb.INACTIVE&&(yield this.setTransceiverDirection(Gb.SENDONLY,[n]))}this.updateMediaSettings(),yield this.doPublishChange()}))}addTrackBySender(e){return YS(this,null,(function*(){if(!e.outMediaTrack)return;let t=e.outMediaTrack;kk()&&this._peerConnection.getTransceivers().findIndex((e=>"stopped"===e.direction))>=0&&(this._log.warn("transceiver is stopping, negotiate sdp first"),yield this.updateOffer("remove",t));let r=this._peerConnection.getSenders().find((e=>e.track&&e.track.kind===t.kind));if(r&&r.track){this._log.warn("sender already exists, remove sender first");let e=r.track;this.removeSender(r),yield this.updateOffer("remove",e)}if(t&&this._peerConnection.addTrack(t,new MediaStream([t])),t.kind===Vb.VIDEO&&e instanceof cN&&e.small){let e=new MediaStream,{smallTrack:t}=this._room.videoManager;e.addTrack(t),this._peerConnection.addTrack(t,e)}yield this.updateOffer("add",t)}))}isNeedToResetOfferOrder(){if(this._sdpSemantics===yR||!this._peerConnection||!this._peerConnection.localDescription)return!1;let{sdp:e}=this._peerConnection.localDescription,t=dV(e);for(let e=0;e<t.media.length;e++)if(0===Number(t.media[e].mid)&&t.media[e].type===Vb.VIDEO)return!0;return!1}removeSender(e){let t=null;kk()&&(t=this._peerConnection.getTransceivers().find((t=>t.sender&&t.sender.track===e.track))),this._peerConnection.removeTrack(e),t&&cD(t.stop)&&(this._log.info("stop transceiver"),t.stop())}removeTrack(e){return YS(this,null,(function*(){if(!this._peerConnection)return;let t=e===this.localAuxAudioTrack||e===this.localAuxVideoTrack;this._log.info("is removing ".concat(e.kind," track from current published local ").concat(t?Vb.AUXILIARY:Vb.MAIN," stream")),Mk()?yield this.removeTrackByTransceiver(e,t):yield this.removeTrackBySender(e)}))}removeTrackByTransceiver(e,t){return YS(this,null,(function*(){if(!e.outMediaTrack)return;let r=this._peerConnection.getTransceivers();if(e.kind===Vb.AUDIO)yield r[0].sender.replaceTrack(null);else{let i=t?3:1;yield r[i].sender.replaceTrack(null),1===i&&e.small&&(yield r[2].sender.replaceTrack(null)),yield this.setTransceiverDirection(Gb.INACTIVE,[i])}this.updateMediaSettings(),yield this.doPublishChange()}))}setTransceiverDirection(e,t){return YS(this,null,(function*(){if(!gB)return;let r=!1,i=!1;this._log.info("setting transceiver ".concat(t.join(",")," direction to ").concat(e));let n=this._peerConnection.getTransceivers();if(t.forEach((t=>{n[t].direction!==e&&(n[t].direction=e,r=!0)})),r){this._log.info("updating offer");let e=yield this._peerConnection.createOffer();yield this.setOffer(e)}let o=-1,a=this._peerConnection.remoteDescription.sdp.split("\r\n").map((r=>{if(r.match(new RegExp("a=(".concat(Gb.INACTIVE,"|").concat(Gb.RECVONLY,"|").concat(Gb.SENDONLY,")")))&&o++,t.includes(o)){if(e===Gb.INACTIVE&&r.includes("a=".concat(Gb.RECVONLY)))return i=!0,"a=".concat(e);if(e===Gb.SENDONLY&&r.includes("a=".concat(Gb.INACTIVE)))return i=!0,"a=".concat(Gb.RECVONLY)}return r})).join("\r\n");i&&(this._log.info("updating answer"),yield this.setAnswer({type:"answer",sdp:a}))}))}removeTrackBySender(e){return YS(this,null,(function*(){if(!e.outMediaTrack)return;if(e.kind===Vb.VIDEO&&this.isNeedToResetOfferOrder()&&this.localMainAudioTrack)return this.reset(),this.initialize(),void(yield this.publish({localAudioTrack:this.localMainAudioTrack,isAuxiliary:!1}));let t=this._peerConnection.getSenders().find((t=>t.track===e.outMediaTrack));t&&(this.removeSender(t),e.kind===Vb.VIDEO&&e.small&&this._peerConnection.getSenders().forEach((e=>{e.track&&e.track.kind===Vb.VIDEO&&this.removeSender(e)}))),yield this.updateOffer("remove",e.outMediaTrack)}))}replaceTrack(e){return YS(this,null,(function*(){var t;let r,i=null==(t=this._peerConnection)?void 0:t.getSenders();if(!i||0===i.length||!e.mediaTrack)return!1;if(r=Mk()?e.kind===Vb.AUDIO?i[0]:i[1]:i.find((t=>t.track&&t.track.kind===e.kind)),!r)return!1;let n=e===this.localAuxAudioTrack||e===this.localAuxVideoTrack;return this._log.info("is replacing ".concat(e.kind," track on ").concat(n?Vb.AUXILIARY:Vb.MAIN," stream")),e.kind===Vb.AUDIO?yield r.replaceTrack(e.outMediaTrack):e.kind===Vb.VIDEO&&(n?i[3]&&(yield i[3].replaceTrack(e.outMediaTrack)):yield r.replaceTrack(e.outMediaTrack)),!0}))}updateOffer(e,t){return YS(this,null,(function*(){try{let r=yield this._peerConnection.createOffer(mV);gB&&r.sdp&&(r.sdp=this.setSDPDirection(r.sdp,"sendrecv")),yield this.setOffer(r);let i=this.updateMediaSettings(),n={action:e,trackId:t.id,kind:t.kind===Vb.VIDEO?"bigVideo":t.kind,type:"offer",sdp:this._peerConnection.localDescription.sdp,constraintConfig:i,state:this.publishState};this._log.info("createOffer success, sending updated offer to remote server"),this._log.debug("updatedOffer: ".concat(n.sdp));let o=yield this._signalChannel.sendWaitForResponse({command:"publish_change",data:n,responseCommand:zF.UPDATE_OFFER_RESULT,timeout:IR,commandDesc:"update offer"}),{code:a,message:s}=o.data;0!==a&&this.checkPublishResultCode(a,s),yield this.acceptAnswer(o.data.data),r.sdp&&this.updateSSRC(r.sdp)}catch(e){throw this._log.error(e),e}}))}setBandwidth(e){return YS(this,arguments,(function(e){var t=this;let{bandwidth:r,type:i,videoType:n,sdp:o}=e;return function*(){if(!Uk())return o?i===Vb.VIDEO?t.updateVideoBandwidthRestriction(o,r,n):t.updateAudioBandwidthRestriction(o,r):void 0;let e,a=t._peerConnection.getSenders();if(Mk()){let t=0;i===Vb.VIDEO&&(t=n===Vb.SMALL?2:n===Vb.AUXILIARY?3:1),e=a[t]}else e=a.find((e=>e.track&&e.track.kind===i));if(e){let a=e.getParameters();(!a.encodings||0===a.encodings.length)&&(a.encodings=[{}]),a.encodings[0].maxBitrate=1e3*r;try{return yield e.setParameters(a),t._log.info("".concat(n||"").concat(i," bandwidth ").concat(r," kbps")),o}catch(e){if(t._log.info("failed to set bandwidth by setting maxBitrate: ".concat(e)),o)return i===Vb.VIDEO?t.updateVideoBandwidthRestriction(o,r,n):t.updateAudioBandwidthRestriction(o,r)}}return o}()}))}updateVideoBandwidthRestriction(e,t,r){let i="AS";gB&&(i="TIAS",t*=1e3);let n=0,o=-1;return r===Vb.SMALL?n=1:r===Vb.AUXILIARY&&(n=2),e.replace(/m=video (.*)\r\nc=IN (.*)\r\n/g,(e=>(o+=1,o===n?"".concat(e,"b=").concat(i,":").concat(t,"\r\n"):e)))}updateAudioBandwidthRestriction(e,t){let r="AS";return gB&&(r="TIAS",t*=1e3),e.replace(/m=audio (.*)\r\nc=IN (.*)\r\n/,"m=audio $1\r\nc=IN $2\r\nb=".concat(r,":").concat(t,"\r\n"))}removeBandwidthRestriction(e){return e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"")}removeVideoOrientation(e){return e.replace(/urn:3gpp:video-orientation/,"")}connect(){return YS(this,null,(function*(){try{yield this.exchangeSDP(),yield this.waitForPeerConnectionConnected()}catch(e){throw this.closePeerConnection(!0),this.uninstallEvents(),e}}))}exchangeSDP(){return YS(this,null,(function*(){try{yield this.createOffer(),this._log.info("createOffer success, sending offer to remote server"),yield this.doExchangeSDP()}catch(e){throw e}}))}createOffer(){return YS(this,null,(function*(){try{let e=yield this._peerConnection.createOffer(mV);yield this.setOffer(e),e.sdp&&this.updateSSRC(e.sdp)}catch(e){throw e}}))}doExchangeSDP(){let e={command:"publish",responseCommand:zF.PUBLISH_RESULT,data:{type:this._peerConnection.localDescription.type,sdp:this.removeVideoOrientation(this._peerConnection.localDescription.sdp),screen:this.localMainVideoTrack instanceof lN||this.localAuxVideoTrack instanceof lN,state:this.publishState,constraintConfig:this._mediaSettings},enableLog:!1};return this._log.debug("sending sdp offer: ".concat(e.data.sdp)),this._signalChannel.sendWaitForResponse(e).then((e=>{let{code:t,message:r,data:i}=e.data;return 0===t?this.acceptAnswer(i):this.checkPublishResultCode(t,r)}))}setSDPDirection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",i=dV(e);return i.media.forEach((e=>{("all"===r||e.type===r)&&(e.direction=t)})),hV(i)}acceptAnswer(e){return YS(this,null,(function*(){var t,r,i,n,o;try{let a;if(this._publishingLocalAudioTrack||this._publishingLocalVideoTrack||this.isMainStreamPublished){let e=(null==(t=this._publishingLocalVideoTrack)?void 0:t.profile.bitrate)||(null==(r=this.localMainVideoTrack)?void 0:r.profile.bitrate),o=(null==(i=this._publishingLocalAudioTrack)?void 0:i.profile.bitrate)||(null==(n=this.localMainAudioTrack)?void 0:n.profile.bitrate);if(e){let t=this._isPublishingAux?Vb.AUXILIARY:Vb.BIG;a=yield this.setBandwidth({bandwidth:e,type:Vb.VIDEO,sdp:a,videoType:t})}o&&(a=yield this.setBandwidth({bandwidth:o,type:Vb.AUDIO,sdp:a}))}if(a=this.removeVideoOrientation(e.sdp),null!=(o=this._publishingLocalVideoTrack)&&o.small){let{smallStreamConfig:e}=this._room;a=yield this.setBandwidth({bandwidth:this._publishingLocalVideoTrack.small.bitrate||e.bitrate,type:Vb.VIDEO,videoType:Vb.SMALL,sdp:a})}let s={type:e.type,sdp:a};yield this.setAnswer(s),this._log.debug("accepted answer: ".concat(a))}catch(e){throw this._log.error("failed to accept remote answer ".concat(e)),e}}))}sendMutedFlag(e){var t,r,i;if(e===this.localAuxAudioTrack||e===this.localAuxVideoTrack)return;let n={audio:!(null==(t=this.localMainAudioTrack)||!t.muted),bigVideo:!(null==(r=this.localMainVideoTrack)||!r.muted),auxVideo:!(null==(i=this.localAuxVideoTrack)||!i.muted)};this._log.info("send muted state: ".concat(JSON.stringify(n))),this._signalChannel.send(qF,n)}getIsReconnecting(){return this._isReconnecting}reconnect(){return YS(this,null,(function*(){if(!(HS(e.prototype,this,"beforeReconnect").call(this)<0))try{yield this._signalChannel.sendWaitForResponse({command:$F,responseCommand:zF.UNPUBLISH_RESULT,enableLog:!1}),this.closePeerConnection(),this.initialize(),this.isMainStreamPublished&&(yield this.publish({localAudioTrack:this.localMainAudioTrack,localVideoTrack:this.localMainVideoTrack,isAuxiliary:!1})),this.isAuxStreamPublished&&(yield this.publish({localAudioTrack:this.localAuxAudioTrack,localVideoTrack:this.localAuxVideoTrack,isAuxiliary:!0})),this._log.warn("reconnect() uplink reconnect successfully"),this.stopReconnection()}catch(e){let t=aD(this._reconnectionCount);this._log.warn("reconnect() timeout, try again after ".concat(t/1e3,"s")),this._reconnectionTimer=setTimeout((()=>{this.clearReconnectionTimer(),this.reconnect()}),t)}}))}handleConnectionStateChange(e){"CONNECTED"===e.state&&(this.localMainVideoTrack||this._publishingLocalVideoTrack&&!this._isPublishingAux)&&UO.emit(VO.SEND_FIRST_VIDEO_FRAME,{room:this._room})}updateSSRC(e){try{dV(e).media.forEach(((e,t)=>{if(e.type===Vb.AUDIO){let t=e.ssrcs&&e.ssrcs[0];t&&(this.ssrc.audio=Number(t.id))}else{if(this._sdpSemantics===yR&&e.ssrcGroups)return void e.ssrcGroups.forEach(((e,t)=>{let r=Number(e.ssrcs.split(" ")[0]);0===t?this.ssrc.video=r:1===t&&(this.ssrc.small=r)}));let r=e.ssrcs&&e.ssrcs[0];if(!r)return;switch(t){case 1:this.ssrc.video=Number(r.id);break;case 2:this.ssrc.small=Number(r.id);break;case 3:this.ssrc.auxiliary=Number(r.id)}}}))}catch(e){}}getVideoTrackId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vb.VIDEO;if(this._peerConnection){let t=this._peerConnection.getSenders();if(e===Vb.AUXILIARY&&t[3]&&t[3].track)return t[3].track.id;if(e===Vb.VIDEO&&t[1]&&t[1].track)return t[1].track.id}if(this.localMainVideoTrack&&e===Vb.VIDEO){let e=this.localMainVideoTrack.mediaTrack;if(e)return e.id}if(this.localAuxVideoTrack&&e===Vb.AUXILIARY){let e=this.localAuxVideoTrack.mediaTrack;if(e)return e.id}return""}getSSRC(){return this.ssrc}checkPublishResultCode(e,t){if(0!==e)throw e===TR?(this._log.error(XQ.NOT_SUPPORTED_H264ENCODE),new ob({code:ib.NOT_SUPPORTED_H264,message:qQ({key:JQ.NOT_SUPPORTED_H264ENCODE})})):new ob({code:ib.UNKNOWN,message:qQ({key:JQ.SIGNAL_RESPONSE_FAILED,data:{signalResponse:zF.PUBLISH_RESULT,code:e,message:t}})})}};GS([YP((e=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return new Promise(((t,i)=>{let n=e=>{this._emitter.off("closed",n),i(new ob({code:ib.API_CALL_ABORTED,message:qQ({key:JQ.CONNECTION_ABORTED,data:e})}))};this._emitter.on("closed",n),e.apply(this,r).then(t,i).finally((()=>{this._emitter.off("closed",n)}))}))}))],EV.prototype,"publish",1),GS([eN(521715,!1)],EV.prototype,"unpublish",1),GS([jP(lV.prototype.afterConnect),GP(lV.prototype.beforeConnect)],EV.prototype,"connect",1);var IV=EV,_V=class{constructor(e,t){this.room=e,jS(this,"_log"),jS(this,"_prevReportTime",0),jS(this,"_prevReport",{}),jS(this,"_prevStats",null),jS(this,"_prevEncoderImplementation",""),jS(this,"_prevAuxEncoderImpl",""),jS(this,"_prevQualityLimitationReason",""),jS(this,"_prevAuxQualityLimitationReason",""),jS(this,"_prevDecoderImplementationMap",new Map),jS(this,"totalBytesSent",0),jS(this,"totalBytesReceived",0),jS(this,"_spcStats",null),this._log=t}get statInterval(){return 0===this._prevReportTime?2:(Date.now()-this._prevReportTime)/1e3}getSenderStats(e){return YS(this,null,(function*(){var t;let r={audio:{bytesSent:0,packetsSent:0,audioLevel:0,totalAudioEnergy:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},small:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},auxiliary:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},rtt:0},i=e.getPeerConnection(),n=e.getSSRC();if(i)try{if((this._spcStats||(yield i.getStats())).forEach((t=>{var i,o,a;let s,c;if("outbound-rtp"===t.type)if((t.mediaType||t.kind)===Vb.VIDEO){if(t.ssrc===n.video?(s=Vb.VIDEO,c=e.localMainVideoTrack):t.ssrc===n.small?s=Vb.SMALL:t.ssrc===n.auxiliary&&(c=e.localAuxVideoTrack,s=Vb.AUXILIARY),!s)return;if(r[s].bytesSent=t.bytesSent,r[s].packetsSent=t.packetsSent,r[s].framesEncoded=t.framesEncoded,AD(t.keyFramesEncoded)||(r[s].keyFramesEncoded=t.keyFramesEncoded),AD(t.nackCount)||(r[s].nackCount=t.nackCount),AD(t.pliCount)||(r[s].pliCount=t.pliCount),AD(t.retransmittedPacketsSent)||(r[s].retransmittedPacketsSent=t.retransmittedPacketsSent),AD(t.totalEncodeTime)||(r[s].totalEncodeTime=t.totalEncodeTime),AD(t.totalPacketSendDelay)||(r[s].totalPacketSendDelay=t.totalPacketSendDelay),!AD(t.encoderImplementation)&&(s===Vb.VIDEO&&this._prevEncoderImplementation!==t.encoderImplementation||s===Vb.AUXILIARY&&this._prevAuxEncoderImpl!==t.encoderImplementation)){let r=2,i=this._prevEncoderImplementation;s===Vb.AUXILIARY&&(r=7,i=this._prevAuxEncoderImpl),UO.emit("262",{userId:e.userId,streamType:r,prevImplementation:i,implementation:t.encoderImplementation,codec:e.videoCodec,isHWCodec:t.powerEfficientEncoder}),this[s===Vb.VIDEO?"_prevEncoderImplementation":"_prevAuxEncoderImpl"]=t.encoderImplementation,this._log.info("".concat(s===Vb.AUXILIARY?"aux ":"","encoderImplementation change to ").concat(t.encoderImplementation,"(").concat(e.videoCodec,") HWEncoder: ").concat(t.powerEfficientEncoder))}t.ssrc===n.video?!AD(t.qualityLimitationReason)&&0!==t.bytesSent&&this._prevQualityLimitationReason!==t.qualityLimitationReason&&(this._log.info("qualityLimitationReason change to ".concat(t.qualityLimitationReason)),UO.emit("263",{userId:e.userId,reason:t.qualityLimitationReason,prevReason:this._prevQualityLimitationReason,streamType:2,isQosClearFirst:null==(i=e.localMainVideoTrack)?void 0:i.isQosClearFirst}),this._prevQualityLimitationReason=t.qualityLimitationReason):t.ssrc===n.auxiliary&&!AD(t.qualityLimitationReason)&&0!==t.bytesSent&&this._prevAuxQualityLimitationReason!==t.qualityLimitationReason&&(this._log.info("aux qualityLimitationReason change to ".concat(t.qualityLimitationReason)),UO.emit("263",{userId:e.userId,reason:t.qualityLimitationReason,prevReason:this._prevAuxQualityLimitationReason,streamType:7,isQosClearFirst:null==(o=e.localAuxVideoTrack)?void 0:o.isQosClearFirst}),this._prevAuxQualityLimitationReason=t.qualityLimitationReason)}else r.audio.bytesSent=t.bytesSent,r.audio.packetsSent=t.packetsSent;else"candidate-pair"===t.type?vk(t)&&(this.totalBytesSent=t.bytesSent,uD(t.currentRoundTripTime)&&(r.rtt=Math.floor(1e3*t.currentRoundTripTime))):"media-source"===t.type&&(t.kind===Vb.AUDIO?(r.audio.audioLevel=t.audioLevel||0,r.audio.totalAudioEnergy=t.totalAudioEnergy||0,t.echoReturnLoss,t.totalSamplesDuration&&(r.audio.totalSamplesDuration=t.totalSamplesDuration)):t.kind===Vb.VIDEO&&(t.trackIdentifier===e.getVideoTrackId(Vb.VIDEO)?r.video.fpsCapture=t.framesPerSecond:t.trackIdentifier===e.getVideoTrackId(Vb.AUXILIARY)?r.auxiliary.fpsCapture=t.framesPerSecond:r.small.fpsCapture=t.framesPerSecond));if(!AD(t.audioLevel)&&null!=(a=e.localMainAudioTrack)&&a.mediaTrack&&t.trackIdentifier===e.localMainAudioTrack.mediaTrack.id&&(r.audio.audioLevel=t.audioLevel||0),!AD(t.frameWidth)){let i=Vb.SMALL;t.trackIdentifier===e.getVideoTrackId(Vb.VIDEO)||t.ssrc===n.video?i=Vb.VIDEO:(t.trackIdentifier===e.getVideoTrackId(Vb.AUXILIARY)||t.ssrc===n.auxiliary)&&(i=Vb.AUXILIARY),r[i].frameWidth=t.frameWidth,r[i].frameHeight=t.frameHeight,r[i].framesSent=t.framesSent}})),e.localMainAudioTrack){let t=e.localMainAudioTrack.getInternalAudioLevel();r.audio.micAudioLevel=t,0===r.audio.audioLevel&&(r.audio.audioLevel=t)}this.totalBytesSent||(this.totalBytesSent+=r.audio.bytesSent+r.video.bytesSent+r.auxiliary.bytesSent),Object.keys(r).forEach((t=>{t===Vb.AUDIO?(e.localMainAudioTrack&&(e.localMainAudioTrack.stat=r[t]),e.localAuxAudioTrack&&(e.localAuxAudioTrack.stat=r[t])):t===Vb.VIDEO?e.localMainVideoTrack&&(e.localMainVideoTrack.stat=r[t]):t===Vb.AUXILIARY&&e.localAuxVideoTrack&&(e.localAuxVideoTrack.stat=r[t])}))}catch(e){this._log.warn("failed to getStats on sender connection ".concat(e))}return 0===r.rtt&&(r.rtt=(null==(t=this.room.networkQuality)?void 0:t.uplinkRTT)||0),r}))}getReceiverStats(e){return YS(this,null,(function*(){var t,r,i;let n={tinyId:e.tinyId,userId:e.userId,rtt:0,hasAudio:!1,hasVideo:!1,hasAuxiliary:!1,isSmallSubscribed:!1,audio:{bytesReceived:0,packetsReceived:0,packetsLost:0,p2pDelay:0,totalJitter:0,totalJitterCount:0,audioLevel:0,totalAudioEnergy:0,insertedSamplesForDeceleration:0,removedSamplesForAcceleration:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0,fpsDecoded:0,freezeCount:0,totalFreezesDuration:0,totalJitter:0,totalJitterCount:0},auxiliary:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0,fpsDecoded:0,totalJitter:0,totalJitterCount:0}},o=e.getPeerConnection();if(o)try{let{ssrc:i}=e,{muteState:a,subscribeState:s}=e;(this._spcStats||(yield o.getStats())).forEach((t=>{if("inbound-rtp"===t.type){let r=(t.mediaType||t.kind)===Vb.AUDIO;if(r){if(t.ssrc!==i.audio||!a.hasAudio)return;n.audio.packetsReceived=t.packetsReceived,n.audio.bytesReceived=t.bytesReceived,n.audio.packetsLost=t.packetsLost,t.insertedSamplesForDeceleration&&(n.audio.insertedSamplesForDeceleration=t.insertedSamplesForDeceleration),t.removedSamplesForAcceleration&&(n.audio.removedSamplesForAcceleration=t.removedSamplesForAcceleration),t.totalSamplesDuration&&(n.audio.totalSamplesDuration=t.totalSamplesDuration),t.totalSamplesReceived&&(n.audio.totalSamplesReceived=t.totalSamplesReceived),t.concealedSamples&&(n.audio.concealedSamples=t.concealedSamples);let{remoteAudioTrack:r}=e;r.stat.packetsReceived=t.packetsReceived,r.stat.bytesReceived=t.bytesReceived,r.stat.packetsLost=t.packetsLost,n.audio.p2pDelay=r.stat.end2EndDelay,n.hasAudio=!0}else{if(gB&&0===t.bytesReceived)return;let r;t.ssrc===i.video&&a.hasVideo&&(n.video.packetsReceived=t.packetsReceived,n.video.bytesReceived=t.bytesReceived,n.video.packetsLost=t.packetsLost,n.video.framesReceived=t.framesReceived,n.video.framesDecoded=t.framesDecoded,n.video.fpsDecoded=t.framesPerSecond,n.hasVideo=!0,r=e.remoteVideoTrack,a.hasSmall&&s.smallVideo&&(n.isSmallSubscribed=!0),t.decoderImplementation&&(!this._prevDecoderImplementationMap.has(n.userId)||this._prevDecoderImplementationMap.get(n.userId)!==t.decoderImplementation)&&(this._log.info("".concat(n.userId," decoderImplementation change to ").concat(t.decoderImplementation," HWDecoder: ").concat(t.powerEfficientDecoder)),UO.emit("262",{userId:this.room.userId,remoteUserId:n.userId,prevImplementation:this._prevDecoderImplementationMap.get(n.userId),implementation:t.decoderImplementation,codec:e.videoCodec,isHWCodec:t.powerEfficientDecoder}),this._prevDecoderImplementationMap.set(n.userId,t.decoderImplementation))),t.ssrc===i.auxiliary&&a.hasAuxiliary&&(n.auxiliary.packetsReceived=t.packetsReceived,n.auxiliary.bytesReceived=t.bytesReceived,n.auxiliary.packetsLost=t.packetsLost,n.auxiliary.framesReceived=t.framesReceived,n.auxiliary.framesDecoded=t.framesDecoded,n.auxiliary.fpsDecoded=t.framesPerSecond,r=e.remoteAuxiliaryTrack,n.hasAuxiliary=!0),r&&(r.stat.packetsReceived=t.packetsReceived,r.stat.bytesReceived=t.bytesReceived,r.stat.packetsLost=t.packetsLost,r.stat.framesReceived=t.framesReceived,r.stat.framesDecoded=t.framesDecoded,t.jitterBufferDelay&&(r.stat.jitterBufferDelay=Math.floor(t.jitterBufferDelay/t.jitterBufferEmittedCount*1e3)))}t.jitterBufferDelay&&(r?(n.audio.totalJitter=t.jitterBufferDelay,n.audio.totalJitterCount=t.jitterBufferEmittedCount):t.ssrc===i.video&&a.hasVideo?(n.video.totalJitter=t.jitterBufferDelay,n.video.totalJitterCount=t.jitterBufferEmittedCount):t.ssrc===i.auxiliary&&a.hasAuxiliary&&(n.auxiliary.totalJitter=t.jitterBufferDelay,n.auxiliary.totalJitterCount=t.jitterBufferEmittedCount))}else"candidate-pair"===t.type&&vk(t)&&(this.totalBytesReceived=t.bytesReceived,uD(t.currentRoundTripTime)&&(n.rtt=Math.floor(1e3*t.currentRoundTripTime)));AD(t.frameWidth)||((t.trackIdentifier===e.getMainStreamVideoTrackId()||t.ssrc===i.video)&&(n.video.frameWidth=t.frameWidth,n.video.frameHeight=t.frameHeight,e.remoteVideoTrack.stat.frameWidth=t.frameWidth,e.remoteVideoTrack.stat.frameHeight=t.frameHeight),(t.trackIdentifier===e.getAuxStreamVideoTrackId()||t.ssrc===i.auxiliary)&&(n.auxiliary.frameWidth=t.frameWidth,n.auxiliary.frameHeight=t.frameHeight,e.remoteAuxiliaryTrack.stat.frameWidth=t.frameWidth,e.remoteAuxiliaryTrack.stat.frameHeight=t.frameHeight)),!AD(t.audioLevel)&&e.muteState.audioAvailable&&e.remoteAudioTrack.mediaTrack&&t.trackIdentifier===e.remoteAudioTrack.mediaTrack.id&&(n.audio.audioLevel=t.audioLevel||0,n.audio.totalAudioEnergy=t.totalAudioEnergy||0)})),0===n.audio.audioLevel&&e.muteState.audioAvailable&&(n.audio.audioLevel=e.remoteAudioTrack.getInternalAudioLevel()||0),this.totalBytesReceived||(this.totalBytesReceived+=n.audio.bytesReceived+n.video.bytesReceived+n.auxiliary.bytesReceived),AD(null==(t=e.remoteVideoTrack.player.stat)?void 0:t.fps)||(n.video.fpsRender=e.remoteVideoTrack.player.stat.fps),AD(null==(r=e.remoteAuxiliaryTrack.player.stat)?void 0:r.fps)||(n.auxiliary.fpsRender=e.remoteAuxiliaryTrack.player.stat.fps)}catch(e){this._log.warn("failed to getStats on receiver connection ".concat(e))}return 0===n.rtt&&(n.rtt=(null==(i=this.room.networkQuality)?void 0:i.uplinkRTT)||0),n}))}getStats(e,t){return YS(this,null,(function*(){let r={},i=[];if(this.room.singlePC){let e=this.room.singlePC.getPeerConnection();if(!e)return{senderStats:r,receiverStats:i};let t=yD(),n=yield e.getStats(),o=yD();o-t>2e3&&this._log.warn("getStats cost ".concat(o-t,"ms"));let a=[],s=new Set(["inbound-rtp","outbound-rtp","track","candidate-pair","media-source"]);n.forEach((e=>s.has(e.type)&&a.push(e))),this._spcStats=a}e&&(r=yield this.getSenderStats(e));for(let[e,r]of t){let e=yield this.getReceiverStats(r);i.push(e)}return{senderStats:r,receiverStats:i}}))}getDifferenceValue(e,t){if(NP(e))return t;let r=t-e;return r<0?0:r}prepareReport(e){let{stats:t,report:r,freezeMap:i}=e;var n;if(!NP(t.senderStats)){let e={uint32_audio_level:t.senderStats.audio.audioLevel*LQ,uint32_audio_energy:1e6*(t.senderStats.audio.totalAudioEnergy||0),uint32_audio_codec_bitrate:t.senderStats.audio.bytesSent};t.senderStats.audio.micAudioLevel&&(e.uint32_mic_audio_level=t.senderStats.audio.micAudioLevel*LQ),t.senderStats.audio.totalSamplesDuration&&(r.msg_device_info.uint32_audio_capture_cost=t.senderStats.audio.totalSamplesDuration);let i=[];if(t.senderStats.video.bytesSent){let e={uint32_video_stream_type:2,uint32_video_codec_fps:t.senderStats.video.framesSent,uint32_video_capture_fps:t.senderStats.video.fpsCapture,uint32_video_width:t.senderStats.video.frameWidth,uint32_video_height:t.senderStats.video.frameHeight,uint32_video_codec_bitrate:t.senderStats.video.bytesSent,uint32_video_enc_fps:t.senderStats.video.framesEncoded,uint32_key_frame_count:t.senderStats.video.keyFramesEncoded,uint32_nack_count:t.senderStats.video.nackCount,uint32_pli_count:t.senderStats.video.pliCount,uint32_encode_cost:1e3*(t.senderStats.video.totalEncodeTime||0),uint32_send_packet_cost:1e3*(t.senderStats.video.totalPacketSendDelay||0),uint32_video_arq_packets:t.senderStats.video.retransmittedPacketsSent};i.push(e)}if(t.senderStats.small.bytesSent){let e={uint32_video_stream_type:3,uint32_video_codec_fps:t.senderStats.small.framesSent||0,uint32_video_capture_fps:t.senderStats.small.fpsCapture||0,uint32_video_width:t.senderStats.small.frameWidth||0,uint32_video_height:t.senderStats.small.frameHeight||0,uint32_video_codec_bitrate:t.senderStats.small.bytesSent,uint32_video_enc_fps:t.senderStats.small.framesEncoded||0,uint32_key_frame_count:t.senderStats.small.keyFramesEncoded,uint32_nack_count:t.senderStats.small.nackCount,uint32_pli_count:t.senderStats.small.pliCount,uint32_encode_cost:1e3*(t.senderStats.small.totalEncodeTime||0),uint32_send_packet_cost:1e3*(t.senderStats.small.totalPacketSendDelay||0),uint32_video_arq_packets:t.senderStats.small.retransmittedPacketsSent};i.push(e)}if(t.senderStats.auxiliary.bytesSent){let e={uint32_video_stream_type:7,uint32_video_codec_fps:t.senderStats.auxiliary.framesSent||0,uint32_video_capture_fps:t.senderStats.auxiliary.fpsCapture||0,uint32_video_width:t.senderStats.auxiliary.frameWidth||0,uint32_video_height:t.senderStats.auxiliary.frameHeight||0,uint32_video_codec_bitrate:t.senderStats.auxiliary.bytesSent,uint32_video_enc_fps:t.senderStats.auxiliary.framesEncoded||0,uint32_key_frame_count:t.senderStats.auxiliary.keyFramesEncoded,uint32_nack_count:t.senderStats.auxiliary.nackCount,uint32_pli_count:t.senderStats.auxiliary.pliCount,uint32_encode_cost:1e3*(t.senderStats.auxiliary.totalEncodeTime||0),uint32_send_packet_cost:1e3*(t.senderStats.auxiliary.totalPacketSendDelay||0),uint32_video_arq_packets:t.senderStats.auxiliary.retransmittedPacketsSent};i.push(e)}let n={uint32_bitrate:0,uint32_lost:0,uint32_rtt:t.senderStats.rtt};r.msg_up_stream_info={msg_audio_status:e,msg_video_status:i,msg_network_status:n}}let{statInterval:o}=this;r.msg_down_stream_info=[],t.receiverStats.forEach((e=>{let t={msg_user_info:{str_identifier:e.userId,uint64_tinyid:e.tinyId},msg_network_status:{uint32_rtt:e.rtt,uint32_bitrate:0,uint32_lost:0},msg_audio_status:{},msg_video_status:[]};if(e.hasAudio){let r={uint32_audio_p2p_delay:e.audio.p2pDelay,uint32_audio_cache_ms:e.audio.totalJitter,uint32_audio_cache_ms_count:e.audio.totalJitterCount,uint32_audio_codec_bitrate:e.audio.bytesReceived,uint32_audio_total_bitrate:e.audio.bytesReceived,uint32_audio_level:1e8*e.audio.audioLevel,uint32_audio_energy:1e6*e.audio.totalAudioEnergy,uint32_audio_receive:e.audio.packetsReceived,uint32_audio_origin_lost:e.audio.packetsLost};t.msg_audio_status=r}if(e.hasVideo){let r=i.get("".concat(e.userId,"_").concat(tR)),n=r?r.duration:0,o={uint32_video_stream_type:e.isSmallSubscribed?3:2,uint32_video_receive_fps:e.video.framesReceived,uint32_video_width:e.video.frameWidth,uint32_video_height:e.video.frameHeight,uint32_video_codec_bitrate:e.video.bytesReceived,uint32_video_receive:e.video.packetsReceived,uint32_video_origin_lost:e.video.packetsLost,uint32_video_block_time:n,uint32_video_dec_fps:e.video.framesDecoded,uint32_video_codec_fps:e.video.fpsRender,uint32_video_cache_ms:e.video.totalJitter,uint32_video_cache_ms_count:e.video.totalJitterCount};t.msg_video_status.push(o)}if(e.hasAuxiliary){let r=i.get("".concat(e.userId,"_").concat(rR)),n=r?r.duration:0,o={uint32_video_stream_type:7,uint32_video_receive_fps:e.auxiliary.framesReceived,uint32_video_width:e.auxiliary.frameWidth,uint32_video_height:e.auxiliary.frameHeight,uint32_video_codec_bitrate:e.auxiliary.bytesReceived,uint32_video_receive:e.auxiliary.packetsReceived+e.auxiliary.packetsLost,uint32_video_origin_lost:e.auxiliary.packetsLost,uint32_video_block_time:n,uint32_video_dec_fps:e.auxiliary.framesDecoded,uint32_video_codec_fps:e.video.fpsRender,uint32_video_cache_ms:e.auxiliary.totalJitter,uint32_video_cache_ms_count:e.auxiliary.totalJitterCount};t.msg_video_status.push(o)}r.msg_down_stream_info.push(t)}));let a=this._prevReport,s=this._prevStats;if(this._prevReport=JSON.parse(JSON.stringify(r)),this._prevStats=JSON.parse(JSON.stringify(t)),r.msg_up_stream_info.msg_audio_status&&a.msg_up_stream_info.msg_audio_status){let e=a.msg_up_stream_info.msg_audio_status,t=r.msg_up_stream_info.msg_audio_status;if(0===e.uint32_audio_codec_bitrate)t.uint32_audio_codec_bitrate=0;else{let i=this.getDifferenceValue(e.uint32_audio_codec_bitrate,t.uint32_audio_codec_bitrate);t.uint32_audio_codec_bitrate=Math.round(8*i/o),r.msg_up_stream_info.msg_network_status.uint32_bitrate+=t.uint32_audio_codec_bitrate}null!=(n=a.msg_device_info)&&n.uint32_audio_capture_cost?r.msg_device_info.uint32_audio_capture_cost=2*Math.floor(1e3*this.getDifferenceValue(a.msg_device_info.uint32_audio_capture_cost,r.msg_device_info.uint32_audio_capture_cost)/o):delete r.msg_device_info.uint32_audio_capture_cost}let c=a.msg_up_stream_info.msg_video_status;r.msg_up_stream_info.msg_video_status.forEach((e=>{let t=c.find((t=>t.uint32_video_stream_type===e.uint32_video_stream_type));if(!t||0===t.uint32_video_codec_bitrate)return e.uint32_video_codec_bitrate=0,e.uint32_video_enc_fps=0,void(e.uint32_video_codec_fps=0);let i=0,n=0,a=0;t&&e.uint32_video_codec_bitrate>=t.uint32_video_codec_bitrate&&(i=t.uint32_video_codec_bitrate,n=t.uint32_video_enc_fps,a=t.uint32_video_codec_fps);let s=this.getDifferenceValue(i,e.uint32_video_codec_bitrate);e.uint32_video_codec_bitrate=Math.round(8*s/o),r.msg_up_stream_info.msg_network_status.uint32_bitrate+=e.uint32_video_codec_bitrate,e.uint32_video_enc_fps=Math.round(this.getDifferenceValue(n,e.uint32_video_enc_fps)/o),e.uint32_video_codec_fps=Math.round(this.getDifferenceValue(a,e.uint32_video_codec_fps)/o),0===t.uint32_video_width&&0===t.uint32_video_height&&0===t.uint32_video_codec_fps&&(e.uint32_video_codec_fps=e.uint32_video_enc_fps),AD(t.uint32_key_frame_count)||(e.uint32_key_frame_count=Math.round(this.getDifferenceValue(t.uint32_key_frame_count,e.uint32_key_frame_count))),AD(t.uint32_nack_count)||(e.uint32_nack_count=Math.round(this.getDifferenceValue(t.uint32_nack_count,e.uint32_nack_count))),AD(t.uint32_pli_count)||(e.uint32_pli_count=Math.round(this.getDifferenceValue(t.uint32_pli_count,e.uint32_pli_count))),AD(t.uint32_video_arq_packets)||(e.uint32_video_arq_packets=Math.round(this.getDifferenceValue(t.uint32_video_arq_packets,e.uint32_video_arq_packets))),AD(t.uint32_encode_cost)||(e.uint32_encode_cost=Math.round(this.getDifferenceValue(t.uint32_encode_cost,e.uint32_encode_cost)/o)),AD(t.uint32_send_packet_cost)||(e.uint32_send_packet_cost=Math.round(this.getDifferenceValue(t.uint32_send_packet_cost,e.uint32_send_packet_cost)/o))}));let A=a.msg_down_stream_info;r.msg_down_stream_info=r.msg_down_stream_info.filter((e=>A.find((t=>t.msg_user_info.uint64_tinyid===e.msg_user_info.uint64_tinyid))));let l=r.msg_down_stream_info;return l.forEach((e=>{let t=A.find((t=>t.msg_user_info.uint64_tinyid===e.msg_user_info.uint64_tinyid));if(NP(e.msg_audio_status)||NP(t.msg_audio_status))e.msg_audio_status={};else{let r=e.msg_audio_status,i=t.msg_audio_status,n=this.getDifferenceValue(i.uint32_audio_cache_ms_count,r.uint32_audio_cache_ms_count);delete r.uint32_audio_cache_ms_count,r.uint32_audio_cache_ms=Math.floor(1e3*this.getDifferenceValue(i.uint32_audio_cache_ms,r.uint32_audio_cache_ms)/n)||0;let a=this.room.remotePublishedUserMap.get(e.msg_user_info.str_identifier);a&&(a.remoteAudioTrack.stat.jitterBufferDelay=r.uint32_audio_cache_ms),r.uint32_audio_origin_lost=this.getDifferenceValue(i.uint32_audio_origin_lost,r.uint32_audio_origin_lost),r.uint32_audio_receive=this.getDifferenceValue(i.uint32_audio_receive,r.uint32_audio_receive),r.uint32_audio_receive+=r.uint32_audio_origin_lost;let s=this.getDifferenceValue(i.uint32_audio_codec_bitrate,r.uint32_audio_codec_bitrate);r.uint32_audio_codec_bitrate=Math.round(8*s/o),r.uint32_audio_total_bitrate=Math.round(8*s/o)}if(e.msg_video_status&&t.msg_video_status){let r=t.msg_video_status;e.msg_video_status=e.msg_video_status.filter((e=>r.find((t=>t.uint32_video_stream_type===e.uint32_video_stream_type)))),e.msg_video_status.forEach((e=>{let t=r.find((t=>t.uint32_video_stream_type===e.uint32_video_stream_type)),i=t.uint32_video_receive,n=t.uint32_video_origin_lost,a=t.uint32_video_codec_bitrate,s=t.uint32_video_receive_fps,c=t.uint32_video_dec_fps;e.uint32_video_origin_lost=this.getDifferenceValue(n,e.uint32_video_origin_lost),e.uint32_video_receive=this.getDifferenceValue(i,e.uint32_video_receive)+e.uint32_video_origin_lost;let A=this.getDifferenceValue(a,e.uint32_video_codec_bitrate);e.uint32_video_codec_bitrate=Math.round(8*A/o);let l=this.getDifferenceValue(s,e.uint32_video_receive_fps);e.uint32_video_receive_fps=Math.round(l/o),e.uint32_video_dec_fps=Math.round(this.getDifferenceValue(c,e.uint32_video_dec_fps)/o);let u=this.getDifferenceValue(t.uint32_video_cache_ms_count,e.uint32_video_cache_ms_count);delete e.uint32_video_cache_ms_count,e.uint32_video_cache_ms=Math.floor(1e3*this.getDifferenceValue(t.uint32_video_cache_ms,e.uint32_video_cache_ms)/u)||0}))}})),s&&t.receiverStats.forEach((e=>{if(e.audio.concealedSamples&&e.audio.totalSamplesReceived){let t=s.receiverStats.find((t=>t.userId===e.userId));if(t&&t.audio.concealedSamples&&t.audio.totalSamplesReceived){let r=e.audio.concealedSamples-t.audio.concealedSamples,i=e.audio.totalSamplesReceived-t.audio.totalSamplesReceived,n=Math.floor(r/i*1e3*o);if(n>1e3*o/5){let t=l.find((t=>t.msg_user_info.str_identifier===e.userId));t&&(t.msg_audio_status.uint32_audio_block_time=n)}}}})),r}getStatsReport(e){return YS(this,arguments,(function(e){var t=this;let{uplinkConnection:r,downlinkConnections:i,freezeMap:n}=e;return function*(){let e={msg_device_info:{},msg_up_stream_info:{msg_audio_status:{uint32_audio_format:11,uint32_audio_sample_rate:0,uint32_audio_codec_bitrate:0,uint32_audio_receive:0,uint32_audio_origin_lost:0,uint32_audio_level:0,uint32_audio_energy:0},msg_video_status:[],msg_network_status:{uint32_bitrate:0,uint32_rtt:0,uint32_lost:0}},msg_down_stream_info:[{msg_user_info:{str_identifier:"",uint64_tinyid:0},msg_audio_status:{uint32_audio_cache_ms:0,uint32_audio_format:11,uint32_audio_sample_rate:0,uint32_audio_codec_bitrate:0,uint32_audio_total_bitrate:0,uint32_audio_level:0,uint32_audio_energy:0,uint32_audio_receive:0,uint32_audio_origin_lost:0,uint32_audio_final_lost:0},msg_video_status:[{uint32_video_cache_ms:0,uint32_video_stream_type:0,uint32_video_receive_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_codec_bitrate:0,uint32_video_receive:0,uint32_video_origin_lost:0,uint32_video_block_time:0,uint32_video_dec_fps:0}],msg_network_status:{uint32_bitrate:0,uint32_rtt:0,uint32_lost:0}}]},o=yield t.getStats(r,i);return"{}"===JSON.stringify(t._prevReport)&&(t._prevReport=JSON.parse(JSON.stringify(e))),t.prepareReport({stats:o,report:e,freezeMap:n}),t._prevReportTime=Date.now(),e}()}))}reset(){this._prevReportTime=0,this._prevReport={},this._prevEncoderImplementation="",this._prevQualityLimitationReason="",this._prevDecoderImplementationMap=new Map}},CV=VS(WS());var yV=class e extends CV.default{constructor(e){let{signalChannel:t,room:r}=e;super(),jS(this,"_room"),jS(this,"_signalChannel"),jS(this,"_log"),jS(this,"uplinkRTT",0),jS(this,"uplinkLoss",0),jS(this,"downlinkRTT",0),jS(this,"downlinkLoss",0),jS(this,"pingResults",{}),jS(this,"_downlinkPrevStatMap",new Map),jS(this,"_downlinkLossAndRTTMap",new Map),jS(this,"_interval",-1),jS(this,"_uplinkNetworkQuality",0),jS(this,"_downlinkNetworkQuality",0),this._room=r,this._signalChannel=t,this._log=jO.createLogger({id:"q",userId:this._room.userId,sdkAppId:this._room.sdkAppId}),this.initialize()}get uplinkNetworkQuality(){return this._uplinkNetworkQuality}set uplinkNetworkQuality(e){e!==this._uplinkNetworkQuality&&this._log.info("uplink ".concat(this.uplinkNetworkQuality," -> ").concat(e,", rtt: ").concat(this.uplinkRTT,", loss: ").concat(this.uplinkLoss," ws-rtt: ").concat(this._signalChannel.rtt)),this._uplinkNetworkQuality=e}get downlinkNetworkQuality(){return this._downlinkNetworkQuality}set downlinkNetworkQuality(e){if(e!==this._downlinkNetworkQuality){let{rtt:t,loss:r}=this.getAverageLossAndRTT([...this._downlinkLossAndRTTMap.values()]);this._log.info("downlink ".concat(this.downlinkNetworkQuality," -> ").concat(e,", rtt: ").concat(t,", loss: ").concat(r," ws-rtt: ").concat(this._signalChannel.rtt))}this._downlinkNetworkQuality=e}initialize(){this._signalChannel.on(zF.UPLINK_NETWORK_STATS,(e=>{this.handleUplinkNetworkQuality(e)})),this._signalChannel.on("2",this.handleSignalConnectionStateChange.bind(this)),this.start()}handleUplinkNetworkQuality(e){var t,r;if(0!==e.data.code)return;let i=e.data.data;if(i.delay&&this.updateDelay(i.delay),this._room.signalChannel&&i.wsRtt&&(this._room.signalChannel.rtt=i.wsRtt),!this._room.uplinkConnection)return this.uplinkNetworkQuality=0,this.uplinkLoss=0,void(this.uplinkRTT=0);let n=null==(r=null==(t=this._room)?void 0:t.uplinkConnection)?void 0:r.getPeerConnection();if(n&&this.isPeerConnectionDisconnected(n))return this.uplinkNetworkQuality=6,this.uplinkLoss=0,void(this.uplinkRTT=0);let o=i.expectAudPkg+i.expectVidPkg,a=i.recvAudPkg+i.recvVidPkg,s=o-a;0===o&&0===a||(this.uplinkLoss=s<=0?0:Math.round(s/o*100),this.uplinkRTT=i.rtt,this.uplinkNetworkQuality=this.getNetworkQuality(this.uplinkLoss,this.uplinkRTT))}handleDownlinkNetworkQuality(){return YS(this,null,(function*(){if(0===this._room.remotePublishedUserMap.size)return void(this.downlinkNetworkQuality=0);let e=[...this._room.remotePublishedUserMap.values()],t=e.filter((e=>{var t;return(null==(t=e.getPeerConnection())?void 0:t.connectionState)===uR.CONNECTED}));if(e.filter((e=>this.isPeerConnectionDisconnected(e.getPeerConnection()))).length===e.length)return void(this.downlinkNetworkQuality=6);for(let e=0;e<t.length;e++){let r=t[e].getPeerConnection();if(!r)return;let{rtt:i,totalPacketsLost:n,totalPacketsReceived:o}=yield this.getStat(r);if(!this._downlinkPrevStatMap.has(r)){this._downlinkPrevStatMap.set(r,{totalPacketsLost:n,totalPacketsReceived:o});continue}let a=0,s=this._downlinkPrevStatMap.get(r),c=n-s.totalPacketsLost,A=o-s.totalPacketsReceived;a=c<=0||A<0?0:Math.round(c/(c+A)*100),this._downlinkPrevStatMap.set(r,{totalPacketsLost:n,totalPacketsReceived:o}),this._downlinkLossAndRTTMap.set(r,{rtt:i,loss:a,userId:t[e].getUserId(),audioDelay:t[e].remoteAudioTrack.stat.end2EndDelay,videoDelay:t[e].remoteVideoTrack.stat.end2EndDelay})}if([...this._downlinkPrevStatMap.keys()].forEach((e=>{this.isPeerConnectionDisconnected(e)&&(this._downlinkPrevStatMap.delete(e),this._downlinkLossAndRTTMap.delete(e))})),0===this._downlinkLossAndRTTMap.size)return this.downlinkRTT=0,this.downlinkLoss=0,void(this.downlinkNetworkQuality=0);let{rtt:r,loss:i}=this.getAverageLossAndRTT([...this._downlinkLossAndRTTMap.values()]);this.downlinkRTT=r,this.downlinkLoss=i,this.downlinkNetworkQuality=this.getNetworkQuality(i,r)}))}getStat(e){return YS(this,null,(function*(){let t={rtt:0,totalPacketsLost:0,totalPacketsReceived:0};if(!e||!Ok())return t;let r=e.getReceivers();try{for(let e=0;e<r.length;e++)(yield r[e].getStats()).forEach((e=>{"candidate-pair"===e.type&&uD(e.currentRoundTripTime)&&(t.rtt=Math.round(1e3*e.currentRoundTripTime)),"inbound-rtp"===e.type&&(e.mediaType===Vb.AUDIO||e.mediaType===Vb.VIDEO)&&(t.totalPacketsLost+=e.packetsLost,t.totalPacketsReceived+=e.packetsReceived)}));return 0===t.rtt&&(t.rtt=this.uplinkRTT),t}catch(e){return t}}))}getAverageLossAndRTT(e){let t={rtt:0,loss:0};return Array.isArray(e)&&e.length>0&&(e.forEach((e=>{t.rtt+=e.rtt,t.loss+=e.loss})),Object.keys(t).forEach((r=>{t[r]=Math.round(t[r]/e.length)}))),t}getNetworkQuality(e,t){return e>50||t>500?5:e>30||t>350?4:e>20||t>200?3:e>10||t>100?2:e>=0||t>=0?1:0}handleSignalConnectionStateChange(e){"DISCONNECTED"===e.state?(this.uplinkRTT=0,this.uplinkLoss=0,this.uplinkNetworkQuality=6):"CONNECTED"===e.state&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}handleUplinkConnectionStateChange(e){let{state:t}=e;"DISCONNECTED"===t?(this.uplinkLoss=0,this.uplinkRTT=0,this.uplinkNetworkQuality=6):"CONNECTED"===t&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}isPeerConnectionDisconnected(e){return!(!e||e.connectionState!==uR.DISCONNECTED&&e.connectionState!==uR.FAILED&&e.connectionState!==uR.CLOSED)}setUplinkConnection(e){this._room.uplinkConnection=e,this._room.uplinkConnection?this._room.uplinkConnection.on("connection-state-changed",this.handleUplinkConnectionStateChange.bind(this)):(this.uplinkNetworkQuality=0,this.uplinkRTT=0,this.uplinkLoss=0)}start(){-1===this._interval?(this._log.debug("start network quality calculating"),this._interval=mM.run("ric",(()=>{var t;this.handleDownlinkNetworkQuality();let r=[...this._downlinkLossAndRTTMap.values()];UO.emit(VO.NETWORK_QUALITY,{room:this._room,uplink:{rtt:this.uplinkRTT,loss:this.uplinkLoss},downlinks:r});let i=null==(t=this._room.scheduleResult.config)?void 0:t.pingDomainInfo,n={uplinkNetworkQuality:this.uplinkNetworkQuality,downlinkNetworkQuality:this.downlinkNetworkQuality,uplinkRTT:this.uplinkRTT,uplinkLoss:this.uplinkLoss,downlinkRTT:this.downlinkRTT,downlinkLoss:this.downlinkLoss};i&&(n=xS(LS({},n),{pingResults:this.uplinkRTT>i.rttThreshold||this.downlinkRTT>i.rttThreshold?this.pingResults:{}})),this.emit(e.EVENT_NETWORK_QUALITY,n);let o=Date.now();if(i&&(this.uplinkRTT>i.rttThreshold||this.downlinkRTT>i.rttThreshold)&&o-e.lastPingTime>1e3*i.interval){e.lastPingTime=Date.now();let t=i.domain.map((e=>function(e){return new Promise((t=>YS(this,null,(function*(){let r=setTimeout((()=>{t({totalCost:1e4,local:0,dns:0,tcp:0,tls:0,request:0,response:0})}),1e4),i=Date.now(),n="https://".concat(e,"/?t=").concat(i);try{yield fetch(n)}catch(e){}clearTimeout(r);let o=function(e){let t={totalCost:0,local:0,redirect:0,httpCache:0,dns:0,tcp:0,tls:0,request:0,response:0};try{let r=performance.getEntriesByType("resource").reverse();for(let i of r)if(i.name===e){let e=Math.round(i.duration),r=Math.max(Math.round(i.domainLookupStart-i.startTime),0),n=i.redirectStart>0?Math.max(Math.round(i.redirectEnd-i.redirectStart),0):0,o=i.fetchStart>0?Math.max(Math.round(i.domainLookupStart-i.fetchStart),0):0,a=Math.round(i.domainLookupEnd-i.domainLookupStart),s=Math.round(i.requestStart-i.secureConnectionStart),c=Math.round(i.secureConnectionStart-i.connectStart),A=Math.round(i.responseStart-i.requestStart),l=Math.round(i.responseEnd-(i.responseStart||i.startTime));t=xS(LS({},t),{totalCost:e,local:r,redirect:n,httpCache:o,dns:a,tcp:c,tls:s,request:A,response:l});break}}catch(e){}return t}(n);0===o.totalCost&&(o.totalCost=Date.now()-i),t(o)}))))}(e).then((t=>({domain:e,cost:t.totalCost})))));Promise.all(t).then((e=>{this.pingResults.isPoorNetwork=e.some((e=>e.cost>700)),this.pingResults.timestamp=o,this.pingResults.data=e,e.forEach((e=>{sk.addSuccessEvent({key:521718,cost:e.cost})})),this._log.warn("All ping results: ".concat(JSON.stringify(e)))})).catch((e=>{this._log.warn("Error during pinging domains: ".concat(e))}))}}),{delay:2e3})):this._log.info("network quality calculating is already started")}stop(){this._log.debug("stopped"),-1!==this._interval&&(mM.clearTask(this._interval),this._interval=-1),this._downlinkLossAndRTTMap.clear(),this._downlinkPrevStatMap.clear()}updateDelay(e){let{tinyIdToUserIdMap:t}=this._room;e.forEach((e=>{let{srcTinyId:r,videoDelay:i,audioDelay:n}=e,o=t.get(r);if(o){let e=this._room.remotePublishedUserMap.get(o);null==e||e.setDelay({videoDelay:i,audioDelay:n})}}))}};jS(yV,"EVENT_NETWORK_QUALITY","0"),jS(yV,"lastPingTime",0);var TV=yV,vV=class{constructor(e){jS(this,"_frameWorkType"),jS(this,"_component"),jS(this,"_language"),jS(this,"connectionType"),jS(this,"_room"),jS(this,"_signalInfo",{tinyId:void 0,clientIp:"",signalIp:"",relayIp:"",relayInnerIp:"",relayPort:0,endReportExtend:void 0}),jS(this,"_keyPrefix"),jS(this,"_log"),jS(this,"_intervalId"),jS(this,"_firstPublishedUserList"),jS(this,"_networkQuality"),jS(this,"_basicInfo"),jS(this,"_pathJoinRoom"),jS(this,"_pathLeaveRoom"),jS(this,"_pathMainVideoMap"),jS(this,"_pathMainAudioMap"),jS(this,"_pathAuxiliaryMap"),jS(this,"_remoteStreamStatMap"),jS(this,"_localStreamStat"),jS(this,"_eventMap",new Map),jS(this,"_captureCostSum",0),jS(this,"_captureCostCount",0),jS(this,"isDestroyed",!1),this._frameWorkType=e.frameWorkType||30,this._component=e.component||0,this.connectionType=e.connectionType||1,this._language=e.language||0,this._room=e.room,this._keyPrefix="key_point",this._log=jO.createLogger({id:"kpm",userId:this._room.userId,sdkAppId:this._room.sdkAppId}),Object.getOwnPropertyNames(this.__proto__).forEach((e=>{e.startsWith("handle")&&cD(this[e])&&(this[e]=function(e){let{fn:t,context:r}=e;return function(){try{for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];let o=t.apply(r,i);return mD(o)?o.catch((e=>jO.error("".concat(t.name,"() error observed ").concat(e)))):o}catch(e){jO.error("".concat(t.name,"() error observed ").concat(e))}}}({fn:this[e],context:this}))})),this.initData(),this.installEvents()}initData(){this._firstPublishedUserList=[],this._networkQuality={totalUplinkRTT:0,totalUplinkLoss:0,count:0,totalDownlinkRTTAndLossMap:new Map},this._basicInfo={string_sdk_version:db,uint32_os_type:15,string_device_name:"",string_http_user_agent:navigator.userAgent,string_os_version:"",uint32_avg_rtt:0,uint32_avg_up_loss:0,uint32_scene:"live"===this._room.scene?1:0,uint32_joining_duration:0,uint32_networkType:0,uint32_framework:this._frameWorkType,uint32_component:this._component,uint32_connection_type:this.connectionType,uint32_caller_coding_language:this._language,string_domain:location.hostname},this._pathJoinRoom={uint64_start_time:0,uint64_send_request_acc_ip_cmd_start_time:0,uint64_send_request_acc_ip_cmd_end_time:0,uint64_send_request_enter_room_cmd_start_time:0,uint64_send_request_enter_room_cmd_end_time:0,uint64_send_first_video_frame_time:0,uint64_recv_userlist_time:0,uint64_end_time:0,int32_send_request_acc_ip_cmd_ret:0,int32_send_request_enter_room_cmd_ret:0,int32_end_ret:0},this._pathLeaveRoom={uint64_start_time:0,uint64_send_request_exit_room_cmd_start_time:0,uint64_send_request_exit_room_cmd_end_time:0,uint64_end_time:0,int32_send_request_exit_room_cmd_ret:0,int32_end_ret:0},this._localStreamStat={totalVideoBitrate:0,totalVideoFPS:0,totalVideoHeight:0,totalVideoWidth:0,totalAudioLevel:0,videoCount:0,audioLevelCount:0,publishStartTime:0,statsToReport:{uint32_audio_capture_db:0,uint32_video_big_capture_fps:0,uint32_video_big_bitrate:0,uint32_video_big_resolution:0}},this._pathMainVideoMap=new Map,this._pathMainAudioMap=new Map,this._pathAuxiliaryMap=new Map,this._remoteStreamStatMap=new Map,BO().then((e=>{this._basicInfo.string_os_version=PO(),this._basicInfo.string_device_name=e&&e.mobile?e.model:this._basicInfo.string_os_version}))}addEvent(e,t){return this._eventMap.set(e,t),UO.on(e,t),this}installEvents(){this.handleUnload=this.handleUnload.bind(this),window.addEventListener("pagehide",this.handleUnload),this._room.once("banned",(()=>this.handleLeaveSuccess({room:this._room,roomId:this._room.roomId}))),this.addEvent(VO.JOIN_START,this.handleJoinStart).addEvent(VO.JOIN_SCHEDULE_SUCCESS,this.handleJoinScheduleSuccess).addEvent(VO.JOIN_SIGNAL_CONNECTION_START,this.handleSignalConnectionStart).addEvent(VO.JOIN_SIGNAL_CONNECTION_END,this.handleSignalConnectionEnd).addEvent(VO.JOIN_SEND_CMD,this.handleJoinSendCMD).addEvent(VO.JOIN_RECEIVED_CMD_RES,this.handleJoinReceivedCMDResponce).addEvent(VO.JOIN_SUCCESS,this.handleJoinSuccess).addEvent(VO.JOIN_FAILED,this.handleJoinFailed).addEvent(VO.LEAVE_START,this.handleLeaveStart).addEvent(VO.LEAVE_SUCCESS,this.handleLeaveSuccess).addEvent(VO.LEAVE_SEND_CMD,this.handleLeaveSendCMD).addEvent(VO.LOCAL_TRACK_CAPTURE_START,this.handleTrackCaptureStart).addEvent(VO.LOCAL_TRACK_CAPTURE_SUCCESS,this.handleTrackCaptureSuccess).addEvent(VO.LOCAL_TRACK_CAPTURE_FAILED,this.handleTrackCaptureFailed).addEvent(VO.PUBLISH_START,this.handlePublishStart).addEvent(VO.SEND_FIRST_VIDEO_FRAME,this.handleSendFirstVideoFrame).addEvent(VO.SUBSCRIBE_START,this.handleSubscribeStart).addEvent(VO.SUBSCRIBE_SUCCESS,this.handleSubscribed).addEvent(VO.PLAY_TRACK_START,this.handlePlayStart).addEvent(VO.VIDEO_LOADED_DATA,this.handleVideoLoadedData).addEvent(VO.PLAYER_STATE_CHANGED,(e=>{let{track:t,state:r,type:i}=e;!t.isRemote||!this.hitTest(t.room)||"PLAYING"===r&&(i===Vb.AUDIO?this.handleAudioPlaying(t):this.handleVideoPlaying(t))})).addEvent(VO.NETWORK_QUALITY,this.handleNetworkQuality).addEvent(VO.HEARTBEAT_REPORT,this.handleHeartbeatStats).addEvent(VO.RECEIVED_PUBLISHED_USER_LIST,this.handleReceivedPublishUserList).addEvent(VO.REMOTE_PUBLISH_STATE_CHANGED,(e=>{let{room:t,prevMuteState:r,muteState:i}=e;if(!this.hitTest(t))return;let n=r.hasAudio||r.hasVideo||r.hasSmall,o=r.hasAuxiliary,a=i.hasAudio||i.hasVideo||i.hasSmall,s=i.hasAuxiliary;!n&&a&&this.handleRemoteStreamAdded(i.userId,"main"),!o&&s&&this.handleRemoteStreamAdded(i.userId,"auxiliary")})).addEvent(VO.SINGLE_CONNECTION_STAT,(e=>{let{room:t,stat:r}=e;this.hitTest(t)&&(this._pathJoinRoom.int32_ice_cost=r.ice,this._pathJoinRoom.int32_dtls_cost=r.dtls,this._pathJoinRoom.int32_peer_connection_cost=r.peerConnection)}))}uninstallEvents(){window.removeEventListener("pagehide",this.handleUnload),this._eventMap.forEach(((e,t)=>UO.off(t,e))),this._eventMap.clear()}destroy(){this.uninstallEvents(),mM.clearTask(this._intervalId),0===this._pathJoinRoom.uint64_start_time&&(this._room=null),this.isDestroyed=!0}handleUnload(){this._room.isJoined&&this.handleLeaveSuccess({room:this._room,roomId:this._room.roomId})}handleJoinStart(e){this.hitTest(e.room)&&(0===this._pathJoinRoom.uint64_start_time&&(this._pathJoinRoom.uint64_start_time=Date.now()),e.params&&(AD(e.params.frameWorkType)||(this._frameWorkType=e.params.frameWorkType,this._basicInfo.uint32_framework=this._frameWorkType),AD(e.params.component)||(this._component=e.params.component,this._basicInfo.uint32_component=this._component),AD(e.params.language)||(this._language=e.params.language,this._basicInfo.uint32_caller_coding_language=this._language)))}handleJoinScheduleSuccess(e){let{room:t,detailCost:r}=e;if(this.hitTest(t)&&r){let{totalCost:e,local:t,dns:i,tcp:n,tls:o,request:a,response:s}=r;this._pathJoinRoom.int32_schedule_cost=e,this._pathJoinRoom.int32_schedule_local=t,this._pathJoinRoom.int32_schedule_dns=i,this._pathJoinRoom.int32_schedule_tcp=n,this._pathJoinRoom.int32_schedule_tls=o,this._pathJoinRoom.int32_schedule_request=a,this._pathJoinRoom.int32_schedule_response=s}}handleSignalConnectionStart(e){let{room:t}=e;this.hitTest(t)&&0===this._pathJoinRoom.uint64_send_request_acc_ip_cmd_start_time&&(this._pathJoinRoom.uint64_send_request_acc_ip_cmd_start_time=Date.now())}handleSignalConnectionEnd(e){let{room:t,error:r}=e;this.hitTest(t)&&0===this._pathJoinRoom.uint64_send_request_acc_ip_cmd_end_time&&(this._pathJoinRoom.uint64_send_request_acc_ip_cmd_end_time=Date.now(),r&&(this._pathJoinRoom.int32_send_request_acc_ip_cmd_ret=r instanceof ob?Number(r.getExtraCode()||r.getCode()):ib.UNKNOWN,this._pathJoinRoom.int32_end_ret=this._pathJoinRoom.int32_send_request_acc_ip_cmd_ret))}handleJoinSendCMD(e){this.hitTest(e.room)&&0===this._pathJoinRoom.uint64_send_request_enter_room_cmd_start_time&&(this._pathJoinRoom.uint64_send_request_enter_room_cmd_start_time=Date.now())}handleJoinReceivedCMDResponce(e){this.hitTest(e.room)&&0===this._pathJoinRoom.uint64_send_request_enter_room_cmd_end_time&&(this._pathJoinRoom.uint64_send_request_enter_room_cmd_end_time=Date.now(),this._pathJoinRoom.int32_send_request_enter_room_cmd_ret=e.code,0!==e.code&&(this._pathJoinRoom.int32_end_ret=this._pathJoinRoom.int32_send_request_enter_room_cmd_ret))}handleJoinSuccess(e){this.hitTest(e.room)&&0===this._pathJoinRoom.uint64_end_time&&(this._pathJoinRoom.uint64_end_time=Date.now(),this._pathJoinRoom.int32_end_ret=0,this._signalInfo=e.room.getSignalInfo())}handleJoinFailed(e){let{room:t,error:r}=e;this.hitTest(t)&&(this._pathJoinRoom.uint64_end_time=Date.now(),0===this._pathJoinRoom.int32_end_ret&&(this._pathJoinRoom.int32_end_ret=r.code||this._pathJoinRoom.int32_send_request_enter_room_cmd_ret||this._pathJoinRoom.int32_send_request_acc_ip_cmd_ret),setTimeout((()=>{this.report()})))}handleReceivedPublishUserList(e){this.hitTest(e.room)&&0===this._pathJoinRoom.uint64_recv_userlist_time&&(this._pathJoinRoom.uint64_recv_userlist_time=Date.now(),this._firstPublishedUserList=e.publishedUserList||[])}handleSendFirstVideoFrame(e){let{room:t}=e;this.hitTest(t)&&0===this._pathJoinRoom.uint64_send_first_video_frame_time&&0!==this._pathJoinRoom.uint64_start_time&&(this._pathJoinRoom.uint64_send_first_video_frame_time=Date.now())}handleLeaveStart(e){this.hitTest(e.room)&&(this._pathLeaveRoom.uint64_start_time=Date.now())}handleLeaveSuccess(e){this.hitTest(e.room)&&0===this._pathLeaveRoom.uint64_end_time&&(this._pathLeaveRoom.uint64_end_time=Date.now(),0!==this._pathJoinRoom.uint64_end_time?this._basicInfo.uint32_joining_duration=this._pathLeaveRoom.uint64_end_time-this._pathJoinRoom.uint64_end_time:this._log.warn("pathJoinRoom endTime is 0"),this.report())}handleLeaveSendCMD(e){this.hitTest(e.room)&&(this._pathLeaveRoom.uint64_send_request_exit_room_cmd_start_time=Date.now(),this._pathLeaveRoom.uint64_send_request_exit_room_cmd_end_time=Date.now())}handleRemoteStreamAdded(e,t){var r;let i="".concat(e,"_").concat(t);if(!this._remoteStreamStatMap.has(i)){let n={userId:e,totalVideoFPS:0,totalVideoBitrate:0,totalAudioLevel:0,totalAudioBitrate:0,totalLoss:0,audioCount:0,audioLevelCount:0,videoCount:0,networkQualityCount:0,streamAddedTime:Date.now(),subscribeStartTime:0,subscribedTime:0,playStreamTime:0,statsToReport:xS(LS({},SV),{msg_user_info:new bV({userId:e,tinyId:null==(r=this._room.remotePublishedUserMap.get(e))?void 0:r.tinyId,role:20})})};n.statsToReport.uint32_stream_type="main"===t?2:7,this._remoteStreamStatMap.set(i,n)}}handleSubscribeStart(e){let{room:t,remotePublishedUser:r,streamType:i,subscribeState:n}=e;if(!this.hitTest(t))return;let{userId:o,tinyId:a,role:s}=r,c=new bV({userId:o,tinyId:a,role:"anchor"===s?20:21}),A=Date.now(),l="".concat(o,"_").concat(i),u=this._remoteStreamStatMap.get(l);u&&0===u.subscribeStartTime&&(u.subscribeStartTime=A),"main"===i?(r.muteState.hasVideo&&(n.video||n.smallVideo)&&!this._pathMainVideoMap.has(l)&&this._pathMainVideoMap.set(l,{statsToReport:{msg_user_info:c,uint64_start_enter_time:this._pathJoinRoom.uint64_start_time,uint64_render_first_frame_time:0,uint64_combine_first_frame_time:0},userId:o,sendSubscribeCMDTime:A}),r.muteState.hasAudio&&n.audio&&!this._pathMainAudioMap.has(l)&&this._pathMainAudioMap.set(l,{statsToReport:{msg_user_info:c,uint64_start_enter_time:this._pathJoinRoom.uint64_start_time,uint64_play_first_frame_time:0},userId:o,sendSubscribeCMDTime:A})):r.muteState.hasAuxiliary&&n.auxiliary&&!this._pathAuxiliaryMap.has(l)&&this._pathAuxiliaryMap.set(l,{sendSubscribeCMDTime:A})}handleSubscribed(e){let{room:t,remotePublishedUser:r,streamType:i}=e;if(this.hitTest(t)){let e="".concat(r.userId,"_").concat(i),t=this._remoteStreamStatMap.get(e);t&&0===t.subscribedTime&&(t.subscribedTime=Date.now())}}handlePlayStart(e){let{track:t}=e;if(!t.isRemote||!this.hitTest(t.room))return;let r="".concat(t.userId,"_").concat(t.streamType),i=this._remoteStreamStatMap.get(r);0===(null==i?void 0:i.playStreamTime)&&(i.playStreamTime=Date.now())}handleVideoLoadedData(e){let{track:t}=e;if(!t.isRemote||!this.hitTest(t.room))return;let r="".concat(t.userId,"_").concat(t.streamType),i=this._pathMainVideoMap.get(r);i&&0===i.statsToReport.uint64_combine_first_frame_time&&(i.statsToReport.uint64_combine_first_frame_time=Date.now())}handleVideoPlaying(e){let t="".concat(e.userId,"_").concat(e.streamType),r=Date.now(),i=this._pathMainVideoMap.get(t),n=this._remoteStreamStatMap.get(t);if(n){let{statsToReport:t}=n;if(t.uint32_video_render_first||"main"!==e.streamType?this.hasAuxFlag(e.userId):this.hasVideoFlag(e.userId)){let e=r-this._pathJoinRoom.uint64_start_time;t.uint32_video_render_first=e,sk.addNumber({key:516820,value:e})}}0===(null==i?void 0:i.statsToReport.uint64_render_first_frame_time)&&(i.statsToReport.uint64_render_first_frame_time=r)}handleAudioPlaying(e){let t="".concat(e.userId,"_").concat(e.streamType),r=this._pathMainAudioMap.get(t);r&&0===r.statsToReport.uint64_play_first_frame_time&&(r.statsToReport.uint64_play_first_frame_time=Date.now())}handleNetworkQuality(e){this.hitTest(e.room)&&(this._networkQuality.totalUplinkLoss+=e.uplink.loss,this._networkQuality.totalUplinkRTT+=e.uplink.rtt,this._networkQuality.count++,e.downlinks.forEach((e=>{let{rtt:t,loss:r,userId:i,videoDelay:n,audioDelay:o}=e,a=this._networkQuality.totalDownlinkRTTAndLossMap.get(i);if(a)a.totalRTT+=t,a.totalLoss+=r,n&&(a.totalVideoDelay=(a.totalVideoDelay||0)+n,a.videoDelayCount=(a.videoDelayCount||0)+1),o&&(a.totalAudioDelay=(a.totalAudioDelay||0)+o,a.audioDelayCount=(a.audioDelayCount||0)+1),a.count++;else{let e,a,s,c;n&&(a=n,s=1),o&&(e=o,c=1),this._networkQuality.totalDownlinkRTTAndLossMap.set(i,{totalRTT:t,totalLoss:r,count:1,totalAudioDelay:e,totalVideoDelay:a,audioDelayCount:c,videoDelayCount:s})}})))}handleHeartbeatStats(e){if(this.hitTest(e.room)){let{msg_device_info:t,msg_up_stream_info:r,msg_down_stream_info:i}=e.report;if(r.msg_video_status[0]){let{uint32_video_codec_bitrate:e,uint32_video_enc_fps:t,uint32_video_width:i,uint32_video_height:n}=r.msg_video_status[0];this._localStreamStat.totalVideoBitrate+=e,this._localStreamStat.totalVideoFPS+=t,this._localStreamStat.totalVideoWidth+=i,this._localStreamStat.totalVideoHeight+=n,this._localStreamStat.videoCount++}if(r.msg_audio_status){let{uint32_audio_level:e}=r.msg_audio_status;Math.floor(e/LQ*100)>0&&(this._localStreamStat.totalAudioLevel+=e/LQ,this._localStreamStat.audioLevelCount++)}i.forEach((e=>{let{msg_user_info:t,msg_audio_status:r,msg_video_status:i}=e,n=t.str_identifier,o=this._room.remotePublishedUserMap.get(n);if(i.forEach((e=>{let t=2===e.uint32_video_stream_type,r=7===e.uint32_video_stream_type,i="".concat(n,"_").concat(t?"main":"auxiliary"),a=this._remoteStreamStatMap.get(i);if(a&&(t&&null!=o&&o.remoteVideoTrack.isSubscribed||r&&null!=o&&o.remoteAuxiliaryTrack)){a.totalVideoFPS+=e.uint32_video_receive_fps,a.totalVideoBitrate+=e.uint32_video_codec_bitrate,a.videoCount++,0===a.statsToReport.uint32_video_width&&(a.statsToReport.uint32_video_width=e.uint32_video_width),0===a.statsToReport.uint32_video_height&&(a.statsToReport.uint32_video_height=e.uint32_video_height);let r=t?o.remoteVideoTrack:o.remoteAuxiliaryTrack;r.stat.jitterBufferDelay&&(a.videoJitterBufferDelay=r.stat.jitterBufferDelay),r.stat.framesReceived&&(a.statsToReport.uint32_video_consume_render_rate=Math.floor(r.stat.framesDecoded/r.stat.framesReceived*PS(10,6)))}})),!SD(r)){let e="".concat(n,"_main"),t=this._remoteStreamStatMap.get(e);this._remoteStreamStatMap.has(e)&&t&&null!=o&&o.remoteAudioTrack.isSubscribed&&(t.totalAudioBitrate+=r.uint32_audio_codec_bitrate,t.audioCount++,o.remoteAudioTrack.stat.jitterBufferDelay&&(t.audioJitterBufferDelay=o.remoteAudioTrack.stat.jitterBufferDelay),Math.floor(r.uint32_audio_level/LQ*100)>0&&(t.totalAudioLevel+=r.uint32_audio_level/LQ,t.audioLevelCount++))}})),t.uint32_audio_capture_cost&&(this._captureCostSum+=t.uint32_audio_capture_cost,this._captureCostCount+=1,this._captureCostCount>=100&&(this._basicInfo.uint32_audio_capture_cost=Math.floor(this._captureCostSum/this._captureCostCount),this._captureCostSum=0,this._captureCostCount=0))}}handlePublishStart(e){let{room:t}=e;this.hitTest(t)&&0===this._localStreamStat.publishStartTime&&(this._localStreamStat.publishStartTime=Date.now())}handleTrackCaptureStart(e){let{track:t}=e;1===t.mediaType&&!this._pathJoinRoom.uint64_init_audio_start_time&&(this._pathJoinRoom.uint64_init_audio_start_time=Date.now()),4===t.mediaType&&!this._pathJoinRoom.uint64_init_camera_start_time&&(this._pathJoinRoom.uint64_init_camera_start_time=Date.now())}handleTrackCaptureSuccess(e){let{track:t}=e;1===t.mediaType&&!this._pathJoinRoom.uint64_init_audio_end_time&&(this._pathJoinRoom.int32_init_audio_ret=0,this._pathJoinRoom.uint64_init_audio_end_time=Date.now()),4===t.mediaType&&!this._pathJoinRoom.uint64_init_camera_end_time&&(this._pathJoinRoom.int32_init_camera_ret=0,this._pathJoinRoom.uint64_init_camera_end_time=Date.now())}handleTrackCaptureFailed(e){let{track:t,error:r}=e,i={NotFoundError:1,NotAllowedError:2,NotReadableError:3,OverConstrainedError:4,AbortError:5,InvalidStateError:6,SecurityError:7,TypeError:8}[r.name]||(r instanceof ob?r.getExtraCode()||r.getCode():ib.UNKNOWN);1===t.mediaType&&!this._pathJoinRoom.uint64_init_audio_end_time&&(this._pathJoinRoom.int32_init_audio_ret=i,this._pathJoinRoom.uint64_init_audio_end_time=Date.now()),4===t.mediaType&&!this._pathJoinRoom.uint64_init_camera_end_time&&(this._pathJoinRoom.int32_init_camera_ret=i,this._pathJoinRoom.uint64_init_camera_end_time=Date.now())}hasVideoFlag(e){return this._firstPublishedUserList.findIndex((t=>t.userId===e&&t.flag&Yb))>=0}hasAudioFlag(e){return this._firstPublishedUserList.findIndex((t=>t.userId===e&&t.flag&Xb))>=0}hasAuxFlag(e){return this._firstPublishedUserList.findIndex((t=>t.userId===e&&t.flag&Jb))>=0}hitTest(e){return e===this._room}prepareReport(){if(this._captureCostCount>0&&!this._basicInfo.uint32_audio_capture_cost&&(this._basicInfo.uint32_audio_capture_cost=Math.floor(this._captureCostSum/this._captureCostCount),this._captureCostSum=0,this._captureCostCount=0),this._networkQuality.count>0&&(this._basicInfo.uint32_avg_rtt=Math.floor(this._networkQuality.totalUplinkRTT/this._networkQuality.count),this._basicInfo.uint32_avg_up_loss=Math.floor(this._networkQuality.totalUplinkLoss/this._networkQuality.count)),this._localStreamStat.videoCount>0){this._localStreamStat.statsToReport.uint32_video_big_capture_fps=Math.floor(this._localStreamStat.totalVideoFPS/this._localStreamStat.videoCount),this._localStreamStat.statsToReport.uint32_video_big_bitrate=Math.floor(this._localStreamStat.totalVideoBitrate/this._localStreamStat.videoCount);let e=Math.floor(this._localStreamStat.totalVideoWidth/this._localStreamStat.videoCount),t=Math.floor(this._localStreamStat.totalVideoHeight/this._localStreamStat.videoCount);this._localStreamStat.statsToReport.uint32_video_big_resolution=e<<16|t}this._localStreamStat.audioLevelCount>0&&(this._localStreamStat.statsToReport.uint32_audio_capture_db=Math.floor(this._localStreamStat.totalAudioLevel/this._localStreamStat.audioLevelCount*100)),this._remoteStreamStatMap.forEach(((e,t)=>{let{userId:r}=e,i=this._networkQuality.totalDownlinkRTTAndLossMap.get(r);if(i){let{totalLoss:t,count:r,audioDelayCount:n,videoDelayCount:o,totalAudioDelay:a,totalVideoDelay:s}=i;e.statsToReport.uint32_avg_down_loss=Math.floor(t/r),n&&a&&(e.statsToReport.uint32_audio_network_p2p_delay=Math.floor(a/n),e.audioJitterBufferDelay&&(e.statsToReport.uint32_p2p_delay=Math.floor(e.statsToReport.uint32_audio_network_p2p_delay+e.audioJitterBufferDelay))),o&&s&&(e.statsToReport.uint32_video_network_p2p_delay=Math.floor(s/o))}e.videoCount>0&&(e.statsToReport.uint32_video_avg_fps=Math.floor(e.totalVideoFPS/e.videoCount),e.statsToReport.uint32_video_avg_bitrate=Math.floor(e.totalVideoBitrate/e.videoCount)),e.audioCount>0&&(e.statsToReport.uint32_audio_recv_bitrate=e.statsToReport.uint32_audio_bitrate=Math.floor(e.totalAudioBitrate/e.audioCount)),e.audioLevelCount>0&&(e.statsToReport.uint32_audio_play_db=Math.floor(e.totalAudioLevel/e.audioLevelCount*100));let{callDurationCalculator:n}=this._room;n&&(e.statsToReport.uint32_audio_play_time=n.getDuration(t,Vb.AUDIO),e.statsToReport.uint32_video_play_time=n.getDuration(t,Vb.VIDEO)),e.statsToReport.uint32_video_render_first&&(e.statsToReport.uint32_video_render_first=Math.min(e.statsToReport.uint32_video_render_first,wV));let{badCaseDetector:o}=this._room,{dataFreeze:a,count:s}=o.getDataFreezeDuration(t),{renderFreeze:c}=o.getRenderFreezeDuration(t);e.statsToReport.uint32_video_block_count=s,e.statsToReport.uint32_video_block_time=Math.min(a,e.statsToReport.uint32_video_play_time),e.statsToReport.uint32_video_external_block_time=Math.min(c,e.statsToReport.uint32_video_play_time),o.isBlackStream(t)&&0===e.statsToReport.uint32_video_avg_fps?e.statsToReport.uint32_video_black_screen_subjective=1:e.statsToReport.uint32_video_black_screen_subjective=0})),this._pathMainAudioMap.forEach(((e,t)=>{this.hasAudioFlag(e.userId)?e.statsToReport.uint64_play_first_frame_time-e.statsToReport.uint64_start_enter_time>wV&&(e.statsToReport.uint64_play_first_frame_time=e.statsToReport.uint64_start_enter_time+wV):this._pathMainAudioMap.delete(t)})),this._pathMainVideoMap.forEach(((e,t)=>{this.hasVideoFlag(e.userId)?e.statsToReport.uint64_render_first_frame_time-e.statsToReport.uint64_start_enter_time>wV&&(e.statsToReport.uint64_render_first_frame_time=e.statsToReport.uint64_start_enter_time+wV):this._pathMainVideoMap.delete(t)})),this._pathJoinRoom.uint64_end_time-this._pathJoinRoom.uint64_start_time>wV&&(this._pathJoinRoom.uint64_end_time=this._pathJoinRoom.uint64_start_time+wV)}getReportData(){this._basicInfo.uint32_networkType=zR();let e={uint32_sdk_app_id:Number(this._room.sdkAppId),msg_user_info:new bV({userId:this._room.userId,tinyId:this._room.tinyId,role:"anchor"===this._room.role?20:21}),msg_basic_info:this._basicInfo,uint32_acc_ip:DD(this._signalInfo.relayIp),uint32_client_ip:DD(this._signalInfo.clientIp,!1),uint32_acc_port:this._signalInfo.relayPort||0,uint64_timestamp:Date.now(),uint32_seq:Math.floor(Math.random()*PS(2,31)),msg_path_enter_room:this._pathJoinRoom,msg_path_exit_room:this._pathLeaveRoom,msg_path_recv_video:[...this._pathMainVideoMap.values()].map((e=>e.statsToReport)),msg_quality_statistics:[...this._remoteStreamStatMap.values()].map((e=>e.statsToReport)),str_room_name:String(this._room.roomId||0),msg_path_recv_audio:[...this._pathMainAudioMap.values()].map((e=>e.statsToReport)),uint32_info_client_ip:DD(this._signalInfo.clientIp,!1),error_code:[],msg_local_statistics:this._localStreamStat.statsToReport,bytes_report_buf_from_0x1:this._signalInfo.endReportExtend};return VD(e),e}report(){return YS(this,null,(function*(){try{this.prepareReport();let e=this.getReportData();yield this.upload(e),this.initData()}catch(e){this._log.warn(e)}finally{this.isDestroyed&&(this._room=null)}}))}upload(e){return YS(this,null,(function*(){if(0===e.msg_path_enter_room.uint64_start_time)return;let t=Number(this._room.sdkAppId),r=yield YD(e),i=r instanceof ArrayBuffer,n="".concat(YR(t,Ob.KEY_POINT),"&gzip=").concat(+i),o=!1;navigator.sendBeacon&&(o=navigator.sendBeacon(n,r));let a=[this.uploadKVStat(sk),this.uploadKVStat(ak)];o||a.push(HD({url:n,body:r,priority:"low"})),yield Promise.all(a)}))}setConnectionType(e){this.connectionType=e,this._basicInfo.uint32_connection_type=e}uploadKVStat(e){return YS(this,null,(function*(){let t=e.getReportData();if(0===t.stats_count.length&&0===t.stats_distribution.length)return;t.msg_sdk_basic_info=xS(LS({},t.msg_sdk_basic_info),{bytes_device_name:this._basicInfo.string_device_name||"",bytes_os_version:this._basicInfo.string_os_version||"",uint32_framework:this._frameWorkType,uint32_network_type:this._basicInfo.uint32_networkType||0}),this._log.debug(t);let r=yield YD(t),i="".concat(YR(+this._room.sdkAppId,Ob.KV_STAT),"&gzip=").concat(+(r instanceof ArrayBuffer)),n=!1;navigator.sendBeacon&&(n=navigator.sendBeacon(i,r)),n||HD({url:i,body:r})}))}};GS([wM({settings:{timeout:500,retries:3}})],vV.prototype,"upload",1);var wV=5e3,SV={msg_user_info:null,uint32_video_avg_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_avg_bitrate:0,uint32_video_block_time:0,uint32_video_play_time:0,uint32_audio_block_time:0,uint32_audio_play_time:0,uint32_audio_play_db:0,uint32_avg_down_loss:0,uint32_stream_type:0,uint32_video_block_count:0,uint32_audio_block_count:0,uint32_audio_bitrate:0,uint32_video_black_screen_subjective:0,uint32_audio_recv_bitrate:0,uint32_video_external_block_time:0,uint32_video_consume_render_rate:0},bV=class{constructor(e){jS(this,"str_identifier"),jS(this,"str_tinyid"),jS(this,"uint32_role"),this.str_identifier=String(e.userId),this.str_tinyid=String(e.tinyId||0),this.uint32_role=e.role}},RV=vV,DV=class{constructor(){jS(this,"_startTime"),jS(this,"_endTime"),this._startTime=0,this._endTime=0,this.start()}start(){0===this._startTime&&(this._startTime=yD())}stop(){0===this._endTime&&(this._endTime=yD())}getDuration(){return 0===this._endTime?yD()-this._startTime:this._endTime-this._startTime}get startTime(){return this._startTime}get endTime(){return this._endTime}},BV=class{constructor(e){jS(this,"_room",null),jS(this,"_durationMap"),jS(this,"_eventMap",new Map),this._room=e.room,this._durationMap=new Map,this.installEvents()}installEvents(){this._eventMap.set(VO.REMOTE_TRACK_SUBSCRIBED,this.handleSubscribed).set(VO.REMOTE_TRACK_UNSUBSCRIBED,this.handleUnsubscribed).set(VO.REMOTE_PUBLISH_STATE_CHANGED,(e=>{let{room:t,prevMuteState:r,muteState:i}=e;var n;let{userId:o}=i;if(!this.hitTest(t))return;r.hasAudio&&!i.hasAudio&&this.stopDurationItem("".concat(o,"_main"),Vb.AUDIO),r.hasVideo&&!i.hasVideo&&this.stopDurationItem("".concat(o,"_main"),Vb.VIDEO),r.hasAuxiliary&&!i.hasAuxiliary&&this.stopDurationItem("".concat(o,"_auxiliary"),Vb.VIDEO);let a=null==(n=this._room)?void 0:n.remotePublishedUserMap.get(o);a&&(!r.hasAudio&&i.hasAudio&&a.remoteAudioTrack.isSubscribed&&this.addDuractionItem(o,Vb.AUDIO,"main"),!r.hasVideo&&i.hasVideo&&a.remoteVideoTrack.isSubscribed&&this.addDuractionItem(o,Vb.VIDEO,"main"),!r.hasAuxiliary&&i.hasAuxiliary&&a.remoteAuxiliaryTrack.isSubscribed&&this.addDuractionItem(o,Vb.VIDEO,"auxiliary"))})),this._eventMap.forEach(((e,t)=>UO.on(t,e,this)))}uninstallEvents(){this._eventMap.forEach(((e,t)=>UO.off(t,e,this))),this._eventMap.clear()}handleSubscribed(e){let{track:t}=e;if(!this.hitTest(t.room))return;let{userId:r,streamType:i,kind:n}=t;t.isSubscribed?this.addDuractionItem(r,n,i):this.stopDurationItem("".concat(r,"_").concat(i),n)}handleUnsubscribed(e){let{track:t}=e;this.hitTest(t.room)&&this.stopDurationItem("".concat(t.userId,"_").concat(t.streamType),t.kind)}isRecording(e){return e.findIndex((e=>0===e.endTime))>=0}addDuractionItem(e,t,r){let i="".concat(e,"_").concat(r),n=new DV,o=this._durationMap.get(i);o?this.isRecording(o[t])||o[t].push(n):this._durationMap.set(i,{userId:e,type:r,audio:t===Vb.AUDIO?[n]:[],video:t===Vb.AUDIO?[]:[n]})}stopDurationItem(e,t){if(this._durationMap.has(e)){let r=this._durationMap.get(e)[t].find((e=>0===e.endTime));r&&r.stop()}}hitTest(e){return this._room===e}getDuration(e,t){return this._durationMap.has(e)?this._durationMap.get(e)[t].reduce(((e,t)=>e+t.getDuration()),0):0}getDurationMap(){return this._durationMap}reset(){this._durationMap.clear()}destroy(){this._room=null,this.uninstallEvents()}},OV=class{constructor(e){jS(this,"_room"),jS(this,"_renderFreezeMap",new Map),jS(this,"_isVideoPlayingEventFiredMap",new Map),jS(this,"_dataFreezeMap",new Map),jS(this,"_monitorFreezeData",new Map),jS(this,"_eventMap",new Map),this._room=e.room,this.installEvents()}getRenderFreezeMap(){return this._renderFreezeMap}getDataFreezeMap(){return this._dataFreezeMap}installEvents(){this._eventMap.set(VO.LEAVE_SUCCESS,(e=>{let{room:t}=e;this.hitTest(t)&&this.stop()})).set(VO.PLAY_TRACK_START,this.onPlayTrackStart).set(VO.UNSUBSCRIBE_SUCCESS,(e=>{let{room:t,streamType:r,remotePublishedUser:i}=e;if(!this.hitTest(t))return;let{userId:n}=i,o="".concat(n,"_").concat(r);this.stopDataFreeze({key:o,userId:n,type:r})})).set(VO.REMOTE_PUBLISH_STATE_CHANGED,(e=>{let{room:t,prevMuteState:r,muteState:i}=e;if(!this.hitTest(t))return;let{userId:n}=i;if(r.hasVideo&&!i.hasVideo){let e="main",t="".concat(i.userId,"_").concat(e);this.stopDataFreeze({key:t,userId:n,type:e})}if(r.hasAuxiliary&&!i.hasAuxiliary){let e="auxiliary",t="".concat(i.userId,"_").concat(e);this.stopDataFreeze({key:t,userId:n,type:e})}})).set(VO.PLAYER_STATE_CHANGED,(e=>{let{track:t,state:r,reason:i,type:n}=e;if(t.isRemote&&t.room&&this.hitTest(t.room)&&n===Vb.VIDEO){if("PLAYING"===r){let e="".concat(t.userId,"_").concat(t.streamType);this._isVideoPlayingEventFiredMap.set(e,!0)}i===Vb.MUTE?this.onVideoTrackMuted(t):i===Vb.UNMUTE&&this.onVideoTrackUnmuted(t)}})).set(VO.HEARTBEAT_REPORT,this.onHearBeatReport),this._eventMap.forEach(((e,t)=>UO.on(t,e,this)))}uninstallEvents(){this._eventMap.forEach(((e,t)=>UO.off(t,e,this))),this._eventMap.clear()}stop(){this._renderFreezeMap.clear(),this._dataFreezeMap.clear(),this._isVideoPlayingEventFiredMap.clear()}onVideoTrackMuted(e){if(!e.isSubscribed)return;let{userId:t,streamType:r}=e,i="".concat(t,"_").concat(r),n=this._dataFreezeMap.get(i),o=new DV;n?n.durationItemList.push(o):this._dataFreezeMap.set(i,{userId:t,type:r,durationItemList:[o],isFreezing(){let e=this.durationItemList[this.durationItemList.length-1];return e&&0===e.endTime}})}onVideoTrackUnmuted(e){if(!e.isSubscribed)return;let{userId:t,streamType:r}=e,i="".concat(t,"_").concat(r);this.stopDataFreeze({key:i,userId:t,type:r})}onHearBeatReport(e){let{room:t,report:r}=e;this.hitTest(t)&&r.msg_down_stream_info.forEach((e=>{let t=this._room.remotePublishedUserMap.get(e.msg_user_info.str_identifier);if(!t)return;let{userId:r,muteState:i}=t;e.msg_video_status.forEach((e=>{2===e.uint32_video_stream_type&&i.hasVideo&&!i.videoMuted&&t.remoteVideoTrack.isSubscribed&&this.handleRenderFreeze({userId:r,fps:e.uint32_video_dec_fps,type:"main"}),7===e.uint32_video_stream_type&&i.hasAuxiliary&&t.remoteAuxiliaryTrack.isSubscribed&&this.handleRenderFreeze({userId:r,fps:e.uint32_video_dec_fps,type:"auxiliary"})}))}))}stopDataFreeze(e){let{key:t,userId:r,type:i}=e,n=this._dataFreezeMap.get(t);if(!n||!n.isFreezing())return;let o=n.durationItemList[n.durationItemList.length-1];o.stop();let a=o.getDuration();a>wR?this._monitorFreezeData.set(t,{userId:r,type:i,duration:a}):n.durationItemList.pop()}getTotalDuration(e){return e.reduce(((e,t)=>{let r=t.getDuration();return e+Math.min(r,5e3)}),0)}handleRenderFreeze(e){return YS(this,arguments,(function(e){var t=this;let{userId:r,fps:i,type:n}=e;return function*(){let e="".concat(r,"_").concat(n),o=t._renderFreezeMap.get(e);if(i<=2){let i=yD();o&&!o.isFreeze&&(o.freezeTimeline.push({startTime:i,endTime:0}),o.isFreeze=!0),o||t._renderFreezeMap.set(e,{userId:r,type:n,isFreeze:!0,freezeTimeline:[{startTime:i,endTime:0}],renderFreezeTotal:0})}else if(o&&o.isFreeze){o.isFreeze=!1;let e=o.freezeTimeline.pop();if(e){e.endTime=yD();let t=e.endTime-e.startTime;o.freezeTimeline.push(e),o.renderFreezeTotal+=Math.min(5e3,t)}}}()}))}onPlayTrackStart(e){let{track:t}=e;if(!t.isRemote||!this.hitTest(t.room)||t.kind!==Vb.VIDEO||!t.isAvailable)return;let r="".concat(t.userId,"_").concat(t.streamType);this._isVideoPlayingEventFiredMap.has(r)||this._isVideoPlayingEventFiredMap.set(r,!1)}getDataFreezeDuration(e){let t={dataFreeze:0,count:0},r=this._dataFreezeMap.get(e);if(r){if(r.isFreezing()){let e=r.durationItemList[r.durationItemList.length-1];e.stop(),e.getDuration()<wR&&r.durationItemList.pop()}t.dataFreeze=this.getTotalDuration(r.durationItemList),t.count=r.durationItemList.length}return t}getRenderFreezeDuration(e){let t=this._renderFreezeMap.get(e),r=0,i=0;if(t)if(t.isFreeze){let e=yD()-t.freezeTimeline[t.freezeTimeline.length-1].startTime;r=t.renderFreezeTotal+Math.min(e,5e3),i=t.freezeTimeline.length}else r=t.renderFreezeTotal;return{renderFreeze:r,count:i}}getMonitorFreeze(){return this._monitorFreezeData}isBlackStream(e){return!!this._isVideoPlayingEventFiredMap.has(e)&&!this._isVideoPlayingEventFiredMap.get(e)}resetMonitor(){this._monitorFreezeData.clear()}hitTest(e){return e===this._room}destroy(){this.uninstallEvents()}},QV=VS(WS(),1),kV=[1,0,0,0,1,1,0,1],MV=class extends CN{constructor(e,t){if(super(e,{useDefaultProgram:!0,useFbo:!0,create2d:!0,name:"mirror",logger:t}),e instanceof Jx)try{this.setTexBuffer(kV)}catch(t){e.destroy(new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:3,message:"create video node ".concat(this.name," error ").concat(t.message||t)}))}}draw2d(e,t,r,i,n){if(this.ctx2d){this.ctx2d.save(),this.ctx2d.scale(-1,1),this.ctx2d.translate(-this.width,0);let o=super.draw2d(e,t,r,i,n);return this.ctx2d.restore(),o}return!1}render(e){var t;return!(null==(t=this.input)||!t.requestFrame(e)||(this.useProgram(),this.useBufferFrame(),this.useInputTexture(),this.draw(),0))}},PV=class{constructor(e,t){this.node=e,this.layout=t,jS(this,"positionBuffer")}get x(){return this.layout.x||this.node.x}get y(){return this.layout.y||this.node.y}get width(){return this.layout.width||this.node.width}get height(){return this.layout.height||this.node.height}get right(){return this.x+this.width}get bottom(){return this.y+this.height}},NV=class extends CN{constructor(e,t){super(e,{useDefaultProgram:!0,useFbo:!0,name:"mix",create2d:!0,logger:t}),jS(this,"inputs",[])}addInput(e,t){if(this.inputs[t.zIndex])throw new Error("input already exists");let r=new PV(e,t);this.inputs[t.zIndex]=r}resize(e,t){let r=this.inputs.reduce(((e,t)=>t?Object.assign(e,{width:Math.max(e.width,t.right),height:Math.max(e.height,t.bottom)}):e),{width:0,height:0});super.resize(r.width,r.height),this.context instanceof Jx&&this.inputs.forEach((e=>{if(e){let t=this.layout2texCoords(e);e.positionBuffer?this.changeBufferData(e.positionBuffer,t):e.positionBuffer=this.createBuffer(t)}}))}connect(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return super.connect(e,...r),this.resize(0,0),e}removeInput(e){this.inputs[this.inputs.findIndex((t=>(null==t?void 0:t.node)===e))]=void 0}render(e){let t=this.context.ctx;if(t.clearColor(0,0,0,0),!this.inputs.reduce(((t,r)=>(!r||!r.node.requestFrame(e))&&t),!0)&&t){this.useProgram(),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this.useBufferFrame();for(let e=0;e<this.inputs.length;e++){let t=this.inputs[e];t&&(t.node.useTexture(),this.draw(t.positionBuffer))}return!0}return!1}render2d(e){if(!this.inputs.reduce(((t,r)=>(!r||!r.node.requestFrame(e))&&t),!0)&&this.ctx2d){this.ctx2d.clearRect(0,0,this.width,this.height);for(let e=0;e<this.inputs.length;e++){let t=this.inputs[e];t&&this.draw2d(t.node.image,t.x,t.y,t.width,t.height)}return!0}return!1}getInfo(){let{totalFrames:e,x:t,y:r,width:i,height:n,name:o}=this,a=Date.now(),s=(e-this.lastInfo.totalFrames)/((a-this.lastInfo.timestamp)/1e3)|0;return this.lastInfo={totalFrames:e,x:t,y:r,width:i,height:n,timestamp:a,fps:s,name:o},LS({parent:this.inputs.filter((e=>e)).map((e=>e.node.getInfo()))},this.lastInfo)}close(){super.close(),this.inputs.forEach((e=>{var t,r;if(e&&(null==(t=e.node)||t.disconnect(),e.positionBuffer&&this.context instanceof Jx))try{null==(r=this.context.ctx)||r.deleteBuffer(e.positionBuffer)}catch(e){}}))}},LV=class extends jx{constructor(e,t){super(e,t.input,{name:"vb",create2d:!1,useDefaultProgram:!1,useFbo:!1,createTexture:!0,logger:e.log}),jS(this,"_bgTexture"),jS(this,"_waterMarkTexture"),jS(this,"_lastMaskTexture"),jS(this,"_lastMaskFbo"),jS(this,"_textureValid",!1),jS(this,"_selfieTextureValid",!1),jS(this,"_selfieSegmentation"),jS(this,"wasm"),jS(this,"_prePrograme"),jS(this,"_segmentationMask"),jS(this,"_weixin",!1),t.selfieSegmentation&&(this._selfieSegmentation=t.selfieSegmentation,this._selfieSegmentation.onResults=this.onPredict.bind(this));try{this.init(t)}catch(t){e.log.error(t),e.destroy(new ob({code:ib.VIDEO_MANAGER_ERROR,extraCode:6,message:"init vb node error ".concat(t.message||t)}))}}init(e){let t=e.Wasm,r=this.context.ctx;if(this.wasm=new t.AllIn1(r),this.wasm.blurRadius=e.blurRadius||3,this.wasm.mirror=!!e.mirror,this.wasm.vbMode="blur"===e.bg?1:e.bg instanceof HTMLImageElement?2:"green"===e.bg?3:0,e.waterMark){let{x:t,y:r,width:i,height:n}=e.waterMark;this.wasm.setWaterMark(t,r,i,n)}if(e.beautyParams){let{beauty:t,brightness:r,ruddy:i}=e.beautyParams;this.wasm.setBeauty(t,r,i,null==e?void 0:e.width,null==e?void 0:e.height)}if(this.program=this.wasm.init(),this.useProgram(),this.setAttributes(this.positionBuffer,this.texCoordBuffer),r.uniform1i(r.getUniformLocation(this.program,"mask"),1),e.bg instanceof HTMLImageElement&&(r.uniform1i(r.getUniformLocation(this.program,"bg"),2),this._bgTexture=this.createTexture(e.bg)),e.waterMark&&(r.uniform1i(r.getUniformLocation(this.program,"waterMark"),3),this._waterMarkTexture=this.createTexture(e.waterMark.image)),r.uniform1i(r.getUniformLocation(this.program,"lastMask"),4),this._weixin){let e=this.context.createShader(r.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\nuniform sampler2D u_texture;\nuniform sampler2D mask;\n\nin vec2 v_texCoord;\nout vec4 outColor;\nvoid main() {\n  outColor = vec4(texture(u_texture, v_texCoord).rgb, texture(mask, v_texCoord).a);\n}"),t=this.context.createShader(r.VERTEX_SHADER,"#version 300 es\nin vec2 a_position;\nin vec2 a_texCoord;\nout vec2 v_texCoord;\nvoid main() {\n  gl_Position = vec4(a_position.x, a_position.y, 0, 1);\n  v_texCoord = a_texCoord;\n}");this._prePrograme=this.context.createProgram(t,e),r.useProgram(this._prePrograme),this.setAttributes(this.positionBuffer,this.texCoordBuffer),r.uniform1i(r.getUniformLocation(this._prePrograme,"mask"),1)}}onPredict(e){var t;let r=this.context.ctx;this._weixin&&(this._lastMaskTexture||(this._lastMaskTexture=this.createTexture(this.image),this._lastMaskFbo=this.createFramebuffer(this._lastMaskTexture))),this.useProgram(),this._weixin?this.useTexture():null==this||this._selfieSegmentation.bindTexture(),r.activeTexture(r.TEXTURE1),null==(t=this._selfieSegmentation)||t.bindTexture2d(e),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,this._bgTexture||null),r.activeTexture(r.TEXTURE3),r.bindTexture(r.TEXTURE_2D,this._waterMarkTexture||null),this.useBufferFrame(),r.drawArrays(r.TRIANGLE_STRIP,0,4),this._segmentationMask=e,this.totalFrames++}render(e){var t,r,i,n;let o=this.context.ctx,{image:a}=this;this.tryVideoFrameCallback(a);let{videoWidth:s,videoHeight:c}=a;if(0===s||0===c)return!1;a.width=s,a.height=c;let A=!1;if(this.totalFrames)this._weixin?this.useTexture():null==(t=this._selfieSegmentation)||t.bindTexture(),A=this._selfieTextureValid,this._selfieTextureValid=!0;else{if(!this.program)return!1;this.useTexture(),A=this._textureValid,this._textureValid=!0}return this.width===s&&this.height===c&&A?o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,a):(this.resize(s,c),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,a)),this._weixin&&(o.useProgram(this._prePrograme),this.useTexture(),this._segmentationMask&&(o.activeTexture(o.TEXTURE1),null==(r=this._selfieSegmentation)||r.bindTexture2d(this._segmentationMask),o.bindFramebuffer(o.FRAMEBUFFER,this._lastMaskFbo||null)),o.drawArrays(o.TRIANGLE_STRIP,0,4),null==(i=this._selfieSegmentation)||i.bindTexture(),this._segmentationMask?o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,0,0,s,c):o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,s,c,0)),null==(n=this._selfieSegmentation)||n.send(s,c),this.totalFrames||(o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,this._bgTexture||null),o.activeTexture(o.TEXTURE3),o.bindTexture(o.TEXTURE_2D,this._waterMarkTexture||null),o.drawArrays(o.TRIANGLE_STRIP,0,4)),!1}close(){var e;super.close();let t=this.context.ctx;this._bgTexture&&t.deleteTexture(this._bgTexture),this._waterMarkTexture&&t.deleteTexture(this._waterMarkTexture),this._lastMaskTexture&&t.deleteTexture(this._lastMaskTexture),this._lastMaskFbo&&t.deleteFramebuffer(this._lastMaskFbo),this._prePrograme&&t.deleteProgram(this._prePrograme),null==(e=this.wasm)||e.close()}},xV=class extends CN{constructor(e){super(e,{name:"yuv-source",useDefaultProgram:!1,create2d:!1,useFbo:!1,createTexture:!1,logger:e.log,fragmentShaderSource:"\n        precision highp float;\n        uniform sampler2D ySampler;\n        uniform sampler2D uSampler;\n        uniform sampler2D vSampler;\n        varying highp vec2 textureCoord;\n        const mat4 YUV2RGB = mat4(\n        1.1643828125, 0, 1.59602734375, -.87078515625,\n        1.1643828125, -.39176171875, -.81296875, .52959375,\n        1.1643828125, 2.017234375, 0, -1.081390625,\n        0, 0, 0, 1);\n        void main() {\n          vec3 yuv;\n          yuv.r = texture2D(ySampler, textureCoord).r;\n          yuv.g = texture2D(uSampler, textureCoord).r;\n          yuv.b = texture2D(vSampler, textureCoord).r;\n          gl_FragColor = vec4(yuv,1) * YUV2RGB;\n        }\n          ",vertexShaderSource:"\n          attribute vec4 vertexPos;\n          attribute vec2 texturePos;\n          varying vec2 textureCoord;\n          void main() {\n            gl_Position = vertexPos;\n            textureCoord = texturePos;\n            }"}),jS(this,"yTextureRef"),jS(this,"uTextureRef"),jS(this,"vTextureRef"),jS(this,"Y"),jS(this,"U"),jS(this,"V"),this.useProgram();let t=this.context.ctx;t.pixelStorei(t.PACK_ALIGNMENT,1),t.pixelStorei(t.UNPACK_ALIGNMENT,1),this.setTexBuffer([0,1,1,1,0,0,1,0]),this.yTextureRef=this._initTexture("ySampler",0),this.uTextureRef=this._initTexture("uSampler",1),this.vTextureRef=this._initTexture("vSampler",2),this._canvas=e._canvas}_initTexture(e,t){let r=this.context.ctx,i=r.createTexture();return r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null),r.uniform1i(r.getUniformLocation(this.program,e),t),i}render(e){let t=this.context.ctx,r=this.width,i=this.height;return this.useProgram(),t.viewport(0,0,r,i),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.yTextureRef),t.texSubImage2D(t.TEXTURE_2D,0,0,0,r,i,t.LUMINANCE,t.UNSIGNED_BYTE,this.Y),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.uTextureRef),t.texSubImage2D(t.TEXTURE_2D,0,0,0,r/2,i/2,t.LUMINANCE,t.UNSIGNED_BYTE,this.U),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,this.vTextureRef),t.texSubImage2D(t.TEXTURE_2D,0,0,0,r/2,i/2,t.LUMINANCE,t.UNSIGNED_BYTE,this.V),this.draw(),!0}resize(e,t){super.resize(e,t);let r=this.context.ctx;r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.yTextureRef),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,e,t,0,r.LUMINANCE,r.UNSIGNED_BYTE,null),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this.uTextureRef),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,e/2,t/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,null),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,this.vTextureRef),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,e/2,t/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,null)}},UV=[e=>{e.codec="avc1.420028"},e=>{delete e.hardwareAcceleration}],FV=(e,t)=>{switch(e){case"webCodecs":return"videoFrame"===t?514705:514706;case"wasm":return"webgl"===t?514707:"videoFrame"===t?514708:514709}throw new Error("decoder type not supported")},VV=class{constructor(e){jS(this,"trackDoneOB"),jS(this,"startOB"),jS(this,"stopOB"),jS(this,"decoder"),jS(this,"videoContext"),jS(this,"gop",0),jS(this,"gop_helper",0),jS(this,"waitFirstKeyFrame",!0),jS(this,"startTimestamp",0),jS(this,"startTime",0),jS(this,"startPerformanceTime",0),jS(this,"inputFrameCount",0),jS(this,"decodedFrameCount",0),jS(this,"downgradeLevel",0),jS(this,"config"),jS(this,"videoElement"),jS(this,"type","wasm"),jS(this,"renderer","2d"),jS(this,"wasmOption"),jS(this,"createDecoder"),jS(this,"_decodeSink"),jS(this,"isReported",!1);let{track:t,createDecoder:r}=e;if(this.createDecoder=r,this.wasmOption={yuvMode:"webgl"===e.renderer,wasmPath:e.wasmPath,workerMode:e.workerMode,canvas:e.canvas},this.config=e.config,this.videoElement=e.videoElement,this.renderer=e.renderer,this.trackDoneOB=lL(t,uM.INIT),this.stopOB=eL(this.trackDoneOB),"auto"===e.type){switch(e.fallback){case"wasm":this.type="wasm",this.renderer="webgl";break;case"wasm_2d":this.type="wasm",this.renderer="2d";break;case"wasm_video":this.type="wasm",this.renderer="videoFrame";break;default:this.type="webCodecs"}this.wasmOption.yuvMode="webgl"===this.renderer}else this.type=e.type;this.changeRenderer(this.renderer),this.startOB=eL();let i,n=eL();kN(n,ex(((e,r)=>(e!==r&&t.onDecodeDowngradeStateChanged({type:this.type,renderer:this.renderer,reason:i,prevState:e,state:r}),r)),"INITIALIZED"),QL(this.stopOB),Ox()),kN(this.startOB,KN(0),Ax((e=>{let r=this.pipe(t);return n.next("STARTING"),t.log.info("decoder type: ".concat(this.type," renderer: ").concat(this.renderer)),kN(r,QL(this.stopOB),Ox((()=>{t.stat.framesDecoded++}),(r=>{if(t.log.error(r),sk.addFailedEvent({key:FV(this.type,this.renderer),error:r}),e>4)this.startOB.error(r);else{switch(this.type){case"webCodecs":this.type="wasm",this.changeRenderer("webgl");break;case"wasm":"webgl"===this.renderer&&this.changeRenderer("videoFrame")}this.startOB.next(e+1)}}))),kN(r,OL(1),Rx(yL))})),QL(this.stopOB),Ox((()=>{t.player.handlePlaying("canvas"),n.next("STARTED")}),(e=>{i=e,n.next("FAILED")}),(()=>{sk.addSuccessEvent({key:FV(this.type,this.renderer)}),sk.addSuccessEvent({key:514704})})))}mock(e){this._decodeSink?this._decodeSink.error(e):this.startOB.next(0)}close(e){this.stopOB.next(e)}changeRenderer(e){this.renderer=e,"videoFrame"===this.renderer&&!fk()&&(this.renderer="2d"),this.wasmOption.yuvMode="webgl"===this.renderer}decode(e){var t;if(this.inputFrameCount++,"configured"!==(null==(t=this.decoder)?void 0:t.state))return e;let r="key"===e.type,{timestamp:i}=e;if(r?(this.gop=this.gop_helper,this.gop_helper=0):this.gop_helper++,!this.decoder||"configured"!==this.decoder.state)return e;{if(this.waitFirstKeyFrame){if(!r)return;this.waitFirstKeyFrame=!1,this.startTimestamp=i,this.startTime=Date.now(),this.startPerformanceTime=yD()}let t=(i-this.startTimestamp)/90,n=Date.now()-this.startTime-t;switch(r&&((n<500?0:n/1e3|0)>0?this.downgradeLevel++:this.downgradeLevel>3&&this.downgradeLevel--),this.downgradeLevel){case 0:case 1:break;case 2:if(this.gop_helper>this.gop>>1)return;break;case 3:if(this.gop_helper>0)return;break;default:return}this.decoder.decode(e)}}pipe(e){return VN()((t=>YS(this,null,(function*(){this._decodeSink=t,t.defer((()=>{var e,t;null==(e=this.decoder)||e.close(),null==(t=this.videoContext)||t.destroy(),delete this._decodeSink}));let{renderer:r,type:i}=this;try{switch(i){case"wasm":this.decoder=this.createDecoder(i,this.wasmOption);break;case"webCodecs":for(let e=0;e<=UV.length;e++){let{supported:r}=yield VideoDecoder.isConfigSupported(this.config);if(r)break;if(e===UV.length)return void t.error(3);UV[e](this.config)}this.decoder=this.createDecoder(i);break;case"mse":throw new Error("not supported yet")}if(this.decoder.on("videoFrame",(e=>{this.decodedFrameCount++,t.next(e)})),this.decoder.on("error",(r=>{e.log.error(r),t.error("webCodecs"===i?4:8)})),yield this.decoder.initialize(this.videoElement),this.decoder.configure(this.config),"wasm"===i&&"webgl"===r){this.videoContext=new Jx({frameRate:15,logger:e.log,name:e.userId}),this.videoContext.create(),this.videoContext.on(Jx.UNAVAILABLE,(r=>{e.log.error(r),t.error(7)}));let r=new xV(this.videoContext);this.decoder.on("videoCodecInfo",(e=>r.resize(e.width,e.height))),this.decoder.on("videoFrame",(e=>{[r.Y,r.U,r.V]=e,1===this.downgradeLevel?this.decodedFrameCount%2==0&&r.render(this.decodedFrameCount):r.render(this.decodedFrameCount)})),e.source=r,e.player.setCanvas(this.videoContext._canvas,2)}else if("videoFrame"===r){e.player.setCanvas();let r=new MediaStreamTrackGenerator({kind:"video"}),n=r.writable.getWriter();e.setInputMediaStreamTrack(r),this.decoder.on("videoFrame",(e=>{n.write(e)})),r.onmute=()=>{t.error("webCodecs"===i?5:9)},t.defer((()=>r.onmute=null))}else{this.videoContext=new Xx({frameRate:15,logger:e.log,name:e.userId}),this.videoContext.create({alpha:!1});let t=this.videoContext.createVideoImageSource();this.decoder.on("videoFrame",(e=>{t.image=e,t.update()}));let r=new Lx(this.videoContext,{name:"remotePlayer",logger:e.log});t.connect(r),e.source=t,e.player.setCanvas(this.videoContext._canvas,2)}}catch(r){e.log.error(r),t.error("webCodecs"===i?2:6)}}))))}},GV=class extends QV.EventEmitter{constructor(e){super(),this.room=e,jS(this,"videoContext"),jS(this,"_glVideoContext"),jS(this,"_2dVideoContext"),jS(this,"destination"),jS(this,"smallVideoContext"),jS(this,"smallDestination"),jS(this,"smallTrackSource"),jS(this,"smallImageSource"),jS(this,"_isMirror",!1),jS(this,"cameraTrack"),jS(this,"cameraNode"),jS(this,"mirrorNode"),jS(this,"mixNode"),jS(this,"screenTrack"),jS(this,"screenNode"),jS(this,"selfModel",!1),jS(this,"blurRadius",3),jS(this,"arTrack"),jS(this,"Wasm"),jS(this,"waterMarkNode"),jS(this,"_waterMarkOption"),jS(this,"watermarkImageList",[]),jS(this,"_beautyParams"),jS(this,"isUsingArTrack",!1),jS(this,"_isMixScreen",!1),jS(this,"_virtualBackground"),jS(this,"_virtualBackgroundAbortCallback"),jS(this,"virtualBackgroundInstance"),jS(this,"_bgAssetPath"),jS(this,"log",jO.createLogger({id:"vm"})),jS(this,"_checkId",0),jS(this,"_use2d",!1),jS(this,"_autoSwitchRenderMode",!0),jS(this,"_selfieSegmentation"),jS(this,"encodePipeline",[]),jS(this,"decodePipeline",[]),e&&(this.log.setUserId(e.userId),this.log.setSdkAppId(e.sdkAppId)),this.smallVideoContext=new Xx({frameRate:15,logger:this.log,name:"s"}),this.enablePrintDetail()}get _hasVirtualBg(){return!!this._virtualBackground}get _hasWaterMark(){return this.watermarkImageList.length>0}get renderMode(){return this._autoSwitchRenderMode?"auto":this._use2d?"2d":"webgl"}set renderMode(e){if(this._autoSwitchRenderMode="auto"===e,this._autoSwitchRenderMode)return;let t="2d"===e;this._use2d!==t&&(this._use2d=t,this.clear(),this.videoContext=this._use2d?this.get2dVideoContext():this.getGlVideoContext(),this.update())}get2dVideoContext(){return this._2dVideoContext?this._2dVideoContext.destroy():this._2dVideoContext=new Xx({frameRate:15,logger:this.log,name:"m"}),this._2dVideoContext.create({alpha:this._hasWaterMark||this._hasVirtualBg}),this._2dVideoContext}getGlVideoContext(){if(this._glVideoContext){if(this._glVideoContext.available)return this._glVideoContext}else this._glVideoContext=new Jx({frameRate:15,logger:this.log,name:"m"});return this.initializeGlVideoContext(),this._glVideoContext}initializeGlVideoContext(){try{this._glVideoContext.create(),this._glVideoContext.on("unavailable",(e=>{var t;this.emit("error",e),this.log.warn("video context unavailable",e),null==(t=this._virtualBackgroundAbortCallback)||t.call(this,e),this.update().catch((e=>{this.log.error(e)}))}))}catch(e){this.emit("error",e)}}enablePrintDetail(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;this._checkId=mM.run("interval",(()=>{this.destination&&this.log.debug(this.destination.getInfo())}),{delay:e})}destroy(){var e,t;null==(e=this._2dVideoContext)||e.destroy(),null==(t=this._glVideoContext)||t.destroy(),this.smallVideoContext.destroy(),mM.clearTask(this._checkId)}get needAlpha(){return this._hasWaterMark||this._hasVirtualBg}get active(){return(fO||this._isMixScreen||this._isMirror||this._hasWaterMark||this._hasVirtualBg||this._beautyParams)&&this.checkOrCreateVideoContext()}sendCreateResult(){let e=arguments.length>1?arguments[1]:void 0,t="videoCtxGl"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"videoCtxGl")?512700:512701;e?sk.addFailedEvent({key:t,error:e}):sk.addSuccessEvent({key:t})}checkOrCreateVideoContext(){let e=this._use2d;if(this._autoSwitchRenderMode&&(this._use2d=!this._hasVirtualBg),this.videoContext)if(this.videoContext.available){let t=!this.videoContext.hasAlpha&&this.needAlpha;if(this._autoSwitchRenderMode&&e===this._hasVirtualBg)this.clear();else{if(!t)return!0;if(!this._use2d)return!0;this.clear()}}else{if(this._glVideoContext=new Jx({frameRate:15,logger:this.log,name:"m"}),this.initializeGlVideoContext(),this._glVideoContext.available)return this.videoContext=this._glVideoContext,this.videoContext.available;this.log.warn("webgl is still not available"),this.clear(),this._use2d=!0}return this.videoContext=this._use2d?this.get2dVideoContext():this.getGlVideoContext(),this.videoContext.available}get smallTrack(){var e;return null==(e=this.smallDestination)?void 0:e.videoTrack}get hasSmall(){return!!this.smallTrack}get initialTrack(){var e;return null==(e=this.cameraTrack)?void 0:e.mediaTrack}initVirtualBackground(e){return this._selfieSegmentation=e,this._selfieSegmentation.changeModel()}_setMainOutput(e){var t;try{let r=this.cameraTrack,{small:i,settings:n,player:o}=r;i?(this.smallVideoContext.available||(this.smallVideoContext.create({alpha:!1}),this.smallDestination=new Fx(this.smallVideoContext,i,this.log)),this.smallVideoContext.frameRate=i.frameRate,this.smallDestination.resolution=i,e?(this.smallTrackSource&&(this.smallTrackSource.close(),delete this.smallTrackSource),this.smallImageSource?this.smallImageSource.image=e:(this.smallImageSource=this.smallVideoContext.createVideoImageSource(e),this.smallImageSource.connect(this.smallDestination))):(this.smallImageSource&&(this.smallImageSource.close(),delete this.smallImageSource),this.smallTrackSource?this.smallTrackSource.replaceTrack(this.initialTrack):(this.smallTrackSource=this.smallVideoContext.createVideoTrackSource(this.initialTrack,"smallTrackSource"),this.smallTrackSource.width=n.width,this.smallTrackSource.height=n.height,this.smallTrackSource.connect(this.smallDestination)))):this.smallVideoContext.available&&(this.smallVideoContext.destroy(),delete this.smallDestination,delete this.smallTrackSource,delete this.smallImageSource),fO&&o.setCanvas(e);let a=e&&(null==(t=this.destination)?void 0:t.videoTrack)||this.initialTrack;return this.isUsingArTrack&&this.arTrack&&(this.emit("output-track-changed"),a=this.arTrack),this._selfieSegmentation&&e&&!this._use2d&&(this._selfieSegmentation._glName||this._selfieSegmentation.setCanvas(e)),this.log.info("set main output ".concat(a?a.label:"no output track")),r.setOutputMediaStreamTrack(a)}catch(e){this.log.error("set main output failed",e)}}update(){return YS(this,null,(function*(){var e,t;if(!this.cameraTrack||!this.cameraTrack.mediaTrack)return;if(!this.active)return this.cameraNode&&this.clear(),this._setMainOutput();let{settings:r,profile:i}=this.cameraTrack;if(this._use2d||!this._virtualBackground&&!this._beautyParams?(this.destination||(this.destination=this.videoContext.createVideoTrackDestination({name:"mainDestination2d",logger:this.log})),16===_O?this.initialTrack instanceof CanvasCaptureMediaStreamTrack?(this.cameraNode&&(this.cameraNode instanceof jx?(this.cameraNode.close(),delete this.cameraNode):this.cameraNode.image=this.initialTrack.canvas),this.cameraNode||(this.cameraNode=this.videoContext.createVideoImageSource(this.initialTrack.canvas,{name:"cameraCanvasSource",logger:this.log}))):(this.cameraNode&&(this.cameraNode instanceof jx?this.cameraNode.replaceTrack(this.initialTrack):(this.cameraNode.close(),delete this.cameraNode)),this.cameraNode||(this.cameraNode=this.videoContext.createVideoTrackSource(this.initialTrack,"cameraTrackSource"))):this.cameraNode?this.cameraNode.replaceTrack(this.initialTrack):this.cameraNode=this.videoContext.createVideoTrackSource(this.initialTrack,"cameraNodeSource"),this.cameraNode.resize(r.width,r.height)):(this.cameraNode&&this.cameraNode.close(),this.destination?this.destination.disableCheckMute():this.destination=new Ux(this.videoContext,{name:"mainDestination",logger:this.log}),this.cameraNode=new LV(this.videoContext,{input:this.cameraTrack.mediaTrack,width:r.width,height:r.height,mirror:this._isMirror,bg:this._virtualBackground,selfModel:this.selfModel,waterMark:this._waterMarkOption,beautyParams:this._beautyParams,useTflite:!0,blurRadius:this.blurRadius,assetPath:this._bgAssetPath,selfieSegmentation:this._selfieSegmentation,Wasm:this.Wasm}),this.cameraNode.connect(this.destination),this.destination.enableCheckMute()),this.videoContext.frameRate=i.frameRate,this._use2d){let r=this.cameraNode;r.disconnect(),this._isMirror&&(this.mirrorNode||(this.mirrorNode=new MV(this.videoContext,this.log)),r=r.connect(this.mirrorNode),r.disconnect(),this.log.info("start mirror")),this.mixNode&&this.mixNode.close(),delete this.mixNode,(this._isMixScreen||this._hasWaterMark)&&(this.mixNode=new NV(this.videoContext,this.log),r.connect(this.mixNode,{zIndex:1}),this._hasWaterMark&&!this.waterMarkNode&&this._waterMarkOption&&(this.waterMarkNode=this.videoContext.createVideoImageSource(this._waterMarkOption.image,{autoResize:!1,logger:this.log}),this.waterMarkNode.resize(this._waterMarkOption.width,this._waterMarkOption.height),this.waterMarkNode.x=this._waterMarkOption.x,this.waterMarkNode.y=this._waterMarkOption.y),null==(e=this.waterMarkNode)||e.connect(this.mixNode,{zIndex:2}),this._isMixScreen&&this.screenTrack&&!this.screenNode&&(this.screenNode=this.videoContext.createVideoTrackSource(this.screenTrack.mediaTrack,"screenNodeSource")),null==(t=this.screenNode)||t.connect(this.mixNode,{zIndex:0}),r=this.mixNode,this.log.info("start mix","".concat(this.mixNode.width,"x").concat(this.mixNode.height))),r.connect(this.destination)}return this.log.info("update ".concat(this._use2d?"2d":"webgl")),this._setMainOutput(this.videoContext._canvas)}))}changeInput(e){var t,r,i,n;if(e instanceof lN)return this.log.info("change screen input",null==(t=e.mediaTrack)?void 0:t.label),this.setScreenTrack(e);if(e instanceof cN)return this.log.info("change video input",null==(r=e.mediaTrack)?void 0:r.label),this.setCameraTrack(e);if(e instanceof Kx){this.log.info("change remote input",null==(i=e.mediaTrack)?void 0:i.label);let t=e.mediaTrack;return e.setOutputMediaStreamTrack(t)}this.log.warn("change unknown input",null==(n=e.mediaTrack)?void 0:n.label)}removeInput(e){var t;e instanceof lN?(null==(t=this.screenNode)||t.close(),delete this.screenNode,delete this.screenTrack,this.update()):e instanceof cN?(this.clear(),delete this.cameraTrack,this.smallImageSource&&(this.smallImageSource.close(),delete this.smallImageSource),this.smallTrackSource&&(this.smallTrackSource.close(),delete this.smallTrackSource)):e instanceof Kx&&e.source&&e.source.context.destroy()}setCameraTrack(e){return YS(this,null,(function*(){this.cameraTrack=e,this.update()}))}setScreenTrack(e){return this.screenTrack=e,this._isMixScreen&&(this.screenNode?this.screenNode.replaceTrack(e.mediaTrack):this.update()),e.setOutputMediaStreamTrack(e.mediaTrack)}getWatermarkImage(e,t){return YS(this,null,(function*(){let r=document.createElement("canvas");t&&e&&(r.height=t,r.width=e);let i=r.getContext("2d");if(!i)throw new ob({code:ib.NOT_SUPPORTED,message:"Make image failed because of canvas context is null"});return this.watermarkImageList.sort(((e,t)=>e.zIndex-t.zIndex)),this.watermarkImageList.forEach((e=>{let{image:t,x:r,y:n,width:o,height:a}=e;i.drawImage(t,r,n,o,a)})),UD(r.toDataURL())}))}pushWaterMarkImageList(e){let{type:t}=e;this.watermarkImageList.some((t=>t.imageUrl===e.imageUrl&&t.height===e.height&&t.width===e.width&&t.x===e.x&&t.y===e.y&&t.type===e.type&&t.zIndex===e.zIndex))||(("mute"===t||"watermark"===t)&&(this.watermarkImageList=this.watermarkImageList.filter((e=>e.type!==t))),this.watermarkImageList.push(e))}setBeautyParams(e){return YS(this,null,(function*(){this._beautyParams=e,this.update()}))}stopBeauty(){return YS(this,null,(function*(){this._beautyParams=void 0,this.update()}))}setWatermark(e){return YS(this,null,(function*(){var t,r;let i;try{i=yield UD((null==e?void 0:e.imageElement)||e.imageUrl)}catch(t){throw new ob({code:ib.INVALID_PARAMETER,message:"load image failed, url: ".concat(e.imageUrl)})}let{x:n=0,y:o=0,width:a=i.width,height:s=i.height,type:c="watermark",zIndex:A=2}=e;this.watermarkImageList.some((e=>e.type===c))?(this.watermarkImageList=this.watermarkImageList.filter((e=>e.type!==c)),this.pushWaterMarkImageList({x:n,y:o,width:a,height:s,image:i,zIndex:A,type:c,imageUrl:e.imageUrl}),i=yield this.getWatermarkImage(null==(t=this.cameraTrack)?void 0:t.settings.width,null==(r=this.cameraTrack)?void 0:r.settings.height),this._waterMarkOption={x:0,y:0,width:i.width,height:i.height,image:i},this.waterMarkNode?(this.waterMarkNode.x=0,this.waterMarkNode.y=0,this.waterMarkNode.resize(i.width,i.height),this.waterMarkNode.image=i):this.update()):(this.pushWaterMarkImageList({x:n,y:o,width:a,height:s,image:i,zIndex:A,type:c,imageUrl:e.imageUrl}),yield this.freshWatermark()),this.log.info("set watermark",JSON.stringify(this.watermarkImageList,((e,t)=>"imageUrl"===e?void 0:t)))}))}deleteWatermark(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"watermark";return YS(this,null,(function*(){this.watermarkImageList=this.watermarkImageList.filter((t=>t.type!==e)),this.log.info("delete watermark",e,JSON.stringify(this.watermarkImageList,((e,t)=>"imageUrl"===e?void 0:t))),yield this.freshWatermark()}))}freshWatermark(){return YS(this,null,(function*(){var e,t,r;null==(e=this.waterMarkNode)||e.close(),delete this.waterMarkNode,delete this._waterMarkOption;let i=yield this.getWatermarkImage(null==(t=this.cameraTrack)?void 0:t.settings.width,null==(r=this.cameraTrack)?void 0:r.settings.height);this._waterMarkOption={x:0,y:0,width:i.width,height:i.height,image:i},this.update()}))}setVirtualBackground(e){return YS(this,null,(function*(){if(e){if(e.onAbort&&(this._virtualBackgroundAbortCallback=e.onAbort),this._use2d&&!this._autoSwitchRenderMode)return Promise.reject(new Error("not support virtual background in 2d mode"));this._bgAssetPath=e.assetPath,"image"===e.type?this._virtualBackground=yield UD(e.imageUrl):(this.blurRadius=e.blurLevel||this.blurRadius||3,this._virtualBackground=e.type)}else delete this._virtualBackground,delete this._virtualBackgroundAbortCallback;if(this.log.info("".concat(this._virtualBackground?"start":"stop"," virtual background, ").concat((null==e?void 0:e.type)||"",", ").concat(this.blurRadius||"")),yield this.update(),this._virtualBackground&&!this._glVideoContext.available)throw new ob({code:ib.INVALID_OPERATION,message:"webgl context create failed, ".concat(this._glVideoContext.error)})}))}get mixScreen(){return this._isMixScreen}set mixScreen(e){var t;this._isMixScreen=e,this._isMixScreen||(null==(t=this.screenNode)||t.close(),delete this.screenNode),this.update()}set mirror(e){var t;this._isMirror!==e&&(this._isMirror=e,this._isMirror||(null==(t=this.mirrorNode)||t.close(),delete this.mirrorNode),this.update())}get mirror(){return this._isMirror}enableAr(e){this.arTrack=e,this.isUsingArTrack=!0,this.update()}updateAr(){return YS(this,null,(function*(){var e;null!=(e=this.cameraTrack)&&e.mediaTrack&&(yield this.virtualBackgroundInstance.ar.updateInputTrack(this.cameraTrack.mediaTrack.clone()))}))}disableAr(){var e;this.isUsingArTrack=!1,null==(e=this.arTrack)||e.stop(),this.arTrack=void 0,this.update()}createDecodeContext(e){return new VV(e)}clear(){var e;null==(e=this.videoContext)||e.disconnect(),delete this.destination,delete this.cameraNode,delete this.mirrorNode,delete this.screenNode,delete this.waterMarkNode}addEncodeProcessor(e){let{processor:t,type:r}=e;var i;this.encodePipeline.includes(t)||(this.encodePipeline[r]=t,null==(i=this.room)||i.enableInsertableStreams())}addDecodeProcessor(e){let{processor:t,type:r}=e;var i;this.decodePipeline.includes(t)||(this.decodePipeline[r]=t,null==(i=this.room)||i.enableInsertableStreams())}removeEncodeProcessor(e){let{type:t}=e;this.encodePipeline[t]=void 0}removeDecodeProcessor(e){let{type:t}=e;this.decodePipeline[t]=void 0}};GS([HP((function(e){this.log.error("update failed",e)}))],GV.prototype,"update",1);var jV=0,HV=class extends uM{constructor(e){super("room"),jS(this,"seq",++jV),jS(this,"sdkAppId"),jS(this,"userId"),jS(this,"userSig"),jS(this,"privateMapKey"),jS(this,"latencyLevel"),jS(this,"tinyId"),jS(this,"scene"),jS(this,"roomId"),jS(this,"useStringRoomId"),jS(this,"role","anchor"),jS(this,"joinParams",null),jS(this,"localTracks",new Set),jS(this,"enableAutoPlayDialog",!0),jS(this,"autoReceiveAudio",!0),jS(this,"autoReceiveVideo",!0),jS(this,"proxy_ws"),jS(this,"proxy_wt"),jS(this,"proxy_unified"),jS(this,"checkSystemResult",{result:!0,detail:{isBrowserSupported:!0,isWebRTCSupported:!0,isWebCodecsSupported:!0,isMediaDevicesSupported:!0,isScreenShareSupported:!0,isSmallStreamSupported:!0,isH264EncodeSupported:!0,isVp8EncodeSupported:!0,isH264DecodeSupported:!0,isVp8DecodeSupported:!0}}),jS(this,"keyPointManager"),jS(this,"audioManager"),jS(this,"videoManager"),jS(this,"callDurationCalculator"),jS(this,"badCaseDetector"),jS(this,"scheduleResult",{domains:null,iceServers:null,iceTransportPolicy:null,trtcAutoConf:null}),jS(this,"videoDecodeFallbackType"),jS(this,"_isUsingCachedSchedule",!1),jS(this,"_log",jO.createLogger({id:"r".concat(this.seq)})),jS(this,"_joinedTimestamp",0),jS(this,"_sdkType"),jS(this,"heartbeatReport"),jS(this,"quality"),jS(this,"enableSEI"),jS(this,"isDestroyed",!1),this.useStringRoomId=!!e.useStringRoomId,dD(e.autoReceiveAudio)&&(this.autoReceiveAudio=e.autoReceiveAudio),dD(e.autoReceiveVideo)&&(this.autoReceiveVideo=e.autoReceiveVideo),dD(e.enableAutoPlayDialog)&&(this.enableAutoPlayDialog=e.enableAutoPlayDialog),this._sdkType=e.sdkType,this.keyPointManager=new RV({room:this,frameWorkType:e.frameWorkType,component:e.component,language:e.language}),this.callDurationCalculator=new BV({room:this}),this.badCaseDetector=new OV({room:this}),this.audioManager=new gN(this),this.videoManager=new GV(this)}get scriptTransformWorker(){}get isMainStreamPublished(){for(let e of this.localTracks)if(4&e.mediaType)return!0;return!1}get isAuxStreamPublished(){for(let e of this.localTracks)if(2&e.mediaType)return!0;return!1}get hasAuxStream(){for(let e of this.remotePublishedUserMap.values())if(e.muteState.hasAuxiliary)return!0;return this.isAuxStreamPublished}get localMainVideoTrack(){for(let e of this.localTracks)if(4&e.mediaType)return e;return null}get localAuxVideoTrack(){for(let e of this.localTracks)if(2&e.mediaType)return e;return null}getLogger(){return this._log}get isJoining(){return"joining"===this.state.toString()}get isJoined(){return"joined"===this.state}get isLeft(){return"left"===this.state}addTrack(e){return YS(this,null,(function*(){return this.publish(e)}))}removeTrack(e){return YS(this,null,(function*(){return this.unpublish(e)}))}replaceTrack(e){return YS(this,null,(function*(){}))}setEncodedDataProcessingListener(e){throw new Error("Method not implemented.")}enableAIVoice(e){throw new Error("Method not implemented.")}setProxyServer(e){if(lD(e))e.startsWith("wss://")?this.proxy_ws=e:e.startsWith("https://")&&(this.proxy_wt=e);else if(nD(e)){let{websocketProxy:t,webtransportProxy:r,loggerProxy:i,scheduleProxy:n,unifiedProxy:o}=e;this.proxy_ws=t,this.proxy_wt=r,this.proxy_unified=o,o?(GU([o,o]),_b("https://".concat(o))):(i&&_b(i),n&&GU(n))}UO.once(VO.JOIN_RECEIVED_CMD_RES,(()=>this.sendAbilityStatus({sched_domain:VU.main,sched_back_domain:VU.backup,signal_domain:this.proxy_ws||this.proxy_wt||""})))}getRemoteAudioStats(){return YS(this,null,(function*(){let e={};return this.remotePublishedUserMap.forEach((t=>{e[t.userId]=t.remoteAudioTrack.stat})),e}))}getTransportStats(){return YS(this,null,(function*(){var e;let t={rtt:(null==(e=this.quality)?void 0:e.uplinkRTT)||0,downlinksRTT:{}};if(this.quality)for(let e of this.quality.downlinkInfo)t.downlinksRTT[e.userId]=e.rtt;return t}))}getRemoteVideoStats(){return YS(this,arguments,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return function*(){let r={};return e.remotePublishedUserMap.forEach((e=>{let i="auxiliary"===t?e.remoteAuxiliaryTrack:e.remoteVideoTrack;r[e.userId]=i.stat})),r}()}))}checkDestroy(){if(this.isDestroyed)throw new ob({code:ib.INVALID_OPERATION,message:qQ({key:JQ.CLIENT_DESTROYED,data:{funName:"join"}})})}destroy(){if(this.isJoined)throw this._log.warn(XQ.INVALID_DESTROY),new ob({code:ib.INVALID_OPERATION,message:qQ({key:JQ.INVALID_DESTROY})});this._log.info("destroy room"),this.audioManager.destroy(),this.videoManager.destroy(),this.keyPointManager.destroy(),this.callDurationCalculator.destroy(),this.badCaseDetector.destroy(),this.isDestroyed=!0,UO.emit(VO.ROOM_DESTROY,{room:this})}schedule(e,t){return YS(this,null,(function*(){var r,i,n;let o=yD();try{let{isCached:a,result:s,detailCost:c}=yield FU({userId:this.userId,sdkAppId:this.sdkAppId,roomId:this.useStringRoomId?e.strRoomId:e.roomId,useStringRoomId:this.useStringRoomId,version:db,userSig:this.userSig,role:"live"===this.scene?e.role:void 0,frameWorkType:t,latencyLevel:e.latencyLevel});this._isUsingCachedSchedule=a,this._log.info("schedule cache:".concat(+a," ").concat(PD(s,{keysToExclude:["username","credential"]}))),a&&UO.once(VO.JOIN_RECEIVED_CMD_RES,(()=>this.sendAbilityStatus({scheduleCache:1}))),this.scheduleResult=LS(LS({},this.scheduleResult),s),uD(null==(r=s.config)?void 0:r.retryCount)&&hR(s.config.retryCount),lD(null==(i=s.config)?void 0:i.loggerDomain)&&_b(s.config.loggerDomain),this.videoDecodeFallbackType=(null==(n=s.config)?void 0:n.videoDecodeFallback)||this.videoDecodeFallbackType,UO.emit(VO.JOIN_SCHEDULE_SUCCESS,{room:this,schedule:this.scheduleResult,detailCost:c}),sk.addSuccessEvent({key:521700,cost:yD()-o,split:50})}catch(e){throw sk.addFailedEvent({key:521700,error:e}),e}}))}sendAbilityStatus(e){}enableInsertableStreams(){return Promise.resolve()}},YV=VS(WS()),WV=VS(eb());function JV(e){var t;let r=[];for(let i=0;i<e.rtp.length;i++){if(["rtx","red","ulpfec"].includes(e.rtp[i].codec))continue;let n=e.fmtp.filter((t=>t.payload===e.rtp[i].payload))[0];r.push({payload:e.rtp[i].payload,codec:e.rtp[i].codec,fmtp:n?n.config:"",rate:e.rtp[i].rate,rtx:"rtx"===(null==(t=e.rtp[i+1])?void 0:t.codec)?e.rtp[i+1].payload:0,rtcpfb:((null==e?void 0:e.rtcpFb)||[]).filter((t=>t.payload===e.rtp[i].payload)).map((e=>{let{type:t,subtype:r}=e;return{id:t,params:r?[r]:[]}}))})}return r}var XV=(e,t)=>YS(void 0,null,(function*(){var r;let i=dV(e),n={ice:{ufrag:"",password:""},dtls:{hash:"",fingerprint:"",setup:""},audio:{codecs:[],extensions:[]},video:{codecs:[],decoders:[],extensions:[]},useDataChannel:!1};n.ice.ufrag=String(i.media[0].iceUfrag),n.ice.password=i.media[0].icePwd||"",i.fingerprint&&(n.dtls.hash=i.fingerprint.type,n.dtls.fingerprint=i.fingerprint.hash,n.dtls.setup=i.setup||""),i.media[0].fingerprint&&(n.dtls.hash=i.media[0].fingerprint.type,n.dtls.fingerprint=i.media[0].fingerprint.hash),n.dtls.setup=i.media[0].setup||"";let o=i.media[0],a=i.media[1];o.ext&&(n.audio.extensions=o.ext.map((e=>({id:e.value,uri:e.uri})))),a.ext&&(n.video.extensions=a.ext.map((e=>({id:e.value,uri:e.uri}))));let s={codec:o.rtp[0].codec,fmtp:o.fmtp[0].config,payload:o.fmtp[0].payload,rate:o.rtp[0].rate,channels:o.rtp[0].encoding,rtcpfb:[],rtx:0};null==(r=o.rtcpFb)||r.forEach((e=>{let{payload:t,type:r,subtype:i}=e;if(t===s.payload){let e={id:r,params:[]};i&&e.params.push(i),s.rtcpfb.push(e)}})),n.audio.codecs.push(s);let c=["h264","vp8"];return t&&c.shift(),n.video.codecs=[...JV(a)].filter((e=>c.includes(e.codec.toLocaleLowerCase()))),n.video.decoders=(yield function(){return YS(this,null,(function*(){let e=new RTCPeerConnection;e.addTransceiver(Vb.VIDEO,{direction:Vb.TRANSCEIVER_DIRECTION_RECVONLY});let t=yield e.createOffer();if(!t.sdp)return[];let r=JV(dV(t.sdp).media[0]);return e.close(),r}))}()).filter((e=>["h264","vp8"].includes(e.codec.toLocaleLowerCase()))),n})),KV=e=>{let{serverAbility:t,clientAbility:r,offerSDP:i,enableCustomMessage:n}=e,o=dV(i),a={extmapAllowMixed:"extmap-allow-mixed",groups:o.groups,icelite:"ice-lite",media:[],msidSemantic:{semantic:"",token:"WMS"},name:"-",origin:{address:"127.0.0.1",username:"-",sessionId:String(Date.now()),sessionVersion:1,netType:"IN",ipVer:4},timing:{start:0,stop:0},version:0},s={candidates:t.candidates.map((e=>({component:1,foundation:"1",generation:0,ip:e.ip,port:e.port,priority:e.priority,transport:e.foundation,type:e.type}))),connection:{version:4,ip:"0.0.0.0"},direction:Vb.TRANSCEIVER_DIRECTION_RECVONLY,ext:t.audio.extensions.map((e=>({value:e.id,uri:e.uri}))),fingerprint:{type:t.dtls.hash,hash:t.dtls.fingerprint},fmtp:[{payload:t.audio.codecs[0].payload,config:t.audio.codecs[0].fmtp}],icePwd:t.ice.password,iceUfrag:t.ice.ufrag,mid:"0",payloads:String(t.audio.codecs[0].payload),port:o.media[0].port,protocol:o.media[0].protocol,type:Vb.AUDIO,setup:t.dtls.setup,rtcpFb:t.audio.codecs[0].rtcpfb.map((e=>({payload:t.audio.codecs[0].payload,type:e.id,subtype:e.params[0]}))),rtcpMux:"rtcp-mux",rtcpRsize:"rtcp-rsize",rtp:[{payload:t.audio.codecs[0].payload,codec:t.audio.codecs[0].codec,rate:t.audio.codecs[0].rate,encoding:t.audio.codecs[0].channels}]};return a.media.push(s),[1,2,3].forEach((e=>{a.media.push(zV({mid:e,serverAbility:t,clientAbility:r,parsedOffer:o}))})),n&&a.media.push(o.media.find((e=>"dc"===e.mid))),hV(a)},zV=e=>{let{mid:t,serverAbility:r,clientAbility:i,parsedOffer:n,isDownlink:o=!1}=e,a={candidates:r.candidates.map((e=>({component:1,foundation:"1",generation:0,ip:e.ip,port:e.port,priority:e.priority,transport:e.foundation,type:e.type}))),connection:{version:4,ip:"0.0.0.0"},direction:Vb.TRANSCEIVER_DIRECTION_RECVONLY,ext:r.video.extensions.map((e=>({value:e.id,uri:e.uri}))),fingerprint:{type:r.dtls.hash,hash:r.dtls.fingerprint},fmtp:[],icePwd:r.ice.password,iceUfrag:r.ice.ufrag,mid:String(t),payloads:"",port:n.media[0].port,protocol:n.media[0].protocol,type:Vb.VIDEO,setup:r.dtls.setup,rtcpFb:[],rtcpMux:"rtcp-mux",rtcpRsize:"rtcp-rsize",rtp:[]};if(o){let e=r.video.decoders;(!e||0===e.length)&&(e=r.video.codecs),(!e||0===e.length)&&(e=i.video.decoders),e.forEach((e=>{qV(a,e)}))}else{let e=r.video.codecs.findIndex((e=>e.codec.toLowerCase()===(r.useVp8?"vp8":"h264"))),t=r.video.codecs[e]||i.video.codecs[0];qV(a,t)}return a},qV=(e,t)=>{e.payloads="".concat(e.payloads," ").concat(t.payload).trim(),e.fmtp.push({payload:t.payload,config:t.fmtp}),e.rtcpFb=[...e.rtcpFb||[],...t.rtcpfb.map((e=>({payload:t.payload,type:e.id,subtype:e.params[0]})))],e.rtp.push({payload:t.payload,codec:t.codec.toUpperCase(),rate:t.rate}),t.rtx&&(e.payloads="".concat(e.payloads," ").concat(t.rtx),e.fmtp.push({payload:t.rtx,config:"apt=".concat(t.payload)}),e.rtp.push({payload:t.rtx,codec:"rtx",rate:t.rate}))},ZV=VS(WS()),$V=class extends ZV.EventEmitter{constructor(e){super(),this.room=e,jS(this,"mainFpsHealth",1),jS(this,"mainBitrateHealth",1),jS(this,"badMainBitrateHealthCount",0),jS(this,"lastEmitBadHealthTime",0),jS(this,"log"),!lB&&lO&&UO.on("262",this.onVideoCodecChanged,this),this.log=e.getLogger().createChild({id:"h-d"})}onVideoCodecChanged(e){let{remoteUserId:t,streamType:r,isHWCodec:i,codec:n}=e;if(!t&&7!==r&&"h264"===n){if(!i)return void this.room.off("heartbeat-report",this.onHeartbeatReport,this);this.room.listeners("heartbeat-report").includes(this.onHeartbeatReport)||this.room.on("heartbeat-report",this.onHeartbeatReport,this)}}onHeartbeatReport(e){Date.now()-this.lastEmitBadHealthTime<3e4||(e.msg_up_stream_info.msg_video_status.forEach((e=>{if(e.uint32_video_enc_fps&&e.uint32_video_capture_fps){let t=e.uint32_video_enc_fps/e.uint32_video_capture_fps;2===e.uint32_video_stream_type&&(this.mainFpsHealth=t)}if(e.uint32_video_codec_bitrate&&2===e.uint32_video_stream_type){let{localMainVideoTrack:t}=this.room;t&&(this.mainBitrateHealth=e.uint32_video_codec_bitrate/1e3/t.profile.bitrate)}})),this.log.debug("mainBitrateHealth: ".concat(this.mainBitrateHealth," mainFpsHealth: ").concat(this.mainFpsHealth)),this.mainBitrateHealth>.5&&(this.badMainBitrateHealthCount=0),this.mainFpsHealth>.9&&this.mainBitrateHealth<.5&&(this.badMainBitrateHealthCount++,this.badMainBitrateHealthCount>3&&(this.badMainBitrateHealthCount=0,this.lastEmitBadHealthTime=Date.now(),this.log.warn("bad main bitrate health: ".concat(this.mainBitrateHealth)),this.emit("1",{isAux:!1}))))}destroy(){UO.off("262",this.onVideoCodecChanged,this),this.room.off("heartbeat-report",this.onHeartbeatReport,this)}};jS($V,"EVENT_BAD_HEALTH","bad_health");var eG=$V;function tG(e){let{seiMessageList:t,isAudio:r,isMain:i}=e;return new TransformStream({transform(e,n){let o=e;r?audioEncodePipeline.forEach((e=>{o=e({frame:o})})):videoEncodePipeline.forEach((e=>{o=e({frame:o,seiMessageList:t,onDump:()=>{self.postMessage({type:"dump",isAudio:r,data:o.data,userId:"",streamType:i?"main":"auxiliary"})}})})),n.enqueue(o)}})}function rG(e,t,r){return new TransformStream({transform(i,n){let o=i;videoDecodePipeline.forEach((i=>{o=i({frame:o,onSEI:r=>{r.forEach((r=>{self.postMessage({type:"sei",seiPayloadType:r.seiPayloadType,data:r.seiPayload.buffer,userId:e,streamType:t})}))},onDump:()=>{self.postMessage({type:"dump",isAudio:r,data:o.data,userId:e,streamType:t})}})})),n.enqueue(o)}})}var iG=(e=>(e.TRACK="track",e.DATA_CHANNEL_MESSAGE="data_channel_msg",e[e.CONNECTION_STATE_CHANGED="connection-state-changed"]="CONNECTION_STATE_CHANGED",e[e.FIREWALL_RESTRICTION="firewall-restriction"]="FIREWALL_RESTRICTION",e.RECONNECTED="spc-reconnected",e.RECONNECT_FAILED="spc-reconnect-failed",e.ERROR="error",e.SEI_MESSAGE="sei-message",e.DUMP="dump",e))(iG||{}),nG=0,oG=!1,aG=new Set,sG=1,cG=class extends YV.default{constructor(e){let{signalChannel:t,room:r,enableCustomMessage:i}=e;super(),jS(this,"stat",{iceStartTime:0,iceEndTime:0,dtlsStartTime:0,dtlsEndTime:0,peerConnectionStartTime:0,peerConnectionEndTime:0}),jS(this,"currentState","DISCONNECTED"),jS(this,"_room"),jS(this,"_signalChannel"),jS(this,"_peerConnection",null),jS(this,"_datachannel",null),jS(this,"_enableCustomMessage"),jS(this,"_log"),jS(this,"_downlinkMIDMap",new Map),jS(this,"_downlinkMIDUserIDMap",new Map),jS(this,"_reconnectionTimer",-1),jS(this,"reconnectionCount",0),jS(this,"clientAbility"),jS(this,"_serverAbility",null),jS(this,"addDownlinkQueue",new Set),jS(this,"removeDownlinkQueue",new Set),jS(this,"_parsedAnswer",null),jS(this,"_updateSDPPromise",null),jS(this,"_waitForPCConnectedPromise"),jS(this,"clearConnectTimeout"),jS(this,"_isSDPLogged",!1),jS(this,"enableInsertableStreams",!1),jS(this,"insertableStreamsAbortMap",new Map),jS(this,"receiverRemoteTrackMap",new WeakMap),jS(this,"scriptTransformWorker"),jS(this,"_isRelayTried",!1),jS(this,"_rttOverCount",0),this._room=r,this._enableCustomMessage=i,this._signalChannel=t,this._log=jO.createLogger({id:"spc".concat(sG++),userId:this._room.userId,sdkAppId:this._room.sdkAppId}),this._room.enableCodecPipeline&&(jk?this.enableInsertableStreams=!0:this.initScriptTransformWorker()),this._room.healthDetector.on("1",this.onBadHealth,this)}get isH264EncodeSupported(){let e=this._room.checkSystemResult.detail.isH264EncodeSupported;return this._serverAbility&&(e=e&&!!this._serverAbility.video.codecs.find((e=>"h264"===e.codec.toLowerCase()))),e}addAbortController(e,t){var r;null==(r=this.insertableStreamsAbortMap.get(e))||r.abort("destory"),this.insertableStreamsAbortMap.set(e,t)}get isVP8EncodeSupported(){let e=this._room.checkSystemResult.detail.isVp8EncodeSupported;return this._serverAbility&&(e=e&&this._serverAbility.video.codecs.find((e=>"vp8"===e.codec.toLowerCase()))),e}get videoCodec(){var e,t;let r=null==(e=this._parsedAnswer)?void 0:e.media[1].rtp.find((e=>["h264","vp8"].includes(e.codec.toLowerCase())));return r?r.codec.toLowerCase():null!=(t=this._serverAbility)&&t.useVp8?"vp8":"h264"}get downlinkVideoCodec(){var e;return null!=(e=this._serverAbility)&&e.video.decoders.find((e=>"h264"===e.codec.toLowerCase()))?"h264":"vp8"}get isUsingH264(){return"h264"===this.videoCodec}get is42001fSupported(){return!!this.clientAbility&&!!this.clientAbility.video.codecs.find((e=>e.fmtp.includes("42001f")))}get uplinkSSRC(){return this._peerConnection&&this._peerConnection.localDescription?(e=>{let t=dV(e),r={audioSsrc:0,audioRtxSsrc:0,bigVideoSsrc:0,bigVideoRtxSsrc:0,smallVideoSsrc:0,smallVideoRtxSsrc:0,auxVideoSsrc:0,auxVideoRtxSsrc:0};return t.media.forEach(((e,t)=>{var i;if(e.ssrcs&&!AD(e.ssrcs[0].id)){let n=Number(e.ssrcs[0].id),o=Number(null==(i=e.ssrcs.filter((e=>"cname"===e.attribute))[1])?void 0:i.id);switch(t){case 0:r.audioSsrc=n;break;case 1:r.bigVideoSsrc=n,r.bigVideoRtxSsrc=o;break;case 2:r.smallVideoSsrc=n,r.smallVideoRtxSsrc=o;break;case 3:r.auxVideoSsrc=n,r.auxVideoRtxSsrc=o}}})),r})(this._peerConnection.localDescription.sdp):{audioSsrc:0,audioRtxSsrc:0,bigVideoSsrc:0,bigVideoRtxSsrc:0,smallVideoSsrc:0,smallVideoRtxSsrc:0,auxVideoSsrc:0,auxVideoRtxSsrc:0}}onBadHealth(e){let{isAux:t}=e;this.useHWEncoder(!1,t?7:2)}initScriptTransformWorker(){Hk&&(this.scriptTransformWorker=function(e){let t=[oN],r=[IF,mF,EF,fF,tG,rG],i="const videoEncodePipeline=[".concat(e.videoEncodePipeline.toString(),"];\n                    const videoDecodePipeline=[").concat(e.videoDecodePipeline.toString(),"];\n                    const audioEncodePipeline = [").concat(e.audioEncodePipeline.toString(),"];\n                    const audioDecodePipeline = [").concat(e.audioDecodePipeline.toString(),"];"),n="(()=>{".concat(t.map((e=>"const ".concat(e.name,"=(()=>").concat(e.toString(),")()"))).join("\n"),"\n").concat(r.map((e=>e.toString())).join("\n"),";(").concat((()=>{let e=[],t=[],r=[];self.onmessage=i=>{"sei"===i.data.type&&(i.data.isMain?(e.push(i.data.data),i.data.small&&r.push(i.data.data)):t.push(i.data.data))},self.onrtctransform=i=>{let{options:n}=i.transformer,o=n.isReceiver?rG(n.userId,n.streamType,n.isAudio):tG({isAudio:n.isAudio,seiMessageList:n.isMain?n.small?r:e:t,isMain:n.isMain});i.transformer.readable.pipeThrough(o).pipeTo(i.transformer.writable)}}),")();").concat(i,"})()"),o=new Blob([n],{type:"text/javascript"}),a=URL.createObjectURL(o),s=new Worker(a);return URL.revokeObjectURL(a),s}({videoEncodePipeline:this._room.videoManager.encodePipeline,videoDecodePipeline:this._room.videoManager.decodePipeline,audioEncodePipeline:this._room.audioManager.encodePipeline,audioDecodePipeline:this._room.audioManager.decodePipeline}),this.scriptTransformWorker.onmessage=e=>{"sei"===e.data.type&&this.emit("sei-message",e.data),"dump"===e.data.type&&this.emit("dump",e.data)},this.scriptTransformWorker.onerror=e=>{this._log.error("scriptTransformWorker error: ",e)})}get isReconnecting(){return"RECONNECTING"===this.currentState||this._reconnectionTimer>0||this.reconnectionCount>0}get dtlsTransport(){if(!this._peerConnection)return null;let e=this._peerConnection.getSenders();return 0===e.length?null:e[0].transport}initialize(){return YS(this,null,(function*(){var e;let t;try{return this._peerConnection=new RTCPeerConnection({encodedInsertableStreams:this.enableInsertableStreams,offerExtmapAllowMixed:!0,iceServers:this._room.getIceServers(),iceTransportPolicy:this._room.getIceTransportPolicy(),sdpSemantics:this._room.sdpSemantics,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",tcpCandidatePolicy:"disable",IceTransportsType:"nohost"}),this._peerConnection.oniceconnectionstatechange=()=>{if(!this._peerConnection)return;let e=this._peerConnection.iceConnectionState;this._log.debug("ice state: ".concat(e)),"checking"===e&&0===this.stat.iceStartTime?this.stat.iceStartTime=Date.now():"connected"===e&&0===this.stat.iceEndTime?(this.stat.iceEndTime=Date.now(),sk.addSuccessEvent({key:521711,cost:this.stat.iceEndTime-this.stat.iceStartTime})):"failed"===e&&sk.addFailedEvent({key:521711})},this._peerConnection.onsignalingstatechange=()=>{var e;let t=(null==(e=this._peerConnection)?void 0:e.signalingState)||"";this._log["closed"===t?"debug":"info"]("signaling state: ".concat(t))},this._peerConnection.onconnectionstatechange=this.onConnectionStateChange.bind(this),this._peerConnection.ontrack=e=>this.emit("track",e),this._enableCustomMessage&&(this._datachannel=this._peerConnection.createDataChannel("".concat(this._room.userId,"dc")),this._datachannel.binaryType="arraybuffer",this._datachannel.onopen=()=>{this._log.info("datachannel open")},this._datachannel.onclose=()=>{this._log.warn("datachannel close")},this._datachannel.onmessage=e=>{let t=new lG(e.data);this.emit("data_channel_msg",{data:t})},this._datachannel.onerror=e=>{this._log.warn("datachannel error",e)}),this._peerConnection.addTransceiver(Vb.AUDIO,{direction:Vb.TRANSCEIVER_DIRECTION_SENDONLY}),this._peerConnection.addTransceiver(Vb.VIDEO,{direction:Vb.TRANSCEIVER_DIRECTION_SENDONLY}),this._peerConnection.addTransceiver(Vb.VIDEO,{direction:Vb.TRANSCEIVER_DIRECTION_SENDONLY}),this._peerConnection.addTransceiver(Vb.VIDEO,{direction:Vb.TRANSCEIVER_DIRECTION_SENDONLY}),t=yield this._peerConnection.createOffer(),this.clientAbility=yield XV(t.sdp,(null==(e=this._room.scheduleResult.config)?void 0:e.remove264FromSDP)||!1),yield this.setOffer(t),this.dtlsTransport&&(this.dtlsTransport.onstatechange=()=>{let{dtlsTransport:e}=this;e&&(this._log.debug("dtls state: ".concat(e.state)),"connecting"===e.state&&0===this.stat.dtlsStartTime?this.stat.dtlsStartTime=Date.now():"connected"===e.state&&0===this.stat.dtlsEndTime&&(this.stat.dtlsEndTime=Date.now()))}),sk.addSuccessEvent({key:521707}),this.clientAbility}catch(e){throw sk.addFailedEvent({key:521707,error:e}),this._log.error("initialize failed ".concat(e," \noffer: ").concat(null==t?void 0:t.sdp)),e}}))}setPriority(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"high";if(this._peerConnection)try{this._peerConnection.getSenders().forEach((t=>{let r=t.getParameters();r.encodings[0]&&(r.encodings[0].priority=e,r.encodings[0].networkPriority=e,t.setParameters(r).catch((e=>{this._log.warn("setPriority error ",e)})))}))}catch(e){this._log.warn("setPriority error ",e)}}connect(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return YS(this,null,(function*(){var r,i;try{if("CONNECTED"===this.currentState)return;let n=yD(),o={type:"answer",sdp:KV({serverAbility:e,clientAbility:this.clientAbility,offerSDP:this._peerConnection.localDescription.sdp,enableCustomMessage:this._enableCustomMessage})};this._serverAbility=e,yield this.setAnswer(o),yield this.waitForPeerConnectionConnected();let a=(null==(r=this._room.scheduleResult.config)?void 0:r.priority)||(null==(i=this._room.joinParams)?void 0:i.priority)||new URLSearchParams(location.search).get("priority");a&&this.setPriority(a),t||sk.addSuccessEvent({key:521703,cost:yD()-n})}catch(t){let r=t instanceof ob&&t.code===ib.API_CALL_ABORTED;throw r||this._log.error("connect failed: ".concat(t),e),this.reset(),!r&&!this.isReconnecting&&(sk.addFailedEvent({key:521703,error:t}),this.emitConnectionStateChangedEvent("DISCONNECTED"),this.startReconnection()),t}}))}reconnect(){return YS(this,null,(function*(){if(-1===this._reconnectionTimer){if(!this._signalChannel.isConnected)return this._log.warn("reconnect() wait signal channel is connected"),void this._signalChannel.once(WF,this.reconnect,this);try{this.reconnectionCount++,this._log.warn("reconnect() trying [".concat(this.reconnectionCount,"]")),this.reset();let e=yield this.initialize(),t=yield this._signalChannel.sendWaitForResponse({command:"rebuild_pc",responseCommand:zF.REBUILD_PEER_CONNECTION_RES,data:{ability:e},enableLog:!1});if(0!==t.data.code)throw new ob({code:t.data.code,message:t.data.message});yield this.connect(t.data.data.ability,!0),sk.addSuccessEvent({key:521704}),this._log.warn("reconnect() success"),this.stopReconnection(),UO.emit(VO.SPC_RECONNECTED,{room:this._room}),this.emit("spc-reconnected")}catch(e){if(!this.isReconnecting)return;if(null!=e&&e.message.includes("timeout")){let e=aD(this.reconnectionCount);this._log.warn("reconnect() timeout, try again after ".concat(e/1e3,"s")),yield GD(e,(e=>{this._reconnectionTimer=e})),this.clearReconnectionTimer(),yield this.reconnect()}else this._log.error("reconnect() failed ".concat(null==e?void 0:e.code," ").concat(e)),sk.addFailedEvent({key:521704,error:e}),this.reconnectionCount>=gR()&&this._log.warn("SDK has tried reconnect for ".concat(gR()," times, but all failed, please check your network")),this.stopReconnection(),this.emitConnectionStateChangedEvent("DISCONNECTED"),this.emit("error")}}else this._log.warn("reconnect() is reconnecting, ignore current reconnection")}))}getPeerConnection(){return this._peerConnection}startReconnection(){return YS(this,null,(function*(){this.isReconnecting||(this._log.warn("start reconnect"),this._updateSDPPromise=null,this.emitConnectionStateChangedEvent("RECONNECTING"),yield this.reconnect())}))}stopReconnection(){var e;this.isReconnecting&&(this._log.info("stop reconnect"),this.reconnectionCount=0,this.clearReconnectionTimer(),null==(e=this.clearConnectTimeout)||e.call(this),this._signalChannel.off(WF,this.reconnect,this),"RECONNECTING"===this.currentState&&this.emitConnectionStateChangedEvent("DISCONNECTED"))}checkPeerConnectionToReconnect(){var e;!this.isReconnecting&&(null==(e=this._peerConnection)?void 0:e.connectionState)===uR.CLOSED&&this.startReconnection()}clearReconnectionTimer(){-1!==this._reconnectionTimer&&(clearTimeout(this._reconnectionTimer),this._reconnectionTimer=-1)}onConnectionStateChange(e){var t;let r=(null==(t=this._peerConnection)?void 0:t.iceConnectionState)||"closed",i=this.getDTLSTransportState();this._log.info("connectionState: ".concat(e.target.connectionState," ICE: ").concat(r," DTLS: ").concat(i)),e.target.connectionState===uR.CONNECTING&&(0===this.stat.peerConnectionStartTime&&(this.stat.peerConnectionStartTime=Date.now()),this.emitConnectionStateChangedEvent("CONNECTING")),(e.target.connectionState===uR.FAILED||e.target.connectionState===uR.CLOSED)&&(this.emitConnectionStateChangedEvent("DISCONNECTED"),this._room.forceRelay?this.switchRelay(!1):this.startReconnection()),(e.target.connectionState===uR.CONNECTED||e.target.connectionState===uR.COMPLETED)&&(0===this.stat.peerConnectionEndTime&&(this.stat.peerConnectionEndTime=Date.now()),UO.emit(VO.SINGLE_CONNECTION_STAT,{room:this._room,stat:{ice:this.stat.iceEndTime-this.stat.iceStartTime,dtls:this.stat.dtlsEndTime-this.stat.dtlsStartTime,peerConnection:this.stat.peerConnectionEndTime-this.stat.peerConnectionStartTime}}),this.logSelectedCandidate(),this.emitConnectionStateChangedEvent("CONNECTED"))}getDTLSTransportState(){if(!this._peerConnection)return lR;let e=null;return Qk()&&0!==this._peerConnection.getSenders().length?(e=this._peerConnection.getSenders()[0].transport,Ok()&&0!==this._peerConnection.getReceivers().length&&e?e.state:lR):lR}emitConnectionStateChangedEvent(e){e!==this.currentState&&("RECONNECTING"===this.currentState&&"CONNECTING"===e||(this.emit(iG.CONNECTION_STATE_CHANGED,{prevState:this.currentState,state:e}),this.currentState=e))}logSelectedCandidate(){return YS(this,null,(function*(){if(!this._peerConnection)return;let e=yield this._peerConnection.getStats();for(let[t,r]of e)if(vk(r)){let t=e.get(r.localCandidateId),i=e.get(r.remoteCandidateId);t&&(this._log.info("local candidate: ".concat(t.candidateType," ").concat(t.protocol,":").concat(t.ip||t.address,":").concat(t.port," ").concat(t.networkType||""," ").concat("relay"===t.candidateType?"relayProtocol:".concat(t.relayProtocol):"")),t.networkType&&KR(t.networkType)),i&&this._log.info("remote candidate: ".concat(i.candidateType," ").concat(i.protocol,":").concat(i.ip||i.address,":").concat(i.port));break}}))}waitForPeerConnectionConnected(){return this._waitForPCConnectedPromise||(this._waitForPCConnectedPromise=new Promise(((e,t)=>{if("CONNECTED"===this.currentState)return e();let r=t=>{"CONNECTED"===t.state&&(clearTimeout(o),n(),e())},i=e=>{let{room:r}=e;r===this._room&&(clearTimeout(o),n(),t(new ob({code:ib.API_CALL_ABORTED,message:qQ({key:JQ.CONNECTION_ABORTED,data:"leave room"})})))},n=()=>{UO.off(VO.LEAVE_SUCCESS,i,this),this.off(iG.CONNECTION_STATE_CHANGED,r,this)},o=setTimeout((()=>{n();let e=new ob({code:ib.API_CALL_TIMEOUT,message:"connection timeout"});var r;nG+=1,r=this._signalChannel.isConnected,nG>2&&!oG&&0===aG.size&&r&&(this._log.warn("firewall restriction"),oG=!0,this.emit(iG.FIREWALL_RESTRICTION)),t(e)}),DR);this.clearConnectTimeout=()=>{n(),clearTimeout(o),delete this.clearConnectTimeout},UO.on(VO.LEAVE_SUCCESS,i,this),this.on(iG.CONNECTION_STATE_CHANGED,r,this)})),this._waitForPCConnectedPromise=this._waitForPCConnectedPromise.finally((()=>{this._waitForPCConnectedPromise=null,delete this.clearConnectTimeout}))),this._waitForPCConnectedPromise}waitForReconnected(){return this.isReconnecting?new Promise(((e,t)=>{this.once("spc-reconnected",e),this.once("error",t)})):Promise.resolve()}addDownlink(e){return YS(this,null,(function*(){if(this._log.info("addDownlink(".concat(e.userId,") trying")),this.isReconnecting&&(yield this.waitForReconnected()),this._updateSDPPromise&&(yield this._updateSDPPromise),this.updateLocalAndRemoteSDPConfig(e),0===this.addDownlinkQueue.size)try{yield this.updateSDP(),this._log.info("addDownlink(".concat(e.userId,") done"))}catch(t){this._log.error("addDownlink(".concat(e.userId,") failed ").concat(t)),yield this.startReconnection()}}))}updateLocalAndRemoteSDPConfig(e){let{ssrc:t,userId:r,tinyId:i}=e;if(!this._peerConnection)return;this._log.info("updateLocalAndRemoteSDPConfig ".concat(r," ").concat(JSON.stringify(t)));let n=this._peerConnection.getTransceivers().slice(4).filter((e=>"inactive"===e.direction)).slice(0,3).map((e=>(e.direction=Vb.TRANSCEIVER_DIRECTION_RECVONLY,Number(e.mid))));this._parsedAnswer||(this._parsedAnswer=dV(this._peerConnection.remoteDescription.sdp));let o,a,s,c=this._parsedAnswer.media.filter((e=>{var t;return null==(t=e.ssrcs)?void 0:t.find((e=>{var t;return null==(t=e.value)?void 0:t.includes(i)}))}));if(3===c.length)o=c[0],a=c[1],s=c[2];else if(3===n.length)o=this._parsedAnswer.media.find((e=>Number(e.mid)===Number(n[0]))),a=this._parsedAnswer.media.find((e=>Number(e.mid)===Number(n[1]))),s=this._parsedAnswer.media.find((e=>Number(e.mid)===Number(n[2])));else if(0===n.length){this._peerConnection.addTransceiver(Vb.AUDIO,{direction:Vb.TRANSCEIVER_DIRECTION_RECVONLY}),this._peerConnection.addTransceiver(Vb.VIDEO,{direction:Vb.TRANSCEIVER_DIRECTION_RECVONLY}),this._peerConnection.addTransceiver(Vb.VIDEO,{direction:Vb.TRANSCEIVER_DIRECTION_RECVONLY}),o=JSON.parse(JSON.stringify(this._parsedAnswer.media[0]));let e=zV({mid:1,serverAbility:this._serverAbility,clientAbility:this.clientAbility,parsedOffer:dV(this._peerConnection.localDescription.sdp),isDownlink:!0});a=JSON.parse(JSON.stringify(e)),s=JSON.parse(JSON.stringify(e)),o.mid=this._parsedAnswer.media.length,this._parsedAnswer.media.push(o),a.mid=this._parsedAnswer.media.length,this._parsedAnswer.media.push(a),s.mid=this._parsedAnswer.media.length,this._parsedAnswer.media.push(s)}o.direction=Vb.TRANSCEIVER_DIRECTION_SENDONLY;let A="".concat(i,"-").concat(t.audio);o.ssrcs=[{id:t.audio,attribute:"cname",value:"".concat(A)},{id:t.audio,attribute:"msid",value:"".concat(A,"-").concat(Vb.MAIN," ").concat(A,"-audio")}],a.direction=Vb.TRANSCEIVER_DIRECTION_SENDONLY,a.ssrcs=[{id:t.video,attribute:"cname",value:"".concat(A)},{id:t.video,attribute:"msid",value:"".concat(A,"-").concat(Vb.MAIN," ").concat(A,"-bigvideo")},{id:t.videoRtx,attribute:"cname",value:"".concat(A)},{id:t.videoRtx,attribute:"msid",value:"".concat(A,"-").concat(Vb.MAIN," ").concat(A,"-bigvideo")}],a.ssrcGroups=[{semantics:"FID",ssrcs:"".concat(t.video," ").concat(t.videoRtx)}],s.direction=Vb.TRANSCEIVER_DIRECTION_SENDONLY;let l="".concat(A,"-aux");s.ssrcs=[{id:t.auxiliary,attribute:"cname",value:l},{id:t.auxiliary,attribute:"msid",value:"".concat(l," ").concat(A,"-aux").concat(Vb.VIDEO)},{id:t.auxiliaryRtx,attribute:"cname",value:"".concat(l," ").concat(A,"-aux").concat(Vb.VIDEO)},{id:t.auxiliaryRtx,attribute:"msid",value:"".concat(l," ").concat(A,"-aux").concat(Vb.VIDEO)}],s.ssrcGroups=[{semantics:"FID",ssrcs:"".concat(t.auxiliary," ").concat(t.auxiliaryRtx)}],this._parsedAnswer.groups&&(this._parsedAnswer.groups[0].mids=this._parsedAnswer.media.map((e=>e.mid)).join(" ")),this._downlinkMIDMap.set(r,[o.mid,a.mid,s.mid]),this._downlinkMIDUserIDMap.set(o.mid,r),this._downlinkMIDUserIDMap.set(a.mid,r),this._downlinkMIDUserIDMap.set(s.mid,r)}removeDownlink(e){return YS(this,null,(function*(){if(!this._downlinkMIDMap.has(e)||!this._peerConnection)return;this._log.info("removeDownlink(".concat(e,") trying")),this.isReconnecting&&(yield this.waitForReconnected()),this._updateSDPPromise&&(yield this._updateSDPPromise);let t=this._downlinkMIDMap.get(e),r=!1;this._peerConnection.getTransceivers().forEach((e=>{null!=t&&t.includes(Number(e.mid))&&(r=!0,e.direction="inactive")})),this._parsedAnswer||(this._parsedAnswer=dV(this._peerConnection.remoteDescription.sdp)),this._parsedAnswer.media.forEach((e=>{null!=t&&t.includes(Number(e.mid))&&(r=!0,e.direction="inactive",e.ssrcs=[],e.ssrcGroups=[])})),0===this.removeDownlinkQueue.size&&r&&(yield this.updateSDP()),this._downlinkMIDMap.delete(e),null==t||t.forEach((e=>this._downlinkMIDUserIDMap.delete(e))),this._log.info("removeDownlink(".concat(e,") done"))}))}setBandwidth(e){return YS(this,null,(function*(){if(!this._peerConnection)return;let{audio:t,bigVideo:r,smallVideo:i,auxVideo:n}=e;try{if(Uk()){let e=this._peerConnection.getSenders().slice(0,4);for(let o=0;o<e.length;o++){let a,s=e[o];0===o&&t?a=t:1===o&&r?a=r:2===o&&i?a=i:3===o&&n&&(a=n),a&&(yield this.setSenderMaxBitrate(s,a))}let o=!1;r&&e[1].track&&(o=this.setStartBitrate(1,r)),n&&e[3].track&&(o=this.setStartBitrate(3,n)||o),o&&(yield this.updateSDP())}else yield this.setBandwidthBySDP(e);this._log.info("setBandwidth ".concat(JSON.stringify(e)))}catch(e){this._log.error("failed to set bandwidth: ".concat(e))}}))}setStartBitrate(e,t){var r,i;return!(null==(r=this._peerConnection)||!r.remoteDescription||(this._parsedAnswer||(this._parsedAnswer=dV(this._peerConnection.remoteDescription.sdp)),null==(i=this._parsedAnswer.media[e])||!i.fmtp[0])||(this._parsedAnswer.media[e].fmtp[0].config+=";x-google-start-bitrate=".concat(t>5e3?5e3:t),0))}setSenderMaxBitrate(e,t){let r=e.getParameters();return(!r.encodings||0===r.encodings.length)&&(r.encodings=[{}]),"unlimited"===t?delete r.encodings[0].maxBitrate:r.encodings[0].maxBitrate=1e3*t,e.setParameters(r)}setBandwidthBySDP(e){let{audio:t,bigVideo:r,smallVideo:i,auxVideo:n}=e;if(!this._peerConnection||!this._peerConnection.localDescription)return;let o=dV(this._peerConnection.localDescription.sdp);this._parsedAnswer||(this._parsedAnswer=dV(this._peerConnection.remoteDescription.sdp));let a=gB?"TIAS":"AS";t&&(o.media[0].bandwidth=[{type:a,limit:gB?1e3*t:t}],this._parsedAnswer.media[0].bandwidth=[{type:a,limit:gB?1e3*t:t}]),r&&(o.media[1].bandwidth=[{type:a,limit:gB?1e3*r:r}],this._parsedAnswer.media[1].bandwidth=[{type:a,limit:gB?1e3*r:r}]),i&&(o.media[2].bandwidth=[{type:a,limit:gB?1e3*i:i}],this._parsedAnswer.media[2].bandwidth=[{type:a,limit:gB?1e3*i:i}]),n&&(o.media[3].bandwidth=[{type:a,limit:gB?1e3*n:n}],this._parsedAnswer.media[3].bandwidth=[{type:a,limit:gB?1e3*n:n}]);let s={type:"offer",sdp:hV(o)};return this.updateSDP({localDescription:s})}setScaleResolutionDownBy(e,t,r){let i=e.getParameters();(!i.encodings||0===i.encodings.length)&&(i.encodings=[{}]);let n=i.encodings[0].scaleResolutionDownBy;if(AD(n)?1===t:t===n)return;let o="setScaleResolutionDownBy ".concat(r," ").concat(t);return n&&(o+=" prevScale: ".concat(n)),this._log.warn(o),i.encodings[0].scaleResolutionDownBy=t,e.setParameters(i)}updateSDP(){let{localDescription:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._parsedAnswer)return Promise.resolve();let t=hV(this._parsedAnswer);return this._updateSDPPromise=new Promise(((r,i)=>YS(this,null,(function*(){var n,o;try{!e&&this._peerConnection&&(this._log.info("creating offer"),e=yield this._peerConnection.createOffer()),e&&(yield this.setOffer(e)),yield this.setAnswer({type:"answer",sdp:t}),this._updateSDPPromise=null,r()}catch(r){this._log.error(r),!this._isSDPLogged&&this._peerConnection&&(this._log.warn("current offer: ".concat(this.filterSDPDirection(null==(n=this._peerConnection.localDescription)?void 0:n.sdp)," \nnext offer: ").concat(this.filterSDPDirection(null==e?void 0:e.sdp))),this._log.warn("current answer: ".concat(this.filterSDPDirection(null==(o=this._peerConnection.remoteDescription)?void 0:o.sdp)," \nnext answer: ").concat(this.filterSDPDirection(t))),this._log.warn("offer: ".concat(null==e?void 0:e.sdp)),this._log.warn("answer: ".concat(t)),this._log.warn("transceivers: ".concat(JSON.stringify(this._peerConnection.getTransceivers().map((e=>{let{mid:t,currentDirection:r,direction:i,stopped:n}=e;return{mid:t,currentDirection:r,direction:i,stopped:n}}))))),this._log.warn("parsedAnswer: ".concat(JSON.stringify(this._parsedAnswer))),this._isSDPLogged=!0),this._updateSDPPromise=null,i(r)}})))),this._updateSDPPromise}setTransceiverDirection(e,t){return YS(this,null,(function*(){if(!gB||!this._peerConnection||!this._parsedAnswer)return;this._log.info("setting transceiver ".concat(t.join(",")," direction to ").concat(e));let r=this._peerConnection.getTransceivers();t.forEach((t=>{r[t].direction!==e&&(r[t].direction=e)}));for(let r of t){let t=this._parsedAnswer.media[r].direction;e===Gb.INACTIVE&&t===Gb.RECVONLY&&(this._parsedAnswer.media[r].direction=e),e===Gb.SENDONLY&&t===Gb.INACTIVE&&(this._parsedAnswer.media[r].direction=Gb.RECVONLY)}yield this.updateSDP()}))}filterSDPDirection(){return dV(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").media.map((e=>e.direction))}setOffer(e){this._log.info("setting offer");let t=((e,t,r)=>{let i=WV.default.parse(e);return i.media.forEach(((e,n)=>{var o;if((e.type===Vb.AUDIO||e.type===Vb.VIDEO)&&(function(e){if(!e.rtcpFb)return;let t=[];e.rtcpFb.forEach(((r,i)=>{var n;t.push(r),e.rtcpFb&&(null==(n=e.rtcpFb[i+1])?void 0:n.payload)!==r.payload&&"rrtr"!==r.type&&t.push({payload:r.payload,type:"rrtr"})})),e.rtcpFb=t}(e),function(e){e.type===Vb.VIDEO&&e.fmtp&&e.fmtp.forEach((e=>{e.config.includes("apt")||(e.config+=";sps-pps-idr-in-keyframe=1")}))}(e),function(e){e.type===Vb.AUDIO&&e.fmtp&&e.fmtp.forEach((e=>{e.config+=";sprop-stereo=1;stereo=1"}))}(e),function(e){let t=new Set(["urn:ietf:params:rtp-hdrext:sdes:mid","urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id","urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id"]);e.ext&&(e.ext=e.ext.filter((e=>!t.has(e.uri))))}(e),e.type===Vb.VIDEO))if(n<4)e.payloads="",e.fmtp=[],e.rtp=[],e.rtcpFb=[],t.video.codecs.forEach((t=>qV(e,t)));else if(r){e.payloads="",e.fmtp=[],e.rtp=[],e.rtcpFb=[];let i=r.video.decoders;(!i||0===i.length)&&(i=r.video.codecs),(!i||0===i.length)&&(i=t.video.decoders),i.forEach((t=>qV(e,t)))}null!=(o=e.payloads)&&o.includes("datachannel")&&i.groups&&e.mid&&(i.groups[0].mids=i.groups[0].mids.replace(e.mid,"dc"),e.mid="dc")})),WV.default.write(i)})(e.sdp,this.clientAbility,this._serverAbility);return this._log.debug(t),this._peerConnection.setLocalDescription({type:"offer",sdp:t})}setAnswer(e){return this._log.info("setting answer"),this._log.debug(e.sdp),this._peerConnection.setRemoteDescription(e)}switchVideoEncoder(e){return YS(this,null,(function*(){if(!this._peerConnection||!this._parsedAnswer||!this._serverAbility)return;let t=!1;this._parsedAnswer.media.forEach((r=>{var i;if(r.type===Vb.VIDEO){let n=this._serverAbility.video.codecs.find((t=>t.codec.toLowerCase()===e));n&&(null==(i=r.payloads)||!i.includes(String(n.payload)))&&(r.fmtp=[],r.payloads="",r.rtp=[],r.rtcpFb=[],qV(r,n),t=!0)}})),t&&(this._log.warn("switch video encoder to ".concat(e)),yield this.updateSDP())}))}useHWEncoder(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return YS(this,null,(function*(){if(!this._peerConnection||!this._parsedAnswer||!this._serverAbility)return;let r=!1,i=[];AD(t)?i=this._parsedAnswer.media.slice(1,4):2===t?i.push(this._parsedAnswer.media[1]):3===t?i.push(this._parsedAnswer.media[2]):7===t&&i.push(this._parsedAnswer.media[3]),i.forEach((t=>{var i;if(t.type===Vb.VIDEO){let n;e&&this.is42001fSupported?n=this.clientAbility.video.codecs.find((e=>e.fmtp.includes("42001f"))):e||(n=this._serverAbility.video.codecs.find((e=>e.codec.toLowerCase()===(this._serverAbility.useVp8?"vp8":"h264")))),n&&(null==(i=t.payloads)||!i.includes(String(n.payload)))&&(t.fmtp=[],t.payloads="",t.rtp=[],t.rtcpFb=[],qV(t,n),r=!0)}})),r&&(this._log.warn("use ".concat(e?"hw":"sw"," encoder")),yield this.updateSDP())}))}sendDataChannelMessage(e){var t;null==(t=this._datachannel)||t.send(e)}reset(){this._peerConnection&&(this._peerConnection.close(),this._peerConnection.removeEventListener("track",this._peerConnection._onaddstreampoly,this),this._peerConnection._onaddstreampoly=null,this._peerConnection=null),this._waitForPCConnectedPromise=null,this._parsedAnswer=null}close(){this._log.info("close pc"),this.removeRTCListener(),this.insertableStreamsAbortMap.forEach((e=>JD(e.abort)&&e.abort("destroy"))),this.insertableStreamsAbortMap.clear(),this.reset(),this.emitConnectionStateChangedEvent("DISCONNECTED"),this._downlinkMIDMap.clear(),this.stopReconnection(),this.removeAllListeners(),this._room.healthDetector.off("1",this.onBadHealth,this)}getReceiversByUserId(e){if(!this._peerConnection)return[];let t=this._peerConnection.getReceivers();return(this._downlinkMIDMap.get(e)||[]).map((e=>t[e]))}get isUsingRelay(){return"relay"===this._room.getIceTransportPolicy()}detectTCPAndUDP(e){let{uplinkRTT:t,downlinkRTT:r}=e;var i;if("CONNECTED"!==this.currentState||this._isRelayTried&&!this._room.forceRelay||0===this._room.getIceServers().length)return;let n=this._signalChannel.rtt,o=Math.max(t,r),{rttRatioThreshold:a,rttThreshold:s}=(null==(i=this._room.scheduleResult.config)?void 0:i.useTurnTcpInfo)||{};if(!(a&&s&&n&&o))return;let c=Math.floor(o/n),A=(this._isRelayTried||c>a)&&o>s;A?++this._rttOverCount<5||(this._log.warn("detectTCPAndUDP ws-rtt: ".concat(n," upRTT: ").concat(t," downRTT: ").concat(r," ratio: ").concat(c," over-count: ").concat(this._rttOverCount," isOver: ").concat(A," isRelayTried: ").concat(this._isRelayTried," force-relay: ").concat(this._room.forceRelay)),this.isUsingRelay||this._isRelayTried?this._room.forceRelay&&this.switchRelay(!1):(this._isRelayTried=!0,this._rttOverCount=0,this.switchRelay(!0))):this._rttOverCount=0}switchRelay(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return YS(this,null,(function*(){if(this.isUsingRelay===e)return;let r=e?"relay":"udp",i=e?521709:521710;try{this._room.forceRelay=e,this._log.warn("switchRelay ".concat(r));let t=Date.now();yield this.doSwitchRelay(r),this._log.warn("switchRelay ".concat(r," success")),sk.addSuccessEvent({key:i,cost:Date.now()-t})}catch(n){this._log.warn("switchRelay ".concat(r," failed"),n),sk.addFailedEvent({key:i,error:n}),t?this._room.reJoin():yield this.switchRelay(!e,!0)}}))}doSwitchRelay(e){return new Promise(((t,r)=>{let i=setTimeout((()=>{this.stopReconnection(),r(new Error("switch ".concat(e," timeout")))}),1e4);this.startReconnection().then(t,r).finally((()=>clearTimeout(i)))}))}removeRTCListener(){this._peerConnection&&(this._peerConnection.oniceconnectionstatechange=null,this._peerConnection.onconnectionstatechange=null,this._peerConnection.onsignalingstatechange=null,this._peerConnection.ontrack=null),this.dtlsTransport&&(this.dtlsTransport.onstatechange=null)}};GS([ZP("reconnect")],cG.prototype,"startReconnection",1),GS([$P((e=>e.userId))],cG.prototype,"addDownlink",1),GS([$P((e=>e))],cG.prototype,"removeDownlink",1),GS([qP(!0)],cG.prototype,"updateSDP",1),GS([eN(521712,!1)],cG.prototype,"setOffer",1),GS([eN(521713,!1)],cG.prototype,"setAnswer",1);var AG=class{constructor(e){jS(this,"tag"),jS(this,"len"),jS(this,"data");let t=new DataView(e);this.tag=t.getUint16(),this.len=t.getUint16(2),this.data=new Uint8Array(e).slice(4,4+this.len).buffer}},lG=class{constructor(e){jS(this,"tinyId"),jS(this,"data");let t=new DataView(e),r=0,i=[];for(;r<t.byteLength;){let n=t.getUint16(r+2),o=new AG(new Uint8Array(e).slice(r,r+2+2+n).buffer);i.push(o),r+=4+n}i.forEach((e=>{1===e.tag?this.tinyId=(new TextDecoder).decode(e.data):2===e.tag&&(this.data=e.data)}))}},uG=new Set;function dG(){let e=Math.floor(4294967296*Math.random());return uG.has(e)?dG():(uG.add(e),e)}var hG=VS(WS()),gG=class extends hG.default{constructor(e){super(),jS(this,"userId"),jS(this,"tinyId"),jS(this,"_sdpSemantics"),jS(this,"_isUplink"),jS(this,"_room"),jS(this,"_log"),jS(this,"_currentState","DISCONNECTED"),jS(this,"_prevTime",-1),this.userId=e.userId,this.tinyId=e.tinyId,this._room=e.room,this._sdpSemantics=e.room.sdpSemantics,this._isUplink=e.isUplink,this._log=jO.createLogger({id:"n",userId:this._room.userId,remoteUserId:this._isUplink?void 0:this.userId,sdkAppId:this._room.sdkAppId,isLocal:this._isUplink})}get _peerConnection(){var e;return(null==(e=this.singlePC)?void 0:e.getPeerConnection())||null}get singlePC(){return this._room.singlePC}get _signalChannel(){return this._room.signalChannel}close(e){this._log.info("close connection"),this.emit("closed",e)}emitConnectionStateChangedEvent(e){return e!==this._currentState&&(UO.emit(VO.PEER_CONNECTION_STATE_CHANGED,{room:this._room,prevState:this._currentState,state:e,remoteUserId:this._isUplink?void 0:this.userId}),this.emit("connection-state-changed",{prevState:this._currentState,state:e}),this._currentState=e,!0)}getPeerConnection(){return this._peerConnection}getRoom(){return this._room}getUserId(){return this.userId}getTinyId(){return this.tinyId}getCurrentState(){return this._currentState}get isH264(){var e,t;return!(null==(t=null==(e=this._peerConnection)?void 0:e.remoteDescription)||!t.sdp.includes("H264"))}},pG=class extends gG{constructor(e){super(xS(LS({},e),{isUplink:!0})),jS(this,"localMainAudioTrack",null),jS(this,"localMainVideoTrack",null),jS(this,"localAuxAudioTrack",null),jS(this,"localAuxVideoTrack",null),jS(this,"_isPublishingAux",!1),jS(this,"_publishingLocalAudioTrack"),jS(this,"_publishingLocalVideoTrack"),jS(this,"_mediaSettings",{videoCodec:"",videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioCodec:"opus",audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0,auxVideoWidth:0,auxVideoHeight:0,auxVideoFps:0,auxVideoBps:0}),jS(this,"_flag",0),jS(this,"_checkPublishStateTimeoutId",-1),this.initialize()}get videoCodec(){var e;return(null==(e=this.singlePC)?void 0:e.videoCodec)||"h264"}get ssrc(){if(!this.singlePC)return{audio:0,video:0,videoRtx:0,small:0,smallRtx:0,auxiliary:0,auxiliaryRtx:0};let{audioSsrc:e,bigVideoSsrc:t,bigVideoRtxSsrc:r,smallVideoSsrc:i,smallVideoRtxSsrc:n,auxVideoSsrc:o,auxVideoRtxSsrc:a}=this.singlePC.uplinkSSRC;return{audio:e||0,video:t||0,videoRtx:r||0,small:i||0,smallRtx:n||0,auxiliary:o||0,auxiliaryRtx:a||0}}get flag(){return this._flag}set flag(e){this._flag!==e&&(this._flag=e,this.checkPublishState())}checkPublishState(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&this._checkPublishStateTimeoutId>0)return;let{publishState:t,serverPublishState:r}=this,i=Object.keys(t).find((e=>t[e]!==r[e]));if(i){if(!e)return void(this._checkPublishStateTimeoutId=mM.run("timeout",(()=>this.checkPublishState(!0)),{delay:1e4,count:1}));this._log.warn("publish state not matched, ".concat(i," local:").concat(t[i]," server:").concat(r[i]," ").concat(PO()," ").concat(OO())),sk.addCount({key:521e3})}mM.clearTask(this._checkPublishStateTimeoutId),this._checkPublishStateTimeoutId=-1}get isMainStreamPublished(){return!(!this.localMainAudioTrack&&!this.localMainVideoTrack)}get isAuxStreamPublished(){return!(!this.localAuxVideoTrack&&!this.localAuxAudioTrack)}get publishState(){var e,t,r,i;let n={audio:!1,bigVideo:!1,smallVideo:!1,auxVideo:!1};if(this._peerConnection){let o=this._peerConnection.getSenders();o&&(kk()?(n.audio=!(null==(e=o[0])||!e.track),n.bigVideo=!(null==(t=o[1])||!t.track),n.smallVideo=!(null==(r=o[2])||!r.track),n.auxVideo=!(null==(i=o[3])||!i.track)):o.forEach((e=>{e.track&&(e.track.kind===Vb.AUDIO?n.audio=!0:(n.bigVideo=!0,this._room.videoManager.hasSmall&&(n.smallVideo=!0)))})))}return n}get publishingState(){let{publishState:e}=this,t=LS({},e);return this._publishingLocalAudioTrack&&(t.audio=!0),this._publishingLocalVideoTrack&&(this._isPublishingAux?t.auxVideo=!0:(t.bigVideo=!0,this._publishingLocalVideoTrack.small&&(t.smallVideo=!0))),t}get serverPublishState(){return{audio:!!(this.flag&Xb),bigVideo:!!(this.flag&Yb),smallVideo:!!(this.flag&Wb),auxVideo:!!(this.flag&Jb)}}get muteState(){var e,t,r;return{audio:!(null==(e=this.localMainAudioTrack)||!e.muted),bigVideo:!(null==(t=this.localMainVideoTrack)||!t.muted),auxVideo:!(null==(r=this.localAuxVideoTrack)||!r.muted)}}initialize(){this.installEvents()}close(e){var t;let r=(null==(t=this._peerConnection)?void 0:t.getSenders())||[];for(let e of r)e.replaceTrack(null);super.close(e),this.uninstallEvents(),this.uninstallTrackMuteEvents(this.localMainAudioTrack,this.localMainVideoTrack,this.localAuxVideoTrack),this.emitConnectionStateChangedEvent("DISCONNECTED")}installEvents(){this.listeners("connection-state-changed").includes(this.handleConnectionStateChange)||this.on("connection-state-changed",this.handleConnectionStateChange,this),this.installSPCEvents()}installSPCEvents(){var e,t;null!=(e=this.singlePC)&&e.listeners("spc-reconnected").includes(this.onSinglePCReconnected)||null==(t=this.singlePC)||t.on("spc-reconnected",this.onSinglePCReconnected,this)}uninstallSPCEvents(){var e;null==(e=this.singlePC)||e.off("spc-reconnected",this.onSinglePCReconnected,this)}uninstallEvents(){this.off("connection-state-changed",this.handleConnectionStateChange,this),this.uninstallSPCEvents()}emitConnectionStateChangedEvent(e,t){var r,i,n;let o=this._currentState,a=super.emitConnectionStateChangedEvent(e);return a&&o!==e&&(t?t.emit("connection-state-changed",{prevState:o,state:e}):(null==(r=this.localMainVideoTrack)||r.emit("connection-state-changed",{prevState:o,state:e}),null==(i=this.localAuxVideoTrack)||i.emit("connection-state-changed",{prevState:o,state:e}),null==(n=this._publishingLocalVideoTrack)||n.emit("connection-state-changed",{prevState:o,state:e}))),a}onVideoEncodeFailed(e){var t,r;e&&e.isMediaTrackActive&&"h264"===this.videoCodec&&(this._log.warn("h264 encoder not working"),null!=(t=this.singlePC)&&t.isVP8EncodeSupported&&(this._log.warn("switch to vp8"),null==(r=this.singlePC)||r.switchVideoEncoder("vp8")))}publish(e){return YS(this,arguments,(function(e){var t=this;let{localAudioTrack:r,localVideoTrack:i,isAuxiliary:n}=e;return function*(){var e,o,a,s,c,A,l;if(!t.singlePC)return;t.installEvents(),yield t.singlePC.waitForPeerConnectionConnected();let u,{publishState:d,muteState:h}=t;if(r&&(t._publishingLocalAudioTrack=r,d.audio=!0,h.audio=r.muted),i){if(!t.singlePC.isH264EncodeSupported&&!t.singlePC.isVP8EncodeSupported)throw new ob({code:ib.NOT_SUPPORTED_H264,message:qQ({key:JQ.NOT_SUPPORTED_H264ENCODE})});lB&&115===AO()&&i.profile.width*i.profile.height<=230400&&(t._log.warn("fallback video to 480p"),i.setProfile(Ub["480p_2"]),yield i.applyProfile()),t._publishingLocalVideoTrack=i,n?(d.auxVideo=!0,h.auxVideo=i.muted):(d.bigVideo=!0,h.bigVideo=i.muted)}if(t._isPublishingAux=n,i&&!n&&i.small&&(u=t._room.videoManager.smallTrack,d.smallVideo=!0),yield t._signalChannel.sendWaitForResponseWithRetry({command:"publish/v2",responseCommand:zF.SPC_PUBLISH_RESULT,data:xS(LS({},t.singlePC.uplinkSSRC),{state:d,muteState:h}),retries:3}),yield t.publishByTransceiver({localAudioTrack:r,localVideoTrack:i,smallTrack:u,isAuxiliary:n}),t._publishingLocalAudioTrack=null,t._publishingLocalVideoTrack=null,t._isPublishingAux=!1,i){t[n?"localAuxVideoTrack":"localMainVideoTrack"]=i;let{scaleResolutionDownBy:e}=i;yield t.singlePC.setScaleResolutionDownBy(t._peerConnection.getSenders()[n?3:1],e,i.streamType)}r&&(t[n?"localAuxAudioTrack":"localMainAudioTrack"]=r),yield t.singlePC.setBandwidth({audio:(null==(e=t.localMainAudioTrack)?void 0:e.profile.bitrate)||(null==(o=t.localAuxAudioTrack)?void 0:o.profile.bitrate),bigVideo:null==(a=t.localMainVideoTrack)?void 0:a.profile.bitrate,smallVideo:null==(c=null==(s=t.localMainVideoTrack)?void 0:s.small)?void 0:c.bitrate,auxVideo:null==(A=t.localAuxVideoTrack)?void 0:A.profile.bitrate}),t.sendMediaSettings(),t.installTrackMuteEvents(r,i),(t._room.preferHW||null!=(l=t._room.scheduleResult.config)&&l.preferHW)&&i&&i.profile.width*i.profile.height>=921600&&t.singlePC.useHWEncoder(!0,n?7:2)}()}))}publishByTransceiver(e){let{localAudioTrack:t,localVideoTrack:r,smallTrack:i,isAuxiliary:n}=e;if(!Mk())return;this._log.info("publish by transceiver");let o=null==r?void 0:r.outMediaTrack,a=null==t?void 0:t.outMediaTrack,s=this._peerConnection.getTransceivers(),c=[],A=[],l=(e,t,r)=>{var i,n;let o=s[t].sender.replaceTrack(r);A.push(t),null!=(i=this.singlePC)&&i.enableInsertableStreams&&o.then((()=>this.createEncodedStreams(s[t].sender,e))),null!=(n=this.singlePC)&&n.scriptTransformWorker&&this.initSenderTransfrom(s[t].sender,e),c.push(o)};a&&l(t.mediaType,0,a),o&&l(r.mediaType,n?3:1,o),i&&l(8,2,i);let u=this.singlePC.setTransceiverDirection(Gb.SENDONLY,A);return c.push(u),Promise.all(c)}getTrackByMediaType(e){switch(e){case 1:return this.localMainAudioTrack||this._publishingLocalAudioTrack;case 4:case 8:return this.localMainVideoTrack||this._publishingLocalVideoTrack;case 2:return this.localAuxVideoTrack||this._publishingLocalVideoTrack;default:return null}}createEncodedStreams(e,t){var r,i;if(this.singlePC.insertableStreamsAbortMap.has(e))return;let n=e.createEncodedStreams(),o=new AbortController;null==(r=this.singlePC)||r.addAbortController(e,o),(null!=(i=this.getTrackByMediaType(t))&&i.enableEncodeFrame?n.readable.pipeThrough(new TransformStream({transform:(e,r)=>{var i;let n=this.getTrackByMediaType(t);r.enqueue(null!=(i=this.singlePC)&&i.isUsingH264&&n?n.encodeFrame(e,8===t):e)}}),o):n.readable).pipeTo(n.writable,o).catch((e=>{this._log.debug("encoded stream error",e),"destory"!==e&&this._log.warn(e)}))}initSenderTransfrom(e,t){if(!this._peerConnection||!this.singlePC||!this.singlePC.scriptTransformWorker)return;let r=2!==t,i=8===t;e.transform||(e.transform=new RTCRtpScriptTransform(this.singlePC.scriptTransformWorker,{isReceiver:!1,isAudio:1===t,isMain:r,isSmall:i}))}enableSmall(e){return YS(this,null,(function*(){var t;if(!this.singlePC)return;let r=this._peerConnection.getTransceivers();if(e){if(this._room.videoManager.smallTrack){let{sender:e}=r[2];null!=(t=this.singlePC)&&t.enableInsertableStreams&&this.createEncodedStreams(e,8),yield e.replaceTrack(this._room.videoManager.smallTrack),yield this.singlePC.setTransceiverDirection(Gb.SENDONLY,[2])}}else yield r[2].sender.replaceTrack(null),yield this.singlePC.setTransceiverDirection(Gb.INACTIVE,[2]);this.updateMediaSettings(),yield this.doPublishChange()}))}installTrackMuteEvents(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{e&&(null==e||e.on("mute",this.sendMutedFlag,this),null==e||e.on("unmute",this.sendMutedFlag,this))}))}uninstallTrackMuteEvents(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{e&&(null==e||e.off("mute",this.sendMutedFlag,this),null==e||e.off("unmute",this.sendMutedFlag,this))}))}unpublish(e){return YS(this,arguments,(function(e){var t=this;let{localAudioTrack:r,localVideoTrack:i}=e;return function*(){let e=i&&i===t.localAuxVideoTrack,n=null==i?void 0:i.outMediaTrack,o=t._peerConnection.getSenders(),a=[];r&&(e?t.localAuxAudioTrack=null:t.localMainAudioTrack=null,!t.localMainAudioTrack&&!t.localAuxAudioTrack&&(yield o[0].replaceTrack(null),a.push(0))),n&&(e?(yield o[3].replaceTrack(null),t.localAuxVideoTrack=null,t._mediaSettings=xS(LS({},t._mediaSettings),{auxVideoBps:0,auxVideoFps:0,auxVideoWidth:0,auxVideoHeight:0}),a.push(3)):(yield o[1].replaceTrack(null),yield o[2].replaceTrack(null),t.localMainVideoTrack=null,t._mediaSettings=xS(LS({},t._mediaSettings),{videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0}),a.push(1,2))),t.isMainStreamPublished||t.isAuxStreamPublished?(yield t.singlePC.setTransceiverDirection(Gb.INACTIVE,a),yield t.doPublishChange(!1)):yield t.doUnpublish(),t.uninstallTrackMuteEvents(r,i),null==i||i.emit("connection-state-changed",{prevState:t._currentState,state:"DISCONNECTED"})}()}))}doPublishChange(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return YS(this,null,(function*(){let t={state:this.publishingState,constraintConfig:this._mediaSettings},r=yield this._signalChannel.sendWaitForResponseWithRetry({command:ZF,data:t,responseCommand:zF.PUBLISH_STATE_CHANGE_RESULT,enableLog:e,retries:3});this.checkPublishResultCode(r.data.code,r.data.message)}))}doUnpublish(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._signalChannel.sendWaitForResponse({command:$F,commandDesc:"unpublish",responseCommand:zF.UNPUBLISH_RESULT,enableLog:e}).catch((e=>{if(e.getCode()===ib.API_CALL_TIMEOUT)return Promise.resolve();throw e}))}updateMediaSettings(){let{detail:{isH264EncodeSupported:e,isVp8EncodeSupported:t}}=this._room.checkSystemResult;e?this._mediaSettings.videoCodec="H264":t&&(this._mediaSettings.videoCodec="VP8");let r=this._publishingLocalAudioTrack||this.localMainAudioTrack||this.localAuxAudioTrack,{localMainVideoTrack:i,localAuxVideoTrack:n}=this;if(this._publishingLocalVideoTrack&&(this._isPublishingAux?n=this._publishingLocalVideoTrack:i=this._publishingLocalVideoTrack),Vk){if(r&&r.outMediaTrack){let e=r.outMediaTrack.getSettings();this._mediaSettings.audioChannel=e.channelCount||1,this._mediaSettings.audioBps=1e3*r.profile.bitrate,this._mediaSettings.audioFs=e.sampleRate||0}if(i&&i.outMediaTrack){let e=i.outMediaTrack.getSettings();this._mediaSettings.videoWidth=e.width||0,this._mediaSettings.videoHeight=e.height||0,this._mediaSettings.videoFps=e.frameRate||0,this._mediaSettings.videoBps=1e3*i.profile.bitrate,i.small&&(this._mediaSettings.smallVideoWidth=i.small.width,this._mediaSettings.smallVideoHeight=i.small.height,this._mediaSettings.smallVideoFps=i.small.frameRate,this._mediaSettings.smallVideoBps=1e3*i.small.bitrate)}if(n&&n.outMediaTrack){let e=n.outMediaTrack.getSettings();this._mediaSettings.auxVideoWidth=e.width||0,this._mediaSettings.auxVideoHeight=e.height||0,this._mediaSettings.auxVideoFps=e.frameRate||0,this._mediaSettings.auxVideoBps=1e3*n.profile.bitrate}}else r&&r.outMediaTrack&&(this._mediaSettings.audioChannel=r.profile.channelCount,this._mediaSettings.audioBps=1e3*r.profile.bitrate,this._mediaSettings.audioFs=r.profile.sampleRate),i&&i.outMediaTrack&&(this._mediaSettings.videoWidth=i.profile.width,this._mediaSettings.videoHeight=i.profile.height,this._mediaSettings.videoFps=i.profile.frameRate,this._mediaSettings.videoBps=1e3*i.profile.bitrate);this._log.info("updateMediaSettings: ".concat(JSON.stringify(this._mediaSettings)))}sendMediaSettings(){this.updateMediaSettings(),this._signalChannel.sendWaitForResponse({command:rV,data:this._mediaSettings,responseCommand:zF.UPDATE_CONSTRAINT_CONFIG_RES}).then((e=>{0!==e.data.code&&this._log.warn(e.data.message)})).catch((()=>{}))}addTrack(e){return YS(this,null,(function*(){if(!this._peerConnection)return;let t=e===this.localAuxAudioTrack||e===this.localAuxVideoTrack;this._log.info("is adding ".concat(e.kind," track to current published local ").concat(t?Vb.AUXILIARY:Vb.MAIN," stream")),kk()&&(yield this.addTrackByTransceiver(e,t))}))}addTrackByTransceiver(e,t){return YS(this,null,(function*(){var r;if(!e.mediaTrack)return;let i=this._peerConnection.getTransceivers();if(e.kind===Vb.AUDIO)yield i[0].sender.replaceTrack(e.outMediaTrack);else{let n=t?3:1;yield i[n].sender.replaceTrack(e.outMediaTrack),1===n&&null!=(r=this.localMainVideoTrack)&&r.small&&(yield i[2].sender.replaceTrack(this._room.videoManager.smallTrack)),i[n].direction===Gb.INACTIVE&&(yield this.singlePC.setTransceiverDirection(Gb.SENDONLY,[n]))}this.updateMediaSettings(),yield this.doPublishChange()}))}removeTrack(e){return YS(this,null,(function*(){if(!this._peerConnection)return;let t=e===this.localAuxAudioTrack||e===this.localAuxVideoTrack;this._log.info("is removing ".concat(e.kind," track from current published local ").concat(t?Vb.AUXILIARY:Vb.MAIN," stream")),kk()&&(yield this.removeTrackByTransceiver(e,t))}))}removeTrackByTransceiver(e,t){return YS(this,null,(function*(){if(!e.mediaTrack)return;let r=this._peerConnection.getTransceivers();if(e.kind===Vb.AUDIO)yield r[0].sender.replaceTrack(null);else{let e=t?3:1;yield r[e].sender.replaceTrack(null),1===e&&this._room.videoManager.hasSmall&&(yield r[2].sender.replaceTrack(null)),yield this.singlePC.setTransceiverDirection(Gb.INACTIVE,[e])}this.updateMediaSettings(),yield this.doPublishChange()}))}replaceTrack(e){return YS(this,null,(function*(){var t;let r=null==(t=this._peerConnection)?void 0:t.getSenders(),i=e.outMediaTrack||e.mediaTrack;if(!r||0===r.length||!i||r.find((e=>e.track===i)))return!1;let n=e===this.localAuxAudioTrack||e===this.localAuxVideoTrack;return this._log.info("is replacing ".concat(i.kind," track ").concat(i.id," ").concat(i.label," on ").concat(n?Vb.AUXILIARY:Vb.MAIN," stream")),i.kind===Vb.AUDIO&&r[0]&&(yield r[0].replaceTrack(i)),i.kind===Vb.VIDEO&&(!n&&r[1]&&(yield r[1].replaceTrack(i)),n&&r[3]&&(yield r[3].replaceTrack(i))),!0}))}setBandwidth(e){return YS(this,arguments,(function(e){var t=this;let{bandwidth:r,type:i,videoType:n}=e;return function*(){if(t.singlePC){let e={};i===Vb.AUDIO?e.audio=r:"big"===n?e.bigVideo=r:"small"===n?e.smallVideo=r:e.auxVideo=r,yield t.singlePC.setBandwidth(e)}}()}))}sendMutedFlag(e){e===this.localAuxAudioTrack||e===this.localAuxVideoTrack||(this._log.info("send muted state: ".concat(JSON.stringify(this.muteState))),this._signalChannel.sendWaitForResponseWithRetry({command:qF,responseCommand:zF.MUTE_RESULT,data:this.muteState,retries:3}).catch((()=>{})))}handleConnectionStateChange(e){"CONNECTED"===e.state&&(this.localMainVideoTrack||this._publishingLocalVideoTrack&&!this._isPublishingAux)&&UO.emit(VO.SEND_FIRST_VIDEO_FRAME,{room:this._room})}getVideoTrackId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vb.VIDEO;if(this._peerConnection){let t=this._peerConnection.getSenders();if(e===Vb.AUXILIARY&&t[3]&&t[3].track)return t[3].track.id;if(e===Vb.VIDEO&&t[1]&&t[1].track)return t[1].track.id}if(this.localMainVideoTrack&&e===Vb.VIDEO){let e=this.localMainVideoTrack.mediaTrack;if(e)return e.id}if(this.localAuxVideoTrack&&e===Vb.AUXILIARY){let e=this.localAuxVideoTrack.mediaTrack;if(e)return e.id}return""}getSSRC(){return this.ssrc}checkPublishResultCode(e,t){if(0!==e)throw e===TR?(this._log.error(XQ.NOT_SUPPORTED_H264ENCODE),new ob({code:ib.NOT_SUPPORTED_H264,message:qQ({key:JQ.NOT_SUPPORTED_H264ENCODE})})):new ob({code:ib.UNKNOWN,message:qQ({key:JQ.SIGNAL_RESPONSE_FAILED,data:{signalResponse:zF.PUBLISH_RESULT,code:e,message:t}})})}onSinglePCReconnected(){return YS(this,null,(function*(){this.isMainStreamPublished&&(this._log.warn("republish main stream"),yield this.publish({localAudioTrack:this.localMainAudioTrack,localVideoTrack:this.localMainVideoTrack,isAuxiliary:!1})),this.isAuxStreamPublished&&(this._log.warn("republish aux stream"),yield this.publish({localAudioTrack:this.localAuxAudioTrack,localVideoTrack:this.localAuxVideoTrack,isAuxiliary:!0}))}))}};GS([jP((function(e){let{localVideoTrack:t}=e;null==t||t.once("6",this.onVideoEncodeFailed,this)}))],pG.prototype,"publish",1),GS([jP((function(e){let{localVideoTrack:t}=e;null==t||t.off("6",this.onVideoEncodeFailed,this)}))],pG.prototype,"unpublish",1);var fG=pG;function mG(e){return Object.keys(e).filter((t=>e[t]))}var EG=class extends gG{constructor(e){super(xS(LS({},e),{isUplink:!1})),jS(this,"_flag",0),jS(this,"isRobot",!1),jS(this,"role","anchor"),jS(this,"remoteAudioTrack"),jS(this,"remoteVideoTrack"),jS(this,"remoteAuxiliaryTrack"),jS(this,"ssrc",{audio:0,video:0,videoRtx:0,auxiliary:0,auxiliaryRtx:0}),jS(this,"jitterBufferTimeoutId",-1),this.flag=e.flag,this.isRobot=e.isRobot||!1,this.remoteAudioTrack=new EN(this._room,this),this.remoteVideoTrack=new Kx(this._room,this),this.remoteAuxiliaryTrack=new zx(this._room,this),this.initialize()}get videoCodec(){var e;return(null==(e=this.singlePC)?void 0:e.downlinkVideoCodec)||"h264"}get subscribeState(){return{audio:this.remoteAudioTrack.isSubscribed||this.remoteAudioTrack.isSubscribing,video:this.remoteVideoTrack.isBig&&(this.remoteVideoTrack.isSubscribed||this.remoteVideoTrack.isSubscribing),smallVideo:this.remoteVideoTrack.isSmall&&(this.remoteVideoTrack.isSubscribed||this.remoteVideoTrack.isSubscribing),auxiliary:this.remoteAuxiliaryTrack.isSubscribed||this.remoteAuxiliaryTrack.isSubscribing}}get muteState(){return bD(this.flag,this.userId)}get flag(){return this._flag}set flag(e){var t,r,i;e!==this._flag&&(this._flag=e,null==(t=this.remoteAudioTrack)||t.onFlagChanged(),null==(r=this.remoteVideoTrack)||r.onFlagChanged(),null==(i=this.remoteAuxiliaryTrack)||i.onFlagChanged())}get hasMainStream(){return this.muteState.hasAudio||this.muteState.hasVideo||this.muteState.hasSmall}get hasAuxStream(){return this.muteState.hasAuxiliary}get isMainStreamSubscribed(){return(this.subscribeState.audio||this.subscribeState.video||this.subscribeState.smallVideo)&&(this.muteState.hasAudio||this.muteState.hasVideo||this.muteState.hasSmall)}get isAuxStreamSubscribed(){return this.subscribeState.auxiliary&&this.muteState.hasAuxiliary}get isSmallStreamSubscribed(){return this.subscribeState.smallVideo&&this.muteState.hasSmall}get isBigStreamSubscribed(){return this.subscribeState.video&&this.muteState.hasVideo}isStreamUnpublished(e){return e===Vb.MAIN?!this.muteState.hasAudio&&!this.muteState.hasVideo:!this.muteState.hasAuxiliary}initialize(){this.installEvents()}close(e){clearTimeout(this.jitterBufferTimeoutId),super.close(e),this.emitConnectionStateChangedEvent("DISCONNECTED"),this.remoteAudioTrack.close(),this.remoteVideoTrack.close(),this.remoteAuxiliaryTrack.close(),this.uninstallEvents(),this.removeDownlink()}installEvents(){this.singlePC&&(this.listeners("track").includes(this.onTrack)||this.singlePC.on("track",this.onTrack,this),this.listeners("spc-reconnected").includes(this.onSinglePCReconnected)||this.singlePC.on("spc-reconnected",this.onSinglePCReconnected,this))}uninstallEvents(){this.singlePC&&(this.singlePC.off("track",this.onTrack,this),this.singlePC.off("spc-reconnected",this.onSinglePCReconnected,this))}emitConnectionStateChangedEvent(e){var t,r;let i=this._currentState,n=super.emitConnectionStateChangedEvent(e);return n&&i!==e&&(null==(t=this.remoteVideoTrack)||t.emit("connection-state-changed",{prevState:i,state:e}),null==(r=this.remoteAuxiliaryTrack)||r.emit("connection-state-changed",{prevState:i,state:e})),n}onTrack(e){var t,r;let i=e.streams[0],{track:n,receiver:o}=e;if(!i.id.includes(this.tinyId))return;let a=i.id.includes("aux")?"auxiliary":"main";this._log.debug("ontrack ".concat(a," ").concat(n.kind));let s=Vb.AUDIO;n.kind===Vb.VIDEO&&(s=a===Vb.MAIN?Vb.VIDEO:Vb.AUXILIARY);let c=this.remoteAudioTrack;s===Vb.VIDEO?c=this.remoteVideoTrack:s===Vb.AUXILIARY&&(c=this.remoteAuxiliaryTrack),null==(t=this.singlePC)||t.receiverRemoteTrackMap.set(o,c),null!=(r=this.singlePC)&&r.scriptTransformWorker&&this.initReceiverTransform(o,a,n.kind===Vb.AUDIO),this.singlePC.enableInsertableStreams&&this.createEncodedStreams(o),c.setInputMediaStreamTrack(n)}createEncodedStreams(e){if(!this.singlePC.insertableStreamsAbortMap.has(e)){let t=e.createEncodedStreams(),r=new AbortController,i={abortController:r,enqueue:t=>{var r,i;let n=null==(r=this.singlePC)?void 0:r.receiverRemoteTrackMap.get(e);return n&&("video"!==n.kind||null!=(i=this.singlePC)&&i.isUsingH264)?n.decodeFrame(t):t}};t.readable.pipeThrough(new TransformStream({transform:(e,t)=>{let r=i.enqueue(e);r&&t.enqueue(r)}})).pipeTo(t.writable,r).catch((e=>{"destory"!==e&&this._log.warn(e)})),this.singlePC.addAbortController(e,r)}}initReceiverTransform(e,t,r){!this._peerConnection||!this.singlePC||!this.singlePC.scriptTransformWorker||e.transform||(e.transform=new RTCRtpScriptTransform(this.singlePC.scriptTransformWorker,{isReceiver:!0,isAudio:r,userId:this.userId,streamType:t}))}subscribe(e,t){return YS(this,null,(function*(){try{if(this._log.info("subscribe ".concat(t," ").concat(mG(e))),this.hasSSRC){let t="subscribe_change";Object.values(e).find((e=>!0===e))||(t="unsubscribe"),yield this.sendSubscription(t,e)}else yield this.doSubscribe(e),this.checkTrackEnded(e)}catch(e){throw this._room.isJoined&&this.isStreamUnpublished(t)?(this._log.warn("".concat(e.message," ").concat(JSON.stringify(this.muteState))),new ob({code:ib.REMOTE_STREAM_NOT_EXIST,message:"remote user ".concat(this.userId," unpublished stream")})):e}}))}checkTrackEnded(e){var t,r,i;if((e.audio&&"ended"===(null==(t=this.remoteAudioTrack.mediaTrack)?void 0:t.readyState)||e.video&&"ended"===(null==(r=this.remoteVideoTrack.mediaTrack)?void 0:r.readyState)||e.auxiliary&&"ended"===(null==(i=this.remoteAuxiliaryTrack.mediaTrack)?void 0:i.readState))&&this.singlePC&&!this.singlePC.isReconnecting){if(this._log.warn("remote track ended start spc reconnect"),lO&&hO<92)return;this.singlePC.startReconnection()}}unsubscribe(e){return YS(this,arguments,(function(e){var t=this;let{remoteTracks:r,streamType:i}=e;return function*(){var e;if("main"===i&&!t.isMainStreamSubscribed||"auxiliary"===i&&!t.isAuxStreamSubscribed)return void t._log.info("".concat(i," stream already unsubscribed"));let n=LS({},t.subscribeState);r.forEach((e=>{switch(e.mediaType){case 1:n.audio=!1;break;case 4:n.video=!1;break;case 8:n.smallVideo=!1;break;case 2:n.auxiliary=!1}}));let o="subscribe_change";Object.values(n).find((e=>!0===e))||(o="unsubscribe"),t._log.info("".concat("unsubscribe"===o?o:"subscribe"," ").concat(i," [").concat(mG(n),"]")),"unsubscribe"===o&&(null==(e=t.singlePC)||e.removeDownlinkQueue.add(t.tinyId)),yield t.sendSubscription(o,n),"unsubscribe"===o&&(yield t.removeDownlink())}()}))}sendSubscription(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subscribeState,r={srcTinyId:this.tinyId,srcUserId:this.userId},i=eV,n=zF.UNSUBSCRIBE_RESULT;return"subscribe_change"===e&&(r={audio:t.audio,bigVideo:t.video,auxVideo:t.auxiliary,smallVideo:t.smallVideo,srcTinyId:this.tinyId},i=tV,n=zF.SUBSCRIBE_CHANGE_RESULT),this._signalChannel.sendWaitForResponseWithRetry({command:i,data:r,responseCommand:n,timeout:1e4,retries:3}).then((t=>{let{data:r}=t;if(0!==r.code){let t=new ob({code:r.code,message:qQ({key:JQ.ERROR_MESSAGE,data:{type:e,message:r.message}})});throw this._log.error(t),t}}))}getMainStreamVideoTrackId(){return this.remoteVideoTrack&&this.remoteVideoTrack.mediaTrack?this.remoteVideoTrack.mediaTrack.id:""}getAuxStreamVideoTrackId(){return this.remoteAuxiliaryTrack&&this.remoteAuxiliaryTrack.mediaTrack?this.remoteAuxiliaryTrack.mediaTrack.id:""}setDelay(e){let{audioDelay:t,videoDelay:r}=e;this.remoteAudioTrack.stat.end2EndDelay=t,this.remoteVideoTrack.stat.end2EndDelay=r}onSinglePCReconnected(){(this.ssrc.audio||this.ssrc.video||this.ssrc.auxiliary)&&(this._log.warn("resubscribe ".concat(JSON.stringify(this.subscribeState))),this.doSubscribe(this.subscribeState))}get hasSSRC(){return this.ssrc.audio&&this.ssrc.video&&this.ssrc.auxiliary}doSubscribe(){return YS(this,arguments,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.subscribeState,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){if(e.singlePC){e.singlePC.addDownlinkQueue.add(e.tinyId),yield e.singlePC.waitForPeerConnectionConnected();try{if(r||!e.hasSSRC){let r={audioSsrc:dG(),bigVideoSsrc:dG(),bigVideoRtxSsrc:dG(),auxVideoSsrc:dG(),auxVideoRtxSsrc:dG()},{audioSsrc:i,bigVideoSsrc:n,bigVideoRtxSsrc:o,auxVideoSsrc:a,auxVideoRtxSsrc:s}=r;e.ssrc={audio:i,video:n,videoRtx:o,auxiliary:a,auxiliaryRtx:s},e.singlePC.addDownlinkQueue.delete(e.tinyId),yield e.singlePC.addDownlink({userId:e.userId,tinyId:e.tinyId,ssrc:e.ssrc});try{let i=yield e._signalChannel.sendWaitForResponseWithRetry({command:"subscribe/v3",responseCommand:zF.SPC_SUBSCRIBE_RESULT,data:{srcUserId:e.userId,srcTinyId:e.tinyId,audio:t.audio,bigVideo:t.video,auxVideo:t.auxiliary,smallVideo:t.smallVideo,customData:!1,ssrc:r},retries:3,retryTimeout:0});if(0!==i.data.code)throw new ob({code:i.data.code,message:i.data.message})}catch(t){throw yield e.removeDownlink(),t}return}e.singlePC.addDownlinkQueue.delete(e.tinyId),yield e.singlePC.addDownlink({userId:e.userId,tinyId:e.tinyId,ssrc:e.ssrc})}finally{let t=e._room.scheduleResult.config;tM&&(null!=t&&t.jitterDelay||null!=t&&t.jitterDelayAux)&&e.setJitterBufferDelay({mainDelay:t.jitterDelay,auxDelay:t.jitterDelayAux})}}}()}))}removeDownlink(){return YS(this,null,(function*(){if(!this.singlePC)return;this.ssrc={audio:0,video:0,videoRtx:0,auxiliary:0,auxiliaryRtx:0},this.singlePC.removeDownlinkQueue.delete(this.tinyId);let e=this._room.scheduleResult.config;(null!=e&&e.jitterDelay||null!=e&&e.jitterDelayAux)&&this.setJitterBufferDelay({mainDelay:0,auxDelay:0}),yield this.singlePC.removeDownlink(this.userId)}))}setJitterBufferDelay(e){let{mainDelay:t,auxDelay:r}=e;if(!tM||!this.singlePC||!this._peerConnection||XD(t)&&XD(r))return Promise.resolve();this._log.info("set jitterBuffer main: ".concat(t," aux: ").concat(r));let i=this.singlePC.getReceiversByUserId(this.userId);return uD(t)&&(this.remoteAudioTrack.jitterBufferDelay=t,this.remoteVideoTrack.jitterBufferDelay=t),uD(r)&&(this.remoteAuxiliaryTrack.jitterBufferDelay=r,XD(t)&&(this.remoteAudioTrack.jitterBufferDelay=r)),new Promise((e=>{this.doSetJitterBufferDelay({mainDelay:t,auxDelay:r,receivers:i,resolve:e})}))}doSetJitterBufferDelay(e){let{mainDelay:t,auxDelay:r,receivers:i,resolve:n}=e;try{if(0===t&&0===r)return i.forEach((e=>e.jitterBufferTarget=0)),n();if(i.forEach((e=>{var i;let n=e.track===this.remoteAuxiliaryTrack.outMediaTrack||XD(t)&&e.track===this.remoteAudioTrack.outMediaTrack;if(n&&XD(r)||!n&&XD(t))return;let o=n?r||0:t,a=(e.jitterBufferTarget||0)+100;a>o||(e.jitterBufferTarget=a,this._log.debug("set ".concat(n?"aux ":"").concat(null==(i=null==e?void 0:e.track)?void 0:i.kind," jitterBuffer delay ").concat(a," -> ").concat(o)))})),!i.find((e=>{let i=e.track===this.remoteAuxiliaryTrack.outMediaTrack?r||0:t;return e.jitterBufferTarget<i})))return this._log.info("set jitterBuffer main: ".concat(t," aux: ").concat(r," done")),n();this.jitterBufferTimeoutId=setTimeout((()=>{this.doSetJitterBufferDelay({mainDelay:t,auxDelay:r,receivers:i,resolve:n})}),1e3)}catch(e){this._log.warn("set jitterBuffer delay error: ".concat(e)),clearTimeout(this.jitterBufferTimeoutId),n()}}get audioReceiver(){var e;return(null==(e=this.singlePC)?void 0:e.getReceiversByUserId(this.userId)[0])||null}};GS([qP(),YP((e=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return new Promise(((t,i)=>{let n=e=>{this.off("closed",n),i(new ob({code:ib.API_CALL_ABORTED,message:qQ({key:JQ.CONNECTION_ABORTED,data:e})}))};this.on("closed",n),e.apply(this,r).then(t,i).finally((()=>{this.off("closed",n)}))}))}))],EG.prototype,"subscribe",1),GS([qP()],EG.prototype,"unsubscribe",1),GS([$P((()=>"jitter"))],EG.prototype,"setJitterBufferDelay",1);var IG=EG,_G=VS(WS()),CG=class e extends _G.EventEmitter{constructor(e,t){super(),this.room=e,this.signalChannel=t,jS(this,"log"),jS(this,"cmdIdSeqMap",new Map),jS(this,"messageMap",new Map),this.log=jO.createLogger({id:"cmm",userId:e.userId}),this.onReceiveMsg=this.onReceiveMsg.bind(this),t.on(zF.RECEIVE_CUSTOM_MSG,this.onReceiveMsg),this.room.on("peer-leave",(e=>{[...this.messageMap.keys()].forEach((t=>{t.split("_").slice(0,-1).join("_")===e&&this.messageMap.delete(t)}))}))}send(e){let{cmdId:t,data:r}=e,i=this.cmdIdSeqMap.get(t)||Math.floor(16383*Math.random()),n={cmdId:t,msg:btoa(String.fromCharCode(...new Uint8Array(r))),ordered:!0,reliable:!0,streamSeq:i};this.cmdIdSeqMap.set(t,i+1),this.signalChannel.send("channel_msg",n),this.log.debug("send custom msg: ".concat(JSON.stringify(n)))}onReceiveMsg(t){let{data:r}=t.data,i=this.room.tinyIdToUserIdMap.get(r.srcTinyId);if(i){let t={userId:i,cmdId:r.cmdId,seq:r.streamSeq,data:Uint8Array.from(atob(r.msg),(e=>e.charCodeAt(0))).buffer};if(r.ordered){let r="".concat(i,"_").concat(t.cmdId),n=this.messageMap.get(r);if(n&&0!==n.lastSeq)if(Math.abs(n.lastSeq-t.seq)>e.SEQ_INTERVAL)this.messageMap.set(r,{lastSeq:t.seq,cachedMessageMap:new Map}),this.emitMessage(t);else if(t.seq>n.lastSeq){if(t.seq===n.lastSeq+1)this.emitMessage(t);else if(!n.cachedMessageMap.has(t.seq)){let e=setTimeout((()=>this.emitMessage(t,!0)),5e3);n.cachedMessageMap.set(t.seq,{message:t,timeoutId:e})}}else this.log.debug("drop message ".concat(t.userId,"-").concat(t.cmdId,"-").concat(t.seq));else n||(n={lastSeq:0,cachedMessageMap:new Map},this.messageMap.set(r,n),setTimeout((()=>this.emitMessage(t,!0)),100)),n.cachedMessageMap.set(t.seq,{message:t})}else this.emit("message",t)}else{this.log.warn("receive msg from unknown user, wait peer-join tinyId: ".concat(r.srcTinyId));let e=i=>{i.tinyId===r.srcTinyId&&(this.room.off("peer-join",e),this.onReceiveMsg(t))};this.room.on("peer-join",e),GD(2e3).then((()=>this.room.off("peer-join",e)))}}emitMessage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r;let i=this.messageMap.get("".concat(e.userId,"_").concat(e.cmdId)),n=e;if(i){if(t){let e=[...i.cachedMessageMap.values()].sort(((e,t)=>e.message.seq-t.message.seq));e[0]&&(n=e[0].message)}0!==i.lastSeq&&n.seq-i.lastSeq>1&&this.log.debug("msg lost userId: ".concat(n.userId," seq: ").concat(i.lastSeq," -> ").concat(n.seq)),i.lastSeq=n.seq,clearTimeout(null==(r=i.cachedMessageMap.get(n.seq))?void 0:r.timeoutId),i.cachedMessageMap.delete(n.seq)}this.log.debug("receive custom msg: ".concat(JSON.stringify(n))),this.emit("message",n);let o=null==i?void 0:i.cachedMessageMap.get(n.seq+1);o&&this.emitMessage(o.message)}};jS(CG,"SEQ_INTERVAL",300);var yG=CG,{isString:TG,isUndefined:vG,getNetworkType:wG,isEmpty:SG}=Ab,bG=class extends HV{constructor(e){super(e),jS(this,"_businessInfo"),jS(this,"userManager"),jS(this,"_version"),jS(this,"_heartbeat",-1),jS(this,"_lastHeartBeatTime",-1),jS(this,"_stats"),jS(this,"_joinTimeout",-1),jS(this,"_firstPublishedList",null),jS(this,"_joinReject",null),jS(this,"_isRelayChanged",!1),jS(this,"sdpSemantics"),jS(this,"signalChannel",null),jS(this,"uplinkConnection",null),jS(this,"singlePC",null),jS(this,"enableSPC",Pk),jS(this,"_changeBigSmallRecords",new Map),jS(this,"networkQuality"),jS(this,"_iceTransportPolicy"),jS(this,"forceRelay",!1),jS(this,"_turnServers",[]),jS(this,"_syncUserListInterval",-1),jS(this,"_smallStreamConfig",{bitrate:100,frameRate:15,height:120,width:160}),jS(this,"enableSEI",!1),jS(this,"_enableAudioVolumeEvaluation",!1),jS(this,"_audioVolumeIntervalId",0),jS(this,"_enableMultiAuxStream",!1),jS(this,"_pureAudioPushMode",!1),jS(this,"_customMessageManager"),jS(this,"preferHW",!1),jS(this,"healthDetector"),jS(this,"_updateAudioLevelTaskId",-1),this._stats=new _V(this,this._log),this.userManager=new eU(this.userId,this._log),this._version=db,this.sdpSemantics=yR,vG(e.sdpSemantics)?WO.isUnifiedPlanDefault()&&(this.sdpSemantics=CR):this.sdpSemantics=e.sdpSemantics,this._log.info("sdpSemantics: ".concat(this.sdpSemantics,", netType: ").concat(wG())),e.iceTransportPolicy&&(this._iceTransportPolicy=e.iceTransportPolicy),this._enableMultiAuxStream=!vG(e.enableMultiAuxStream)&&e.enableMultiAuxStream,this.enableSEI=e.enableSEI&&Pk,!vG(e.enableSPC)&&Pk&&(this.enableSPC=e.enableSPC),this.preferHW=!!e.preferHW,this._initBusinessInfo(e),this.healthDetector=new eG(this)}get isMainStreamPublished(){var e;return!(null==(e=this.uplinkConnection)||!e.isMainStreamPublished)}get isMainAudioPublished(){var e;return!(null==(e=this.uplinkConnection)||!e.localMainAudioTrack)}get isAuxStreamPublished(){var e;return!(null==(e=this.uplinkConnection)||!e.isAuxStreamPublished)}get hasAuxStream(){return[...this.remotePublishedUserMap.values()].findIndex((e=>e.muteState.hasAuxiliary))>=0}get userMap(){return this.userManager.userMap}get remotePublishedUserMap(){return this.userManager.remotePublishedUserMap}get tinyIdToUserIdMap(){return new Map([...this.userMap.values()].map((e=>[e.tinyId,e.userId])))}join(e,t,r){return YS(this,null,(function*(){return this.userManager.mySelfId=this.userId,this.userManager.on("1",(e=>{this.emit("peer-join",e)})),this.userManager.on("2",(e=>{this.closeDownLinkConnection(e,"remote user exitRoom"),this.emit("peer-leave",e)})),this.userManager.on("3",this.createDownlinkConnection,this),this.userManager.on("5",this.closeDownLinkConnection,this),this.userManager.on("6",(e=>{var t=((e,t)=>{var r={};for(var i in e)QS.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&BS)for(var i of BS(e))t.indexOf(i)<0&&kS.call(e,i)&&(r[i]=e[i]);return r})(e,[]);UO.emit(VO.REMOTE_PUBLISH_STATE_CHANGED,LS({room:this},t)),this.emit("remote-publish-state-changed",LS({},t))})),this.joinParams=e,new Promise(((t,r)=>YS(this,null,(function*(){var i,n;this._joinReject=r;try{this.checkDestroy();try{yield Promise.all([this.initialize(),this.initSinglePC()])}catch(e){if(!(e instanceof ob&&e.code===ib.SPC_INITIALIZED_FAILED))return r(e);null==(i=this.signalChannel)||i.destroy(),yield this.initialize()}let o=yD();yield this.doJoin(e,null==(n=this.singlePC)?void 0:n.clientAbility),sk.addSuccessEvent({key:521708,cost:yD()-o}),t(),this._firstPublishedList&&this.onPublishedUserList({data:{userList:this._firstPublishedList}})}catch(e){sk.addFailedEvent({key:521708,error:e}),r(e)}this._joinReject=null}))))}))}initSinglePC(){return YS(this,null,(function*(){if(this.enableSPC&&!this.singlePC){this.singlePC=new cG({signalChannel:this.signalChannel,room:this,enableCustomMessage:!1}),this.singlePC.on("sei-message",(e=>this.emit("sei-message",e))),this.singlePC.on("dump",(e=>this.emit("dump",e))),this.singlePC.once("error",(()=>this.fallbackToMPC()));try{return yield this.singlePC.initialize()}catch(e){throw this.fallbackToMPC(),new ob({code:ib.SPC_INITIALIZED_FAILED,message:null==e?void 0:e.message})}}}))}doJoin(e,t){return new Promise(((r,i)=>YS(this,null,(function*(){var n,o,a;e.privateMapKey&&(this.privateMapKey=e.privateMapKey),e.latencyLevel&&(this.latencyLevel=e.latencyLevel),this.signalChannel.once(JF,(e=>{this.clearJoinTimeout(),UO.emit(VO.JOIN_SIGNAL_CONNECTION_END,{room:this,error:e}),i(e)})),dD(null==(o=null==(n=this.scheduleResult)?void 0:n.config)?void 0:o.singlePC)&&Pk&&(this.enableSPC=this.scheduleResult.config.singlePC),this.keyPointManager.setConnectionType(this.singlePC?1:2);let s={roomId:String(e.roomId||e.strRoomId),useStringRoomId:this.useStringRoomId,privateMapKey:this.privateMapKey,latencyLevel:this.latencyLevel,trtcRole:e.role,trtcScene:"live"===this.scene?2:1,sdpSemantics:this.sdpSemantics,version:this._version,ua:navigator&&navigator.userAgent||"",terminalType:NO(),netType:zR(),bussinessInfo:this._businessInfo,ability:t,sdkType:this._sdkType,userSig:this.userSig,receiveMix:!0};this._log.debug("join room signal data: ".concat(JSON.stringify(s)));let c=5e3;null!=(a=this.scheduleResult.config)&&a.enterRoomTimeout&&this.scheduleResult.config.enterRoomTimeout>=1&&(c=1e3*this.scheduleResult.config.enterRoomTimeout),this._joinTimeout=window.setTimeout((()=>{i(new ob({code:ib.JOIN_ROOM_FAILED,message:qQ({key:JQ.JOIN_ROOM_TIMEOUT})}))}),c),UO.emit(VO.JOIN_SEND_CMD,{room:this}),this.signalChannel.send(this.singlePC?"join/v2":"join",s),this.signalChannel.once(zF.JOIN_ROOM_RESULT,(t=>{this.clearJoinTimeout();let{code:n,message:o,data:a,tinyId:s}=t.data;UO.emit(VO.JOIN_RECEIVED_CMD_RES,{room:this,code:n}),0===n?(this._log.info("Join room success, start heartbeat"),s&&(this.tinyId=s),this.startHeartbeat(),this.syncUserList(),this.startSyncUserListInterval(),this._firstPublishedList=a.publishers,this.singlePC&&this.singlePC.connect(xS(LS({},a.ability),{useVp8:a.ability.useVp8||!!e.useVp8})).catch((()=>{})),r()):(this._log.error("Join room failed result: ".concat(n," error: ").concat(o)),i(new ob({code:ib.JOIN_ROOM_FAILED,extraCode:n,message:qQ({key:JQ.JOIN_ROOM_FAILED,data:{error:o,code:n}})})))}))}))))}reJoin(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return YS(this,null,(function*(){if(this.isJoined)try{this._log.warn("reJoin pending: ".concat(this.joinParams.roomId));let t,r=[];if(this.singlePC&&(this.singlePC.close(),this.singlePC=null,r.push(this.initSinglePC().then((e=>(t=e,e))))),this.signalChannel&&(this.signalChannel.race=e,this.signalChannel.close(),r.push(this.signalChannel.connect())),yield Promise.all(r),yield this.doJoin(xS(LS({},this.joinParams),{role:"anchor"===this.role?20:21,privateMapKey:this.privateMapKey,latencyLevel:this.latencyLevel}),t),this._log.warn("reJoin success"),TM.logSuccessEvent({userId:this.userId,eventType:mR.REJOIN}),this.singlePC){let e=t=>{var r;"CONNECTED"===t.state&&(null==(r=this.singlePC)||r.off(iG.CONNECTION_STATE_CHANGED,e),this.uplinkConnection instanceof fG&&(this.uplinkConnection.installEvents(),this.uplinkConnection.onSinglePCReconnected()),this.remotePublishedUserMap.forEach((e=>{e.installEvents(),e.onSinglePCReconnected()})))};this.singlePC.on(iG.CONNECTION_STATE_CHANGED,e),this.checkConnectionsToReconnect(),this.uplinkConnection instanceof IV&&!this.uplinkConnection.getIsReconnecting()&&this.uplinkConnection.startReconnection()}}catch(e){this._log.warn("reJoin fail ".concat(e)),this.reset(),TM.logFailedEvent({userId:this.userId,eventType:mR.REJOIN,error:e}),this.emit("error",new ob({code:ib.JOIN_ROOM_FAILED,message:qQ({key:JQ.REJOIN_ROOM_FAILED,data:{roomId:this.joinParams.roomId}})}))}else this._log.warn("reJoin abort")}))}initialize(){return YS(this,null,(function*(){let e,{mainUrl:t,backupUrl:r}=this.getSignalChannelUrl(),i=this.signalChannel||function(e){return[...iV.values()].find((t=>t.room.userId===e&&!t.room.isJoined))||null}(this.userId),n=!!(i&&i.isConnected&&i.keepAlive);return Array.isArray(this.scheduleResult.domains)&&this.scheduleResult.domains.length>0&&(e=this.scheduleResult.domains[0]),this._log.info("".concat(n?"reuse":"setup"," signal channel")),n?(i.url=t,i.backupUrl=r,i.room=this,this.signalChannel=i):(this.signalChannel=new nV({sdkAppId:this.sdkAppId,userId:this.userId,userSig:this.userSig,url:t,backupUrl:r,race:this.enableSPC&&!this.proxy_ws,room:this,signalDomainWhenUnifiedProxy:this.proxy_unified?e:void 0}),this._customMessageManager=new yG(this,this.signalChannel),this._customMessageManager.on("message",(e=>{this.emit("custom-message",e)}))),this.networkQuality||(this.networkQuality=new TV({signalChannel:this.signalChannel,room:this}),this.networkQuality.on(TV.EVENT_NETWORK_QUALITY,(e=>{var t;this.emit("network-quality",e),null==(t=this.singlePC)||t.detectTCPAndUDP(e)}))),CM(this,this.signalChannel).add("2",(e=>{UO.emit(VO.SIGNAL_CONNECTION_STATE_CHANGED,LS({room:this},e)),this.emit("signal-connection-state-changed",e)})).add("4",(e=>{this.reset(),this.emit("error",e)})).add(zF.PEER_JOIN,(e=>{let{srcTinyId:t,userId:r,role:i}=e.data.data;this.userManager.addUser({userId:r,tinyId:t,role:i})})).add(zF.PEER_LEAVE,(e=>{let{userId:t,reason:r=0}=e.data.data;this.userManager.deleteUser(t,r)})).add(zF.UPDATE_REMOTE_MUTE_STAT,(e=>{this._lastHeartBeatTime>0&&Date.now()-this._lastHeartBeatTime>=1e4&&this.doHeartbeat(),this.onPublishedUserList(e.data)})).add(zF.CLIENT_BANNED,(e=>{let t=e.data.data,{reason:r}=t;if(TM.uploadEvent({log:"stat-banned:".concat(r),userId:this.userId}),"user_time_out"===r)return this._log.warn("".concat(r," last heart beat time: ").concat(this._lastHeartBeatTime," interval: ").concat(Date.now()-this._lastHeartBeatTime,", visibility: ").concat(document.visibilityState)),void this.reJoin();this._log["kick"===r?"error":"info"]("user was banned because of [".concat(r,"]")),this.reset(),this.emit("banned",{reason:r})})),this.signalChannel.once("1",(e=>{this.tinyId=e.signalInfo.tinyId,UO.emit(VO.JOIN_SIGNAL_CONNECTION_END,{room:this})})),UO.emit(VO.JOIN_SIGNAL_CONNECTION_START,{room:this}),yield this.signalChannel.connect(),n&&UO.emit(VO.JOIN_SIGNAL_CONNECTION_END,{room:this}),n}))}setSignalChannel(e){this.signalChannel=e,e||yM(this)}leave(){return YS(this,null,(function*(){var e;try{yield this.doHeartbeat()}catch(e){}this._log.info("leave() => leaving room"),UO.emit(VO.LEAVE_SEND_CMD,{room:this}),null==(e=this.signalChannel)||e.send("leave")}))}clearNetworkQuality(){this.networkQuality&&(this.networkQuality.stop(),delete this.networkQuality)}closeConnections(){this.remotePublishedUserMap.forEach((e=>{this.closeDownLinkConnection(e.userId,"you exitRoom")}))}clearJoinTimeout(){clearTimeout(this._joinTimeout),this._joinTimeout=-1}startHeartbeat(){-1===this._heartbeat&&(this._heartbeat=mM.run("ric",this.doHeartbeat.bind(this),{delay:2e3}))}stopHeartbeat(){-1!==this._heartbeat&&(this._log.info("stopHeartbeat"),mM.clearTask(this._heartbeat),this._heartbeat=-1,this._lastHeartBeatTime=-1)}doHeartbeat(){return YS(this,null,(function*(){var e;let t=this.badCaseDetector.getMonitorFreeze(),r=yield this._stats.getStatsReport({uplinkConnection:this.uplinkConnection,downlinkConnections:this.remotePublishedUserMap,freezeMap:t});this.badCaseDetector.resetMonitor();let i=null!=(e=this.signalChannel)&&e.isConnected?function(e){if(qx.has(e)){let t=qx.get(e).map((e=>({uint32_event_id:e.eventId,uint64_date:e.timestamp,str_userid:e.remoteUserId,uint32_param1:e.param1,uint32_param2:e.param2,uint32_video_stream_type:e.streamType})));return qx.delete(e),t}return[]}(this.userId):[],n=xS(LS({str_sdk_version:ub,uint64_datetime:(new Date).getTime(),msg_user_info:{str_identifier:this.userId,uint64_tinyid:this.tinyId},msg_event_msg:i,str_acc_ip:this.getSignalInfo().relayIp,str_client_ip:this.getSignalInfo().clientIp},r),{msg_device_info:LS({uint32_terminal_type:15,str_device_name:navigator.platform,str_os_version:"",uint32_net_type:zR()},r.msg_device_info)});if(this.heartbeatReport=n,UO.emit(VO.HEARTBEAT_REPORT,{room:this,report:n}),this.signalChannel){if(this.signalChannel.isConnected){this.signalChannel.send("quality_report",n);let e=Date.now();this._lastHeartBeatTime>0&&e-this._lastHeartBeatTime>1e4&&this._log.warn("heartbeat took ".concat(e-this._lastHeartBeatTime)),this._lastHeartBeatTime=e,this.signalChannel.isOnline||(this._log.warn("signal channel is not online"),this.signalChannel.startReconnection())}this.emit("heartbeat-report",xS(LS({},n),{bytes_sent:this._stats.totalBytesSent+this.signalChannel.bytesSent,bytes_received:this._stats.totalBytesReceived+this.signalChannel.bytesReceived}))}!this._isRelayChanged&&this.isRelayMaybeFailed()&&(this.reJoin(),this._isRelayChanged=!0)}))}onPublishedUserList(e){if(!this.isJoined)return;let t=e.data.userList.filter((e=>e.flag!==Zb)).map((e=>{let{userId:t,srcTinyId:r,flag:i}=e;t===this.userId&&this.uplinkConnection&&(this.uplinkConnection.flag=i);let n=this.remotePublishedUserMap.get(t);return n&&this.checkSubscribeBigSmallVideo(n),{userId:t,tinyId:r,flag:i}}));e.data.mixRobotList.forEach((e=>{let{userId:r,srcTinyId:i,flag:n,mixUserList:o}=e;t.unshift({userId:r,tinyId:i,flag:n,isRobot:!0,mixUserList:o})})),UO.emit(VO.RECEIVED_PUBLISHED_USER_LIST,{room:this,publishedUserList:t}),this.userManager.setRemotePublishedUserList(t)}closeUplink(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"you unpublished";this.uplinkConnection&&(this.localTracks.size>0&&this.uplinkConnection.doUnpublish(),this.uplinkConnection.close(e),this.uplinkConnection instanceof IV&&(this.uplinkConnection=null)),this.localTracks.forEach((e=>e.unpublish())),this.localTracks.clear()}createDownlinkConnection(e){let{userId:t,tinyId:r,flag:i,isRobot:n}=e,o=new(this.singlePC?IG:fV)({userId:t,tinyId:r,room:this,signalChannel:this.signalChannel,enableSEI:this.enableSEI,flag:i,isRobot:n});this.userManager.addRemotePublishedUser(o),this.installDownlinkEvents(o,t),this.emit("remote-published",o)}closeDownLinkConnection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"remote user unpublished",r=this.remotePublishedUserMap.get(e);r&&(r.close(t),this.emit("remote-unpublished",r))}installDownlinkEvents(e,t){e.on("error",(e=>{let r=e.getCode();r!==ib.ICE_TRANSPORT_ERROR&&(r===ib.DOWNLINK_RECONNECTION_FAILED&&this.closeDownLinkConnection(t),this.emit("error",e))})),e.on("connection-state-changed",(t=>{this.emit("media-connection-state-changed",xS(LS({},t),{userId:e.userId}))})),e.on("firewall-restriction",(()=>{this.emit("firewall-restriction")}))}startSyncUserListInterval(){-1===this._syncUserListInterval&&(this._syncUserListInterval=mM.run("ric",this.syncUserList.bind(this)))}stopSyncUserListInterval(){mM.clearTask(this._syncUserListInterval),this._syncUserListInterval=-1}syncUserList(){return this.getUserList().then((e=>{this.userManager.setUserList(e)})).catch((e=>{this._log.debug("sync user list failed: ".concat(e))}))}getUserList(){var e;return null!=(e=this.signalChannel)&&e.isConnected?this.signalChannel.sendWaitForResponse({command:"get_user_list",responseCommand:zF.USER_LIST_RES,enableLog:!1,timeout:2e3}).then((e=>{let{data:t}=e,{code:r,message:i}=t;if(0===r)return(t.data&&t.data.userList||[]).map((e=>{let{userId:t,srcTinyId:r,role:i}=e;return{userId:t,tinyId:r,role:i}}));throw qQ({key:JQ.SIGNAL_RESPONSE_FAILED,data:{signalResponse:zF.USER_LIST_RES,code:r,message:i}})})):Promise.reject("not connected")}getAllConnections(){let e=[...this.remotePublishedUserMap.values()];return this.uplinkConnection&&e.push(this.uplinkConnection),e}isRelayMaybeFailed(){if(this.signalChannel&&!this.signalChannel.isOnline||!AV)return!1;if(this.singlePC)return this.singlePC.reconnectionCount>6;let e=this.getAllConnections();if(0===e.length)return!1;for(let t=0;t<e.length;t++)if(e[t].getReconnectionCount()<6)return!1;return!0}checkConnectionsToReconnect(){var e;this.singlePC?(null==(e=this.singlePC.getPeerConnection())?void 0:e.connectionState)===uR.CLOSED&&!this.singlePC.isReconnecting&&(this._log.warn("spc pc is closed but not reconnect"),this.singlePC.startReconnection()):this.getAllConnections().forEach((e=>{if(e instanceof lV&&!e.getIsReconnecting()){let t=e.getPeerConnection();t&&t.connectionState===uR.CLOSED&&(this._log.warn("[".concat(e.getUserId(),"] pc is closed but not reconnect")),e.startReconnection())}}))}fallbackToMPC(){return YS(this,null,(function*(){var e;if(this._log.warn("fallback to multi pc"),TM.uploadEvent({log:"stat-fallback",userId:this.userId}),this.enableSPC=!1,null==(e=this.singlePC)||e.close(),this.singlePC=null,this.isJoined&&(yield this.reJoin(!1)),this.uplinkConnection){let e=this.uplinkConnection;this.uplinkConnection=new IV({userId:this.userId,tinyId:this.tinyId,room:this,signalChannel:this.signalChannel,enableSEI:this.enableSEI}),e.isMainStreamPublished&&(yield this.uplinkConnection.publish({localAudioTrack:e.localMainAudioTrack,localVideoTrack:e.localMainVideoTrack,isAuxiliary:!1})),e.isAuxStreamPublished&&(yield this.uplinkConnection.publish({localAudioTrack:e.localAuxAudioTrack,localVideoTrack:e.localAuxVideoTrack,isAuxiliary:!0})),e.close()}for(let e of[...this.remotePublishedUserMap.values()]){let t=new fV({userId:e.userId,tinyId:e.tinyId,room:this,signalChannel:this.signalChannel,enableSEI:this.enableSEI,flag:e.flag,remoteAudioTrack:e.remoteAudioTrack,remoteVideoTrack:e.remoteVideoTrack,remoteAuxiliaryTrack:e.remoteAuxiliaryTrack});this.installDownlinkEvents(t,e.userId),this.remotePublishedUserMap.set(e.userId,t),e.isMainStreamSubscribed&&(yield t.subscribe(e.subscribeState,"main")),e.isAuxStreamSubscribed&&(yield t.subscribe(e.subscribeState,"auxiliary"))}}))}destroy(){this.isDestroyed||(this.signalChannel&&(this._log.info("destroying SignalChannel"),this.signalChannel.close(),this.signalChannel=null),super.destroy(),this._joinReject&&(this._joinReject(new ob({code:ib.INVALID_OPERATION,message:qQ({key:JQ.CLIENT_DESTROYED,data:{funName:"join"}})})),this.clearJoinTimeout(),this.reset()),this.removeAllListeners(),this.healthDetector.destroy(),mM.clearTask(this._audioVolumeIntervalId))}switchRole(e){return YS(this,null,(function*(){this.role!==e&&("audience"===e&&this.uplinkConnection&&this.closeUplink("you switch role to audience"),yield this.doSwitchRole(e))}))}doSwitchRole(e){let t={command:"change_role",data:{role:"anchor"===e?20:21,privateMapKey:this.privateMapKey,latencyLevel:this.latencyLevel},responseCommand:zF.SWITCH_ROLE_RES,retries:1};return this._log.info("switchRole signal data: ".concat(JSON.stringify(t.data))),this.signalChannel.sendWaitForResponseWithRetry(t).then((t=>{let{code:r,message:i}=t.data;if(0!==r)throw new ob({code:ib.SWITCH_ROLE_FAILED,message:qQ({key:JQ.SWITCH_ROLE_FAILED,data:{message:i,code:r}})});this.role=e})).catch((e=>{throw e instanceof ob&&e.getCode()===ib.API_CALL_TIMEOUT&&(e=new ob({code:ib.SWITCH_ROLE_FAILED,message:qQ({key:JQ.SWITCH_ROLE_TIMEOUT})})),this._log.error(e),e}))}publish(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YS(this,null,(function*(){let e={},r={};t.forEach((t=>{t instanceof nN&&(t instanceof dN?r.audio=t:e.audio=t),t instanceof cN&&(t instanceof lN&&2===t.mediaType?r.video=t:e.video=t)}));let i=SG(e),n=SG(r);(!i||!n)&&!this.uplinkConnection&&(this.singlePC?this.uplinkConnection=new fG({userId:this.userId,tinyId:this.tinyId,room:this}):this.uplinkConnection=new IV({userId:this.userId,tinyId:this.tinyId,room:this,signalChannel:this.signalChannel,enableSEI:this.enableSEI}),this.uplinkConnection.on("connection-state-changed",(e=>{this.emit("media-connection-state-changed",xS(LS({},e),{userId:this.userId}))})),this.uplinkConnection.on("firewall-restriction",(()=>{this.emit("firewall-restriction")})),this.uplinkConnection.on("error",(e=>{let t=e.getCode();t!==ib.ICE_TRANSPORT_ERROR&&(t===ib.UPLINK_RECONNECTION_FAILED&&this.closeUplink(),this.emit("error",e))})));let o=t.map((e=>e.kind)).join(",");i||(this._log.info("publish() => main ".concat(o)),yield this.uplinkConnection.publish({localAudioTrack:e.audio,localVideoTrack:e.video,isAuxiliary:!1}),this._log.info("main is published")),n||(this._log.info("publish() => aux ".concat(o)),yield this.uplinkConnection.publish({localAudioTrack:r.audio,localVideoTrack:r.video,isAuxiliary:!0}),this._log.info("aux is published"))}))}unpublish(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YS(this,null,(function*(){if("live"===this.scene&&"anchor"!==this.role||!this.isMainStreamPublished&&!this.isAuxStreamPublished||!this.uplinkConnection)return;let e={},r={};t.forEach((t=>{!t.mediaTrack||!t.isPublished||(t instanceof nN&&(t instanceof dN?r.audio=t:e.audio=t),t instanceof cN&&(t instanceof lN&&2===t.mediaType?r.video=t:e.video=t))}));try{let i=t.map((e=>e.kind)).join(",");SG(e)||(this._log.info("unpublish() => main ".concat(i)),yield this.uplinkConnection.unpublish({localAudioTrack:e.audio,localVideoTrack:e.video})),SG(r)||(this._log.info("unpublish() => aux ".concat(i)),yield this.uplinkConnection.unpublish({localAudioTrack:r.audio,localVideoTrack:r.video}))}catch(e){}0===this.localTracks.size&&this.closeUplink("you unpublished")}))}addTrack(e){if(!this.uplinkConnection||!e.mediaTrack)return Promise.resolve();let t=this.uplinkConnection.addTrack(e);return e.publish(this,t),t}removeTrack(e){return this.uplinkConnection&&e.mediaTrack?this.uplinkConnection.removeTrack(e).then((t=>(e.unpublish(),t))):Promise.resolve()}replaceTrack(e){return this.uplinkConnection&&e.mediaTrack&&xk()?this.uplinkConnection.replaceTrack(e).then((t=>{t&&UO.emit(VO.LOCAL_TRACK_REPLACED,{track:e})})):Promise.resolve()}setBandWidth(e){return YS(this,null,(function*(){this.uplinkConnection&&(yield this.uplinkConnection.setBandwidth(e),yield this.uplinkConnection.sendMediaSettings())}))}enableSmall(e){return YS(this,null,(function*(){if(!this.uplinkConnection||!this.uplinkConnection.localMainVideoTrack)return Promise.resolve();e&&this.uplinkConnection.localMainVideoTrack.small&&(yield this.setBandWidth({type:Vb.VIDEO,videoType:Vb.SMALL,bandwidth:this.uplinkConnection.localMainVideoTrack.small.bitrate})),yield this.uplinkConnection.enableSmall(e)}))}subscribe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YS(this,null,(function*(){if(t=t.filter((e=>!e.isSubscribed)),0===t.length)return;let{userId:e}=t[0],r=this.remotePublishedUserMap.get(e);if(!r)return;let i=t.find((e=>2===e.mediaType))?"auxiliary":"main";try{let n=LS({},r.subscribeState);t.forEach((e=>{switch(e.mediaType){case 1:n.audio=!0;break;case 4:n.video=!0;break;case 8:n.smallVideo=!0;break;case 2:n.auxiliary=!0}}));let o=this._changeBigSmallRecords.get(e);o&&o.options.smallVideo&&r.muteState.hasSmall&&n.video&&(n.video=!1,n.smallVideo=!0),UO.emit(VO.SUBSCRIBE_START,{room:this,streamType:i,remotePublishedUser:r,subscribeState:n}),this._log.info("subscribe() => ".concat(e," ").concat(i," [").concat(gV(n),"] prev: [").concat(gV(r.subscribeState),"]")),yield r.subscribe(n,i),this._log.info("subscribe ".concat(e," ").concat(i," done"));for(let e of t)e.mediaTrack||(yield e.waitHasMediaTrack());UO.emit(VO.SUBSCRIBE_SUCCESS,{room:this,streamType:i,remotePublishedUser:r})}catch(t){let r=t instanceof ob?t.getCode():ib.UNKNOWN,n=t;throw t instanceof ob?r===ib.REMOTE_STREAM_NOT_EXIST&&(n=new ob({code:ib.API_CALL_ABORTED,message:qQ({key:JQ.API_CALL_ABORTED,data:{message:t.message,userId:e,streamType:i}})}),this._log.warn(n)):(n=new ob({code:r,message:qQ({key:JQ.SUBSCRIBE_FAILED,data:{message:t.message,userId:e,streamType:i}})}),this._log.error(n)),n}}))}unsubscribe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YS(this,null,(function*(){let{userId:e}=t[0],r=this.remotePublishedUserMap.get(e);if(!r)return;let i=t.find((e=>2===e.mediaType))?"auxiliary":"main";this._log.info("unsubscribe() => ".concat(e," ").concat(i));try{yield r.unsubscribe({remoteTracks:t,streamType:i})}catch(e){this._log.warn("unsubscribe() => failed ".concat(e))}t.forEach((e=>{e.unsubscribe(),8===e.mediaType&&e.setMediaType(4)})),UO.emit(VO.UNSUBSCRIBE_SUCCESS,{room:this,streamType:i,remotePublishedUser:r})}))}setEncodedDataProcessingListener(e){throw new Error("Method not implemented.")}enableAudioVolumeEvaluation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,t=arguments.length>1?arguments[1]:void 0;if(e<=0)return this._enableAudioVolumeEvaluation=!1,void mM.clearTask(this._audioVolumeIntervalId);e=Math.floor(Math.max(e,100)),UO.emit(VO.AUDIO_LEVEL_INTERVAL,{interval:e}),this._audioVolumeIntervalId&&mM.clearTask(this._audioVolumeIntervalId),this._enableAudioVolumeEvaluation=!0,this._audioVolumeIntervalId=mM.run("intervalInWorker",(()=>{var r;pP.isRunning?this.stopUpdateAudioLevelFromSenderStat():this.updateAudioLevelFromSenderStat(e,t);let i=[];null==(r=this.remotePublishedUserMap)||r.forEach((e=>{if(e.muteState.hasAudio){!pP.isRunning&&e.muteState.audioAvailable&&e.remoteAudioTrack.isSubscribed?this.updateDownlinkAudioLevelFromReceiver(e):e.remoteAudioTrack.volume=0;let t=Math.floor(100*e.remoteAudioTrack.getAudioLevel());i.push({userId:e.userId,volume:t})}})),this.emit("audio-volume",i)}),{delay:e,backgroundTask:t})}updateAudioLevelFromSenderStat(e,t){return YS(this,null,(function*(){var r;if(!this.uplinkConnection||!this.uplinkConnection.localMainAudioTrack||-1!==this._updateAudioLevelTaskId)return;let i=null==(r=this.uplinkConnection.getPeerConnection())?void 0:r.getSenders()[0];if(!i)return;let n=Math.max(e,500);this._log.warn("updateAudioLevelFromSenderStat ".concat(n)),this._updateAudioLevelTaskId=mM.run("intervalInWorker",(()=>YS(this,null,(function*(){if(!this.uplinkConnection||!this.uplinkConnection.localMainAudioTrack)return void this.stopUpdateAudioLevelFromSenderStat();let e=yield i.getStats();if(this._updateAudioLevelTaskId<0)return;let t=this.uplinkConnection.localMainAudioTrack;e.forEach((e=>{"media-source"===e.type&&e.audioLevel&&(t.volume=e.audioLevel)}))}))),{delay:n,backgroundTask:t})}))}stopUpdateAudioLevelFromSenderStat(){var e;-1!==this._updateAudioLevelTaskId&&(this._log.warn("stopUpdateAudioLevelFromSenderStat"),mM.clearTask(this._updateAudioLevelTaskId),this._updateAudioLevelTaskId=-1,null!=(e=this.uplinkConnection)&&e.localMainAudioTrack&&(this.uplinkConnection.localMainAudioTrack.volume=0))}updateDownlinkAudioLevelFromReceiver(e){var t;let{audioReceiver:r}=e;if(!Fk||!r)return;let i=null==(t=r.getSynchronizationSources()[0])?void 0:t.audioLevel;uD(i)?e.remoteAudioTrack.volume=Math.min(2*i,1):r.getStats().then((t=>{t.forEach((t=>{"inbound-rtp"===t.type&&uD(t.audioLevel)&&(e.remoteAudioTrack.volume=t.audioLevel)}))}))}getLocalAudioStats(){return YS(this,null,(function*(){var e;let t={};return t[this.userId]={bytesSent:0,packetsSent:0,audioLevel:0},null!=(e=this.uplinkConnection)&&e.localMainAudioTrack&&(t[this.userId]=this.uplinkConnection.localMainAudioTrack.stat),t}))}getLocalVideoStats(){return YS(this,null,(function*(){var e,t;let r={};return r[this.userId]=(null==(t=null==(e=this.uplinkConnection)?void 0:e.localMainVideoTrack)?void 0:t.stat)||{bytesSent:0,packetsSent:0,framesEncoded:0,framesSent:0,frameWidth:0,frameHeight:0,fpsCapture:0},r}))}getTransportStats(){return YS(this,null,(function*(){let e={rtt:0,downlinksRTT:{}};if(this.uplinkConnection){let t=yield this._stats.getSenderStats(this.uplinkConnection);e.rtt=t.rtt}for(let[,t]of this.remotePublishedUserMap){let r=yield this._stats.getReceiverStats(t);e.downlinksRTT[r.userId]=r.rtt}return e}))}getRemoteVideoStats(e){return YS(this,null,(function*(){let t={};for(let[r,i]of this.remotePublishedUserMap)"main"===e&&i.muteState.hasVideo&&(t[r]=i.remoteVideoTrack.stat),"auxiliary"===e&&i.muteState.hasAuxiliary&&(t[r]=i.remoteAuxiliaryTrack.stat);return t}))}getRemoteAudioStats(){return YS(this,null,(function*(){let e={};for(let[t,r]of this.remotePublishedUserMap)r.muteState.hasAudio&&(e[t]=r.remoteAudioTrack.stat);return e}))}setTurnServer(e,t){this._log.info("set turn server: ".concat(JSON.stringify(e)," ").concat(t||""));let r=[];Array.isArray(e)?e.forEach((e=>r.push(Ab.getTurnServer(e)))):Ab.isPlainObject(e)&&r.push(Ab.getTurnServer(e)),this._turnServers=r,t&&(this._iceTransportPolicy=t)}sendStartMixTranscode(e){return this.signalChannel.sendWaitForResponse({command:"start_mcu_mix",data:e,timeout:5e3,responseCommand:zF.START_MIX_TRANSCODE_RES,commandDesc:"startMixTranscode"})}sendStopMixTranscode(e){return this.signalChannel.sendWaitForResponse({command:"stop_mcu_mix",data:e,timeout:5e3,responseCommand:zF.STOP_MIX_TRANSCODE_RES,commandDesc:"stopMixTranscode"})}sendStartPublishCDN(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.signalChannel.sendWaitForResponse({command:t?"start_publishing":"start_push_user_cdn",data:e,timeout:5e3,responseCommand:t?zF.START_PUBLISH_TENCENT_CDN_RES:zF.START_PUBLISH_GIVEN_CDN_RES,commandDesc:"startPublishCDN"})}sendStopPublishCDN(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.signalChannel.sendWaitForResponse({command:t?"stop_publishing":"stop_push_user_cdn",data:e,timeout:5e3,responseCommand:t?zF.STOP_PUBLISH_TENCENT_CDN_RES:zF.STOP_PUBLISH_GIVEN_CDN_RES,commandDesc:"stopPublishCDN"})}sendStartPushStreamToRoom(e){return this.signalChannel.sendWaitForResponse({command:"start_publish_cdn_stream",data:e,timeout:5e3,responseCommand:zF.START_PUBLISH_CDN_STREAM_RES,commandDesc:"startPublishCDNStream"})}sendUpdatePushStreamToRoom(e){return this.signalChannel.sendWaitForResponse({command:"update_publish_cdn_stream",data:e,timeout:5e3,responseCommand:zF.UPDATE_PUBLISH_CDN_STREAM_RES,commandDesc:"updatePublishCDNStream"})}sendStopPushStreamToRoom(e){return this.signalChannel.sendWaitForResponse({command:"stop_publish_cdn_stream",data:e,timeout:5e3,responseCommand:zF.STOP_PUBLISH_CDN_STREAM_RES,commandDesc:"stopPublishCDNStream"})}sendAbilityStatus(e){var t;null==(t=this.signalChannel)||t.sendWaitForResponse({command:"ability_status_report",data:e,timeout:5e3,responseCommand:zF.ABILITY_STATUS_REPORT_RESULT,commandDesc:"ability status report"}).catch((e=>{}))}getIceServers(){return 0===this._turnServers.length&&this.scheduleResult.iceServers?this.scheduleResult.iceServers:this._turnServers}getIceTransportPolicy(){return this.forceRelay?"relay":this._iceTransportPolicy||this.scheduleResult.iceTransportPolicy||"all"}getLogger(){return this._log}enableAIVoice(){throw new Error("Method not implemented.")}getSignalChannelUrl(){let e={mainUrl:"",backupUrl:""},t=Ab.getEnv();return t?(e.mainUrl="wss://".concat(t,".rtc.qq.com"),e.backupUrl=e.mainUrl):this.proxy_ws?(e.mainUrl=this.proxy_ws,e.backupUrl=e.mainUrl):this.proxy_unified?(e.mainUrl="wss://".concat(this.proxy_unified),e.backupUrl=e.mainUrl):Array.isArray(this.scheduleResult.domains)&&this.scheduleResult.domains.length>0&&(e.mainUrl="wss://".concat(this.scheduleResult.domains[0]),e.backupUrl=e.mainUrl,this.scheduleResult.domains[1]&&(e.backupUrl="wss://".concat(this.scheduleResult.domains[1]))),e}getSignalInfo(){var e;return(null==(e=this.signalChannel)?void 0:e.getSignalInfo())||{clientIp:"",relayIp:""}}reset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stopSyncUserListInterval(),this.stopHeartbeat(),this.closeConnections(),this.clearNetworkQuality(),this.closeUplink("you exitRoom"),this.signalChannel&&(e&&this.signalChannel.keepAlive&&this.signalChannel.isConnected?this.signalChannel.stopKeepAliveIn(3600):(this.signalChannel.close(),this.setSignalChannel(null))),this._stats.reset(),this.userManager.clear(),this.userManager.removeAllListeners(),this.singlePC&&(this.singlePC.close(),this.singlePC=null),this.scheduleResult={domains:null,iceServers:null,iceTransportPolicy:null,trtcAutoConf:null}}checkSubscribeBigSmallVideo(e){return YS(this,null,(function*(){let{subscribeState:t,userId:r,muteState:{hasSmall:i,hasVideo:n}}=e;if(!i&&!n||!t.video&&!t.smallVideo)return;let o=this._changeBigSmallRecords.get(r);if(!o||o.isSubscribing||o.reSubscribeCount<=0)return;let{options:a,reSubscribeCount:s}=o;if(a.video&&t.video||a.smallVideo&&t.smallVideo&&i)return;let c={audio:e.remoteAudioTrack.isSubscribed||e.remoteAudioTrack.isSubscribing,auxiliary:e.remoteAuxiliaryTrack.isSubscribed||e.remoteAuxiliaryTrack.isSubscribing,video:a.video,smallVideo:a.smallVideo};try{if(!i&&c.smallVideo&&(c.video=!0,c.smallVideo=!1),c.smallVideo===t.smallVideo&&c.video===t.video)return;o.isSubscribing=!0,o.reSubscribeCount=s-1,yield e.subscribe(c,"main"),e.remoteVideoTrack.setMediaType(c.smallVideo?8:4),this._log.info("change [".concat(r,"] to ").concat(c.smallVideo?"small":"big"," video successfully. count ").concat(UR-o.reSubscribeCount,".")),o.isSubscribing=!1,o.reSubscribeCount=UR}catch(e){this._log.info("change [".concat(r,"] to ").concat(c.smallVideo?"small":"big"," video failed. count ").concat(UR-o.reSubscribeCount,".")),o.isSubscribing=!1,0===o.reSubscribeCount&&this._changeBigSmallRecords.delete(r)}}))}changeType(e,t){let r={options:{video:!e,smallVideo:e},isSubscribing:!1,reSubscribeCount:UR};this._changeBigSmallRecords.set(t.userId,r),this._log.info("set [".concat(t.userId,"] video prefer type: ").concat(e?"small":"big"));let i=this.remotePublishedUserMap.get(t.userId);i&&this.checkSubscribeBigSmallVideo(i)}get smallStreamConfig(){return this._smallStreamConfig}_initBusinessInfo(e){this._businessInfo=e.businessInfo;let t={};if(TG(e.businessInfo)&&(t=JSON.parse(e.businessInfo)),!vG(e.pureAudioPushMode)){if(!Number.isInteger(Number(e.pureAudioPushMode)))throw new ob({code:ib.INVALID_PARAMETER,message:qQ({key:JQ.INVALID_PURE_AUDIO})});this._pureAudioPushMode=e.pureAudioPushMode,t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.pure_audio_push_mod=this._pureAudioPushMode}if(!vG(e.userDefineRecordId)){let r=/^[A-Za-z0-9_-]{1,64}$/gi;if(null===e.userDefineRecordId.match(r))throw new ob({code:ib.INVALID_PARAMETER,message:qQ({key:JQ.INVALID_USER_DEFINE_RECORDID})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_record_id=e.userDefineRecordId}if(!vG(e.userDefinePushArgs)){if(!(TG(e.userDefinePushArgs)&&String(e.userDefinePushArgs)&&String(e.userDefinePushArgs).length<=256))throw new ob({code:ib.INVALID_PARAMETER,message:qQ({key:JQ.INVALID_USER_DEFINE_PUSH_ARGS})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_push_args=e.userDefinePushArgs}SG(t)||(this._businessInfo=JSON.stringify(t))}sendCustomMessage(e){var t;null==(t=this._customMessageManager)||t.send(e)}enableInsertableStreams(){return YS(this,null,(function*(){if(this.singlePC&&!this.singlePC.enableInsertableStreams&&jk)return this.singlePC.enableInsertableStreams=!0,yield this.singlePC.waitForPeerConnectionConnected(),yield this.singlePC.startReconnection()}))}sendSignalMessage(e){var t;return this.signalChannel?null==(t=this.signalChannel)?void 0:t.sendWaitForResponseWithRetry(e):Promise.reject(new ob({code:ib.INVALID_OPERATION,message:"not join"}))}get enableCodecPipeline(){return this.videoManager.encodePipeline.length>0||this.videoManager.decodePipeline.length>0||this.audioManager.encodePipeline.length>0||this.audioManager.decodePipeline.length>0}get scriptTransformWorker(){var e;return null==(e=this.singlePC)?void 0:e.scriptTransformWorker}};return GS([cM(["left",uM.INIT],"joined"),wM({settings:{retries:1,timeout:0},onRetrying(e){this._log.warn("join retry ".concat(e))},onRetryFailed(e){this._log.error("join failed",e)},onError(e,t){this._isUsingCachedSchedule&&!this.isDestroyed?(this._log.warn("is using cached schedule, retry join"),UU(!0),this.reset(),t()):this.signalChannel&&this.signalChannel.isConnected&&this.signalChannel.keepAlive?(this._log.warn("is using keepAlive ws, retry join"),this.signalChannel.close(),this.reset(),t()):(this.reset(),t())}}),YP((e=>{let t=new jF;return function(r,i,n){return YS(this,null,(function*(){let o=String(r.roomId||r.strRoomId);if(this.userId=r.userId,this.sdkAppId=r.sdkAppId,this.userSig=r.userSig,this._log.setSdkAppId(this.sdkAppId),this._log.setUserId(this.userId),this.scene=i,r.privateMapKey=r.privateMapKey||"",this.isJoined)throw new ob({code:ib.INVALID_OPERATION,message:qQ({key:JQ.INVALID_JOIN})});if(this.checkDestroy(),t.isJoined({userId:this.userId,roomId:o,sdkAppId:this.sdkAppId,room:this}))throw new ob({code:ib.INVALID_OPERATION,message:qQ({key:JQ.REPEAT_JOIN,data:this.userId})});t.add({room:this,roomId:o}),this.role=21===r.role?"audience":"anchor",this._log.info("Join() => joining room: ".concat(o," useStringRoomId: ").concat(this.useStringRoomId," scene: ").concat(this.scene," role: ").concat(this.role)),UO.emit(VO.JOIN_START,{room:this,roomId:o,params:r});let a=Ab.getEnv();a||(a=Qb.QCLOUD,this.proxy_ws&&(this.proxy_ws.startsWith(jb.OLD_CLOUD_LADDER)?a=Qb.OLD_CLOUD_LADDER:this.proxy_ws.startsWith(jb.WEBRTC)&&(a=Qb.WEBRTC))),TM.setConfig({env:a,sdkAppId:String(this.sdkAppId),userId:this.userId,roomId:o}),WO.checkSystemRequirementsInternal().then((e=>{this.checkSystemResult=e,HF.call(this)}));try{!this.proxy_ws&&!this.proxy_wt&&!this.scheduleResult.domains&&!Ab.getEnv()&&(yield this.schedule(r,n));let t=yield e.call(this,r,i,n);return this.roomId=o,this._joinedTimestamp=Ab.performanceNow(),UO.emit(VO.JOIN_SUCCESS,{room:this}),30===n&&!r.component&&TM.uploadEvent({log:"stat-conv-".concat(Number(vO),"-").concat(location.hostname),userId:this.userId}),t}catch(e){throw t.delete({room:this,roomId:o}),UO.emit(VO.JOIN_FAILED,{room:this,error:e}),e}}))}}))],bG.prototype,"join",1),GS([cM("joined","left",{ignoreError:!0,success(){this.reset(!0)}}),YP((e=>function(){return YS(this,null,(function*(){UO.emit(VO.LEAVE_START,{room:this}),yield e.call(this),UO.emit(VO.LEAVE_SUCCESS,{room:this,roomId:this.roomId})}))})),ZP("leave room"),SM({fnName:"publish",validateArgs:!1}),SM({fnName:"unsubscribe",validateArgs:!1})],bG.prototype,"leave",1),GS([qP(),YP((e=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return YS(this,null,(function*(){if("live"===this.scene&&"anchor"!==this.role||(r=r.filter((e=>e.outMediaTrack&&"capture"===e.state)),!r.length))return;UO.emit("61",{room:this});let t=e.apply(this,r);return r.forEach((e=>e.publish(this,t))),t}))})),wM({settings:{retries:gR,timeout:e=>aD(e)},onError(e,t,r){var i;null!=(i=e.message)&&i.includes("timeout")?(this._log.warn("publish timeout"),t()):(this._log.error("publish failed: ".concat(e)),r(e),UO.emit(VO.PUBLISH_FAILED,{room:this}))}})],bG.prototype,"publish",1),GS([SM({fnName:"publish"}),function(e,t,r){let i=r.value;return r.value=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=KP.get(this);if(n){let e=n.queue.filter(((e,r)=>{if(0===r)return!0;let i=!0;return e.args.forEach((e=>{t.find((t=>t===e))||(i=!1)})),!i||(e.reject(new ob({code:ib.API_CALL_ABORTED,message:"api-call"})),!1)}));n.queue=e}return i.apply(this,t)},r},qP(),YP((e=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];let n=e.apply(this,r);return r.forEach((e=>e.unpublish())),n})),jP((function(){var e,t;0===this.localTracks.size&&Qk()&&(null==(t=null==(e=this.singlePC)?void 0:e.getPeerConnection())||t.getSenders().forEach((e=>e.track&&e.replaceTrack(null))))}))],bG.prototype,"unpublish",1),GS([HP((e=>{if(e.code!==ib.API_CALL_ABORTED)throw e})),$P((e=>e.userId))],bG.prototype,"replaceTrack",1),GS([$P((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[0].userId})),pN(),YP((e=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];let n=e.apply(this,r);return r.forEach((e=>!e.isSubscribed&&e.subscribe(n))),n})),wM({settings:{retries:gR,timeout:e=>aD(e)},onError(e,t,r,i){e.message.includes("timeout")?(this._log.warn("subscribe timeout"),t()):(this._log.error("subscribe failed: ".concat(e)),r(e),UO.emit(VO.SUBSCRIBE_FAILED,{room:this,remoteTracks:i}))}})],bG.prototype,"subscribe",1),GS([SM({fnName:"subscribe",callback(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.singlePC||t.forEach((e=>{let t=this.remotePublishedUserMap.get(e.userId);t&&!t.isMainStreamSubscribed&&!t.isAuxStreamSubscribed&&t.close("you unsubscribed")}))}}),$P((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[0].userId}))],bG.prototype,"unsubscribe",1),GF.create=GF._create.bind(GF,bG),GF}()},422:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.onError="onError",e.onWarning="onWarning",e.onEnterRoom="onEnterRoom",e.onExitRoom="onExitRoom",e.onSwitchRole="onSwitchRole",e.onRemoteUserEnterRoom="onRemoteUserEnterRoom",e.onRemoteUserLeaveRoom="onRemoteUserLeaveRoom",e.onConnectOtherRoom="onConnectOtherRoom",e.onDisConnectOtherRoom="onDisConnectOtherRoom",e.onSwitchRoom="onSwitchRoom",e.onUserVideoAvailable="onUserVideoAvailable",e.onUserSubStreamAvailable="onUserSubStreamAvailable",e.onUserAudioAvailable="onUserAudioAvailable",e.onFirstVideoFrame="onFirstVideoFrame",e.onFirstAudioFrame="onFirstAudioFrame",e.onSendFirstLocalVideoFrame="onSendFirstLocalVideoFrame",e.onSendFirstLocalAudioFrame="onSendFirstLocalAudioFrame",e.onNetworkQuality="onNetworkQuality",e.onStatistics="onStatistics",e.onConnectionLost="onConnectionLost",e.onTryToReconnect="onTryToReconnect",e.onConnectionRecovery="onConnectionRecovery",e.onSpeedTest="onSpeedTest",e.onCameraDidReady="onCameraDidReady",e.onMicDidReady="onMicDidReady",e.onUserVoiceVolume="onUserVoiceVolume",e.onRecvCustomCmdMsg="onRecvCustomCmdMsg",e.onMissCustomCmdMsg="onMissCustomCmdMsg",e.onRecvSEIMsg="onRecvSEIMsg",e.onStartPublishing="onStartPublishing",e.onStopPublishing="onStopPublishing",e.onStartPublishCDNStream="onStartPublishCDNStream",e.onStopPublishCDNStream="onStopPublishCDNStream",e.onSetMixTranscodingConfig="onSetMixTranscodingConfig",e.onMusicObserverStart="onMusicObserverStart",e.onMusicObserverPlayProgress="onMusicObserverPlayProgress",e.onMusicObserverComplete="onMusicObserverComplete",e.onSnapshotComplete="onSnapshotComplete",e.onScreenCaptureStarted="onScreenCaptureStarted",e.onScreenCapturePaused="onScreenCapturePaused",e.onScreenCaptureResumed="onScreenCaptureResumed",e.onScreenCaptureStoped="onScreenCaptureStoped",e.onDeviceChange="onDeviceChange",e.onTestMicVolume="onTestMicVolume",e.onTestSpeakerVolume="onTestSpeakerVolume"}(r||(r={})),t.default=r},424:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=424,e.exports=t},426:(e,t,r)=>{"use strict";var i="/index.js";r.r(t),r.d(t,{VirtualBackground:()=>Se,default:()=>be});var n,o=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))l.call(t,r)&&u(e,r,t[r]);return e},h=(e,t)=>a(e,s(t)),g=r(424),p=(e,t,r)=>u(e,"symbol"!=typeof t?t+"":t,r),f={sdkAppId:{required:!0,type:"number"},userId:{required:!0,type:"string"},userSig:{required:!0,type:"string"}},m=function(){let e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||i,function(t){let r,i,n=void 0!==(t=t||{})?t:{};n.ready=new Promise(((e,t)=>{r=e,i=t})),Object.getOwnPropertyDescriptor(n.ready,"_main")||(Object.defineProperty(n.ready,"_main",{configurable:!0,get(){ye("You are getting _main on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_main",{configurable:!0,set(){ye("You are setting _main on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_stack_get_end")||(Object.defineProperty(n.ready,"_emscripten_stack_get_end",{configurable:!0,get(){ye("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_stack_get_end",{configurable:!0,set(){ye("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_stack_get_free")||(Object.defineProperty(n.ready,"_emscripten_stack_get_free",{configurable:!0,get(){ye("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_stack_get_free",{configurable:!0,set(){ye("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_stack_init")||(Object.defineProperty(n.ready,"_emscripten_stack_init",{configurable:!0,get(){ye("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_stack_init",{configurable:!0,set(){ye("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackSave")||(Object.defineProperty(n.ready,"_stackSave",{configurable:!0,get(){ye("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackSave",{configurable:!0,set(){ye("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackRestore")||(Object.defineProperty(n.ready,"_stackRestore",{configurable:!0,get(){ye("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackRestore",{configurable:!0,set(){ye("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackAlloc")||(Object.defineProperty(n.ready,"_stackAlloc",{configurable:!0,get(){ye("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackAlloc",{configurable:!0,set(){ye("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___wasm_call_ctors")||(Object.defineProperty(n.ready,"___wasm_call_ctors",{configurable:!0,get(){ye("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___wasm_call_ctors",{configurable:!0,set(){ye("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_fflush")||(Object.defineProperty(n.ready,"_fflush",{configurable:!0,get(){ye("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_fflush",{configurable:!0,set(){ye("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___errno_location")||(Object.defineProperty(n.ready,"___errno_location",{configurable:!0,get(){ye("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___errno_location",{configurable:!0,set(){ye("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_malloc")||(Object.defineProperty(n.ready,"_malloc",{configurable:!0,get(){ye("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_malloc",{configurable:!0,set(){ye("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_free")||(Object.defineProperty(n.ready,"_free",{configurable:!0,get(){ye("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_free",{configurable:!0,set(){ye("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_setThrew")||(Object.defineProperty(n.ready,"_setThrew",{configurable:!0,get(){ye("You are getting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_setThrew",{configurable:!0,set(){ye("You are setting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___cxa_is_pointer_type")||(Object.defineProperty(n.ready,"___cxa_is_pointer_type",{configurable:!0,get(){ye("You are getting ___cxa_is_pointer_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___cxa_is_pointer_type",{configurable:!0,set(){ye("You are setting ___cxa_is_pointer_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___cxa_can_catch")||(Object.defineProperty(n.ready,"___cxa_can_catch",{configurable:!0,get(){ye("You are getting ___cxa_can_catch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___cxa_can_catch",{configurable:!0,set(){ye("You are setting ___cxa_can_catch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_saveSetjmp")||(Object.defineProperty(n.ready,"_saveSetjmp",{configurable:!0,get(){ye("You are getting _saveSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_saveSetjmp",{configurable:!0,set(){ye("You are setting _saveSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_memalign")||(Object.defineProperty(n.ready,"_memalign",{configurable:!0,get(){ye("You are getting _memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_memalign",{configurable:!0,set(){ye("You are setting _memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_main_thread_process_queued_calls")||(Object.defineProperty(n.ready,"_emscripten_main_thread_process_queued_calls",{configurable:!0,get(){ye("You are getting _emscripten_main_thread_process_queued_calls on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_main_thread_process_queued_calls",{configurable:!0,set(){ye("You are setting _emscripten_main_thread_process_queued_calls on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_webgl_make_context_current")||(Object.defineProperty(n.ready,"_emscripten_webgl_make_context_current",{configurable:!0,get(){ye("You are getting _emscripten_webgl_make_context_current on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_webgl_make_context_current",{configurable:!0,set(){ye("You are setting _emscripten_webgl_make_context_current on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_webgl_get_current_context")||(Object.defineProperty(n.ready,"_emscripten_webgl_get_current_context",{configurable:!0,get(){ye("You are getting _emscripten_webgl_get_current_context on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_webgl_get_current_context",{configurable:!0,set(){ye("You are setting _emscripten_webgl_get_current_context on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_tzname")||(Object.defineProperty(n.ready,"__get_tzname",{configurable:!0,get(){ye("You are getting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_tzname",{configurable:!0,set(){ye("You are setting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_daylight")||(Object.defineProperty(n.ready,"__get_daylight",{configurable:!0,get(){ye("You are getting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_daylight",{configurable:!0,set(){ye("You are setting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_timezone")||(Object.defineProperty(n.ready,"__get_timezone",{configurable:!0,get(){ye("You are getting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_timezone",{configurable:!0,set(){ye("You are setting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_builtin_malloc")||(Object.defineProperty(n.ready,"_emscripten_builtin_malloc",{configurable:!0,get(){ye("You are getting _emscripten_builtin_malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_builtin_malloc",{configurable:!0,set(){ye("You are setting _emscripten_builtin_malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_builtin_free")||(Object.defineProperty(n.ready,"_emscripten_builtin_free",{configurable:!0,get(){ye("You are getting _emscripten_builtin_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_builtin_free",{configurable:!0,set(){ye("You are setting _emscripten_builtin_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_emscripten_builtin_memalign")||(Object.defineProperty(n.ready,"_emscripten_builtin_memalign",{configurable:!0,get(){ye("You are getting _emscripten_builtin_memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_emscripten_builtin_memalign",{configurable:!0,set(){ye("You are setting _emscripten_builtin_memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___getTypeName")||(Object.defineProperty(n.ready,"___getTypeName",{configurable:!0,get(){ye("You are getting ___getTypeName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___getTypeName",{configurable:!0,set(){ye("You are setting ___getTypeName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___embind_register_native_and_builtin_types")||(Object.defineProperty(n.ready,"___embind_register_native_and_builtin_types",{configurable:!0,get(){ye("You are getting ___embind_register_native_and_builtin_types on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___embind_register_native_and_builtin_types",{configurable:!0,set(){ye("You are setting ___embind_register_native_and_builtin_types on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"onRuntimeInitialized")||(Object.defineProperty(n.ready,"onRuntimeInitialized",{configurable:!0,get(){ye("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"onRuntimeInitialized",{configurable:!0,set(){ye("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));let o,a={};for(o in n)n.hasOwnProperty(o)&&(a[o]=n[o]);let s=[],c="./this.program",A=function(e,t){throw t},l="object"==typeof window,u="function"==typeof importScripts,d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h=!l&&!d&&!u;if(n.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");let p,f,m,E,I="";if(!l&&!u)throw new Error("environment detection error");if(u?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),e&&(I=e),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");p=function(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(m=function(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,r){let i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):r()},i.onerror=r,i.send(null)},E=function(e){document.title=e};let _=n.print||console.log.bind(console),C=n.printErr||console.warn.bind(console);for(o in a)a.hasOwnProperty(o)&&(n[o]=a[o]);function y(e){y.shown||(y.shown={}),y.shown[e]||(y.shown[e]=1,C(e))}a=null,n.arguments&&(s=n.arguments),Object.getOwnPropertyDescriptor(n,"arguments")||Object.defineProperty(n,"arguments",{configurable:!0,get(){ye("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),n.thisProgram&&(c=n.thisProgram),Object.getOwnPropertyDescriptor(n,"thisProgram")||Object.defineProperty(n,"thisProgram",{configurable:!0,get(){ye("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),n.quit&&(A=n.quit),Object.getOwnPropertyDescriptor(n,"quit")||Object.defineProperty(n,"quit",{configurable:!0,get(){ye("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),B(void 0===n.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),B(void 0===n.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),B(void 0===n.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),B(void 0===n.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),B(void 0===n.read,"Module.read option was removed (modify read_ in JS)"),B(void 0===n.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),B(void 0===n.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),B(void 0===n.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),B(void 0===n.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(n,"read")||Object.defineProperty(n,"read",{configurable:!0,get(){ye("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"readAsync")||Object.defineProperty(n,"readAsync",{configurable:!0,get(){ye("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"readBinary")||Object.defineProperty(n,"readBinary",{configurable:!0,get(){ye("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"setWindowTitle")||Object.defineProperty(n,"setWindowTitle",{configurable:!0,get(){ye("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),B(!h,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");let T,v=0,w=function(e){v=e};n.wasmBinary&&(T=n.wasmBinary),Object.getOwnPropertyDescriptor(n,"wasmBinary")||Object.defineProperty(n,"wasmBinary",{configurable:!0,get(){ye("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});let S=n.noExitRuntime||!0;Object.getOwnPropertyDescriptor(n,"noExitRuntime")||Object.defineProperty(n,"noExitRuntime",{configurable:!0,get(){ye("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!=typeof WebAssembly&&ye("no native wasm support detected");let b,R,D=!1;function B(e,t){e||ye(`Assertion failed: ${t}`)}let O="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Q(e,t,r){let i=t+r,n=t;for(;e[n]&&!(n>=i);)++n;if(n-t>16&&e.subarray&&O)return O.decode(e.subarray(t,n));let o="";for(;t<n;){let r=e[t++];if(!(128&r)){o+=String.fromCharCode(r);continue}let i=63&e[t++];if(192==(224&r)){o+=String.fromCharCode((31&r)<<6|i);continue}let n=63&e[t++];if(224==(240&r)?r=(15&r)<<12|i<<6|n:(240!=(248&r)&&y(`Invalid UTF-8 leading byte 0x${r.toString(16)} encountered when deserializing a UTF-8 string in wasm memory to a JS string!`),r=(7&r)<<18|i<<12|n<<6|63&e[t++]),r<65536)o+=String.fromCharCode(r);else{let e=r-65536;o+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return o}function k(e,t){return e?Q(U,e,t):""}function M(e,t,r,i){if(!(i>0))return 0;let n=r,o=r+i-1;for(let i=0;i<e.length;++i){let n=e.charCodeAt(i);if(n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++i)),n<=127){if(r>=o)break;t[r++]=n}else if(n<=2047){if(r+1>=o)break;t[r++]=192|n>>6,t[r++]=128|63&n}else if(n<=65535){if(r+2>=o)break;t[r++]=224|n>>12,t[r++]=128|n>>6&63,t[r++]=128|63&n}else{if(r+3>=o)break;n>=2097152&&y(`Invalid Unicode code point 0x${n.toString(16)} encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x1FFFFF).`),t[r++]=240|n>>18,t[r++]=128|n>>12&63,t[r++]=128|n>>6&63,t[r++]=128|63&n}}return t[r]=0,r-n}function P(e,t,r){return B("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),M(e,U,t,r)}function N(e){let t=0;for(let r=0;r<e.length;++r){let i=e.charCodeAt(r);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++r)),i<=127?++t:t+=i<=2047?2:i<=65535?3:4}return t}let L,x,U,F,V,G,j,H,Y,W="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function J(e,t){B(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");let r=e,i=r>>1,n=i+t/2;for(;!(i>=n)&&V[i];)++i;if(r=i<<1,r-e>32&&W)return W.decode(U.subarray(e,r));let o="";for(let r=0;!(r>=t/2);++r){let t=F[e+2*r>>1];if(0==t)break;o+=String.fromCharCode(t)}return o}function X(e,t,r){if(B(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),B("number"==typeof r,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===r&&(r=2147483647),r<2)return 0;let i=t,n=(r-=2)<2*e.length?r/2:e.length;for(let r=0;r<n;++r){let i=e.charCodeAt(r);F[t>>1]=i,t+=2}return F[t>>1]=0,t-i}function K(e){return 2*e.length}function z(e,t){B(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");let r=0,i="";for(;!(r>=t/4);){let t=G[e+4*r>>2];if(0==t)break;if(++r,t>=65536){let e=t-65536;i+=String.fromCharCode(55296|e>>10,56320|1023&e)}else i+=String.fromCharCode(t)}return i}function q(e,t,r){if(B(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),B("number"==typeof r,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===r&&(r=2147483647),r<4)return 0;let i=t,n=i+r-4;for(let r=0;r<e.length;++r){let i=e.charCodeAt(r);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++r)),G[t>>2]=i,(t+=4)+4>n)break}return G[t>>2]=0,t-i}function Z(e){let t=0;for(let r=0;r<e.length;++r){let i=e.charCodeAt(r);i>=55296&&i<=57343&&++r,t+=4}return t}function $(e){let t=N(e)+1,r=Jr(t);return r&&M(e,x,r,t),r}function ee(e,t){return e%t>0&&(e+=t-e%t),e}function te(e){L=e,n.HEAP8=x=new Int8Array(e),n.HEAP16=F=new Int16Array(e),n.HEAP32=G=new Int32Array(e),n.HEAPU8=U=new Uint8Array(e),n.HEAPU16=V=new Uint16Array(e),n.HEAPU32=j=new Uint32Array(e),n.HEAPF32=H=new Float32Array(e),n.HEAPF64=Y=new Float64Array(e)}let re=5242880;n.TOTAL_STACK&&B(re===n.TOTAL_STACK,"the stack size can no longer be determined at runtime");let ie,ne=n.INITIAL_MEMORY||16777216;function oe(){let e=zr();B(!(3&e)),j[1+(e>>2)]=34821223,j[2+(e>>2)]=2310721022,G[0]=1668509029}function ae(){if(D)return;let e=zr(),t=j[1+(e>>2)],r=j[2+(e>>2)];(34821223!=t||2310721022!=r)&&ye(`Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x${r.toString(16)} ${t.toString(16)}`),1668509029!==G[0]&&ye("Runtime error: The application has corrupted its heap memory area (address zero)!")}Object.getOwnPropertyDescriptor(n,"INITIAL_MEMORY")||Object.defineProperty(n,"INITIAL_MEMORY",{configurable:!0,get(){ye("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),B(ne>=re,`INITIAL_MEMORY should be larger than TOTAL_STACK, was ${ne}! (TOTAL_STACK=${re})`),B("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),B(!n.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),B(16777216==ne,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically"),function(){let e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"}();let se=[],ce=[],Ae=[],le=[],ue=!1,de=!1;function he(){return S||!1}B(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),B(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),B(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),B(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");let ge,pe=0,fe=null,me=null,Ee={};function Ie(e){let t=e;for(;;){if(!Ee[e])return e;e=t+Math.random()}}function _e(e){pe++,n.monitorRunDependencies&&n.monitorRunDependencies(pe),e?(B(!Ee[e]),Ee[e]=1,null===fe&&"undefined"!=typeof setInterval&&(fe=setInterval((()=>{if(D)return clearInterval(fe),void(fe=null);let e=!1;for(let t in Ee)e||(e=!0,C("still waiting on run dependencies:")),C(`dependency: ${t}`);e&&C("(end of list)")}),1e4))):C("warning: run dependency added without ID")}function Ce(e){if(pe--,n.monitorRunDependencies&&n.monitorRunDependencies(pe),e?(B(Ee[e]),delete Ee[e]):C("warning: run dependency removed without ID"),0==pe&&(null!==fe&&(clearInterval(fe),fe=null),me)){let e=me;me=null,e()}}function ye(e){n.onAbort&&n.onAbort(e),C(e+=""),D=!0,R=1,e=`abort(${e}) at ${function(){let e=function(){let e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}();return n.extraStackTrace&&(e+=`\n${n.extraStackTrace()}`),Pe(e)}()}`;let t=new WebAssembly.RuntimeError(e);throw i(t),t}function Te(e,t){return function(){let r=e,i=t;return t||(i=n.asm),B(ue,`native function \`${r}\` called before runtime initialization`),B(!de,`native function \`${r}\` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)`),i[e]||B(i[e],`exported native function \`${r}\` not found`),i[e].apply(null,arguments)}}var ve;n.preloadedImages={},n.preloadedAudios={},ge="selfie_segmentation_solution_simd_wasm_bin.wasm",ge.startsWith("data:application/octet-stream;base64,")||(ve=ge,ge=n.locateFile?n.locateFile(ve,I):I+ve);let we,Se,be,Re={460656(){let e=!0;if(e){let t=pr;if("function"!=typeof t)return void("undefined"!=typeof console&&console.error('Expected Emscripten global function "findCanvasEventTarget" not found. WebGL context creation may fail.'));pr=function(e){if(0==e){if(n&&n.canvas)return n.canvas;if(n&&n.canvasCssSelector)return t(n.canvasCssSelector);"undefined"!=typeof console&&console.warn("Module properties canvas and canvasCssSelector not found during WebGL context creation.")}return t(e)},e=!1}},461441:()=>"undefined"!=typeof wasmOffsetConverter};function De(e,t){if(ke.mainLoop.timingMode=e,ke.mainLoop.timingValue=t,!ke.mainLoop.func)return C("emscripten_set_main_loop_timing: Cannot set timing mode for main loop since a main loop does not exist! Call emscripten_set_main_loop first to set one up."),1;if(ke.mainLoop.running||(ke.mainLoop.running=!0),0==e)ke.mainLoop.scheduler=function(){let e=0|Math.max(0,ke.mainLoop.tickStartTime+t-be());setTimeout(ke.mainLoop.runner,e)},ke.mainLoop.method="timeout";else if(1==e)ke.mainLoop.scheduler=function(){ke.requestAnimationFrame(ke.mainLoop.runner)},ke.mainLoop.method="rAF";else if(2==e){if("undefined"==typeof setImmediate){let e=[],t="setimmediate";addEventListener("message",(function(r){(r.data===t||r.data.target===t)&&(r.stopPropagation(),e.shift()())}),!0),setImmediate=function(r){e.push(r),u?(void 0===n.setImmediates&&(n.setImmediates=[]),n.setImmediates.push(r),postMessage({target:t})):postMessage(t,"*")}}ke.mainLoop.scheduler=function(){setImmediate(ke.mainLoop.runner)},ke.mainLoop.method="immediate"}return 0}function Be(e){!function(e){if(R=e,function(){let e=_,t=C,r=!1;_=C=function(e){r=!0};try{let e=n._fflush;e&&e(0),["stdout","stderr"].forEach((e=>{let t=ze.analyzePath(`/dev/${e}`);if(!t)return;let i=t.object,{rdev:n}=i,o=Ye.ttys[n];o&&o.output&&o.output.length&&(r=!0)}))}catch(e){}_=e,C=t,r&&y("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc.")}(),he()){{let t=`program exited (with status: ${e}), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)`;i(t),C(t)}}else ae(),de=!0;li(e)}(e)}function Oe(e,t){if(D)C("user callback triggered after application aborted.  Ignoring.");else if(t)e();else try{e()}catch(e){if(e instanceof ci)return;if("unwind"!==e)throw e&&"object"==typeof e&&e.stack&&C(`exception thrown: ${[e,e.stack]}`),e}}function Qe(e,t){return setTimeout((()=>{Oe(e)}),t)}be=d?function(){let e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.now()};var ke={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause(){ke.mainLoop.scheduler=null,ke.mainLoop.currentlyRunningMainloop++},resume(){ke.mainLoop.currentlyRunningMainloop++;let{timingMode:e}=ke.mainLoop,{timingValue:t}=ke.mainLoop,{func:r}=ke.mainLoop;ke.mainLoop.func=null,function(e,t,r,i,o){B(!ke.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),ke.mainLoop.func=e,ke.mainLoop.arg=i;let a=ke.mainLoop.currentlyRunningMainloop;function s(){return!(a<ke.mainLoop.currentlyRunningMainloop&&(function(){if(!he())try{Be(R)}catch(e){if(e instanceof ci)return;throw e}}(),1))}if(ke.mainLoop.running=!1,ke.mainLoop.runner=function(){if(!D){if(ke.mainLoop.queue.length>0){let e=Date.now(),t=ke.mainLoop.queue.shift();if(t.func(t.arg),ke.mainLoop.remainingBlockers){let e=ke.mainLoop.remainingBlockers,r=e%1==0?e-1:Math.floor(e);t.counted?ke.mainLoop.remainingBlockers=r:(r+=.5,ke.mainLoop.remainingBlockers=(8*e+r)/9)}if(_(`main loop blocker "${t.name}" took ${Date.now()-e} ms`),ke.mainLoop.updateStatus(),!s())return;return void setTimeout(ke.mainLoop.runner,0)}if(s()){if(ke.mainLoop.currentFrameNumber=ke.mainLoop.currentFrameNumber+1|0,1==ke.mainLoop.timingMode&&ke.mainLoop.timingValue>1&&ke.mainLoop.currentFrameNumber%ke.mainLoop.timingValue!=0)return void ke.mainLoop.scheduler();0==ke.mainLoop.timingMode&&(ke.mainLoop.tickStartTime=be()),ur.newRenderingFrameStarted(),void 0!==ur&&ur.currentContext&&!ur.currentContextIsProxied&&!ur.currentContext.attributes.explicitSwapControl&&ur.currentContext.GLctx.commit&&ur.currentContext.GLctx.commit(),"timeout"===ke.mainLoop.method&&n.ctx&&(y("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),ke.mainLoop.method=""),ke.mainLoop.runIter(e),ae(),s()&&("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),ke.mainLoop.scheduler())}}},o||(t&&t>0?De(0,1e3/t):De(1,1),ke.mainLoop.scheduler()),r)throw"unwind"}(r,0,!1,ke.mainLoop.arg,!0),De(e,t),ke.mainLoop.scheduler()},updateStatus(){if(n.setStatus){let e=n.statusMessage||"Please wait...",t=ke.mainLoop.remainingBlockers,r=ke.mainLoop.expectedBlockers;t?t<r?n.setStatus(`${e} (${r-t}/${r})`):n.setStatus(e):n.setStatus("")}},runIter(e){D||n.preMainLoop&&!1===n.preMainLoop()||(Oe(e),n.postMainLoop&&n.postMainLoop())}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init(){if(n.preloadPlugins||(n.preloadPlugins=[]),ke.initted)return;ke.initted=!0;try{new Blob,ke.hasBlobConstructor=!0}catch(e){ke.hasBlobConstructor=!1,_("warning: no blob constructor, cannot create blobs with mimetypes")}ke.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:ke.hasBlobConstructor?null:_("warning: no BlobBuilder"),ke.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,!n.noImageDecoding&&void 0===ke.URLObject&&(_("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),n.noImageDecoding=!0);let e={canHandle:function(e){return!n.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},handle:function(e,t,r,i){let o=null;if(ke.hasBlobConstructor)try{o=new Blob([e],{type:ke.getMimetype(t)}),o.size!==e.length&&(o=new Blob([new Uint8Array(e).buffer],{type:ke.getMimetype(t)}))}catch(e){y(`Blob constructor present but fails: ${e}; falling back to blob builder`)}if(!o){let t=new ke.BlobBuilder;t.append(new Uint8Array(e).buffer),o=t.getBlob()}let a=ke.URLObject.createObjectURL(o);B("string"==typeof a,"createObjectURL must return a url as a string");let s=new Image;s.onload=function(){B(s.complete,`Image ${t} could not be decoded`);let i=document.createElement("canvas");i.width=s.width,i.height=s.height,i.getContext("2d").drawImage(s,0,0),n.preloadedImages[t]=i,ke.URLObject.revokeObjectURL(a),r&&r(e)},s.onerror=function(e){_(`Image ${a} could not be decoded`),i&&i()},s.src=a}};n.preloadPlugins.push(e);let t={canHandle:function(e){return!n.noAudioDecoding&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,t,r,i){let o=!1;function a(i){o||(o=!0,n.preloadedAudios[t]=i,r&&r(e))}function s(){o||(o=!0,n.preloadedAudios[t]=new Audio,i&&i())}if(!ke.hasBlobConstructor)return s();{try{var c=new Blob([e],{type:ke.getMimetype(t)})}catch(e){return s()}let r=ke.URLObject.createObjectURL(c);B("string"==typeof r,"createObjectURL must return a url as a string");let i=new Audio;i.addEventListener("canplaythrough",(()=>{a(i)}),!1),i.onerror=function(r){o||(_(`warning: browser could not fully decode audio ${t}, trying slower base64 approach`),i.src=`data:audio/x-${t.substr(-3)};base64,${function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i=0,n=0;for(let o=0;o<e.length;o++)for(i=i<<8|e[o],n+=8;n>=6;){let e=i>>n-6&63;n-=6,r+=t[e]}return 2==n?(r+=t[(3&i)<<4],r+="=="):4==n&&(r+=t[(15&i)<<2],r+="="),r}(e)}`,a(i))},i.src=r,Qe((()=>{a(i)}),1e4)}}};n.preloadPlugins.push(t);let{canvas:r}=n},createContext(e,t,r,i){if(t&&n.ctx&&e==n.canvas)return n.ctx;let o,a;if(t){let t={antialias:!1,alpha:!1,majorVersion:"undefined"!=typeof WebGL2RenderingContext?2:1};if(i)for(let e in i)t[e]=i[e];void 0!==ur&&(a=ur.createContext(e,t),a&&(o=ur.getContext(a).GLctx))}else o=e.getContext("2d");return o?(r&&(t||B(void 0===Lr,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),n.ctx=o,t&&ur.makeContextCurrent(a),n.useWebGL=t,ke.moduleContextCreatedCallbacks.forEach((e=>{e()})),ke.init()),o):null},destroyContext(e,t,r){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen(e,t){ke.lockPointer=e,ke.resizeCanvas=t,void 0===ke.lockPointer&&(ke.lockPointer=!0),void 0===ke.resizeCanvas&&(ke.resizeCanvas=!1);let{canvas:r}=n;ke.fullscreenHandlersInstalled||(ke.fullscreenHandlersInstalled=!0);let i=document.createElement("div");r.parentNode.insertBefore(i,r),i.appendChild(r),i.requestFullscreen=i.requestFullscreen||i.mozRequestFullScreen||i.msRequestFullscreen||(i.webkitRequestFullscreen?function(){i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(i.webkitRequestFullScreen?function(){i.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),i.requestFullscreen()},requestFullScreen(){ye("Module.requestFullScreen has been replaced by Module.requestFullscreen (without a capital S)")},exitFullscreen:()=>!!ke.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0),nextRAF:0,fakeRequestAnimationFrame(e){let t=Date.now();if(0===ke.nextRAF)ke.nextRAF=t+1e3/60;else for(;t+2>=ke.nextRAF;)ke.nextRAF+=1e3/60;let r=Math.max(ke.nextRAF-t,0);setTimeout(e,r)},requestAnimationFrame(e){"function"!=typeof requestAnimationFrame?(0,ke.fakeRequestAnimationFrame)(e):requestAnimationFrame(e)},safeSetTimeout:e=>Qe(e),safeRequestAnimationFrame:e=>ke.requestAnimationFrame((()=>{Oe(e)})),getMimetype:e=>({jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]),getUserMedia(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:e=>e.movementX||e.mozMovementX||e.webkitMovementX||0,getMovementY:e=>e.movementY||e.mozMovementY||e.webkitMovementY||0,getMouseWheelDelta(e){let t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw`unrecognized mouse wheel delta mode: ${e.deltaMode}`}break;default:throw`unrecognized mouse wheel event: ${e.type}`}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent(e){if(ke.pointerLock)"mousemove"!=e.type&&"mozMovementX"in e?ke.mouseMovementX=ke.mouseMovementY=0:(ke.mouseMovementX=ke.getMovementX(e),ke.mouseMovementY=ke.getMovementY(e)),"undefined"!=typeof SDL?(ke.mouseX=SDL.mouseX+ke.mouseMovementX,ke.mouseY=SDL.mouseY+ke.mouseMovementY):(ke.mouseX+=ke.mouseMovementX,ke.mouseY+=ke.mouseMovementY);else{let t=n.canvas.getBoundingClientRect(),r=n.canvas.width,i=n.canvas.height,o=void 0!==window.scrollX?window.scrollX:window.pageXOffset,a=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if(B(void 0!==o&&void 0!==a,"Unable to retrieve scroll position, mouse positions likely broken."),"touchstart"===e.type||"touchend"===e.type||"touchmove"===e.type){let{touch:n}=e;if(void 0===n)return;let s=n.pageX-(o+t.left),c=n.pageY-(a+t.top);s*=r/t.width,c*=i/t.height;let A={x:s,y:c};if("touchstart"===e.type)ke.lastTouches[n.identifier]=A,ke.touches[n.identifier]=A;else if("touchend"===e.type||"touchmove"===e.type){let e=ke.touches[n.identifier];e||(e=A),ke.lastTouches[n.identifier]=e,ke.touches[n.identifier]=A}return}let s=e.pageX-(o+t.left),c=e.pageY-(a+t.top);s*=r/t.width,c*=i/t.height,ke.mouseMovementX=s-ke.mouseX,ke.mouseMovementY=c-ke.mouseY,ke.mouseX=s,ke.mouseY=c}},resizeListeners:[],updateResizeListeners(){let{canvas:e}=n;ke.resizeListeners.forEach((t=>{t(e.width,e.height)}))},setCanvasSize(e,t,r){let{canvas:i}=n;ke.updateCanvasDimensions(i,e,t),r||ke.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize(){if("undefined"!=typeof SDL){let e=j[SDL.screen>>2];e|=8388608,G[SDL.screen>>2]=e}ke.updateCanvasDimensions(n.canvas),ke.updateResizeListeners()},setWindowedCanvasSize(){if("undefined"!=typeof SDL){let e=j[SDL.screen>>2];e&=-8388609,G[SDL.screen>>2]=e}ke.updateCanvasDimensions(n.canvas),ke.updateResizeListeners()},updateCanvasDimensions(e,t,r){t&&r?(e.widthNative=t,e.heightNative=r):(t=e.widthNative,r=e.heightNative);let i=t,o=r;if(n.forcedAspectRatio&&n.forcedAspectRatio>0&&(i/o<n.forcedAspectRatio?i=Math.round(o*n.forcedAspectRatio):o=Math.round(i/n.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen){let e=Math.min(screen.width/i,screen.height/o);i=Math.round(i*e),o=Math.round(o*e)}ke.resizeCanvas?(e.width!=i&&(e.width=i),e.height!=o&&(e.height=o),void 0!==e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=r&&(e.height=r),void 0!==e.style&&(i!=t||o!=r?(e.style.setProperty("width",`${i}px`,"important"),e.style.setProperty("height",`${o}px`,"important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}};function Me(e){for(;e.length>0;){let t=e.shift();if("function"==typeof t){t(n);continue}let{func:r}=t;"number"==typeof r?void 0===t.arg?ie.get(r)():ie.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}}function Pe(e){return e.replace(/\b_Z[\w\d_]+/g,(e=>{let t=function(e){return y("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}(e);return e===t?e:`${t} [${e}]`}))}function Ne(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){G[this.ptr+4>>2]=e},this.get_type=function(){return G[this.ptr+4>>2]},this.set_destructor=function(e){G[this.ptr+8>>2]=e},this.get_destructor=function(){return G[this.ptr+8>>2]},this.set_refcount=function(e){G[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,x[this.ptr+12|0]=e},this.get_caught=function(){return 0!=x[this.ptr+12|0]},this.set_rethrown=function(e){e=e?1:0,x[this.ptr+13|0]=e},this.get_rethrown=function(){return 0!=x[this.ptr+13|0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){let e=G[this.ptr>>2];G[this.ptr>>2]=e+1},this.release_ref=function(){let e=G[this.ptr>>2];return G[this.ptr>>2]=e-1,B(e>0),1===e}}function Le(e){this.free=function(){Wr(this.ptr),this.ptr=0},this.set_base_ptr=function(e){G[this.ptr>>2]=e},this.get_base_ptr=function(){return G[this.ptr>>2]},this.set_adjusted_ptr=function(e){G[this.ptr+4>>2]=e},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return G[this.ptr+4>>2]},this.get_exception_ptr=function(){if(oi(this.get_exception_info().get_type()))return G[this.get_base_ptr()>>2];let e=this.get_adjusted_ptr();return 0!==e?e:this.get_base_ptr()},this.get_exception_info=function(){return new Ne(this.get_base_ptr())},void 0===e?(this.ptr=Jr(8),this.set_adjusted_ptr(0)):this.ptr=e}let xe=[],Ue=0;function Fe(e){try{return Wr(new Ne(e).ptr)}catch(e){C(`exception during cxa_free_exception: ${e}`)}}function Ve(e){return G[Xr()>>2]=e,e}var Ge={splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray(e,t){let r=0;for(let t=e.length-1;t>=0;t--){let i=e[t];"."===i?e.splice(t,1):".."===i?(e.splice(t,1),r++):r&&(e.splice(t,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize(e){let t="/"===e.charAt(0),r="/"===e.substr(-1);return!(e=Ge.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname(e){let t=Ge.splitPath(e),r=t[0],i=t[1];return r||i?(i&&(i=i.substr(0,i.length-1)),r+i):"."},basename(e){if("/"===e)return"/";let t=(e=(e=Ge.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:e=>Ge.splitPath(e)[3],join(){let e=Array.prototype.slice.call(arguments,0);return Ge.normalize(e.join("/"))},join2:(e,t)=>Ge.normalize(`${e}/${t}`)};function je(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){let e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(d)try{let e=g("crypto");return function(){return e.randomBytes(1)[0]}}catch(e){}return function(){ye("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}}var He={resolve(){let e="",t=!1;for(let r=arguments.length-1;r>=-1&&!t;r--){let i=r>=0?arguments[r]:ze.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=`${i}/${e}`,t="/"===i.charAt(0)}return e=Ge.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"),(t?"/":"")+e||"."},relative(e,t){function r(e){let t=0;for(;t<e.length&&""===e[t];t++);let r=e.length-1;for(;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=He.resolve(e).substr(1),t=He.resolve(t).substr(1);let i=r(e.split("/")),n=r(t.split("/")),o=Math.min(i.length,n.length),a=o;for(var s=0;s<o;s++)if(i[s]!==n[s]){a=s;break}let c=[];for(s=a;s<i.length;s++)c.push("..");return c=c.concat(n.slice(a)),c.join("/")}},Ye={ttys:[],init(){},shutdown(){},register(e,t){Ye.ttys[e]={input:[],output:[],ops:t},ze.registerDevice(e,Ye.stream_ops)},stream_ops:{open(e){let t=Ye.ttys[e.node.rdev];if(!t)throw new ze.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.flush(e.tty)},flush(e){e.tty.ops.flush(e.tty)},read(e,t,r,i,n){if(!e.tty||!e.tty.ops.get_char)throw new ze.ErrnoError(60);let o=0;for(let n=0;n<i;n++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new ze.ErrnoError(29)}if(void 0===a&&0===o)throw new ze.ErrnoError(6);if(null==a)break;o++,t[r+n]=a}return o&&(e.node.timestamp=Date.now()),o},write(e,t,r,i,n){if(!e.tty||!e.tty.ops.put_char)throw new ze.ErrnoError(60);try{for(var o=0;o<i;o++)e.tty.ops.put_char(e.tty,t[r+o])}catch(e){throw new ze.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char(e){if(!e.input.length){let t=null;if(d){let e=Buffer.alloc(256),r=0;try{r=(void 0).readSync(process.stdin.fd,e,0,256,null)}catch(e){if(!e.toString().includes("EOF"))throw e;r=0}t=r>0?e.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?(t=window.prompt("Input: "),null!==t&&(t+="\n")):"function"==typeof readline&&(t=readline(),null!==t&&(t+="\n"));if(!t)return null;e.input=Hr(t,!0)}return e.input.shift()},put_char(e,t){null===t||10===t?(_(Q(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush(e){e.output&&e.output.length>0&&(_(Q(e.output,0)),e.output=[])}},default_tty1_ops:{put_char(e,t){null===t||10===t?(C(Q(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush(e){e.output&&e.output.length>0&&(C(Q(e.output,0)),e.output=[])}}};function We(e){e=function(e,t){return B(t,"alignment argument is required"),Math.ceil(e/t)*t}(e,65536);let t=ai(65536,e);return t?(function(e,t){U.fill(0,e,e+t)}(t,e),t):0}var Je={ops_table:null,mount:e=>Je.createNode(null,"/",16895,0),createNode(e,t,r,i){if(ze.isBlkdev(r)||ze.isFIFO(r))throw new ze.ErrnoError(63);Je.ops_table||(Je.ops_table={dir:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr,lookup:Je.node_ops.lookup,mknod:Je.node_ops.mknod,rename:Je.node_ops.rename,unlink:Je.node_ops.unlink,rmdir:Je.node_ops.rmdir,readdir:Je.node_ops.readdir,symlink:Je.node_ops.symlink},stream:{llseek:Je.stream_ops.llseek}},file:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr},stream:{llseek:Je.stream_ops.llseek,read:Je.stream_ops.read,write:Je.stream_ops.write,allocate:Je.stream_ops.allocate,mmap:Je.stream_ops.mmap,msync:Je.stream_ops.msync}},link:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr,readlink:Je.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr},stream:ze.chrdev_stream_ops}});let n=ze.createNode(e,t,r,i);return ze.isDir(n.mode)?(n.node_ops=Je.ops_table.dir.node,n.stream_ops=Je.ops_table.dir.stream,n.contents={}):ze.isFile(n.mode)?(n.node_ops=Je.ops_table.file.node,n.stream_ops=Je.ops_table.file.stream,n.usedBytes=0,n.contents=null):ze.isLink(n.mode)?(n.node_ops=Je.ops_table.link.node,n.stream_ops=Je.ops_table.link.stream):ze.isChrdev(n.mode)&&(n.node_ops=Je.ops_table.chrdev.node,n.stream_ops=Je.ops_table.chrdev.stream),n.timestamp=Date.now(),e&&(e.contents[t]=n,e.timestamp=n.timestamp),n},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,t){let r=e.contents?e.contents.length:0;if(r>=t)return;t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));let i=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)},resizeFileStorage(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{let r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){let t={};return t.dev=ze.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ze.isDir(e.mode)?t.size=4096:ze.isFile(e.mode)?t.size=e.usedBytes:ze.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Je.resizeFileStorage(e,t.size)},lookup(e,t){throw ze.genericErrors[44]},mknod:(e,t,r,i)=>Je.createNode(e,t,r,i),rename(e,t,r){if(ze.isDir(e.mode)){let e;try{e=ze.lookupNode(t,r)}catch(e){}if(e)for(let t in e.contents)throw new ze.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){let r=ze.lookupNode(e,t);for(let e in r.contents)throw new ze.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){let t=[".",".."];for(let r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink(e,t,r){let i=Je.createNode(e,t,41471,0);return i.link=r,i},readlink(e){if(!ze.isLink(e.mode))throw new ze.ErrnoError(28);return e.link}},stream_ops:{read(e,t,r,i,n){let{contents:o}=e.node;if(n>=e.node.usedBytes)return 0;let a=Math.min(e.node.usedBytes-n,i);if(B(a>=0),a>8&&o.subarray)t.set(o.subarray(n,n+a),r);else for(let e=0;e<a;e++)t[r+e]=o[n+e];return a},write(e,t,r,i,n,o){if(B(!(t instanceof ArrayBuffer)),t.buffer===x.buffer&&(o=!1),!i)return 0;let{node:a}=e;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(o)return B(0===n,"canOwn must imply no weird position inside the file"),a.contents=t.subarray(r,r+i),a.usedBytes=i,i;if(0===a.usedBytes&&0===n)return a.contents=t.slice(r,r+i),a.usedBytes=i,i;if(n+i<=a.usedBytes)return a.contents.set(t.subarray(r,r+i),n),i}if(Je.expandFileStorage(a,n+i),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(r,r+i),n);else for(let e=0;e<i;e++)a.contents[n+e]=t[r+e];return a.usedBytes=Math.max(a.usedBytes,n+i),i},llseek(e,t,r){let i=t;if(1===r?i+=e.position:2===r&&ze.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new ze.ErrnoError(28);return i},allocate(e,t,r){Je.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap(e,t,r,i,n,o){if(0!==t)throw new ze.ErrnoError(28);if(!ze.isFile(e.node.mode))throw new ze.ErrnoError(43);let a,s,{contents:c}=e.node;if(2&o||c.buffer!==L){if((i>0||i+r<c.length)&&(c=c.subarray?c.subarray(i,i+r):Array.prototype.slice.call(c,i,i+r)),s=!0,a=We(r),!a)throw new ze.ErrnoError(48);x.set(c,a)}else s=!1,a=c.byteOffset;return{ptr:a,allocated:s}},msync(e,t,r,i,n){if(!ze.isFile(e.node.mode))throw new ze.ErrnoError(43);return 2&n||Je.stream_ops.write(e,t,0,i,r,!1),0}}};let Xe={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},Ke={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};var ze={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(e,t){if(t=t||{},!(e=He.resolve(ze.cwd(),e)))return{path:"",node:null};let r={follow_mount:!0,recurse_count:0};for(let e in r)void 0===t[e]&&(t[e]=r[e]);if(t.recurse_count>8)throw new ze.ErrnoError(32);let i=Ge.normalizeArray(e.split("/").filter((e=>!!e)),!1),n=ze.root,o="/";for(let e=0;e<i.length;e++){let r=e===i.length-1;if(r&&t.parent)break;if(n=ze.lookupNode(n,i[e]),o=Ge.join2(o,i[e]),ze.isMountpoint(n)&&(!r||r&&t.follow_mount)&&(n=n.mounted.root),!r||t.follow){let e=0;for(;ze.isLink(n.mode);){let r=ze.readlink(o);if(o=He.resolve(Ge.dirname(o),r),n=ze.lookupPath(o,{recurse_count:t.recurse_count}).node,e++>40)throw new ze.ErrnoError(32)}}}return{path:o,node:n}},getPath(e){let t;for(;;){if(ze.isRoot(e)){let r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?`${r}/${t}`:r+t:r}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e)|0;return(e+r>>>0)%ze.nameTable.length},hashAddNode(e){let t=ze.hashName(e.parent.id,e.name);e.name_next=ze.nameTable[t],ze.nameTable[t]=e},hashRemoveNode(e){let t=ze.hashName(e.parent.id,e.name);if(ze.nameTable[t]===e)ze.nameTable[t]=e.name_next;else{let r=ze.nameTable[t];for(;r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}}},lookupNode(e,t){let r=ze.mayLookup(e);if(r)throw new ze.ErrnoError(r,e);let i=ze.hashName(e.id,t);for(let r=ze.nameTable[i];r;r=r.name_next){let i=r.name;if(r.parent.id===e.id&&i===t)return r}return ze.lookup(e,t)},createNode(e,t,r,i){B("object"==typeof e);let n=new ze.FSNode(e,t,r,i);return ze.hashAddNode(n),n},destroyNode(e){ze.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags(e){let t=ze.flagModes[e];if(void 0===t)throw new Error(`Unknown file open mode: ${e}`);return t},flagsToPermissionString(e){let t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>ze.ignorePermissions?0:t.includes("r")&&!(292&e.mode)||t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0,mayLookup:e=>ze.nodePermissions(e,"x")||(e.node_ops.lookup?0:2),mayCreate(e,t){try{return ze.lookupNode(e,t),20}catch(e){}return ze.nodePermissions(e,"wx")},mayDelete(e,t,r){let i;try{i=ze.lookupNode(e,t)}catch(e){return e.errno}let n=ze.nodePermissions(e,"wx");if(n)return n;if(r){if(!ze.isDir(i.mode))return 54;if(ze.isRoot(i)||ze.getPath(i)===ze.cwd())return 10}else if(ze.isDir(i.mode))return 31;return 0},mayOpen:(e,t)=>e?ze.isLink(e.mode)?32:ze.isDir(e.mode)&&("r"!==ze.flagsToPermissionString(t)||512&t)?31:ze.nodePermissions(e,ze.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd(e,t){e=e||0,t=t||ze.MAX_OPEN_FDS;for(let r=e;r<=t;r++)if(!ze.streams[r])return r;throw new ze.ErrnoError(33)},getStream:e=>ze.streams[e],createStream(e,t,r){ze.FSStream||(ze.FSStream=function(){},ze.FSStream.prototype={object:{get(){return this.node},set(e){this.node=e}},isRead:{get(){return 1!=(2097155&this.flags)}},isWrite:{get(){return!!(2097155&this.flags)}},isAppend:{get(){return 1024&this.flags}}});let i=new ze.FSStream;for(let t in e)i[t]=e[t];e=i;let n=ze.nextfd(t,r);return e.fd=n,ze.streams[n]=e,e},closeStream(e){ze.streams[e]=null},chrdev_stream_ops:{open(e){let t=ze.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek(){throw new ze.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice(e,t){ze.devices[e]={stream_ops:t}},getDevice:e=>ze.devices[e],getMounts(e){let t=[],r=[e];for(;r.length;){let e=r.pop();t.push(e),r.push.apply(r,e.mounts)}return t},syncfs(e,t){"function"==typeof e&&(t=e,e=!1),ze.syncFSRequests++,ze.syncFSRequests>1&&C(`warning: ${ze.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);let r=ze.getMounts(ze.root.mount),i=0;function n(e){return B(ze.syncFSRequests>0),ze.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,n(e));++i>=r.length&&n(null)}r.forEach((t=>{if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount(e,t,r){if("string"==typeof e)throw e;let i,n="/"===r,o=!r;if(n&&ze.root)throw new ze.ErrnoError(10);if(!n&&!o){let e=ze.lookupPath(r,{follow_mount:!1});if(r=e.path,i=e.node,ze.isMountpoint(i))throw new ze.ErrnoError(10);if(!ze.isDir(i.mode))throw new ze.ErrnoError(54)}let a={type:e,opts:t,mountpoint:r,mounts:[]},s=e.mount(a);return s.mount=a,a.root=s,n?ze.root=s:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),s},unmount(e){let t=ze.lookupPath(e,{follow_mount:!1});if(!ze.isMountpoint(t.node))throw new ze.ErrnoError(28);let{node:r}=t,i=r.mounted,n=ze.getMounts(i);Object.keys(ze.nameTable).forEach((e=>{let t=ze.nameTable[e];for(;t;){let e=t.name_next;n.includes(t.mount)&&ze.destroyNode(t),t=e}})),r.mounted=null;let o=r.mount.mounts.indexOf(i);B(-1!==o),r.mount.mounts.splice(o,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod(e,t,r){let i=ze.lookupPath(e,{parent:!0}).node,n=Ge.basename(e);if(!n||"."===n||".."===n)throw new ze.ErrnoError(28);let o=ze.mayCreate(i,n);if(o)throw new ze.ErrnoError(o);if(!i.node_ops.mknod)throw new ze.ErrnoError(63);return i.node_ops.mknod(i,n,t,r)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,ze.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,ze.mknod(e,t,0)),mkdirTree(e,t){let r=e.split("/"),i="";for(let e=0;e<r.length;++e)if(r[e]){i+=`/${r[e]}`;try{ze.mkdir(i,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),t|=8192,ze.mknod(e,t,r)),symlink(e,t){if(!He.resolve(e))throw new ze.ErrnoError(44);let r=ze.lookupPath(t,{parent:!0}).node;if(!r)throw new ze.ErrnoError(44);let i=Ge.basename(t),n=ze.mayCreate(r,i);if(n)throw new ze.ErrnoError(n);if(!r.node_ops.symlink)throw new ze.ErrnoError(63);return r.node_ops.symlink(r,i,e)},rename(e,t){let r,i,n,o=Ge.dirname(e),a=Ge.dirname(t),s=Ge.basename(e),c=Ge.basename(t);if(r=ze.lookupPath(e,{parent:!0}),i=r.node,r=ze.lookupPath(t,{parent:!0}),n=r.node,!i||!n)throw new ze.ErrnoError(44);if(i.mount!==n.mount)throw new ze.ErrnoError(75);let A,l=ze.lookupNode(i,s),u=He.relative(e,a);if("."!==u.charAt(0))throw new ze.ErrnoError(28);if(u=He.relative(t,o),"."!==u.charAt(0))throw new ze.ErrnoError(55);try{A=ze.lookupNode(n,c)}catch(e){}if(l===A)return;let d=ze.isDir(l.mode),h=ze.mayDelete(i,s,d);if(h)throw new ze.ErrnoError(h);if(h=A?ze.mayDelete(n,c,d):ze.mayCreate(n,c),h)throw new ze.ErrnoError(h);if(!i.node_ops.rename)throw new ze.ErrnoError(63);if(ze.isMountpoint(l)||A&&ze.isMountpoint(A))throw new ze.ErrnoError(10);if(n!==i&&(h=ze.nodePermissions(i,"w"),h))throw new ze.ErrnoError(h);try{ze.trackingDelegate.willMovePath&&ze.trackingDelegate.willMovePath(e,t)}catch(r){C(`FS.trackingDelegate['willMovePath']('${e}', '${t}') threw an exception: ${r.message}`)}ze.hashRemoveNode(l);try{i.node_ops.rename(l,n,c)}catch(e){throw e}finally{ze.hashAddNode(l)}try{ze.trackingDelegate.onMovePath&&ze.trackingDelegate.onMovePath(e,t)}catch(r){C(`FS.trackingDelegate['onMovePath']('${e}', '${t}') threw an exception: ${r.message}`)}},rmdir(e){let t=ze.lookupPath(e,{parent:!0}).node,r=Ge.basename(e),i=ze.lookupNode(t,r),n=ze.mayDelete(t,r,!0);if(n)throw new ze.ErrnoError(n);if(!t.node_ops.rmdir)throw new ze.ErrnoError(63);if(ze.isMountpoint(i))throw new ze.ErrnoError(10);try{ze.trackingDelegate.willDeletePath&&ze.trackingDelegate.willDeletePath(e)}catch(t){C(`FS.trackingDelegate['willDeletePath']('${e}') threw an exception: ${t.message}`)}t.node_ops.rmdir(t,r),ze.destroyNode(i);try{ze.trackingDelegate.onDeletePath&&ze.trackingDelegate.onDeletePath(e)}catch(t){C(`FS.trackingDelegate['onDeletePath']('${e}') threw an exception: ${t.message}`)}},readdir(e){let t=ze.lookupPath(e,{follow:!0}),{node:r}=t;if(!r.node_ops.readdir)throw new ze.ErrnoError(54);return r.node_ops.readdir(r)},unlink(e){let t=ze.lookupPath(e,{parent:!0}).node,r=Ge.basename(e),i=ze.lookupNode(t,r),n=ze.mayDelete(t,r,!1);if(n)throw new ze.ErrnoError(n);if(!t.node_ops.unlink)throw new ze.ErrnoError(63);if(ze.isMountpoint(i))throw new ze.ErrnoError(10);try{ze.trackingDelegate.willDeletePath&&ze.trackingDelegate.willDeletePath(e)}catch(t){C(`FS.trackingDelegate['willDeletePath']('${e}') threw an exception: ${t.message}`)}t.node_ops.unlink(t,r),ze.destroyNode(i);try{ze.trackingDelegate.onDeletePath&&ze.trackingDelegate.onDeletePath(e)}catch(t){C(`FS.trackingDelegate['onDeletePath']('${e}') threw an exception: ${t.message}`)}},readlink(e){let t=ze.lookupPath(e).node;if(!t)throw new ze.ErrnoError(44);if(!t.node_ops.readlink)throw new ze.ErrnoError(28);return He.resolve(ze.getPath(t.parent),t.node_ops.readlink(t))},stat(e,t){let r=ze.lookupPath(e,{follow:!t}),{node:i}=r;if(!i)throw new ze.ErrnoError(44);if(!i.node_ops.getattr)throw new ze.ErrnoError(63);return i.node_ops.getattr(i)},lstat:e=>ze.stat(e,!0),chmod(e,t,r){let i;if(i="string"==typeof e?ze.lookupPath(e,{follow:!r}).node:e,!i.node_ops.setattr)throw new ze.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&t|-4096&i.mode,timestamp:Date.now()})},lchmod(e,t){ze.chmod(e,t,!0)},fchmod(e,t){let r=ze.getStream(e);if(!r)throw new ze.ErrnoError(8);ze.chmod(r.node,t)},chown(e,t,r,i){let n;if(n="string"==typeof e?ze.lookupPath(e,{follow:!i}).node:e,!n.node_ops.setattr)throw new ze.ErrnoError(63);n.node_ops.setattr(n,{timestamp:Date.now()})},lchown(e,t,r){ze.chown(e,t,r,!0)},fchown(e,t,r){let i=ze.getStream(e);if(!i)throw new ze.ErrnoError(8);ze.chown(i.node,t,r)},truncate(e,t){if(t<0)throw new ze.ErrnoError(28);let r;if(r="string"==typeof e?ze.lookupPath(e,{follow:!0}).node:e,!r.node_ops.setattr)throw new ze.ErrnoError(63);if(ze.isDir(r.mode))throw new ze.ErrnoError(31);if(!ze.isFile(r.mode))throw new ze.ErrnoError(28);let i=ze.nodePermissions(r,"w");if(i)throw new ze.ErrnoError(i);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate(e,t){let r=ze.getStream(e);if(!r)throw new ze.ErrnoError(8);if(!(2097155&r.flags))throw new ze.ErrnoError(28);ze.truncate(r.node,t)},utime(e,t,r){let i=ze.lookupPath(e,{follow:!0}),{node:n}=i;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open(e,t,r,i,o){if(""===e)throw new ze.ErrnoError(44);let a;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?ze.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)a=e;else{e=Ge.normalize(e);try{a=ze.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}let s=!1;if(64&t)if(a){if(128&t)throw new ze.ErrnoError(20)}else a=ze.mknod(e,r,0),s=!0;if(!a)throw new ze.ErrnoError(44);if(ze.isChrdev(a.mode)&&(t&=-513),65536&t&&!ze.isDir(a.mode))throw new ze.ErrnoError(54);if(!s){let e=ze.mayOpen(a,t);if(e)throw new ze.ErrnoError(e)}512&t&&ze.truncate(a,0),t&=-131713;let c=ze.createStream({node:a,path:ze.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},i,o);c.stream_ops.open&&c.stream_ops.open(c),n.logReadFiles&&!(1&t)&&(ze.readFiles||(ze.readFiles={}),e in ze.readFiles||(ze.readFiles[e]=1,C(`FS.trackingDelegate error on read file: ${e}`)));try{if(ze.trackingDelegate.onOpenFile){let r=0;1!=(2097155&t)&&(r|=ze.tracking.openFlags.READ),!!(2097155&t)&&(r|=ze.tracking.openFlags.WRITE),ze.trackingDelegate.onOpenFile(e,r)}}catch(t){C(`FS.trackingDelegate['onOpenFile']('${e}', flags) threw an exception: ${t.message}`)}return c},close(e){if(ze.isClosed(e))throw new ze.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ze.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,t,r){if(ze.isClosed(e))throw new ze.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ze.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new ze.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read(e,t,r,i,n){if(i<0||n<0)throw new ze.ErrnoError(28);if(ze.isClosed(e))throw new ze.ErrnoError(8);if(1==(2097155&e.flags))throw new ze.ErrnoError(8);if(ze.isDir(e.node.mode))throw new ze.ErrnoError(31);if(!e.stream_ops.read)throw new ze.ErrnoError(28);let o=void 0!==n;if(o){if(!e.seekable)throw new ze.ErrnoError(70)}else n=e.position;let a=e.stream_ops.read(e,t,r,i,n);return o||(e.position+=a),a},write(e,t,r,i,n,o){if(i<0||n<0)throw new ze.ErrnoError(28);if(ze.isClosed(e))throw new ze.ErrnoError(8);if(!(2097155&e.flags))throw new ze.ErrnoError(8);if(ze.isDir(e.node.mode))throw new ze.ErrnoError(31);if(!e.stream_ops.write)throw new ze.ErrnoError(28);e.seekable&&1024&e.flags&&ze.llseek(e,0,2);let a=void 0!==n;if(a){if(!e.seekable)throw new ze.ErrnoError(70)}else n=e.position;let s=e.stream_ops.write(e,t,r,i,n,o);a||(e.position+=s);try{e.path&&ze.trackingDelegate.onWriteToFile&&ze.trackingDelegate.onWriteToFile(e.path)}catch(t){C(`FS.trackingDelegate['onWriteToFile']('${e.path}') threw an exception: ${t.message}`)}return s},allocate(e,t,r){if(ze.isClosed(e))throw new ze.ErrnoError(8);if(t<0||r<=0)throw new ze.ErrnoError(28);if(!(2097155&e.flags))throw new ze.ErrnoError(8);if(!ze.isFile(e.node.mode)&&!ze.isDir(e.node.mode))throw new ze.ErrnoError(43);if(!e.stream_ops.allocate)throw new ze.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap(e,t,r,i,n,o){if(2&n&&!(2&o)&&2!=(2097155&e.flags))throw new ze.ErrnoError(2);if(1==(2097155&e.flags))throw new ze.ErrnoError(2);if(!e.stream_ops.mmap)throw new ze.ErrnoError(43);return e.stream_ops.mmap(e,t,r,i,n,o)},msync:(e,t,r,i,n)=>e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,i,n):0,munmap:e=>0,ioctl(e,t,r){if(!e.stream_ops.ioctl)throw new ze.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error(`Invalid encoding type "${t.encoding}"`);let r,i=ze.open(e,t.flags),n=ze.stat(e).size,o=new Uint8Array(n);return ze.read(i,o,0,n,0),"utf8"===t.encoding?r=Q(o,0):"binary"===t.encoding&&(r=o),ze.close(i),r},writeFile(e,t,r){(r=r||{}).flags=r.flags||577;let i=ze.open(e,r.flags,r.mode);if("string"==typeof t){let e=new Uint8Array(N(t)+1),n=M(t,e,0,e.length);ze.write(i,e,0,n,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");ze.write(i,t,0,t.byteLength,void 0,r.canOwn)}ze.close(i)},cwd:()=>ze.currentPath,chdir(e){let t=ze.lookupPath(e,{follow:!0});if(null===t.node)throw new ze.ErrnoError(44);if(!ze.isDir(t.node.mode))throw new ze.ErrnoError(54);let r=ze.nodePermissions(t.node,"x");if(r)throw new ze.ErrnoError(r);ze.currentPath=t.path},createDefaultDirectories(){ze.mkdir("/tmp"),ze.mkdir("/home"),ze.mkdir("/home/web_user")},createDefaultDevices(){ze.mkdir("/dev"),ze.registerDevice(ze.makedev(1,3),{read:()=>0,write:(e,t,r,i,n)=>i}),ze.mkdev("/dev/null",ze.makedev(1,3)),Ye.register(ze.makedev(5,0),Ye.default_tty_ops),Ye.register(ze.makedev(6,0),Ye.default_tty1_ops),ze.mkdev("/dev/tty",ze.makedev(5,0)),ze.mkdev("/dev/tty1",ze.makedev(6,0));let e=je();ze.createDevice("/dev","random",e),ze.createDevice("/dev","urandom",e),ze.mkdir("/dev/shm"),ze.mkdir("/dev/shm/tmp")},createSpecialDirectories(){ze.mkdir("/proc");let e=ze.mkdir("/proc/self");ze.mkdir("/proc/self/fd"),ze.mount({mount(){let t=ze.createNode(e,"fd",16895,73);return t.node_ops={lookup(e,t){let r=+t,i=ze.getStream(r);if(!i)throw new ze.ErrnoError(8);let n={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return n.parent=n,n}},t}},{},"/proc/self/fd")},createStandardStreams(){n.stdin?ze.createDevice("/dev","stdin",n.stdin):ze.symlink("/dev/tty","/dev/stdin"),n.stdout?ze.createDevice("/dev","stdout",null,n.stdout):ze.symlink("/dev/tty","/dev/stdout"),n.stderr?ze.createDevice("/dev","stderr",null,n.stderr):ze.symlink("/dev/tty1","/dev/stderr");let e=ze.open("/dev/stdin",0),t=ze.open("/dev/stdout",1),r=ze.open("/dev/stderr",1);B(0===e.fd,`invalid handle for stdin (${e.fd})`),B(1===t.fd,`invalid handle for stdout (${t.fd})`),B(2===r.fd,`invalid handle for stderr (${r.fd})`)},ensureErrnoError(){ze.ErrnoError||(ze.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e;for(let t in Ke)if(Ke[t]===e){this.code=t;break}},this.setErrno(e),this.message=Xe[e],this.stack&&(Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack=Pe(this.stack))},ze.ErrnoError.prototype=new Error,ze.ErrnoError.prototype.constructor=ze.ErrnoError,[44].forEach((e=>{ze.genericErrors[e]=new ze.ErrnoError(e),ze.genericErrors[e].stack="<generic error, no stack>"})))},staticInit(){ze.ensureErrnoError(),ze.nameTable=new Array(4096),ze.mount(Je,{},"/"),ze.createDefaultDirectories(),ze.createDefaultDevices(),ze.createSpecialDirectories(),ze.filesystems={MEMFS:Je}},init(e,t,r){B(!ze.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),ze.init.initialized=!0,ze.ensureErrnoError(),n.stdin=e||n.stdin,n.stdout=t||n.stdout,n.stderr=r||n.stderr,ze.createStandardStreams()},quit(){ze.init.initialized=!1;let e=n._fflush;e&&e(0);for(let e=0;e<ze.streams.length;e++){let t=ze.streams[e];t&&ze.close(t)}},getMode(e,t){let r=0;return e&&(r|=365),t&&(r|=146),r},findObject(e,t){let r=ze.analyzePath(e,t);return r.exists?r.object:null},analyzePath(e,t){try{e=(i=ze.lookupPath(e,{follow:!t})).path}catch(e){}let r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=ze.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=i.path,r.parentObject=i.node,r.name=Ge.basename(e),i=ze.lookupPath(e,{follow:!t}),r.exists=!0,r.path=i.path,r.object=i.node,r.name=i.node.name,r.isRoot="/"===i.path}catch(e){r.error=e.errno}return r},createPath(e,t,r,i){e="string"==typeof e?e:ze.getPath(e);let n=t.split("/").reverse();for(;n.length;){let t=n.pop();if(t){var o=Ge.join2(e,t);try{ze.mkdir(o)}catch(e){}e=o}}return o},createFile(e,t,r,i,n){let o=Ge.join2("string"==typeof e?e:ze.getPath(e),t),a=ze.getMode(i,n);return ze.create(o,a)},createDataFile(e,t,r,i,n,o){let a=t?Ge.join2("string"==typeof e?e:ze.getPath(e),t):e,s=ze.getMode(i,n),c=ze.create(a,s);if(r){if("string"==typeof r){let e=new Array(r.length);for(let t=0,i=r.length;t<i;++t)e[t]=r.charCodeAt(t);r=e}ze.chmod(c,146|s);let e=ze.open(c,577);ze.write(e,r,0,r.length,0,o),ze.close(e),ze.chmod(c,s)}return c},createDevice(e,t,r,i){let n=Ge.join2("string"==typeof e?e:ze.getPath(e),t),o=ze.getMode(!!r,!!i);ze.createDevice.major||(ze.createDevice.major=64);let a=ze.makedev(ze.createDevice.major++,0);return ze.registerDevice(a,{open(e){e.seekable=!1},close(e){i&&i.buffer&&i.buffer.length&&i(10)},read(e,t,i,n,o){let a=0;for(let e=0;e<n;e++){var s;try{s=r()}catch(e){throw new ze.ErrnoError(29)}if(void 0===s&&0===a)throw new ze.ErrnoError(6);if(null==s)break;a++,t[i+e]=s}return a&&(e.node.timestamp=Date.now()),a},write(e,t,r,n,o){for(var a=0;a<n;a++)try{i(t[r+a])}catch(e){throw new ze.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}}),ze.mkdev(n,o,a)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!p)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Hr(p(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new ze.ErrnoError(29)}},createLazyFile(e,t,r,i,n){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(e>this.length-1||e<0)return;let t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){let e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error(`Couldn't load ${r}. Status: ${e.status}`);let t,i=Number(e.getResponseHeader("Content-length")),n=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;n||(a=i);let s=this;s.setDataGetter((e=>{let t=e*a,n=(e+1)*a-1;if(n=Math.min(n,i-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,t){if(e>t)throw new Error(`invalid range (${e}, ${t}) or no bytes requested!`);if(t>i-1)throw new Error(`only ${i} bytes available! programmer error!`);let n=new XMLHttpRequest;if(n.open("GET",r,!1),i!==a&&n.setRequestHeader("Range",`bytes=${e}-${t}`),"undefined"!=typeof Uint8Array&&(n.responseType="arraybuffer"),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.send(null),!(n.status>=200&&n.status<300||304===n.status))throw new Error(`Couldn't load ${r}. Status: ${n.status}`);return void 0!==n.response?new Uint8Array(n.response||[]):Hr(n.responseText||"",!0)}(t,n)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),(o||!i)&&(a=i=1,i=this.getter(0).length,a=i,_("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";let e=new o;Object.defineProperties(e,{length:{get(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:e}}else a={isDevice:!1,url:r};let s=ze.createFile(e,t,a,i,n);a.contents?s.contents=a.contents:a.url&&(s.contents=null,s.url=a.url),Object.defineProperties(s,{usedBytes:{get(){return this.contents.length}}});let c={};return Object.keys(s.stream_ops).forEach((e=>{let t=s.stream_ops[e];c[e]=function(){return ze.forceLoadFile(s),t.apply(null,arguments)}})),c.read=function(e,t,r,i,n){ze.forceLoadFile(s);let{contents:o}=e.node;if(n>=o.length)return 0;let a=Math.min(o.length-n,i);if(B(a>=0),o.slice)for(var c=0;c<a;c++)t[r+c]=o[n+c];else for(c=0;c<a;c++)t[r+c]=o.get(n+c);return a},s.stream_ops=c,s},createPreloadedFile(e,t,r,i,o,a,s,c,A,l){ke.init();let u=t?He.resolve(Ge.join2(e,t)):e,d=Ie(`cp ${u}`);function h(r){function h(r){l&&l(),c||ze.createDataFile(e,t,r,i,o,A),a&&a(),Ce(d)}let g=!1;n.preloadPlugins.forEach((e=>{g||e.canHandle(u)&&(e.handle(r,u,h,(()=>{s&&s(),Ce(d)})),g=!0)})),g||h(r)}_e(d),"string"==typeof r?function(e,t,r){let i=Ie(`al ${e}`);f(e,(t=>{B(t,`Loading data file "${e}" failed (no arrayBuffer).`),h(new Uint8Array(t)),i&&Ce(i)}),(t=>{if(!r)throw`Loading data file "${e}" failed.`;r()})),i&&_e(i)}(r,0,s):h(r)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>`EM_FS_${window.location.pathname}`,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB(e,t,r){t=t||function(){},r=r||function(){};let i=ze.indexedDB();try{var n=i.open(ze.DB_NAME(),ze.DB_VERSION)}catch(e){return r(e)}n.onupgradeneeded=function(){_("creating db"),n.result.createObjectStore(ze.DB_STORE_NAME)},n.onsuccess=function(){let i=n.result.transaction([ze.DB_STORE_NAME],"readwrite"),o=i.objectStore(ze.DB_STORE_NAME),a=0,s=0,c=e.length;function A(){0==s?t():r()}e.forEach((e=>{let t=o.put(ze.analyzePath(e).object.contents,e);t.onsuccess=function(){a++,a+s==c&&A()},t.onerror=function(){s++,a+s==c&&A()}})),i.onerror=r},n.onerror=r},loadFilesFromDB(e,t,r){t=t||function(){},r=r||function(){};let i=ze.indexedDB();try{var n=i.open(ze.DB_NAME(),ze.DB_VERSION)}catch(e){return r(e)}n.onupgradeneeded=r,n.onsuccess=function(){let i=n.result;try{var o=i.transaction([ze.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}let a=o.objectStore(ze.DB_STORE_NAME),s=0,c=0,A=e.length;function l(){0==c?t():r()}e.forEach((e=>{let t=a.get(e);t.onsuccess=function(){ze.analyzePath(e).exists&&ze.unlink(e),ze.createDataFile(Ge.dirname(e),Ge.basename(e),t.result,!0,!0,!0),s++,s+c==A&&l()},t.onerror=function(){c++,s+c==A&&l()}})),o.onerror=r},n.onerror=r},absolutePath(){ye("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){ye("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){ye("FS.createLink has been removed; use FS.symlink instead")},joinPath(){ye("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){ye("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){ye("FS.standardizePath has been removed; use PATH.normalize instead")}},qe={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt(e,t,r){if("/"===t[0])return t;let i;if(-100===e)i=ze.cwd();else{let t=ze.getStream(e);if(!t)throw new ze.ErrnoError(8);i=t.path}if(0==t.length){if(!r)throw new ze.ErrnoError(44);return i}return Ge.join2(i,t)},doStat(e,t,r){try{var i=e(t)}catch(e){if(e&&e.node&&Ge.normalize(t)!==Ge.normalize(ze.getPath(e.node)))return-54;throw e}return G[r>>2]=i.dev,G[r+4>>2]=0,G[r+8>>2]=i.ino,G[r+12>>2]=i.mode,G[r+16>>2]=i.nlink,G[r+20>>2]=i.uid,G[r+24>>2]=i.gid,G[r+28>>2]=i.rdev,G[r+32>>2]=0,Se=[i.size>>>0,(we=i.size,+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],G[r+40>>2]=Se[0],G[r+44>>2]=Se[1],G[r+48>>2]=4096,G[r+52>>2]=i.blocks,G[r+56>>2]=i.atime.getTime()/1e3|0,G[r+60>>2]=0,G[r+64>>2]=i.mtime.getTime()/1e3|0,G[r+68>>2]=0,G[r+72>>2]=i.ctime.getTime()/1e3|0,G[r+76>>2]=0,Se=[i.ino>>>0,(we=i.ino,+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],G[r+80>>2]=Se[0],G[r+84>>2]=Se[1],0},doMsync(e,t,r,i,n){let o=U.slice(e,e+r);ze.msync(t,o,n,r,i)},doMkdir:(e,t)=>("/"===(e=Ge.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),ze.mkdir(e,t,0),0),doMknod(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return ze.mknod(e,t,r),0},doReadlink(e,t,r){if(r<=0)return-28;let i=ze.readlink(e),n=Math.min(r,N(i)),o=x[t+n];return P(i,t,r+1),x[t+n]=o,n},doAccess(e,t){if(-8&t)return-28;let r;if(r=ze.lookupPath(e,{follow:!0}).node,!r)return-44;let i="";return 4&t&&(i+="r"),2&t&&(i+="w"),1&t&&(i+="x"),i&&ze.nodePermissions(r,i)?-2:0},doDup(e,t,r){let i=ze.getStream(r);return i&&ze.close(i),ze.open(e,t,0,r,r).fd},doReadv(e,t,r,i){let n=0;for(let o=0;o<r;o++){let r=G[t+8*o>>2],a=G[t+(8*o+4)>>2],s=ze.read(e,x,r,a,i);if(s<0)return-1;if(n+=s,s<a)break}return n},doWritev(e,t,r,i){let n=0;for(let o=0;o<r;o++){let r=G[t+8*o>>2],a=G[t+(8*o+4)>>2],s=ze.write(e,x,r,a,i);if(s<0)return-1;n+=s}return n},varargs:void 0,get:()=>(B(null!=qe.varargs),qe.varargs+=4,G[qe.varargs-4>>2]),getStr:e=>k(e),getStreamFromFD(e){let t=ze.getStream(e);if(!t)throw new ze.ErrnoError(8);return t},get64:(e,t)=>(B(e>=0?0===t:-1===t),e)};function Ze(e){if(void 0===e)return"_unknown";let t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e}function $e(e,t){return e=Ze(e),new Function("body",`return function ${e}() {\n    "use strict";    return body.apply(this, arguments);\n};\n`)(t)}let et,tt=[],rt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function it(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{let t=tt.length?tt.pop():rt.length;return rt[t]={refcount:1,value:e},t}}}function nt(e,t){let r=$e(t,(function(e){this.name=t,this.message=e;let{stack:r}=new Error(e);void 0!==r&&(this.stack=`${this.toString()}\n${r.replace(/^Error(:[^\n]*)?\n/,"")}`)}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},r}var ot=void 0;function at(e){let t="",r=e;for(;U[r];)t+=ot[U[r++]];return t}let st,ct=[];function At(){for(;ct.length;){let e=ct.pop();e.$$.deleteScheduled=!1,e.delete()}}var lt={};let ut;function dt(e){throw new ut(e)}function ht(e,t){for(void 0===t&&dt("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function gt(e){return e||dt(`Cannot use deleted val. handle = ${e}`),rt[e].value}let pt={};function ft(e){let t=Kr(e),r=at(t);return Wr(t),r}function mt(e,t){let r=pt[e];return void 0===r&&dt(`${t} has unknown type ${ft(e)}`),r}function Et(e){}let It=!1;function _t(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Ct(e){return"undefined"==typeof FinalizationGroup?(Ct=function(e){return e},e):(It=new FinalizationGroup((e=>{for(let t=e.next();!t.done;t=e.next()){let e=t.value;e.ptr?_t(e):console.warn(`object already deleted: ${e.ptr}`)}})),Et=function(e){It.unregister(e.$$)},(Ct=function(e){return It.register(e,e.$$,e.$$),e})(e))}let yt={};function Tt(e){for(;e.length;){let t=e.pop();e.pop()(t)}}function vt(e){return this.fromWireType(j[e>>2])}let wt,St={},bt={};function Rt(e){throw new wt(e)}function Dt(e,t,r){function i(t){let i=r(t);i.length!==e.length&&Rt("Mismatched type converter count");for(let t=0;t<e.length;++t)Ot(e[t],i[t])}e.forEach((e=>{bt[e]=t}));let n=new Array(t.length),o=[],a=0;t.forEach(((e,t)=>{pt.hasOwnProperty(e)?n[t]=pt[e]:(o.push(e),St.hasOwnProperty(e)||(St[e]=[]),St[e].push((()=>{n[t]=pt[e],++a,a===o.length&&i(n)})))})),0===o.length&&i(n)}function Bt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function Ot(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");let{name:i}=t;if(e||dt(`type "${i}" must have a positive integer typeid pointer`),pt.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;dt(`Cannot register type '${i}' twice`)}if(pt[e]=t,delete bt[e],St.hasOwnProperty(e)){let t=St[e];delete St[e],t.forEach((e=>{e()}))}}function Qt(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function kt(e){var t;dt(`${t=e,t.$$.ptrType.registeredClass.name} instance already deleted`)}function Mt(){}let Pt,Nt={};function Lt(e,t,r){if(void 0===e[t].overloadTable){let i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||dt(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}}function xt(e,t,r){n.hasOwnProperty(e)?((void 0===r||void 0!==n[e].overloadTable&&void 0!==n[e].overloadTable[r])&&dt(`Cannot register public name '${e}' twice`),Lt(n,e,e),n.hasOwnProperty(r)&&dt(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):(n[e]=t,void 0!==r&&(n[e].numArguments=r))}function Ut(e,t,r,i,n,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=i,this.baseClass=n,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function Ft(e,t,r){for(;t!==r;)t.upcast||dt(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e}function Vt(e,t){if(null===t)return this.isReference&&dt(`null is not a valid ${this.name}`),0;t.$$||dt(`Cannot pass "${tr(t)}" as a ${this.name}`),t.$$.ptr||dt(`Cannot pass deleted object as a pointer of type ${this.name}`);let r=t.$$.ptrType.registeredClass;return Ft(t.$$.ptr,r,this.registeredClass)}function Gt(e,t){let r;if(null===t)return this.isReference&&dt(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||dt(`Cannot pass "${tr(t)}" as a ${this.name}`),t.$$.ptr||dt(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&dt(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);let i=t.$$.ptrType.registeredClass;if(r=Ft(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&dt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:dt(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{let i=t.clone();r=this.rawShare(r,it((()=>{i.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:dt("Unsupporting sharing policy")}return r}function jt(e,t){if(null===t)return this.isReference&&dt(`null is not a valid ${this.name}`),0;t.$$||dt(`Cannot pass "${tr(t)}" as a ${this.name}`),t.$$.ptr||dt(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&dt(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);let r=t.$$.ptrType.registeredClass;return Ft(t.$$.ptr,r,this.registeredClass)}function Ht(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;let i=Ht(e,t,r.baseClass);return null===i?null:r.downcast(i)}function Yt(e,t){return(!t.ptrType||!t.ptr)&&Rt("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Rt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ct(Object.create(e,{$$:{value:t}}))}function Wt(e,t,r,i,n,o,a,s,c,A,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=i,this.isSmartPointer=n,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=A,this.rawDestructor=l,n||void 0!==t.baseClass?this.toWireType=Gt:i?(this.toWireType=Vt,this.destructorFunction=null):(this.toWireType=jt,this.destructorFunction=null)}function Jt(e,t,r){n.hasOwnProperty(e)||Rt("Replacing nonexistant public symbol"),void 0!==n[e].overloadTable&&void 0!==r?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)}function Xt(e,t){let r=(e=at(e)).includes("j")?function(e,t){B(e.includes("j"),"getDynCaller should only be called with i64 sigs");let r=[];return function(){r.length=arguments.length;for(let e=0;e<arguments.length;e++)r[e]=arguments[e];return function(e,t,r){return e.includes("j")?function(e,t,r){B(`dynCall_${e}`in n,`bad function pointer type - no table for sig '${e}'`),r&&r.length?B(r.length===e.substring(1).replace(/j/g,"--").length):B(1==e.length);let i=n[`dynCall_${e}`];return r&&r.length?i.apply(null,[t].concat(r)):i.call(null,t)}(e,t,r):(B(ie.get(t),`missing table entry in dynCall: ${t}`),ie.get(t).apply(null,r))}(e,t,r)}}(e,t):ie.get(t);return"function"!=typeof r&&dt(`unknown function pointer with signature ${e}: ${t}`),r}function Kt(e,t){let r=[],i={};throw t.forEach((function e(t){if(!i[t]&&!pt[t]){if(bt[t])return void bt[t].forEach(e);r.push(t),i[t]=!0}})),new Pt(`${e}: ${r.map(ft).join([", "])}`)}function zt(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);let r=$e(e.name||"unknownFunctionName",(()=>{}));r.prototype=e.prototype;let i=new r,n=e.apply(i,t);return n instanceof Object?n:i}function qt(e,t,r,i,n){let o=t.length;o<2&&dt("argTypes array size mismatch! Must at least get return value and 'this' types!");let a=null!==t[1]&&null!==r,s=!1;for(var c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){s=!0;break}let A="void"!==t[0].name,l="",u="";for(c=0;c<o-2;++c)l+=`${0!==c?", ":""}arg${c}`,u+=`${0!==c?", ":""}arg${c}Wired`;let d=`return function ${Ze(e)}(${l}) {\nif (arguments.length !== ${o-2}) {\nthrowBindingError('function ${e} called with ' + arguments.length + ' arguments, expected ${o-2} args!');\n}\n`;s&&(d+="var destructors = [];\n");let h=s?"destructors":"null",g=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[dt,i,n,Tt,t[0],t[1]];for(a&&(d+=`var thisWired = classParam.toWireType(${h}, this);\n`),c=0;c<o-2;++c)d+=`var arg${c}Wired = argType${c}.toWireType(${h}, arg${c}); // ${t[c+2].name}\n`,g.push(`argType${c}`),p.push(t[c+2]);if(a&&(u=`thisWired${u.length>0?", ":""}${u}`),d+=`${A?"var rv = ":""}invoker(fn${u.length>0?", ":""}${u});\n`,s)d+="runDestructors(destructors);\n";else for(c=a?1:2;c<t.length;++c){let e=1===c?"thisWired":`arg${c-2}Wired`;null!==t[c].destructorFunction&&(d+=`${e}_dtor(${e}); // ${t[c].name}\n`,g.push(`${e}_dtor`),p.push(t[c].destructorFunction))}return A&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",g.push(d),zt(Function,g).apply(null,p)}function Zt(e,t){let r=[];for(let i=0;i<e;i++)r.push(G[(t>>2)+i]);return r}function $t(e,t,r){return e instanceof Object||dt(`${r} with invalid "this": ${e}`),e instanceof t.registeredClass.constructor||dt(`${r} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||dt(`cannot call emscripten binding method ${r} on deleted object`),Ft(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}function er(e){e>4&&0===--rt[e].refcount&&(rt[e]=void 0,tt.push(e))}function tr(e){if(null===e)return"null";let t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():`${e}`}function rr(e,t){switch(t){case 2:return function(e){return this.fromWireType(H[e>>2])};case 3:return function(e){return this.fromWireType(Y[e>>3])};default:throw new TypeError(`Unknown float type: ${e}`)}}function ir(e,t,r){switch(t){case 0:return r?function(e){return x[e]}:function(e){return U[e]};case 1:return r?function(e){return F[e>>1]}:function(e){return V[e>>1]};case 2:return r?function(e){return G[e>>2]}:function(e){return j[e>>2]};default:throw new TypeError(`Unknown integer type: ${e}`)}}let nr={},or=[],ar=[];function sr(e){try{return b.grow(e-L.byteLength+65535>>>16),te(b.buffer),1}catch(t){C(`emscripten_realloc_buffer: Attempted to grow heap from ${L.byteLength} bytes to ${e} bytes, but got error: ${t}`)}}function cr(e){ye("Cannot use emscripten_generate_pc (needed by __builtin_return_address) without -s USE_OFFSET_CONVERTER")}let Ar={};function lr(e){e.forEach((e=>{let t=cr();t&&(Ar[t]=e)}))}var ur={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){ur.lastError||(ur.lastError=e)},getNewId(e){let t=ur.counter++;for(let r=e.length;r<t;r++)e[r]=null;return t},MAX_TEMP_BUFFER_SIZE:2097152,numTempVertexBuffersPerSize:64,log2ceilLookup:e=>32-Math.clz32(0===e?0:e-1),generateTempBuffers(e,t){let r=ur.log2ceilLookup(ur.MAX_TEMP_BUFFER_SIZE);t.tempVertexBufferCounters1=[],t.tempVertexBufferCounters2=[],t.tempVertexBufferCounters1.length=t.tempVertexBufferCounters2.length=r+1,t.tempVertexBuffers1=[],t.tempVertexBuffers2=[],t.tempVertexBuffers1.length=t.tempVertexBuffers2.length=r+1,t.tempIndexBuffers=[],t.tempIndexBuffers.length=r+1;for(var i=0;i<=r;++i){t.tempIndexBuffers[i]=null,t.tempVertexBufferCounters1[i]=t.tempVertexBufferCounters2[i]=0;let e=ur.numTempVertexBuffersPerSize;t.tempVertexBuffers1[i]=[],t.tempVertexBuffers2[i]=[];let r=t.tempVertexBuffers1[i],n=t.tempVertexBuffers2[i];r.length=n.length=e;for(let t=0;t<e;++t)r[t]=n[t]=null}if(e){t.tempQuadIndexBuffer=Lr.createBuffer(),t.GLctx.bindBuffer(34963,t.tempQuadIndexBuffer);let e=ur.MAX_TEMP_BUFFER_SIZE>>1,r=new Uint16Array(e);i=0;let n=0;for(;r[i++]=n,!(i>=e||(r[i++]=n+1,i>=e)||(r[i++]=n+2,i>=e)||(r[i++]=n,i>=e)||(r[i++]=n+2,i>=e)||(r[i++]=n+3,i>=e));)n+=4;t.GLctx.bufferData(34963,r,35044),t.GLctx.bindBuffer(34963,null)}},getTempVertexBuffer:function(e){let t=ur.log2ceilLookup(e),r=ur.currentContext.tempVertexBuffers1[t],i=ur.currentContext.tempVertexBufferCounters1[t];ur.currentContext.tempVertexBufferCounters1[t]=ur.currentContext.tempVertexBufferCounters1[t]+1&ur.numTempVertexBuffersPerSize-1;let n=r[i];if(n)return n;let o=Lr.getParameter(34964);return r[i]=Lr.createBuffer(),Lr.bindBuffer(34962,r[i]),Lr.bufferData(34962,1<<t,35048),Lr.bindBuffer(34962,o),r[i]},getTempIndexBuffer:function(e){let t=ur.log2ceilLookup(e),r=ur.currentContext.tempIndexBuffers[t];if(r)return r;let i=Lr.getParameter(34965);return ur.currentContext.tempIndexBuffers[t]=Lr.createBuffer(),Lr.bindBuffer(34963,ur.currentContext.tempIndexBuffers[t]),Lr.bufferData(34963,1<<t,35048),Lr.bindBuffer(34963,i),ur.currentContext.tempIndexBuffers[t]},newRenderingFrameStarted:function(){if(!ur.currentContext)return;let e=ur.currentContext.tempVertexBuffers1;ur.currentContext.tempVertexBuffers1=ur.currentContext.tempVertexBuffers2,ur.currentContext.tempVertexBuffers2=e,e=ur.currentContext.tempVertexBufferCounters1,ur.currentContext.tempVertexBufferCounters1=ur.currentContext.tempVertexBufferCounters2,ur.currentContext.tempVertexBufferCounters2=e;let t=ur.log2ceilLookup(ur.MAX_TEMP_BUFFER_SIZE);for(let e=0;e<=t;++e)ur.currentContext.tempVertexBufferCounters1[e]=0},getSource(e,t,r,i){let n="";for(let e=0;e<t;++e){let t=i?G[i+4*e>>2]:-1;n+=k(G[r+4*e>>2],t<0?void 0:t)}return n},calcBufLength:function(e,t,r,i){return r>0?i*r:e*ur.byteSizeByType[t-ur.byteSizeByTypeRoot]*i},usedTempBuffers:[],preDrawHandleClientVertexAttribBindings:function(e){ur.resetBufferBinding=!1;for(let t=0;t<ur.currentContext.maxVertexAttribs;++t){let r=ur.currentContext.clientBuffers[t];if(!r.clientside||!r.enabled)continue;ur.resetBufferBinding=!0;let i=ur.calcBufLength(r.size,r.type,r.stride,e),n=ur.getTempVertexBuffer(i);Lr.bindBuffer(34962,n),Lr.bufferSubData(34962,0,U.subarray(r.ptr,r.ptr+i)),r.vertexAttribPointerAdaptor.call(Lr,t,r.size,r.type,r.normalized,r.stride,0)}},postDrawHandleClientVertexAttribBindings:function(){ur.resetBufferBinding&&Lr.bindBuffer(34962,ur.buffers[Lr.currentArrayBufferBinding])},createContext(e,t){t.renderViaOffscreenBackBuffer&&(t.preserveDrawingBuffer=!0);let r=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);return r?ur.registerContext(r,t):0},enableOffscreenFramebufferAttributes(e){e.renderViaOffscreenBackBuffer=!0,e.preserveDrawingBuffer=!0},createOffscreenFramebuffer(e){let t=e.GLctx,r=t.createFramebuffer();if(t.bindFramebuffer(36160,r),e.defaultFbo=r,e.defaultFboForbidBlitFramebuffer=!1,t.getContextAttributes().antialias)e.defaultFboForbidBlitFramebuffer=!0;else{let t=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/);if(null!=t){let r=t[1];e.defaultFboForbidBlitFramebuffer=r<67}}e.defaultColorTarget=t.createTexture(),e.defaultDepthTarget=t.createRenderbuffer(),ur.resizeOffscreenFramebuffer(e),t.bindTexture(3553,e.defaultColorTarget),t.texParameteri(3553,10241,9728),t.texParameteri(3553,10240,9728),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.texImage2D(3553,0,6408,t.canvas.width,t.canvas.height,0,6408,5121,null),t.framebufferTexture2D(36160,36064,3553,e.defaultColorTarget,0),t.bindTexture(3553,null),t.createRenderbuffer(),t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.canvas.width,t.canvas.height),t.framebufferRenderbuffer(36160,36096,36161,e.defaultDepthTarget),t.bindRenderbuffer(36161,null);let i=t.createBuffer();t.bindBuffer(34962,i),t.bufferData(34962,new Float32Array([-1,-1,-1,1,1,-1,1,1]),35044),t.bindBuffer(34962,null),e.blitVB=i;let n=t.createShader(35633);t.shaderSource(n,"attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }"),t.compileShader(n);let o=t.createShader(35632);t.shaderSource(o,"varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }"),t.compileShader(o);let a=t.createProgram();t.attachShader(a,n),t.attachShader(a,o),t.linkProgram(a),e.blitProgram=a,e.blitPosLoc=t.getAttribLocation(a,"pos"),t.useProgram(a),t.uniform1i(t.getUniformLocation(a,"sampler"),0),t.useProgram(null),e.defaultVao=void 0,t.createVertexArray&&(e.defaultVao=t.createVertexArray(),t.bindVertexArray(e.defaultVao),t.enableVertexAttribArray(e.blitPosLoc),t.bindVertexArray(null))},resizeOffscreenFramebuffer(e){let t=e.GLctx;if(e.defaultColorTarget){let r=t.getParameter(32873);t.bindTexture(3553,e.defaultColorTarget),t.texImage2D(3553,0,6408,t.drawingBufferWidth,t.drawingBufferHeight,0,6408,5121,null),t.bindTexture(3553,r)}if(e.defaultDepthTarget){let r=t.getParameter(36007);t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.drawingBufferWidth,t.drawingBufferHeight),t.bindRenderbuffer(36161,r)}},blitOffscreenFramebuffer(e){let t=e.GLctx,r=t.getParameter(3089);r&&t.disable(3089);let i=t.getParameter(36006);if(t.blitFramebuffer&&!e.defaultFboForbidBlitFramebuffer)t.bindFramebuffer(36008,e.defaultFbo),t.bindFramebuffer(36009,null),t.blitFramebuffer(0,0,t.canvas.width,t.canvas.height,0,0,t.canvas.width,t.canvas.height,16384,9728);else{let r=function(){t.vertexAttribPointer(e.blitPosLoc,2,5126,!1,0,0),t.drawArrays(5,0,4)};t.bindFramebuffer(36160,null);let i=t.getParameter(35725);t.useProgram(e.blitProgram);let a=t.getParameter(34964);t.bindBuffer(34962,e.blitVB);let s=t.getParameter(34016);t.activeTexture(33984);let c=t.getParameter(32873);t.bindTexture(3553,e.defaultColorTarget);let A=t.getParameter(3042);A&&t.disable(3042);let l=t.getParameter(2884);l&&t.disable(2884);let u=t.getParameter(2929);u&&t.disable(2929);let d=t.getParameter(2960);if(d&&t.disable(2960),e.defaultVao){let i=t.getParameter(34229);t.bindVertexArray(e.defaultVao),r(),t.bindVertexArray(i)}else{let i={buffer:t.getVertexAttrib(e.blitPosLoc,34975),size:t.getVertexAttrib(e.blitPosLoc,34339),stride:t.getVertexAttrib(e.blitPosLoc,34340),type:t.getVertexAttrib(e.blitPosLoc,34341),normalized:t.getVertexAttrib(e.blitPosLoc,34922),pointer:t.getVertexAttribOffset(e.blitPosLoc,34373)},a=t.getParameter(34921),s=[];for(var n=0;n<a;++n){var o=t.getVertexAttrib(n,34338);let r=n==e.blitPosLoc;o&&!r&&t.disableVertexAttribArray(n),!o&&r&&t.enableVertexAttribArray(n),s[n]=o}for(r(),n=0;n<a;++n){o=s[n];let r=n==e.blitPosLoc;o&&!r&&t.enableVertexAttribArray(n),!o&&r&&t.disableVertexAttribArray(n)}t.bindBuffer(34962,i.buffer),t.vertexAttribPointer(e.blitPosLoc,i.size,i.type,i.normalized,i.stride,i.offset)}d&&t.enable(2960),u&&t.enable(2929),l&&t.enable(2884),A&&t.enable(3042),t.bindTexture(3553,c),t.activeTexture(s),t.bindBuffer(34962,a),t.useProgram(i)}t.bindFramebuffer(36160,i),r&&t.enable(3089)},registerContext(e,t){let r=ur.getNewId(ur.contexts),i={handle:r,attributes:t,version:t.majorVersion,GLctx:e};e.canvas&&(e.canvas.GLctxObject=i),ur.contexts[r]=i,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&ur.initExtensions(i),i.maxVertexAttribs=i.GLctx.getParameter(34921),i.clientBuffers=[];for(let e=0;e<i.maxVertexAttribs;e++)i.clientBuffers[e]={enabled:!1,clientside:!1,size:0,type:0,normalized:0,stride:0,ptr:0,vertexAttribPointerAdaptor:null};return ur.generateTempBuffers(!1,i),t.renderViaOffscreenBackBuffer&&ur.createOffscreenFramebuffer(i),r},makeContextCurrent:e=>(ur.currentContext=ur.contexts[e],n.ctx=Lr=ur.currentContext&&ur.currentContext.GLctx,!(e&&!Lr)),getContext:e=>ur.contexts[e],deleteContext(e){ur.currentContext===ur.contexts[e]&&(ur.currentContext=null),"object"==typeof dr&&dr.removeAllHandlersOnTarget(ur.contexts[e].GLctx.canvas),ur.contexts[e]&&ur.contexts[e].GLctx.canvas&&(ur.contexts[e].GLctx.canvas.GLctxObject=void 0),ur.contexts[e]=null},initExtensions(e){if(e||(e=ur.currentContext),e.initExtensionsDone)return;e.initExtensionsDone=!0;let{GLctx:t}=e;(function(e){let t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},e.drawArraysInstanced=function(e,r,i,n){t.drawArraysInstancedANGLE(e,r,i,n)},e.drawElementsInstanced=function(e,r,i,n,o){t.drawElementsInstancedANGLE(e,r,i,n,o)})})(t),function(e){let t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(t),function(e){let t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,r){t.drawBuffersWEBGL(e,r)})}(t),function(e){e.dibvbi=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")}(t),function(e){e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance")}(t),e.version>=2&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!t.disjointTimerQueryExt)&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query")),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach((e=>{!e.includes("lose_context")&&!e.includes("debug")&&t.getExtension(e)}))}},dr={inEventHandler:0,removeAllEventListeners(){for(let e=dr.eventHandlers.length-1;e>=0;--e)dr._removeHandler(e);dr.eventHandlers=[],dr.deferredCalls=[]},registerRemoveEventListeners(){dr.removeEventListenersRegistered||(Ae.push(dr.removeAllEventListeners),dr.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall(e,t,r){function i(e,t){if(e.length!=t.length)return!1;for(let r in e)if(e[r]!=t[r])return!1;return!0}for(let t in dr.deferredCalls){let n=dr.deferredCalls[t];if(n.targetFunction==e&&i(n.argsList,r))return}dr.deferredCalls.push({targetFunction:e,precedence:t,argsList:r}),dr.deferredCalls.sort(((e,t)=>e.precedence<t.precedence))},removeDeferredCalls(e){for(let t=0;t<dr.deferredCalls.length;++t)dr.deferredCalls[t].targetFunction==e&&(dr.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:()=>dr.inEventHandler&&dr.currentEventHandler.allowsDeferredCalls,runDeferredCalls(){if(dr.canPerformEventHandlerRequests())for(let e=0;e<dr.deferredCalls.length;++e){let t=dr.deferredCalls[e];dr.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget(e,t){for(let r=0;r<dr.eventHandlers.length;++r)dr.eventHandlers[r].target==e&&(!t||t==dr.eventHandlers[r].eventTypeString)&&dr._removeHandler(r--)},_removeHandler(e){let t=dr.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),dr.eventHandlers.splice(e,1)},registerOrRemoveHandler(e){let t=function(t){++dr.inEventHandler,dr.currentEventHandler=e,dr.runDeferredCalls(),e.handlerFunc(t),dr.runDeferredCalls(),--dr.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),dr.eventHandlers.push(e),dr.registerRemoveEventListeners();else for(let t=0;t<dr.eventHandlers.length;++t)dr.eventHandlers[t].target==e.target&&dr.eventHandlers[t].eventTypeString==e.eventTypeString&&dr._removeHandler(t--)},getNodeNameForTarget:e=>e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":"",fullscreenEnabled:()=>document.fullscreenEnabled||document.webkitFullscreenEnabled};let hr=["default","low-power","high-performance"],gr=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function pr(e){return"number"==typeof e&&(e=k(e)),e&&"#canvas"!==e?void 0!==ur&&ur.offscreenCanvases[e]?ur.offscreenCanvases[e]:function(e){y("Rules for selecting event targets in HTML5 API are changing: instead of using document.getElementById() that only can refer to elements by their DOM ID, new event target selection mechanism uses the more flexible function document.querySelector() that can look up element names, classes, and complex CSS selectors. Build with -s DISABLE_DEPRECATED_FIND_EVENT_TARGET_BEHAVIOR=1 to change to the new lookup rules. See https://github.com/emscripten-core/emscripten/pull/7977 for more details.");try{return e&&("number"==typeof e&&(e=gr[e]||k(e)),"#window"!==e)?"#document"===e?document:"#screen"===e?screen:"#canvas"===e?n.canvas:"string"==typeof e?document.getElementById(e):e:window}catch(e){return null}}(e):void 0!==ur&&ur.offscreenCanvases.canvas?ur.offscreenCanvases.canvas:n.canvas}function fr(){return ur.currentContext?ur.currentContext.handle:0}function mr(e){return ur.makeContextCurrent(e)?0:-5}n._emscripten_webgl_get_current_context=fr,n._emscripten_webgl_make_context_current=mr;let Er={};function Ir(){if(!Ir.strings){let t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:`${("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")}.UTF-8`,_:c||"./this.program"};for(var e in Er)void 0===Er[e]?delete t[e]:t[e]=Er[e];let r=[];for(var e in t)r.push(`${e}=${t[e]}`);Ir.strings=r}return Ir.strings}let _r=[];function Cr(e,t,r,i){for(let n=0;n<e;n++){let e=Lr[r](),o=e&&ur.getNewId(i);e?(e.name=o,i[o]=e):ur.recordError(1282),G[t+4*n>>2]=o}}function yr(e){let t=N(e)+1,r=Jr(t);return P(e,r,t),r}function Tr(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function vr(e){return 0==(e-=5120)?x:1==e?U:2==e?F:4==e?G:6==e?H:5==e||28922==e||28520==e||30779==e||30782==e?j:V}function wr(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function Sr(e,t,r,i,n,o){let a=vr(e),s=wr(a),c=1<<s,A=function(e){return{5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[e-6402]||1}(t)*c,l=function(e,t,r,i){var n;return t*(e*r+(n=i)-1&-n)}(r,i,A,ur.unpackAlignment);return a.subarray(n>>s,n+l>>s)}function br(e){let t=Lr.currentProgram;if(t){let r=t.uniformLocsById[e];return"number"==typeof r&&(t.uniformLocsById[e]=r=Lr.getUniformLocation(t,t.uniformArrayNamesById[e]+(r>0?`[${r}]`:""))),r}ur.recordError(1282)}let Rr=[],Dr=[];function Br(){if(Br.called)return;Br.called=!0;let e=(new Date).getFullYear(),t=new Date(e,0,1),r=new Date(e,6,1),i=t.getTimezoneOffset(),n=r.getTimezoneOffset(),o=Math.max(i,n);function a(e){let t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}G[$r()>>2]=60*o,G[Zr()>>2]=+(i!=n);let s=a(t),c=a(r),A=$(s),l=$(c);n<i?(G[qr()>>2]=A,G[qr()+4>>2]=l):(G[qr()>>2]=l,G[qr()+4>>2]=A)}function Or(e){return e%4==0&&(e%100!=0||e%400==0)}function Qr(e,t){let r=0;for(let i=0;i<=t;r+=e[i++]);return r}let kr=[31,29,31,30,31,30,31,31,30,31,30,31],Mr=[31,28,31,30,31,30,31,31,30,31,30,31];function Pr(e,t){let r=new Date(e.getTime());for(;t>0;){let e=Or(r.getFullYear()),i=r.getMonth(),n=(e?kr:Mr)[i];if(!(t>n-r.getDate()))return r.setDate(r.getDate()+t),r;t-=n-r.getDate()+1,r.setDate(1),i<11?r.setMonth(i+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}function Nr(e,t,r,i){let n=G[i+40>>2],o={tm_sec:G[i>>2],tm_min:G[i+4>>2],tm_hour:G[i+8>>2],tm_mday:G[i+12>>2],tm_mon:G[i+16>>2],tm_year:G[i+20>>2],tm_wday:G[i+24>>2],tm_yday:G[i+28>>2],tm_isdst:G[i+32>>2],tm_gmtoff:G[i+36>>2],tm_zone:n?k(n):""},a=k(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in s)a=a.replace(new RegExp(c,"g"),s[c]);let A=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function u(e,t,r){let i="number"==typeof e?e.toString():e||"";for(;i.length<t;)i=r[0]+i;return i}function d(e,t){return u(e,t,"0")}function h(e,t){function r(e){return e<0?-1:e>0?1:0}let i;return 0===(i=r(e.getFullYear()-t.getFullYear()))&&0===(i=r(e.getMonth()-t.getMonth()))&&(i=r(e.getDate()-t.getDate())),i}function g(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function p(e){let t=Pr(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),i=new Date(t.getFullYear()+1,0,4),n=g(r),o=g(i);return h(n,t)<=0?h(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}let f={"%a":e=>A[e.tm_wday].substring(0,3),"%A":e=>A[e.tm_wday],"%b":e=>l[e.tm_mon].substring(0,3),"%B":e=>l[e.tm_mon],"%C":e=>d((e.tm_year+1900)/100|0,2),"%d":e=>d(e.tm_mday,2),"%e":e=>u(e.tm_mday,2," "),"%g":e=>p(e).toString().substring(2),"%G":e=>p(e),"%H":e=>d(e.tm_hour,2),"%I"(e){let t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":e=>d(e.tm_mday+Qr(Or(e.tm_year+1900)?kr:Mr,e.tm_mon-1),3),"%m":e=>d(e.tm_mon+1,2),"%M":e=>d(e.tm_min,2),"%n":()=>"\n","%p":e=>e.tm_hour>=0&&e.tm_hour<12?"AM":"PM","%S":e=>d(e.tm_sec,2),"%t":()=>"\t","%u":e=>e.tm_wday||7,"%U"(e){let t=new Date(e.tm_year+1900,0,1),r=0===t.getDay()?t:Pr(t,7-t.getDay()),i=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(h(r,i)<0){let e=Qr(Or(i.getFullYear())?kr:Mr,i.getMonth()-1)-31,t=31-r.getDate()+e+i.getDate();return d(Math.ceil(t/7),2)}return 0===h(r,t)?"01":"00"},"%V"(e){let t,r=new Date(e.tm_year+1900,0,4),i=new Date(e.tm_year+1901,0,4),n=g(r),o=g(i),a=Pr(new Date(e.tm_year+1900,0,1),e.tm_yday);return h(a,n)<0?"53":h(o,a)<=0?"01":(t=n.getFullYear()<e.tm_year+1900?e.tm_yday+32-n.getDate():e.tm_yday+1-n.getDate(),d(Math.ceil(t/7),2))},"%w":e=>e.tm_wday,"%W"(e){let t=new Date(e.tm_year,0,1),r=1===t.getDay()?t:Pr(t,0===t.getDay()?1:7-t.getDay()+1),i=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(h(r,i)<0){let e=Qr(Or(i.getFullYear())?kr:Mr,i.getMonth()-1)-31,t=31-r.getDate()+e+i.getDate();return d(Math.ceil(t/7),2)}return 0===h(r,t)?"01":"00"},"%y":e=>(e.tm_year+1900).toString().substring(2),"%Y":e=>e.tm_year+1900,"%z"(e){let t=e.tm_gmtoff,r=t>=0;return t=Math.abs(t)/60,t=t/60*100+t%60,(r?"+":"-")+`0000${t}`.slice(-4)},"%Z":e=>e.tm_zone,"%%":()=>"%"};for(var c in f)a.includes(c)&&(a=a.replace(new RegExp(c,"g"),f[c](o)));let m=Hr(a,!1);return m.length>t?0:(function(e,t){B(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),x.set(e,t)}(m,e),m.length-1)}n.requestFullscreen=function(e,t){ke.requestFullscreen(e,t)},n.requestFullScreen=function(){ke.requestFullScreen()},n.requestAnimationFrame=function(e){ke.requestAnimationFrame(e)},n.setCanvasSize=function(e,t,r){ke.setCanvasSize(e,t,r)},n.pauseMainLoop=function(){ke.mainLoop.pause()},n.resumeMainLoop=function(){ke.mainLoop.resume()},n.getUserMedia=function(){ke.getUserMedia()},n.createContext=function(e,t,r,i){return ke.createContext(e,t,r,i)};let Lr,xr=function(e,t,r,i){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=ze.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=i},Ur=365,Fr=146;Object.defineProperties(xr.prototype,{read:{get(){return(this.mode&Ur)===Ur},set(e){e?this.mode|=Ur:this.mode&=~Ur}},write:{get(){return(this.mode&Fr)===Fr},set(e){e?this.mode|=Fr:this.mode&=~Fr}},isFolder:{get(){return ze.isDir(this.mode)}},isDevice:{get(){return ze.isChrdev(this.mode)}}}),ze.FSNode=xr,ze.staticInit(),n.FS_createPath=ze.createPath,n.FS_createDataFile=ze.createDataFile,n.FS_createPreloadedFile=ze.createPreloadedFile,n.FS_createLazyFile=ze.createLazyFile,n.FS_createDevice=ze.createDevice,n.FS_unlink=ze.unlink,n.count_emval_handles=function(){let e=0;for(let t=5;t<rt.length;++t)void 0!==rt[t]&&++e;return e},n.get_first_emval=function(){for(let e=5;e<rt.length;++e)if(void 0!==rt[e])return rt[e];return null},et=n.PureVirtualError=nt(Error,"PureVirtualError"),function(){let e=new Array(256);for(let t=0;t<256;++t)e[t]=String.fromCharCode(t);ot=e}(),n.getInheritedInstanceCount=function(){return Object.keys(lt).length},n.getLiveInheritedInstances=function(){let e=[];for(let t in lt)lt.hasOwnProperty(t)&&e.push(lt[t]);return e},n.flushPendingDeletes=At,n.setDelayFunction=function(e){st=e,ct.length&&st&&st(At)},ut=n.BindingError=nt(Error,"BindingError"),wt=n.InternalError=nt(Error,"InternalError"),Mt.prototype.isAliasOf=function(e){if(!(this instanceof Mt&&e instanceof Mt))return!1;let t=this.$$.ptrType.registeredClass,r=this.$$.ptr,i=e.$$.ptrType.registeredClass,n=e.$$.ptr;for(;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;i.baseClass;)n=i.upcast(n),i=i.baseClass;return t===i&&r===n},Mt.prototype.clone=function(){if(this.$$.ptr||kt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;let e=Ct(Object.create(Object.getPrototypeOf(this),{$$:{value:Qt(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},Mt.prototype.delete=function(){this.$$.ptr||kt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&dt("Object already scheduled for deletion"),Et(this),_t(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},Mt.prototype.isDeleted=function(){return!this.$$.ptr},Mt.prototype.deleteLater=function(){return this.$$.ptr||kt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&dt("Object already scheduled for deletion"),ct.push(this),1===ct.length&&st&&st(At),this.$$.deleteScheduled=!0,this},Wt.prototype.getPointee=function(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},Wt.prototype.destructor=function(e){this.rawDestructor&&this.rawDestructor(e)},Wt.prototype.argPackAdvance=8,Wt.prototype.readValueFromPointer=vt,Wt.prototype.deleteObject=function(e){null!==e&&e.delete()},Wt.prototype.fromWireType=function(e){let t=this.getPointee(e);if(!t)return this.destructor(e),null;let r=function(e,t){return t=ht(e,t),lt[t]}(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();let i=r.clone();return this.destructor(e),i}function i(){return this.isSmartPointer?Yt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Yt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}let n,o=this.registeredClass.getActualType(t),a=Nt[o];if(!a)return i.call(this);n=this.isConst?a.constPointerType:a.pointerType;let s=Ht(t,this.registeredClass,n.registeredClass);return null===s?i.call(this):this.isSmartPointer?Yt(n.registeredClass.instancePrototype,{ptrType:n,ptr:s,smartPtrType:this,smartPtr:e}):Yt(n.registeredClass.instancePrototype,{ptrType:n,ptr:s})},Pt=n.UnboundTypeError=nt(Error,"UnboundTypeError");for(var Vr=0;Vr<32;++Vr)_r.push(new Array(Vr));let Gr=new Float32Array(288);for(Vr=0;Vr<288;++Vr)Rr[Vr]=Gr.subarray(0,Vr+1);let jr=new Int32Array(288);for(Vr=0;Vr<288;++Vr)Dr[Vr]=jr.subarray(0,Vr+1);function Hr(e,t,r){let i=r>0?r:N(e)+1,n=new Array(i),o=M(e,n,0,n.length);return t&&(n.length=o),n}"function"==typeof atob&&atob;var Yr={HaveOffsetConverter:function(){return"undefined"!=typeof wasmOffsetConverter},__cxa_allocate_exception:function(e){return Jr(e+16)+16},__cxa_atexit:function(e,t){},__cxa_begin_catch:function(e){let t=new Le(e),r=t.get_exception_info();return r.get_caught()||r.set_caught(!0),r.set_rethrown(!1),xe.push(t),function(e){e.add_ref()}(r),t.get_exception_ptr()},__cxa_end_catch:function(){ii(0),B(xe.length>0);let e=xe.pop();(function(e){if(e.release_ref()&&!e.get_rethrown()){let t=e.get_destructor();t&&ie.get(t)(e.excPtr),Fe(e.excPtr)}})(e.get_exception_info()),e.free(),Ue=0},__cxa_find_matching_catch_2:function(){let e=Ue;if(!e)return w(0),0;let t=new Ne(e).get_type(),r=new Le;if(r.set_base_ptr(e),r.set_adjusted_ptr(e),!t)return w(0),0|r.ptr;let i=Array.prototype.slice.call(arguments);for(let e=0;e<i.length;e++){let n=i[e];if(0===n||n===t)break;if(ni(n,t,r.get_adjusted_ptr_addr()))return w(n),0|r.ptr}return w(t),0|r.ptr},__cxa_find_matching_catch_3:function(){let e=Ue;if(!e)return w(0),0;let t=new Ne(e).get_type(),r=new Le;if(r.set_base_ptr(e),r.set_adjusted_ptr(e),!t)return w(0),0|r.ptr;let i=Array.prototype.slice.call(arguments);for(let e=0;e<i.length;e++){let n=i[e];if(0===n||n===t)break;if(ni(n,t,r.get_adjusted_ptr_addr()))return w(n),0|r.ptr}return w(t),0|r.ptr},__cxa_free_exception:Fe,__cxa_rethrow:function(){let e=xe.pop();e||ye("no exception to throw");let t=e.get_exception_info(),r=e.get_base_ptr();throw t.get_rethrown()?e.free():(xe.push(e),t.set_rethrown(!0),t.set_caught(!1)),Ue=r,`${r} - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch.`},__cxa_thread_atexit:function(e,t){},__cxa_throw:function(e,t,r){throw new Ne(e).init(t,r),Ue=e,`${e} - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch.`},__resumeException:function(e){let t=new Le(e),r=t.get_base_ptr();throw Ue||(Ue=r),t.free(),`${r} - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch.`},__sys_fcntl64:function(e,t,r){qe.varargs=r;try{let r=qe.getStreamFromFD(e);switch(t){case 0:{if((i=qe.get())<0)return-28;let e;return e=ze.open(r.path,r.flags,0,i),e.fd}case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var i=qe.get();return r.flags|=i,0;case 12:return i=qe.get(),F[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Ve(28),-1}}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),-e.errno}},__sys_ioctl:function(e,t,r){qe.varargs=r;try{let r=qe.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var i=qe.get();return G[i>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return i=qe.get(),ze.ioctl(r,t,i);default:ye(`bad ioctl syscall ${t}`)}}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),-e.errno}},__sys_mmap2:function(e,t,r,i,n,o){try{return function(e,t,r,i,n,o){o<<=12;let a,s=!1;if(16&i&&e%65536!=0)return-28;if(32&i){if(a=We(t),!a)return-48;s=!0}else{let c=ze.getStream(n);if(!c)return-8;let A=ze.mmap(c,e,t,o,r,i);a=A.ptr,s=A.allocated}return qe.mappings[a]={malloc:a,len:t,allocated:s,fd:n,prot:r,flags:i,offset:o},a}(e,t,r,i,n,o)}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),-e.errno}},__sys_open:function(e,t,r){qe.varargs=r;try{let i=qe.getStr(e),n=r?qe.get():0;return ze.open(i,t,n).fd}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),-e.errno}},__sys_stat64:function(e,t){try{return e=qe.getStr(e),qe.doStat(ze.stat,e,t)}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),-e.errno}},_embind_create_inheriting_constructor:function(e,t,r){e=at(e),t=mt(t,"wrapper"),r=gt(r);let i=[].slice,{registeredClass:n}=t,o=n.instancePrototype,{baseClass:a}=n,s=a.instancePrototype,c=n.baseClass.constructor,A=$e(e,(function(){n.baseClass.pureVirtualFunctions.forEach((e=>{if(this[e]===s[e])throw new et(`Pure virtual function ${e} must be implemented in JavaScript`)})),Object.defineProperty(this,"__parent",{value:o}),this.__construct.apply(this,i.call(arguments))}));o.__construct=function(){this===o&&dt("Pass correct 'this' to __construct");let e=c.implement.apply(void 0,[this].concat(i.call(arguments)));Et(e);let{$$:t}=e;e.notifyOnDestruction(),t.preservePointerOnDelete=!0,Object.defineProperties(this,{$$:{value:t}}),Ct(this),function(e,t,r){t=ht(e,t),lt.hasOwnProperty(t)?dt(`Tried to register registered instance: ${t}`):lt[t]=r}(n,t.ptr,this)},o.__destruct=function(){this===o&&dt("Pass correct 'this' to __destruct"),Et(this),function(e,t){t=ht(e,t),lt.hasOwnProperty(t)?delete lt[t]:dt(`Tried to unregister unregistered instance: ${t}`)}(n,this.$$.ptr)},A.prototype=Object.create(o);for(let e in r)A.prototype[e]=r[e];return it(A)},_embind_finalize_value_object:function(e){let t=yt[e];delete yt[e];let{rawConstructor:r}=t,{rawDestructor:i}=t,n=t.fields;Dt([e],n.map((e=>e.getterReturnType)).concat(n.map((e=>e.setterArgumentType))),(e=>{let o={};return n.forEach(((t,r)=>{let{fieldName:i}=t,a=e[r],{getter:s}=t,{getterContext:c}=t,A=e[r+n.length],{setter:l}=t,{setterContext:u}=t;o[i]={read:e=>a.fromWireType(s(c,e)),write(e,t){let r=[];l(u,e,A.toWireType(r,t)),Tt(r)}}})),[{name:t.name,fromWireType(e){let t={};for(let r in o)t[r]=o[r].read(e);return i(e),t},toWireType(e,t){for(var n in o)if(!(n in t))throw new TypeError(`Missing field:  "${n}"`);let a=r();for(n in o)o[n].write(a,t[n]);return null!==e&&e.push(i,a),a},argPackAdvance:8,readValueFromPointer:vt,destructorFunction:i}]}))},_embind_register_bigint:function(e,t,r,i,n){},_embind_register_bool:function(e,t,r,i,n){let o=Bt(r);Ot(e,{name:t=at(t),fromWireType:e=>!!e,toWireType:(e,t)=>t?i:n,argPackAdvance:8,readValueFromPointer(e){let i;if(1===r)i=x;else if(2===r)i=F;else{if(4!==r)throw new TypeError(`Unknown boolean type size: ${t}`);i=G}return this.fromWireType(i[e>>o])},destructorFunction:null})},_embind_register_class:function(e,t,r,i,n,o,a,s,c,A,l,u,d){l=at(l),o=Xt(n,o),s&&(s=Xt(a,s)),A&&(A=Xt(c,A)),d=Xt(u,d);let h=Ze(l);xt(h,(()=>{Kt(`Cannot construct ${l} due to unbound types`,[i])})),Dt([e,t,r],i?[i]:[],(t=>{let r,n;t=t[0],i?(r=t.registeredClass,n=r.instancePrototype):n=Mt.prototype;let a=$e(h,(function(){if(Object.getPrototypeOf(this)!==c)throw new ut(`Use 'new' to construct ${l}`);if(void 0===u.constructor_body)throw new ut(`${l} has no accessible constructor`);let e=u.constructor_body[arguments.length];if(void 0===e)throw new ut(`Tried to invoke ctor of ${l} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(u.constructor_body).toString()}) parameters instead!`);return e.apply(this,arguments)}));var c=Object.create(n,{constructor:{value:a}});a.prototype=c;var u=new Ut(l,a,c,d,r,o,s,A);let g=new Wt(l,u,!0,!1,!1),p=new Wt(`${l}*`,u,!1,!1,!1),f=new Wt(`${l} const*`,u,!1,!0,!1);return Nt[e]={pointerType:p,constPointerType:f},Jt(h,a),[g,p,f]}))},_embind_register_class_class_function:function(e,t,r,i,n,o,a){let s=Zt(r,i);t=at(t),o=Xt(n,o),Dt([],[e],(e=>{let i=`${(e=e[0]).name}.${t}`;function n(){Kt(`Cannot call ${i} due to unbound types`,s)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);let c=e.registeredClass.constructor;return void 0===c[t]?(n.argCount=r-1,c[t]=n):(Lt(c,t,i),c[t].overloadTable[r-1]=n),Dt([],s,(e=>{let n=[e[0],null].concat(e.slice(1)),s=qt(i,n,null,o,a);return void 0===c[t].overloadTable?(s.argCount=r-1,c[t]=s):c[t].overloadTable[r-1]=s,[]})),[]}))},_embind_register_class_constructor:function(e,t,r,i,n,o){B(t>0);let a=Zt(t,r);n=Xt(i,n),Dt([],[e],(e=>{let r=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new ut(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=function(){Kt(`Cannot construct ${e.name} due to unbound types`,a)},Dt([],a,(i=>(i.splice(1,0,null),e.registeredClass.constructor_body[t-1]=qt(r,i,null,n,o),[]))),[]}))},_embind_register_class_function:function(e,t,r,i,n,o,a,s){let c=Zt(r,i);t=at(t),o=Xt(n,o),Dt([],[e],(e=>{let i=`${(e=e[0]).name}.${t}`;function n(){Kt(`Cannot call ${i} due to unbound types`,c)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);let A=e.registeredClass.instancePrototype,l=A[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===r-2?(n.argCount=r-2,n.className=e.name,A[t]=n):(Lt(A,t,i),A[t].overloadTable[r-2]=n),Dt([],c,(n=>{let s=qt(i,n,e,o,a);return void 0===A[t].overloadTable?(s.argCount=r-2,A[t]=s):A[t].overloadTable[r-2]=s,[]})),[]}))},_embind_register_class_property:function(e,t,r,i,n,o,a,s,c,A){t=at(t),n=Xt(i,n),Dt([],[e],(e=>{let i=`${(e=e[0]).name}.${t}`,l={get(){Kt(`Cannot access ${i} due to unbound types`,[r,a])},enumerable:!0,configurable:!0};return l.set=c?function(){Kt(`Cannot access ${i} due to unbound types`,[r,a])}:function(e){dt(`${i} is a read-only property`)},Object.defineProperty(e.registeredClass.instancePrototype,t,l),Dt([],c?[r,a]:[r],(r=>{let a=r[0],l={get(){let t=$t(this,e,`${i} getter`);return a.fromWireType(n(o,t))},enumerable:!0};if(c){c=Xt(s,c);let t=r[1];l.set=function(r){let n=$t(this,e,`${i} setter`),o=[];c(A,n,t.toWireType(o,r)),Tt(o)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,l),[]})),[]}))},_embind_register_emval:function(e,t){Ot(e,{name:t=at(t),fromWireType(e){let t=rt[e].value;return er(e),t},toWireType:(e,t)=>it(t),argPackAdvance:8,readValueFromPointer:vt,destructorFunction:null})},_embind_register_float:function(e,t,r){let i=Bt(r);Ot(e,{name:t=at(t),fromWireType:e=>e,toWireType(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError(`Cannot convert "${tr(t)}" to ${this.name}`);return t},argPackAdvance:8,readValueFromPointer:rr(t,i),destructorFunction:null})},_embind_register_function:function(e,t,r,i,n,o){let a=Zt(t,r);e=at(e),n=Xt(i,n),xt(e,(()=>{Kt(`Cannot call ${e} due to unbound types`,a)}),t-1),Dt([],a,(r=>{let i=[r[0],null].concat(r.slice(1));return Jt(e,qt(e,i,null,n,o),t-1),[]}))},_embind_register_integer:function(e,t,r,i,n){t=at(t),-1===n&&(n=4294967295);let o=Bt(r),a=function(e){return e};if(0===i){let e=32-8*r;a=function(t){return t<<e>>>e}}let s=t.includes("unsigned");Ot(e,{name:t,fromWireType:a,toWireType(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError(`Cannot convert "${tr(r)}" to ${this.name}`);if(r<i||r>n)throw new TypeError(`Passing a number "${tr(r)}" from JS side to C/C++ side to an argument of type "${t}", which is outside the valid range [${i}, ${n}]!`);return s?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:ir(t,o,0!==i),destructorFunction:null})},_embind_register_memory_view:function(e,t,r){let i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function n(e){let t=j,r=t[e>>=2],n=t[e+1];return new i(L,n,r)}Ot(e,{name:r=at(r),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:function(e,t){let r="std::string"===(t=at(t));Ot(e,{name:t,fromWireType(e){let t,i=j[e>>2];if(r){let r=e+4;for(var n=0;n<=i;++n){let o=e+4+n;if(n==i||0==U[o]){let e=k(r,o-r);void 0===t?t=e:(t+="\0",t+=e),r=o+1}}}else{let r=new Array(i);for(n=0;n<i;++n)r[n]=String.fromCharCode(U[e+4+n]);t=r.join("")}return Wr(e),t},toWireType(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let i,n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||dt("Cannot pass non-string to std::string"),i=r&&n?function(){return N(t)}:function(){return t.length};let o=i(),a=Jr(4+o+1);if(j[a>>2]=o,r&&n)P(t,a+4,o+1);else if(n)for(var s=0;s<o;++s){let e=t.charCodeAt(s);e>255&&(Wr(a),dt("String has UTF-16 code units that do not fit in 8 bits")),U[a+4+s]=e}else for(s=0;s<o;++s)U[a+4+s]=t[s];return null!==e&&e.push(Wr,a),a},argPackAdvance:8,readValueFromPointer:vt,destructorFunction(e){Wr(e)}})},_embind_register_std_wstring:function(e,t,r){let i,n,o,a,s;r=at(r),2===t?(i=J,n=X,a=K,o=function(){return V},s=1):4===t&&(i=z,n=q,a=Z,o=function(){return j},s=2),Ot(e,{name:r,fromWireType(e){let r,n=j[e>>2],a=o(),c=e+4;for(let o=0;o<=n;++o){let A=e+4+o*t;if(o==n||0==a[A>>s]){let e=i(c,A-c);void 0===r?r=e:(r+="\0",r+=e),c=A+t}}return Wr(e),r},toWireType(e,i){"string"!=typeof i&&dt(`Cannot pass non-string to C++ string type ${r}`);let o=a(i),c=Jr(4+o+t);return j[c>>2]=o>>s,n(i,c+4,o+t),null!==e&&e.push(Wr,c),c},argPackAdvance:8,readValueFromPointer:vt,destructorFunction(e){Wr(e)}})},_embind_register_value_object:function(e,t,r,i,n,o){yt[e]={name:at(t),rawConstructor:Xt(r,i),rawDestructor:Xt(n,o),fields:[]}},_embind_register_value_object_field:function(e,t,r,i,n,o,a,s,c,A){yt[e].fields.push({fieldName:at(t),getterReturnType:r,getter:Xt(i,n),getterContext:o,setterArgumentType:a,setter:Xt(s,c),setterContext:A})},_embind_register_void:function(e,t){Ot(e,{isVoid:!0,name:t=at(t),argPackAdvance:0,fromWireType(){},toWireType(e,t){}})},_emval_call_void_method:function(e,t,r,i){e=or[e],t=gt(t),r=function(e){let t=nr[e];return void 0===t?at(e):t}(r),e(t,r,null,i)},_emval_decref:er,_emval_get_method_caller:function(e,t){let r=function(e,t){let r=new Array(e);for(let i=0;i<e;++i)r[i]=mt(G[(t>>2)+i],`parameter ${i}`);return r}(e,t),i=r[0],n=`${i.name}_$${r.slice(1).map((e=>e.name)).join("_")}$`,o=["retType"],a=[i],s="";for(var c=0;c<e-1;++c)s+=`${0!==c?", ":""}arg${c}`,o.push(`argType${c}`),a.push(r[1+c]);let A=`return function ${Ze(`methodCaller_${n}`)}(handle, name, destructors, args) {\n`,l=0;for(c=0;c<e-1;++c)A+=`    var arg${c} = argType${c}.readValueFromPointer(args${l?`+${l}`:""});\n`,l+=r[c+1].argPackAdvance;for(A+=`    var rv = handle[name](${s});\n`,c=0;c<e-1;++c)r[c+1].deleteObject&&(A+=`    argType${c}.deleteObject(arg${c});\n`);return i.isVoid||(A+="    return retType.toWireType(destructors, rv);\n"),A+="};\n",o.push(A),function(e){let t=or.length;return or.push(e),t}(zt(Function,o).apply(null,a))},_emval_incref:function(e){e>4&&(rt[e].refcount+=1)},_emval_take_value:function(e,t){return it((e=mt(e,"_emval_take_value")).readValueFromPointer(t))},abort:function(){ye()},clock_gettime:function(e,t){let r;if(0===e)r=Date.now();else{if(1!==e&&4!==e)return Ve(28),-1;r=be()}return G[t>>2]=r/1e3|0,G[t+4>>2]=r%1e3*1e3*1e3|0,0},dlopen:function(e,t){ye("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},dlsym:function(e,t){ye("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},emscripten_asm_const_int:function(e,t,r){let i=function(e,t){let r;for(B(Array.isArray(ar)),B(t%16==0),ar.length=0,t>>=2;r=U[e++];){B(100===r||102===r||105===r);let e=r<105;e&&1&t&&t++,ar.push(e?Y[t++>>1]:G[t]),++t}return ar}(t,r);return Re.hasOwnProperty(e)||ye(`No EM_ASM constant found at address ${e}`),Re[e].apply(null,i)},emscripten_get_heap_max:function(){return 2147483648},emscripten_memcpy_big:function(e,t,r){U.copyWithin(e,t,t+r)},emscripten_pc_get_function:function(e){ye("Cannot use emscripten_pc_get_function without -s USE_OFFSET_CONVERTER")},emscripten_resize_heap:function(e){let t=U.length;B((e>>>=0)>t);let r=2147483648;if(e>r)return C(`Cannot enlarge memory, asked to go up to ${e} bytes, but the limit is ${r} bytes!`),!1;for(let n=1;n<=4;n*=2){let o=t*(1+.2/n);o=Math.min(o,e+100663296);var i=Math.min(r,ee(Math.max(e,o),65536));if(sr(i))return!0}return C(`Failed to grow the heap from ${t} bytes to ${i} bytes, not enough memory!`),!1},emscripten_stack_snapshot:function(){let e=(new Error).stack.split("\n");return"Error"==e[0]&&e.shift(),lr(e),Ar.last_addr=cr(e[2]),Ar.last_stack=e,Ar.last_addr},emscripten_stack_unwind_buffer:function(e,t,r){let i;Ar.last_addr==e?i=Ar.last_stack:(i=(new Error).stack.split("\n"),"Error"==i[0]&&i.shift(),lr(i));let n=2;for(;i[n]&&cr(i[n])!=e;)++n;for(var o=0;o<r&&i[o+n];++o)G[t+4*o>>2]=cr(i[o+n]);return o},emscripten_thread_sleep:function(e){let t=be();for(;be()-t<e;);},emscripten_webgl_create_context:function(e,t){return function(e,t){B(t);let r=t>>2,i=G[r+6],n={alpha:!!G[r+0],depth:!!G[r+1],stencil:!!G[r+2],antialias:!!G[r+3],premultipliedAlpha:!!G[r+4],preserveDrawingBuffer:!!G[r+5],powerPreference:hr[i],failIfMajorPerformanceCaveat:!!G[r+7],majorVersion:G[r+8],minorVersion:G[r+9],enableExtensionsByDefault:G[r+10],explicitSwapControl:G[r+11],proxyContextToMainThread:G[r+12],renderViaOffscreenBackBuffer:G[r+13]},o=pr(e);if(!o)return 0;if(o.offscreenCanvas&&(o=o.offscreenCanvas),n.explicitSwapControl&&(o.transferControlToOffscreen||"undefined"!=typeof OffscreenCanvas&&o instanceof OffscreenCanvas||n.renderViaOffscreenBackBuffer||(n.renderViaOffscreenBackBuffer=!0),o.transferControlToOffscreen)){if(o.controlTransferredOffscreen){if(!ur.offscreenCanvases[o.id])return 0}else ur.offscreenCanvases[o.id]={canvas:o.transferControlToOffscreen(),canvasSharedPtr:Jr(12),id:o.id},o.controlTransferredOffscreen=!0;o=ur.offscreenCanvases[o.id]}return ur.createContext(o,n)}(e,t)},emscripten_webgl_destroy_context:function(e){ur.currentContext==e&&(ur.currentContext=0),ur.deleteContext(e)},emscripten_webgl_get_context_attributes:function(e,t){if(!t)return-5;if(!(e=ur.contexts[e]))return-3;let r=e.GLctx;if(!r)return-3;r=r.getContextAttributes(),G[t>>2]=r.alpha,G[t+4>>2]=r.depth,G[t+8>>2]=r.stencil,G[t+12>>2]=r.antialias,G[t+16>>2]=r.premultipliedAlpha,G[t+20>>2]=r.preserveDrawingBuffer;let i=r.powerPreference&&hr.indexOf(r.powerPreference);return G[t+24>>2]=i,G[t+28>>2]=r.failIfMajorPerformanceCaveat,G[t+32>>2]=e.version,G[t+36>>2]=0,G[t+40>>2]=e.attributes.enableExtensionsByDefault,0},emscripten_webgl_get_current_context:fr,emscripten_webgl_init_context_attributes:function(e){B(e);let t=e>>2;for(let e=0;e<14;++e)G[t+e]=0;G[t+0]=G[t+1]=G[t+3]=G[t+4]=G[t+8]=G[t+10]=1},emscripten_webgl_make_context_current:mr,environ_get:function(e,t){let r=0;return Ir().forEach(((i,n)=>{let o=t+r;G[e+4*n>>2]=o,function(e,t){for(let r=0;r<e.length;++r)B(e.charCodeAt(r)==e.charCodeAt(r)&255),x[0|t++]=e.charCodeAt(r);x[0|t]=0}(i,o),r+=i.length+1})),0},environ_sizes_get:function(e,t){let r=Ir();G[e>>2]=r.length;let i=0;return r.forEach((e=>{i+=e.length+1})),G[t>>2]=i,0},exit:Be,fd_close:function(e){try{let t=qe.getStreamFromFD(e);return ze.close(t),0}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),e.errno}},fd_read:function(e,t,r,i){try{let n=qe.getStreamFromFD(e),o=qe.doReadv(n,t,r);return G[i>>2]=o,0}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),e.errno}},fd_seek:function(e,t,r,i,n){try{let o=qe.getStreamFromFD(e),a=4294967296*r+(t>>>0),s=9007199254740992;return a<=-s||a>=s?-61:(ze.llseek(o,a,i),Se=[o.position>>>0,(we=o.position,+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],G[n>>2]=Se[0],G[n+4>>2]=Se[1],o.getdents&&0===a&&0===i&&(o.getdents=null),0)}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),e.errno}},fd_write:function(e,t,r,i){try{let n=qe.getStreamFromFD(e),o=qe.doWritev(n,t,r);return G[i>>2]=o,0}catch(e){return(void 0===ze||!(e instanceof ze.ErrnoError))&&ye(e),e.errno}},getTempRet0:function(){return v},getentropy:function e(t,r){e.randomDevice||(e.randomDevice=je());for(let i=0;i<r;i++)x[t+i|0]=e.randomDevice();return 0},glActiveTexture:function(e){Lr.activeTexture(e)},glAttachShader:function(e,t){Lr.attachShader(ur.programs[e],ur.shaders[t])},glBindAttribLocation:function(e,t,r){Lr.bindAttribLocation(ur.programs[e],t,k(r))},glBindBuffer:function(e,t){34962==e?Lr.currentArrayBufferBinding=t:34963==e&&(Lr.currentElementArrayBufferBinding=t),35051==e?Lr.currentPixelPackBufferBinding=t:35052==e&&(Lr.currentPixelUnpackBufferBinding=t),Lr.bindBuffer(e,ur.buffers[t])},glBindBufferBase:function(e,t,r){Lr.bindBufferBase(e,t,ur.buffers[r])},glBindFramebuffer:function(e,t){Lr.bindFramebuffer(e,t?ur.framebuffers[t]:ur.currentContext.defaultFbo)},glBindTexture:function(e,t){Lr.bindTexture(e,ur.textures[t])},glBindVertexArray:function(e){Lr.bindVertexArray(ur.vaos[e]);let t=Lr.getParameter(34965);Lr.currentElementArrayBufferBinding=t?0|t.name:0},glBufferData:function(e,t,r,i){ur.currentContext.version>=2?r?Lr.bufferData(e,U,i,r,t):Lr.bufferData(e,t,i):Lr.bufferData(e,r?U.subarray(r,r+t):t,i)},glClientWaitSync:function(e,t,r,i){return Lr.clientWaitSync(ur.syncs[e],t,function(e,t){return B(t===(0|t)),(e>>>0)+4294967296*t}(r,i))},glCompileShader:function(e){Lr.compileShader(ur.shaders[e])},glCreateProgram:function(){let e=ur.getNewId(ur.programs),t=Lr.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,ur.programs[e]=t,e},glCreateShader:function(e){let t=ur.getNewId(ur.shaders);return ur.shaders[t]=Lr.createShader(e),t},glDeleteBuffers:function(e,t){for(let r=0;r<e;r++){let e=G[t+4*r>>2],i=ur.buffers[e];i&&(Lr.deleteBuffer(i),i.name=0,ur.buffers[e]=null,e==Lr.currentArrayBufferBinding&&(Lr.currentArrayBufferBinding=0),e==Lr.currentElementArrayBufferBinding&&(Lr.currentElementArrayBufferBinding=0),e==Lr.currentPixelPackBufferBinding&&(Lr.currentPixelPackBufferBinding=0),e==Lr.currentPixelUnpackBufferBinding&&(Lr.currentPixelUnpackBufferBinding=0))}},glDeleteFramebuffers:function(e,t){for(let r=0;r<e;++r){let e=G[t+4*r>>2],i=ur.framebuffers[e];i&&(Lr.deleteFramebuffer(i),i.name=0,ur.framebuffers[e]=null)}},glDeleteProgram:function(e){if(!e)return;let t=ur.programs[e];t?(Lr.deleteProgram(t),t.name=0,ur.programs[e]=null):ur.recordError(1281)},glDeleteShader:function(e){if(!e)return;let t=ur.shaders[e];t?(Lr.deleteShader(t),ur.shaders[e]=null):ur.recordError(1281)},glDeleteSync:function(e){if(!e)return;let t=ur.syncs[e];t?(Lr.deleteSync(t),t.name=0,ur.syncs[e]=null):ur.recordError(1281)},glDeleteTextures:function(e,t){for(let r=0;r<e;r++){let e=G[t+4*r>>2],i=ur.textures[e];i&&(Lr.deleteTexture(i),i.name=0,ur.textures[e]=null)}},glDeleteVertexArrays:function(e,t){for(let r=0;r<e;r++){let e=G[t+4*r>>2];Lr.deleteVertexArray(ur.vaos[e]),ur.vaos[e]=null}},glDisable:function(e){Lr.disable(e)},glDisableVertexAttribArray:function(e){ur.currentContext.clientBuffers[e].enabled=!1,Lr.disableVertexAttribArray(e)},glDrawArrays:function(e,t,r){ur.preDrawHandleClientVertexAttribBindings(t+r),Lr.drawArrays(e,t,r),ur.postDrawHandleClientVertexAttribBindings()},glDrawBuffers:function(e,t){let r=_r[e];for(let i=0;i<e;i++)r[i]=G[t+4*i>>2];Lr.drawBuffers(r)},glEnableVertexAttribArray:function(e){ur.currentContext.clientBuffers[e].enabled=!0,Lr.enableVertexAttribArray(e)},glFenceSync:function(e,t){let r=Lr.fenceSync(e,t);if(r){let e=ur.getNewId(ur.syncs);return r.name=e,ur.syncs[e]=r,e}return 0},glFinish:function(){Lr.finish()},glFlush:function(){Lr.flush()},glFramebufferTexture2D:function(e,t,r,i,n){Lr.framebufferTexture2D(e,t,r,ur.textures[i],n)},glFramebufferTextureLayer:function(e,t,r,i,n){Lr.framebufferTextureLayer(e,t,ur.textures[r],i,n)},glGenBuffers:function(e,t){Cr(e,t,"createBuffer",ur.buffers)},glGenFramebuffers:function(e,t){Cr(e,t,"createFramebuffer",ur.framebuffers)},glGenTextures:function(e,t){Cr(e,t,"createTexture",ur.textures)},glGenVertexArrays:function(e,t){Cr(e,t,"createVertexArray",ur.vaos)},glGetAttribLocation:function(e,t){return Lr.getAttribLocation(ur.programs[e],k(t))},glGetError:function(){let e=Lr.getError()||ur.lastError;return ur.lastError=0,e},glGetIntegerv:function(e,t){!function(e,t){if(!t)return void ur.recordError(1281);let r;switch(e){case 36346:r=1;break;case 36344:return;case 34814:case 36345:r=0;break;case 34466:var i=Lr.getParameter(34467);r=i?i.length:0;break;case 33309:if(ur.currentContext.version<2)return void ur.recordError(1282);r=2*(Lr.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(ur.currentContext.version<2)return void ur.recordError(1280);r=33307==e?3:0}if(void 0===r){let i=Lr.getParameter(e);switch(typeof i){case"number":r=i;break;case"boolean":r=i?1:0;break;case"string":return void ur.recordError(1280);case"object":if(null===i)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:r=0;break;default:return void ur.recordError(1280)}else{if(i instanceof Float32Array||i instanceof Uint32Array||i instanceof Int32Array||i instanceof Array){for(let e=0;e<i.length;++e)G[t+4*e>>2]=i[e];return}try{r=0|i.name}catch(t){return ur.recordError(1280),void C(`GL_INVALID_ENUM in glGet0v: Unknown object returned from WebGL getParameter(${e})! (error: ${t})`)}}break;default:return ur.recordError(1280),void C(`GL_INVALID_ENUM in glGet0v: Native code calling glGet0v(${e}) and it returns ${i} of type ${typeof i}!`)}}G[t>>2]=r}(e,t)},glGetString:function(e){let t=ur.stringCache[e];if(!t){switch(e){case 7939:var r=Lr.getSupportedExtensions()||[];t=yr((r=r.concat(r.map((e=>`GL_${e}`)))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var i=Lr.getParameter(e);i||ur.recordError(1280),t=i&&yr(i);break;case 7938:var n=Lr.getParameter(7938);t=yr(n=ur.currentContext.version>=2?`OpenGL ES 3.0 (${n})`:`OpenGL ES 2.0 (${n})`);break;case 35724:var o=Lr.getParameter(35724),a=o.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==a&&(3==a[1].length&&(a[1]=`${a[1]}0`),o=`OpenGL ES GLSL ES ${a[1]} (${o})`),t=yr(o);break;default:ur.recordError(1280)}ur.stringCache[e]=t}return t},glGetUniformBlockIndex:function(e,t){return Lr.getUniformBlockIndex(ur.programs[e],k(t))},glGetUniformLocation:function(e,t){if(t=k(t),e=ur.programs[e]){!function(e){let t,r,{uniformLocsById:i}=e,{uniformSizeAndIdsByName:n}=e;if(!i)for(e.uniformLocsById=i={},e.uniformArrayNamesById={},t=0;t<Lr.getProgramParameter(e,35718);++t){let o=Lr.getActiveUniform(e,t),a=o.name,s=o.size,c=Tr(a),A=c>0?a.slice(0,c):a,l=e.uniformIdCounter;for(e.uniformIdCounter+=s,n[A]=[s,l],r=0;r<s;++r)i[l]=r,e.uniformArrayNamesById[l++]=A}}(e);let{uniformLocsById:r}=e,i=0,n=t,o=Tr(t);o>0&&(i=function(e){return parseInt(e)}(t.slice(o+1))>>>0,n=t.slice(0,o));let a=e.uniformSizeAndIdsByName[n];if(a&&i<a[0]&&(i+=a[1],r[i]=r[i]||Lr.getUniformLocation(e,t)))return i}else ur.recordError(1281);return-1},glLinkProgram:function(e){e=ur.programs[e],Lr.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}},glPixelStorei:function(e,t){3317==e&&(ur.unpackAlignment=t),Lr.pixelStorei(e,t)},glReadPixels:function(e,t,r,i,n,o,a){if(ur.currentContext.version>=2){if(Lr.currentPixelPackBufferBinding)Lr.readPixels(e,t,r,i,n,o,a);else{let s=vr(o);Lr.readPixels(e,t,r,i,n,o,s,a>>wr(s))}return}let s=Sr(o,n,r,i,a);s?Lr.readPixels(e,t,r,i,n,o,s):ur.recordError(1280)},glShaderSource:function(e,t,r,i){let n=ur.getSource(e,t,r,i);Lr.shaderSource(ur.shaders[e],n)},glTexImage2D:function(e,t,r,i,n,o,a,s,c){if(ur.currentContext.version>=2)if(Lr.currentPixelUnpackBufferBinding)Lr.texImage2D(e,t,r,i,n,o,a,s,c);else if(c){let A=vr(s);Lr.texImage2D(e,t,r,i,n,o,a,s,A,c>>wr(A))}else Lr.texImage2D(e,t,r,i,n,o,a,s,null);else Lr.texImage2D(e,t,r,i,n,o,a,s,c?Sr(s,a,i,n,c):null)},glTexParameterfv:function(e,t,r){let i=H[r>>2];Lr.texParameterf(e,t,i)},glTexParameteri:function(e,t,r){Lr.texParameteri(e,t,r)},glTexStorage2D:function(e,t,r,i,n){Lr.texStorage2D(e,t,r,i,n)},glTexStorage3D:function(e,t,r,i,n,o){Lr.texStorage3D(e,t,r,i,n,o)},glTexSubImage2D:function(e,t,r,i,n,o,a,s,c){if(ur.currentContext.version>=2){if(Lr.currentPixelUnpackBufferBinding)Lr.texSubImage2D(e,t,r,i,n,o,a,s,c);else if(c){let A=vr(s);Lr.texSubImage2D(e,t,r,i,n,o,a,s,A,c>>wr(A))}else Lr.texSubImage2D(e,t,r,i,n,o,a,s,null);return}let A=null;c&&(A=Sr(s,a,n,o,c)),Lr.texSubImage2D(e,t,r,i,n,o,a,s,A)},glTexSubImage3D:function(e,t,r,i,n,o,a,s,c,A,l){if(Lr.currentPixelUnpackBufferBinding)Lr.texSubImage3D(e,t,r,i,n,o,a,s,c,A,l);else if(l){let u=vr(A);Lr.texSubImage3D(e,t,r,i,n,o,a,s,c,A,u,l>>wr(u))}else Lr.texSubImage3D(e,t,r,i,n,o,a,s,c,A,null)},glUniform1f:function(e,t){Lr.uniform1f(br(e),t)},glUniform1i:function(e,t){Lr.uniform1i(br(e),t)},glUniform2fv:function(e,t,r){if(ur.currentContext.version>=2)Lr.uniform2fv(br(e),H,r>>2,2*t);else{if(t<=144){var i=Rr[2*t-1];for(let e=0;e<2*t;e+=2)i[e]=H[r+4*e>>2],i[e+1]=H[r+(4*e+4)>>2]}else i=H.subarray(r>>2,r+8*t>>2);Lr.uniform2fv(br(e),i)}},glUniform4fv:function(e,t,r){if(ur.currentContext.version>=2)Lr.uniform4fv(br(e),H,r>>2,4*t);else{if(t<=72){var i=Rr[4*t-1];let e=H;r>>=2;for(let n=0;n<4*t;n+=4){let t=r+n;i[n]=e[t],i[n+1]=e[t+1],i[n+2]=e[t+2],i[n+3]=e[t+3]}}else i=H.subarray(r>>2,r+16*t>>2);Lr.uniform4fv(br(e),i)}},glUniform4iv:function(e,t,r){if(ur.currentContext.version>=2)Lr.uniform4iv(br(e),G,r>>2,4*t);else{if(t<=72){var i=Dr[4*t-1];for(let e=0;e<4*t;e+=4)i[e]=G[r+4*e>>2],i[e+1]=G[r+(4*e+4)>>2],i[e+2]=G[r+(4*e+8)>>2],i[e+3]=G[r+(4*e+12)>>2]}else i=G.subarray(r>>2,r+16*t>>2);Lr.uniform4iv(br(e),i)}},glUniformBlockBinding:function(e,t,r){e=ur.programs[e],Lr.uniformBlockBinding(e,t,r)},glUniformMatrix4fv:function(e,t,r,i){if(ur.currentContext.version>=2)Lr.uniformMatrix4fv(br(e),!!r,H,i>>2,16*t);else{if(t<=18){var n=Rr[16*t-1];let e=H;i>>=2;for(let r=0;r<16*t;r+=16){let t=i+r;n[r]=e[t],n[r+1]=e[t+1],n[r+2]=e[t+2],n[r+3]=e[t+3],n[r+4]=e[t+4],n[r+5]=e[t+5],n[r+6]=e[t+6],n[r+7]=e[t+7],n[r+8]=e[t+8],n[r+9]=e[t+9],n[r+10]=e[t+10],n[r+11]=e[t+11],n[r+12]=e[t+12],n[r+13]=e[t+13],n[r+14]=e[t+14],n[r+15]=e[t+15]}}else n=H.subarray(i>>2,i+64*t>>2);Lr.uniformMatrix4fv(br(e),!!r,n)}},glUseProgram:function(e){e=ur.programs[e],Lr.useProgram(e),Lr.currentProgram=e},glVertexAttribPointer:function(e,t,r,i,n,o){let a=ur.currentContext.clientBuffers[e];if(!Lr.currentArrayBufferBinding)return a.size=t,a.type=r,a.normalized=i,a.stride=n,a.ptr=o,a.clientside=!0,void(a.vertexAttribPointerAdaptor=function(e,t,r,i,n,o){this.vertexAttribPointer(e,t,r,i,n,o)});a.clientside=!1,Lr.vertexAttribPointer(e,t,r,!!i,n,o)},glViewport:function(e,t,r,i){Lr.viewport(e,t,r,i)},gmtime_r:function e(t,r){let i=new Date(1e3*G[t>>2]);G[r>>2]=i.getUTCSeconds(),G[r+4>>2]=i.getUTCMinutes(),G[r+8>>2]=i.getUTCHours(),G[r+12>>2]=i.getUTCDate(),G[r+16>>2]=i.getUTCMonth(),G[r+20>>2]=i.getUTCFullYear()-1900,G[r+24>>2]=i.getUTCDay(),G[r+36>>2]=0,G[r+32>>2]=0;let n=Date.UTC(i.getUTCFullYear(),0,1,0,0,0,0),o=(i.getTime()-n)/864e5|0;return G[r+28>>2]=o,e.GMTString||(e.GMTString=$("GMT")),G[r+40>>2]=e.GMTString,r},invoke_diii:function(e,t,r,i){let n=ei();try{return ie.get(e)(t,r,i)}catch(e){if(ti(n),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_i:function(e){let t=ei();try{return ie.get(e)()}catch(e){if(ti(t),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_ii:function(e,t){let r=ei();try{return ie.get(e)(t)}catch(e){if(ti(r),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_iii:function(e,t,r){let i=ei();try{return ie.get(e)(t,r)}catch(e){if(ti(i),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_iiii:function(e,t,r,i){let n=ei();try{return ie.get(e)(t,r,i)}catch(e){if(ti(n),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_iiiii:function(e,t,r,i,n){let o=ei();try{return ie.get(e)(t,r,i,n)}catch(e){if(ti(o),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_iiiiii:function(e,t,r,i,n,o){let a=ei();try{return ie.get(e)(t,r,i,n,o)}catch(e){if(ti(a),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_iiiiiii:function(e,t,r,i,n,o,a){let s=ei();try{return ie.get(e)(t,r,i,n,o,a)}catch(e){if(ti(s),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_iiiiiiiddi:function(e,t,r,i,n,o,a,s,c,A){let l=ei();try{return ie.get(e)(t,r,i,n,o,a,s,c,A)}catch(e){if(ti(l),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_iiiiiiii:function(e,t,r,i,n,o,a,s){let c=ei();try{return ie.get(e)(t,r,i,n,o,a,s)}catch(e){if(ti(c),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_iiiiiiiii:function(e,t,r,i,n,o,a,s,c){let A=ei();try{return ie.get(e)(t,r,i,n,o,a,s,c)}catch(e){if(ti(A),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_v:function(e){let t=ei();try{ie.get(e)()}catch(e){if(ti(t),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_vdiii:function(e,t,r,i,n){let o=ei();try{ie.get(e)(t,r,i,n)}catch(e){if(ti(o),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_vi:function(e,t){let r=ei();try{ie.get(e)(t)}catch(e){if(ti(r),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_vididdii:function(e,t,r,i,n,o,a,s){let c=ei();try{ie.get(e)(t,r,i,n,o,a,s)}catch(e){if(ti(c),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_vidii:function(e,t,r,i,n){let o=ei();try{ie.get(e)(t,r,i,n)}catch(e){if(ti(o),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_vii:function(e,t,r){let i=ei();try{ie.get(e)(t,r)}catch(e){if(ti(i),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viid:function(e,t,r,i){let n=ei();try{ie.get(e)(t,r,i)}catch(e){if(ti(n),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viidi:function(e,t,r,i,n){let o=ei();try{ie.get(e)(t,r,i,n)}catch(e){if(ti(o),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viididii:function(e,t,r,i,n,o,a,s){let c=ei();try{ie.get(e)(t,r,i,n,o,a,s)}catch(e){if(ti(c),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viii:function(e,t,r,i){let n=ei();try{ie.get(e)(t,r,i)}catch(e){if(ti(n),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiid:function(e,t,r,i,n){let o=ei();try{ie.get(e)(t,r,i,n)}catch(e){if(ti(o),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiidd:function(e,t,r,i,n,o){let a=ei();try{ie.get(e)(t,r,i,n,o)}catch(e){if(ti(a),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiddi:function(e,t,r,i,n,o,a){let s=ei();try{ie.get(e)(t,r,i,n,o,a)}catch(e){if(ti(s),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiidi:function(e,t,r,i,n,o){let a=ei();try{ie.get(e)(t,r,i,n,o)}catch(e){if(ti(a),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiii:function(e,t,r,i,n){let o=ei();try{ie.get(e)(t,r,i,n)}catch(e){if(ti(o),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiid:function(e,t,r,i,n,o){let a=ei();try{ie.get(e)(t,r,i,n,o)}catch(e){if(ti(a),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiidi:function(e,t,r,i,n,o,a){let s=ei();try{ie.get(e)(t,r,i,n,o,a)}catch(e){if(ti(s),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiidid:function(e,t,r,i,n,o,a,s){let c=ei();try{ie.get(e)(t,r,i,n,o,a,s)}catch(e){if(ti(c),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiidiidiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d,h,g,p){let f=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u,d,h,g,p)}catch(e){if(ti(f),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiifiifiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d,h,g,p){let f=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u,d,h,g,p)}catch(e){if(ti(f),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiii:function(e,t,r,i,n,o){let a=ei();try{ie.get(e)(t,r,i,n,o)}catch(e){if(ti(a),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiid:function(e,t,r,i,n,o,a){let s=ei();try{ie.get(e)(t,r,i,n,o,a)}catch(e){if(ti(s),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiif:function(e,t,r,i,n,o,a){let s=ei();try{ie.get(e)(t,r,i,n,o,a)}catch(e){if(ti(s),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiii:function(e,t,r,i,n,o,a){let s=ei();try{ie.get(e)(t,r,i,n,o,a)}catch(e){if(ti(s),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiid:function(e,t,r,i,n,o,a,s){let c=ei();try{ie.get(e)(t,r,i,n,o,a,s)}catch(e){if(ti(c),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiif:function(e,t,r,i,n,o,a,s){let c=ei();try{ie.get(e)(t,r,i,n,o,a,s)}catch(e){if(ti(c),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiii:function(e,t,r,i,n,o,a,s){let c=ei();try{ie.get(e)(t,r,i,n,o,a,s)}catch(e){if(ti(c),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiddi:function(e,t,r,i,n,o,a,s,c,A,l){let u=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l)}catch(e){if(ti(u),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiidiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d){let h=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u,d)}catch(e){if(ti(h),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiifiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d){let h=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u,d)}catch(e){if(ti(h),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiii:function(e,t,r,i,n,o,a,s,c){let A=ei();try{ie.get(e)(t,r,i,n,o,a,s,c)}catch(e){if(ti(A),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiidd:function(e,t,r,i,n,o,a,s,c,A,l){let u=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l)}catch(e){if(ti(u),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiidf:function(e,t,r,i,n,o,a,s,c,A,l){let u=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l)}catch(e){if(ti(u),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiii:function(e,t,r,i,n,o,a,s,c,A){let l=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A)}catch(e){if(ti(l),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiiidd:function(e,t,r,i,n,o,a,s,c,A,l,u){let d=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u)}catch(e){if(ti(d),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiiiddi:function(e,t,r,i,n,o,a,s,c,A,l,u,d){let h=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u,d)}catch(e){if(ti(h),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l){let u=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l)}catch(e){if(ti(u),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiiiiddi:function(e,t,r,i,n,o,a,s,c,A,l,u,d,h){let g=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u,d,h)}catch(e){if(ti(g),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u){let d=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u)}catch(e){if(ti(d),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d){let h=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u,d)}catch(e){if(ti(h),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},invoke_viiiiiiiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d,h){let g=ei();try{ie.get(e)(t,r,i,n,o,a,s,c,A,l,u,d,h)}catch(e){if(ti(g),e!==e+0&&"longjmp"!==e)throw e;ii(1,0)}},llvm_eh_typeid_for:function(e){return e},localtime_r:function(e,t){Br();let r=new Date(1e3*G[e>>2]);G[t>>2]=r.getSeconds(),G[t+4>>2]=r.getMinutes(),G[t+8>>2]=r.getHours(),G[t+12>>2]=r.getDate(),G[t+16>>2]=r.getMonth(),G[t+20>>2]=r.getFullYear()-1900,G[t+24>>2]=r.getDay();let i=new Date(r.getFullYear(),0,1),n=(r.getTime()-i.getTime())/864e5|0;G[t+28>>2]=n,G[t+36>>2]=-60*r.getTimezoneOffset();let o=new Date(r.getFullYear(),6,1).getTimezoneOffset(),a=i.getTimezoneOffset(),s=0|(o!=a&&r.getTimezoneOffset()==Math.min(a,o));G[t+32>>2]=s;let c=G[qr()+(s?4:0)>>2];return G[t+40>>2]=c,t},mktime:function(e){Br();let t=new Date(G[e+20>>2]+1900,G[e+16>>2],G[e+12>>2],G[e+8>>2],G[e+4>>2],G[e>>2],0),r=G[e+32>>2],i=t.getTimezoneOffset(),n=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=n.getTimezoneOffset(),s=Math.min(a,o);if(r<0)G[e+32>>2]=+(o!=a&&s==i);else if(r>0!=(s==i)){let e=Math.max(a,o),n=r>0?s:e;t.setTime(t.getTime()+6e4*(n-i))}G[e+24>>2]=t.getDay();let c=(t.getTime()-n.getTime())/864e5|0;return G[e+28>>2]=c,G[e>>2]=t.getSeconds(),G[e+4>>2]=t.getMinutes(),G[e+8>>2]=t.getHours(),G[e+12>>2]=t.getDate(),G[e+16>>2]=t.getMonth(),t.getTime()/1e3|0},proc_exit:function(e){li(e)},setTempRet0:function(e){w(e)},strftime:Nr,strftime_l:function(e,t,r,i){return Nr(e,t,r,i)}};(function(){let e={env:Yr,wasi_snapshot_preview1:Yr};function t(e,t){let{exports:r}=e;n.asm=r,b=n.asm.memory,B(b,"memory not found in wasm exports"),te(b.buffer),ie=n.asm.__indirect_function_table,B(ie,"table not found in wasm exports"),function(e){ce.unshift(e)}(n.asm.__wasm_call_ctors),Ce("wasm-instantiate")}_e("wasm-instantiate");let r=n;if(n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(e){return C(`Module.instantiateWasm callback failed with error: ${e}`),!1}n.loadWasm(ge,e).then((function(e){B(n===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,t(e)})).catch(i)})(),n.___wasm_call_ctors=Te("__wasm_call_ctors");var Wr=n._free=Te("free"),Jr=n._malloc=Te("malloc"),Xr=n.___errno_location=Te("__errno_location");n._fflush=Te("fflush");var Kr=n.___getTypeName=Te("__getTypeName");n.___embind_register_native_and_builtin_types=Te("__embind_register_native_and_builtin_types"),n._emscripten_main_thread_process_queued_calls=Te("emscripten_main_thread_process_queued_calls");var zr=n._emscripten_stack_get_end=function(){return(zr=n._emscripten_stack_get_end=n.asm.emscripten_stack_get_end).apply(null,arguments)},qr=n.__get_tzname=Te("_get_tzname"),Zr=n.__get_daylight=Te("_get_daylight"),$r=n.__get_timezone=Te("_get_timezone"),ei=n.stackSave=Te("stackSave"),ti=n.stackRestore=Te("stackRestore"),ri=(n.stackAlloc=Te("stackAlloc"),n._emscripten_stack_init=function(){return(ri=n._emscripten_stack_init=n.asm.emscripten_stack_init).apply(null,arguments)});n._emscripten_stack_get_free=function(){return(n._emscripten_stack_get_free=n.asm.emscripten_stack_get_free).apply(null,arguments)},n._saveSetjmp=Te("saveSetjmp");var ii=n._setThrew=Te("setThrew"),ni=n.___cxa_can_catch=Te("__cxa_can_catch"),oi=n.___cxa_is_pointer_type=Te("__cxa_is_pointer_type"),ai=n._memalign=Te("memalign");let si;function ci(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function Ai(e){function t(){si||(si=!0,n.calledRun=!0,!D&&(ae(),B(!ue),ue=!0,!n.noFSInit&&!ze.init.initialized&&ze.init(),ze.ignorePermissions=!1,Ye.init(),Me(ce),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),B(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(ae(),n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),le.unshift(e);var e;Me(le)}()))}e=e||s,pe>0||(ri(),oe(),function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),se.unshift(e);var e;Me(se)}(),pe>0)||(n.setStatus?(n.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>{n.setStatus("")}),1),t()}),1)):t(),ae())}function li(e){R=e,he()||(n.onExit&&n.onExit(e),D=!0),A(e,new ci(e))}if(n._emscripten_builtin_malloc=Te("emscripten_builtin_malloc"),n._emscripten_builtin_free=Te("emscripten_builtin_free"),n._emscripten_builtin_memalign=Te("emscripten_builtin_memalign"),n.dynCall_jii=Te("dynCall_jii"),n.dynCall_viji=Te("dynCall_viji"),n.dynCall_jjj=Te("dynCall_jjj"),n.dynCall_iiiijj=Te("dynCall_iiiijj"),n.dynCall_viijj=Te("dynCall_viijj"),n.dynCall_viiijjjj=Te("dynCall_viiijjjj"),n.dynCall_ji=Te("dynCall_ji"),n.dynCall_vij=Te("dynCall_vij"),n.dynCall_viijii=Te("dynCall_viijii"),n.dynCall_vj=Te("dynCall_vj"),n.dynCall_viij=Te("dynCall_viij"),n.dynCall_viiiiij=Te("dynCall_viiiiij"),n.dynCall_iijjiiii=Te("dynCall_iijjiiii"),n.dynCall_jiji=Te("dynCall_jiji"),n.dynCall_iiiiij=Te("dynCall_iiiiij"),n.dynCall_iiiiijj=Te("dynCall_iiiiijj"),n.dynCall_iiiiiijj=Te("dynCall_iiiiiijj"),Object.getOwnPropertyDescriptor(n,"intArrayFromString")||(n.intArrayFromString=function(){ye("'intArrayFromString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"intArrayToString")||(n.intArrayToString=function(){ye("'intArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ccall")||(n.ccall=function(){ye("'ccall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"cwrap")||(n.cwrap=function(){ye("'cwrap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setValue")||(n.setValue=function(){ye("'setValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getValue")||(n.getValue=function(){ye("'getValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"allocate")||(n.allocate=function(){ye("'allocate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF8ArrayToString")||(n.UTF8ArrayToString=function(){ye("'UTF8ArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF8ToString")||(n.UTF8ToString=function(){ye("'UTF8ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF8Array")||(n.stringToUTF8Array=function(){ye("'stringToUTF8Array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF8")||(n.stringToUTF8=function(){ye("'stringToUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF8")||(n.lengthBytesUTF8=function(){ye("'lengthBytesUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackTrace")||(n.stackTrace=function(){ye("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPreRun")||(n.addOnPreRun=function(){ye("'addOnPreRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnInit")||(n.addOnInit=function(){ye("'addOnInit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPreMain")||(n.addOnPreMain=function(){ye("'addOnPreMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnExit")||(n.addOnExit=function(){ye("'addOnExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPostRun")||(n.addOnPostRun=function(){ye("'addOnPostRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeStringToMemory")||(n.writeStringToMemory=function(){ye("'writeStringToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeArrayToMemory")||(n.writeArrayToMemory=function(){ye("'writeArrayToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeAsciiToMemory")||(n.writeAsciiToMemory=function(){ye("'writeAsciiToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.addRunDependency=_e,n.removeRunDependency=Ce,Object.getOwnPropertyDescriptor(n,"FS_createFolder")||(n.FS_createFolder=function(){ye("'FS_createFolder' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.FS_createPath=ze.createPath,n.FS_createDataFile=ze.createDataFile,n.FS_createPreloadedFile=ze.createPreloadedFile,n.FS_createLazyFile=ze.createLazyFile,Object.getOwnPropertyDescriptor(n,"FS_createLink")||(n.FS_createLink=function(){ye("'FS_createLink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.FS_createDevice=ze.createDevice,n.FS_unlink=ze.unlink,Object.getOwnPropertyDescriptor(n,"getLEB")||(n.getLEB=function(){ye("'getLEB' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getFunctionTables")||(n.getFunctionTables=function(){ye("'getFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"alignFunctionTables")||(n.alignFunctionTables=function(){ye("'alignFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerFunctions")||(n.registerFunctions=function(){ye("'registerFunctions' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addFunction")||(n.addFunction=function(){ye("'addFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"removeFunction")||(n.removeFunction=function(){ye("'removeFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getFuncWrapper")||(n.getFuncWrapper=function(){ye("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"prettyPrint")||(n.prettyPrint=function(){ye("'prettyPrint' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"dynCall")||(n.dynCall=function(){ye("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getCompilerSetting")||(n.getCompilerSetting=function(){ye("'getCompilerSetting' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"print")||(n.print=function(){ye("'print' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"printErr")||(n.printErr=function(){ye("'printErr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getTempRet0")||(n.getTempRet0=function(){ye("'getTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setTempRet0")||(n.setTempRet0=function(){ye("'setTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"callMain")||(n.callMain=function(){ye("'callMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"abort")||(n.abort=function(){ye("'abort' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"keepRuntimeAlive")||(n.keepRuntimeAlive=function(){ye("'keepRuntimeAlive' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"zeroMemory")||(n.zeroMemory=function(){ye("'zeroMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToNewUTF8")||(n.stringToNewUTF8=function(){ye("'stringToNewUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setFileTime")||(n.setFileTime=function(){ye("'setFileTime' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscripten_realloc_buffer")||(n.emscripten_realloc_buffer=function(){ye("'emscripten_realloc_buffer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ENV")||(n.ENV=function(){ye("'ENV' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ERRNO_CODES")||(n.ERRNO_CODES=function(){ye("'ERRNO_CODES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ERRNO_MESSAGES")||(n.ERRNO_MESSAGES=function(){ye("'ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setErrNo")||(n.setErrNo=function(){ye("'setErrNo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"inetPton4")||(n.inetPton4=function(){ye("'inetPton4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"inetNtop4")||(n.inetNtop4=function(){ye("'inetNtop4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"inetPton6")||(n.inetPton6=function(){ye("'inetPton6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"inetNtop6")||(n.inetNtop6=function(){ye("'inetNtop6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readSockaddr")||(n.readSockaddr=function(){ye("'readSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeSockaddr")||(n.writeSockaddr=function(){ye("'writeSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"DNS")||(n.DNS=function(){ye("'DNS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getHostByName")||(n.getHostByName=function(){ye("'getHostByName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GAI_ERRNO_MESSAGES")||(n.GAI_ERRNO_MESSAGES=function(){ye("'GAI_ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Protocols")||(n.Protocols=function(){ye("'Protocols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Sockets")||(n.Sockets=function(){ye("'Sockets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getRandomDevice")||(n.getRandomDevice=function(){ye("'getRandomDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"traverseStack")||(n.traverseStack=function(){ye("'traverseStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UNWIND_CACHE")||(n.UNWIND_CACHE=function(){ye("'UNWIND_CACHE' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"withBuiltinMalloc")||(n.withBuiltinMalloc=function(){ye("'withBuiltinMalloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readAsmConstArgsArray")||(n.readAsmConstArgsArray=function(){ye("'readAsmConstArgsArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readAsmConstArgs")||(n.readAsmConstArgs=function(){ye("'readAsmConstArgs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"mainThreadEM_ASM")||(n.mainThreadEM_ASM=function(){ye("'mainThreadEM_ASM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jstoi_q")||(n.jstoi_q=function(){ye("'jstoi_q' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jstoi_s")||(n.jstoi_s=function(){ye("'jstoi_s' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getExecutableName")||(n.getExecutableName=function(){ye("'getExecutableName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"listenOnce")||(n.listenOnce=function(){ye("'listenOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"autoResumeAudioContext")||(n.autoResumeAudioContext=function(){ye("'autoResumeAudioContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"dynCallLegacy")||(n.dynCallLegacy=function(){ye("'dynCallLegacy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getDynCaller")||(n.getDynCaller=function(){ye("'getDynCaller' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"dynCall")||(n.dynCall=function(){ye("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"callRuntimeCallbacks")||(n.callRuntimeCallbacks=function(){ye("'callRuntimeCallbacks' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runtimeKeepalivePush")||(n.runtimeKeepalivePush=function(){ye("'runtimeKeepalivePush' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runtimeKeepalivePop")||(n.runtimeKeepalivePop=function(){ye("'runtimeKeepalivePop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"callUserCallback")||(n.callUserCallback=function(){ye("'callUserCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"maybeExit")||(n.maybeExit=function(){ye("'maybeExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"safeSetTimeout")||(n.safeSetTimeout=function(){ye("'safeSetTimeout' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"asmjsMangle")||(n.asmjsMangle=function(){ye("'asmjsMangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"asyncLoad")||(n.asyncLoad=function(){ye("'asyncLoad' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"alignMemory")||(n.alignMemory=function(){ye("'alignMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"mmapAlloc")||(n.mmapAlloc=function(){ye("'mmapAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"reallyNegative")||(n.reallyNegative=function(){ye("'reallyNegative' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"unSign")||(n.unSign=function(){ye("'unSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"reSign")||(n.reSign=function(){ye("'reSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"formatString")||(n.formatString=function(){ye("'formatString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PATH")||(n.PATH=function(){ye("'PATH' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PATH_FS")||(n.PATH_FS=function(){ye("'PATH_FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SYSCALLS")||(n.SYSCALLS=function(){ye("'SYSCALLS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"syscallMmap2")||(n.syscallMmap2=function(){ye("'syscallMmap2' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"syscallMunmap")||(n.syscallMunmap=function(){ye("'syscallMunmap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getSocketFromFD")||(n.getSocketFromFD=function(){ye("'getSocketFromFD' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getSocketAddress")||(n.getSocketAddress=function(){ye("'getSocketAddress' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"JSEvents")||(n.JSEvents=function(){ye("'JSEvents' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerKeyEventCallback")||(n.registerKeyEventCallback=function(){ye("'registerKeyEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"specialHTMLTargets")||(n.specialHTMLTargets=function(){ye("'specialHTMLTargets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"findEventTarget")||(n.findEventTarget=function(){ye("'findEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"findCanvasEventTarget")||(n.findCanvasEventTarget=function(){ye("'findCanvasEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getBoundingClientRect")||(n.getBoundingClientRect=function(){ye("'getBoundingClientRect' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillMouseEventData")||(n.fillMouseEventData=function(){ye("'fillMouseEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerMouseEventCallback")||(n.registerMouseEventCallback=function(){ye("'registerMouseEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerWheelEventCallback")||(n.registerWheelEventCallback=function(){ye("'registerWheelEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerUiEventCallback")||(n.registerUiEventCallback=function(){ye("'registerUiEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerFocusEventCallback")||(n.registerFocusEventCallback=function(){ye("'registerFocusEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillDeviceOrientationEventData")||(n.fillDeviceOrientationEventData=function(){ye("'fillDeviceOrientationEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerDeviceOrientationEventCallback")||(n.registerDeviceOrientationEventCallback=function(){ye("'registerDeviceOrientationEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillDeviceMotionEventData")||(n.fillDeviceMotionEventData=function(){ye("'fillDeviceMotionEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerDeviceMotionEventCallback")||(n.registerDeviceMotionEventCallback=function(){ye("'registerDeviceMotionEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"screenOrientation")||(n.screenOrientation=function(){ye("'screenOrientation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillOrientationChangeEventData")||(n.fillOrientationChangeEventData=function(){ye("'fillOrientationChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerOrientationChangeEventCallback")||(n.registerOrientationChangeEventCallback=function(){ye("'registerOrientationChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillFullscreenChangeEventData")||(n.fillFullscreenChangeEventData=function(){ye("'fillFullscreenChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerFullscreenChangeEventCallback")||(n.registerFullscreenChangeEventCallback=function(){ye("'registerFullscreenChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerRestoreOldStyle")||(n.registerRestoreOldStyle=function(){ye("'registerRestoreOldStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"hideEverythingExceptGivenElement")||(n.hideEverythingExceptGivenElement=function(){ye("'hideEverythingExceptGivenElement' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"restoreHiddenElements")||(n.restoreHiddenElements=function(){ye("'restoreHiddenElements' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setLetterbox")||(n.setLetterbox=function(){ye("'setLetterbox' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"currentFullscreenStrategy")||(n.currentFullscreenStrategy=function(){ye("'currentFullscreenStrategy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"restoreOldWindowedStyle")||(n.restoreOldWindowedStyle=function(){ye("'restoreOldWindowedStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"softFullscreenResizeWebGLRenderTarget")||(n.softFullscreenResizeWebGLRenderTarget=function(){ye("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"doRequestFullscreen")||(n.doRequestFullscreen=function(){ye("'doRequestFullscreen' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillPointerlockChangeEventData")||(n.fillPointerlockChangeEventData=function(){ye("'fillPointerlockChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerPointerlockChangeEventCallback")||(n.registerPointerlockChangeEventCallback=function(){ye("'registerPointerlockChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerPointerlockErrorEventCallback")||(n.registerPointerlockErrorEventCallback=function(){ye("'registerPointerlockErrorEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"requestPointerLock")||(n.requestPointerLock=function(){ye("'requestPointerLock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillVisibilityChangeEventData")||(n.fillVisibilityChangeEventData=function(){ye("'fillVisibilityChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerVisibilityChangeEventCallback")||(n.registerVisibilityChangeEventCallback=function(){ye("'registerVisibilityChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerTouchEventCallback")||(n.registerTouchEventCallback=function(){ye("'registerTouchEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillGamepadEventData")||(n.fillGamepadEventData=function(){ye("'fillGamepadEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerGamepadEventCallback")||(n.registerGamepadEventCallback=function(){ye("'registerGamepadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerBeforeUnloadEventCallback")||(n.registerBeforeUnloadEventCallback=function(){ye("'registerBeforeUnloadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"fillBatteryEventData")||(n.fillBatteryEventData=function(){ye("'fillBatteryEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"battery")||(n.battery=function(){ye("'battery' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerBatteryEventCallback")||(n.registerBatteryEventCallback=function(){ye("'registerBatteryEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setCanvasElementSize")||(n.setCanvasElementSize=function(){ye("'setCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getCanvasElementSize")||(n.getCanvasElementSize=function(){ye("'getCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"polyfillSetImmediate")||(n.polyfillSetImmediate=function(){ye("'polyfillSetImmediate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"demangle")||(n.demangle=function(){ye("'demangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"demangleAll")||(n.demangleAll=function(){ye("'demangleAll' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jsStackTrace")||(n.jsStackTrace=function(){ye("'jsStackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackTrace")||(n.stackTrace=function(){ye("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getEnvStrings")||(n.getEnvStrings=function(){ye("'getEnvStrings' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"checkWasiClock")||(n.checkWasiClock=function(){ye("'checkWasiClock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64")||(n.writeI53ToI64=function(){ye("'writeI53ToI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64Clamped")||(n.writeI53ToI64Clamped=function(){ye("'writeI53ToI64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64Signaling")||(n.writeI53ToI64Signaling=function(){ye("'writeI53ToI64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToU64Clamped")||(n.writeI53ToU64Clamped=function(){ye("'writeI53ToU64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToU64Signaling")||(n.writeI53ToU64Signaling=function(){ye("'writeI53ToU64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readI53FromI64")||(n.readI53FromI64=function(){ye("'readI53FromI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readI53FromU64")||(n.readI53FromU64=function(){ye("'readI53FromU64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"convertI32PairToI53")||(n.convertI32PairToI53=function(){ye("'convertI32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"convertU32PairToI53")||(n.convertU32PairToI53=function(){ye("'convertU32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"uncaughtExceptionCount")||(n.uncaughtExceptionCount=function(){ye("'uncaughtExceptionCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"exceptionLast")||(n.exceptionLast=function(){ye("'exceptionLast' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"exceptionCaught")||(n.exceptionCaught=function(){ye("'exceptionCaught' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ExceptionInfo")||(n.ExceptionInfo=function(){ye("'ExceptionInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"CatchInfo")||(n.CatchInfo=function(){ye("'CatchInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"exception_addRef")||(n.exception_addRef=function(){ye("'exception_addRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"exception_decRef")||(n.exception_decRef=function(){ye("'exception_decRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Browser")||(n.Browser=function(){ye("'Browser' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"funcWrappers")||(n.funcWrappers=function(){ye("'funcWrappers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getFuncWrapper")||(n.getFuncWrapper=function(){ye("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setMainLoop")||(n.setMainLoop=function(){ye("'setMainLoop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"wget")||(n.wget=function(){ye("'wget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"FS")||(n.FS=function(){ye("'FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"MEMFS")||(n.MEMFS=function(){ye("'MEMFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"TTY")||(n.TTY=function(){ye("'TTY' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PIPEFS")||(n.PIPEFS=function(){ye("'PIPEFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SOCKFS")||(n.SOCKFS=function(){ye("'SOCKFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"_setNetworkCallback")||(n._setNetworkCallback=function(){ye("'_setNetworkCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"tempFixedLengthArray")||(n.tempFixedLengthArray=function(){ye("'tempFixedLengthArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"miniTempWebGLFloatBuffers")||(n.miniTempWebGLFloatBuffers=function(){ye("'miniTempWebGLFloatBuffers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"heapObjectForWebGLType")||(n.heapObjectForWebGLType=function(){ye("'heapObjectForWebGLType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"heapAccessShiftForWebGLHeap")||(n.heapAccessShiftForWebGLHeap=function(){ye("'heapAccessShiftForWebGLHeap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.GL=ur,Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGet")||(n.emscriptenWebGLGet=function(){ye("'emscriptenWebGLGet' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"computeUnpackAlignedImageSize")||(n.computeUnpackAlignedImageSize=function(){ye("'computeUnpackAlignedImageSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetTexPixelData")||(n.emscriptenWebGLGetTexPixelData=function(){ye("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetUniform")||(n.emscriptenWebGLGetUniform=function(){ye("'emscriptenWebGLGetUniform' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"webglGetUniformLocation")||(n.webglGetUniformLocation=function(){ye("'webglGetUniformLocation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"webglPrepareUniformLocationsBeforeFirstUse")||(n.webglPrepareUniformLocationsBeforeFirstUse=function(){ye("'webglPrepareUniformLocationsBeforeFirstUse' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"webglGetLeftBracePos")||(n.webglGetLeftBracePos=function(){ye("'webglGetLeftBracePos' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetVertexAttrib")||(n.emscriptenWebGLGetVertexAttrib=function(){ye("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetBufferBinding")||(n.emscriptenWebGLGetBufferBinding=function(){ye("'emscriptenWebGLGetBufferBinding' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLValidateMapBufferTarget")||(n.emscriptenWebGLValidateMapBufferTarget=function(){ye("'emscriptenWebGLValidateMapBufferTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeGLArray")||(n.writeGLArray=function(){ye("'writeGLArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"AL")||(n.AL=function(){ye("'AL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_unicode")||(n.SDL_unicode=function(){ye("'SDL_unicode' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_ttfContext")||(n.SDL_ttfContext=function(){ye("'SDL_ttfContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_audio")||(n.SDL_audio=function(){ye("'SDL_audio' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL")||(n.SDL=function(){ye("'SDL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_gfx")||(n.SDL_gfx=function(){ye("'SDL_gfx' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLUT")||(n.GLUT=function(){ye("'GLUT' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"EGL")||(n.EGL=function(){ye("'EGL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLFW_Window")||(n.GLFW_Window=function(){ye("'GLFW_Window' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLFW")||(n.GLFW=function(){ye("'GLFW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLEW")||(n.GLEW=function(){ye("'GLEW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"IDBStore")||(n.IDBStore=function(){ye("'IDBStore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runAndAbortIfError")||(n.runAndAbortIfError=function(){ye("'runAndAbortIfError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_handle_array")||(n.emval_handle_array=function(){ye("'emval_handle_array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_free_list")||(n.emval_free_list=function(){ye("'emval_free_list' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_symbols")||(n.emval_symbols=function(){ye("'emval_symbols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_emval")||(n.init_emval=function(){ye("'init_emval' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"count_emval_handles")||(n.count_emval_handles=function(){ye("'count_emval_handles' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"get_first_emval")||(n.get_first_emval=function(){ye("'get_first_emval' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getStringOrSymbol")||(n.getStringOrSymbol=function(){ye("'getStringOrSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"requireHandle")||(n.requireHandle=function(){ye("'requireHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_newers")||(n.emval_newers=function(){ye("'emval_newers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"craftEmvalAllocator")||(n.craftEmvalAllocator=function(){ye("'craftEmvalAllocator' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_get_global")||(n.emval_get_global=function(){ye("'emval_get_global' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_methodCallers")||(n.emval_methodCallers=function(){ye("'emval_methodCallers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"InternalError")||(n.InternalError=function(){ye("'InternalError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"BindingError")||(n.BindingError=function(){ye("'BindingError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UnboundTypeError")||(n.UnboundTypeError=function(){ye("'UnboundTypeError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PureVirtualError")||(n.PureVirtualError=function(){ye("'PureVirtualError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_embind")||(n.init_embind=function(){ye("'init_embind' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwInternalError")||(n.throwInternalError=function(){ye("'throwInternalError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwBindingError")||(n.throwBindingError=function(){ye("'throwBindingError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwUnboundTypeError")||(n.throwUnboundTypeError=function(){ye("'throwUnboundTypeError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ensureOverloadTable")||(n.ensureOverloadTable=function(){ye("'ensureOverloadTable' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"exposePublicSymbol")||(n.exposePublicSymbol=function(){ye("'exposePublicSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"replacePublicSymbol")||(n.replacePublicSymbol=function(){ye("'replacePublicSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"extendError")||(n.extendError=function(){ye("'extendError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"createNamedFunction")||(n.createNamedFunction=function(){ye("'createNamedFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredInstances")||(n.registeredInstances=function(){ye("'registeredInstances' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getBasestPointer")||(n.getBasestPointer=function(){ye("'getBasestPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerInheritedInstance")||(n.registerInheritedInstance=function(){ye("'registerInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"unregisterInheritedInstance")||(n.unregisterInheritedInstance=function(){ye("'unregisterInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getInheritedInstance")||(n.getInheritedInstance=function(){ye("'getInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getInheritedInstanceCount")||(n.getInheritedInstanceCount=function(){ye("'getInheritedInstanceCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getLiveInheritedInstances")||(n.getLiveInheritedInstances=function(){ye("'getLiveInheritedInstances' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredTypes")||(n.registeredTypes=function(){ye("'registeredTypes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"awaitingDependencies")||(n.awaitingDependencies=function(){ye("'awaitingDependencies' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"typeDependencies")||(n.typeDependencies=function(){ye("'typeDependencies' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredPointers")||(n.registeredPointers=function(){ye("'registeredPointers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerType")||(n.registerType=function(){ye("'registerType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"whenDependentTypesAreResolved")||(n.whenDependentTypesAreResolved=function(){ye("'whenDependentTypesAreResolved' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind_charCodes")||(n.embind_charCodes=function(){ye("'embind_charCodes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind_init_charCodes")||(n.embind_init_charCodes=function(){ye("'embind_init_charCodes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readLatin1String")||(n.readLatin1String=function(){ye("'readLatin1String' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getTypeName")||(n.getTypeName=function(){ye("'getTypeName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"heap32VectorToArray")||(n.heap32VectorToArray=function(){ye("'heap32VectorToArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"requireRegisteredType")||(n.requireRegisteredType=function(){ye("'requireRegisteredType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getShiftFromSize")||(n.getShiftFromSize=function(){ye("'getShiftFromSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"integerReadValueFromPointer")||(n.integerReadValueFromPointer=function(){ye("'integerReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"enumReadValueFromPointer")||(n.enumReadValueFromPointer=function(){ye("'enumReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"floatReadValueFromPointer")||(n.floatReadValueFromPointer=function(){ye("'floatReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"simpleReadValueFromPointer")||(n.simpleReadValueFromPointer=function(){ye("'simpleReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runDestructors")||(n.runDestructors=function(){ye("'runDestructors' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"new_")||(n.new_=function(){ye("'new_' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"craftInvokerFunction")||(n.craftInvokerFunction=function(){ye("'craftInvokerFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind__requireFunction")||(n.embind__requireFunction=function(){ye("'embind__requireFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"tupleRegistrations")||(n.tupleRegistrations=function(){ye("'tupleRegistrations' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"structRegistrations")||(n.structRegistrations=function(){ye("'structRegistrations' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"genericPointerToWireType")||(n.genericPointerToWireType=function(){ye("'genericPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"constNoSmartPtrRawPointerToWireType")||(n.constNoSmartPtrRawPointerToWireType=function(){ye("'constNoSmartPtrRawPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"nonConstNoSmartPtrRawPointerToWireType")||(n.nonConstNoSmartPtrRawPointerToWireType=function(){ye("'nonConstNoSmartPtrRawPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_RegisteredPointer")||(n.init_RegisteredPointer=function(){ye("'init_RegisteredPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer")||(n.RegisteredPointer=function(){ye("'RegisteredPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_getPointee")||(n.RegisteredPointer_getPointee=function(){ye("'RegisteredPointer_getPointee' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_destructor")||(n.RegisteredPointer_destructor=function(){ye("'RegisteredPointer_destructor' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_deleteObject")||(n.RegisteredPointer_deleteObject=function(){ye("'RegisteredPointer_deleteObject' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_fromWireType")||(n.RegisteredPointer_fromWireType=function(){ye("'RegisteredPointer_fromWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runDestructor")||(n.runDestructor=function(){ye("'runDestructor' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"releaseClassHandle")||(n.releaseClassHandle=function(){ye("'releaseClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"finalizationGroup")||(n.finalizationGroup=function(){ye("'finalizationGroup' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"detachFinalizer_deps")||(n.detachFinalizer_deps=function(){ye("'detachFinalizer_deps' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"detachFinalizer")||(n.detachFinalizer=function(){ye("'detachFinalizer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"attachFinalizer")||(n.attachFinalizer=function(){ye("'attachFinalizer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"makeClassHandle")||(n.makeClassHandle=function(){ye("'makeClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_ClassHandle")||(n.init_ClassHandle=function(){ye("'init_ClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle")||(n.ClassHandle=function(){ye("'ClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_isAliasOf")||(n.ClassHandle_isAliasOf=function(){ye("'ClassHandle_isAliasOf' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwInstanceAlreadyDeleted")||(n.throwInstanceAlreadyDeleted=function(){ye("'throwInstanceAlreadyDeleted' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_clone")||(n.ClassHandle_clone=function(){ye("'ClassHandle_clone' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_delete")||(n.ClassHandle_delete=function(){ye("'ClassHandle_delete' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"deletionQueue")||(n.deletionQueue=function(){ye("'deletionQueue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_isDeleted")||(n.ClassHandle_isDeleted=function(){ye("'ClassHandle_isDeleted' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_deleteLater")||(n.ClassHandle_deleteLater=function(){ye("'ClassHandle_deleteLater' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"flushPendingDeletes")||(n.flushPendingDeletes=function(){ye("'flushPendingDeletes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"delayFunction")||(n.delayFunction=function(){ye("'delayFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setDelayFunction")||(n.setDelayFunction=function(){ye("'setDelayFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredClass")||(n.RegisteredClass=function(){ye("'RegisteredClass' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"shallowCopyInternalPointer")||(n.shallowCopyInternalPointer=function(){ye("'shallowCopyInternalPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"downcastPointer")||(n.downcastPointer=function(){ye("'downcastPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"upcastPointer")||(n.upcastPointer=function(){ye("'upcastPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"validateThis")||(n.validateThis=function(){ye("'validateThis' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"char_0")||(n.char_0=function(){ye("'char_0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"char_9")||(n.char_9=function(){ye("'char_9' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"makeLegalFunctionName")||(n.makeLegalFunctionName=function(){ye("'makeLegalFunctionName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetIndexed")||(n.emscriptenWebGLGetIndexed=function(){ye("'emscriptenWebGLGetIndexed' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"warnOnce")||(n.warnOnce=function(){ye("'warnOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackSave")||(n.stackSave=function(){ye("'stackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackRestore")||(n.stackRestore=function(){ye("'stackRestore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackAlloc")||(n.stackAlloc=function(){ye("'stackAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"AsciiToString")||(n.AsciiToString=function(){ye("'AsciiToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToAscii")||(n.stringToAscii=function(){ye("'stringToAscii' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF16ToString")||(n.UTF16ToString=function(){ye("'UTF16ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF16")||(n.stringToUTF16=function(){ye("'stringToUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF16")||(n.lengthBytesUTF16=function(){ye("'lengthBytesUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF32ToString")||(n.UTF32ToString=function(){ye("'UTF32ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF32")||(n.stringToUTF32=function(){ye("'stringToUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF32")||(n.lengthBytesUTF32=function(){ye("'lengthBytesUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"allocateUTF8")||(n.allocateUTF8=function(){ye("'allocateUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"allocateUTF8OnStack")||(n.allocateUTF8OnStack=function(){ye("'allocateUTF8OnStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.writeStackCookie=oe,n.checkStackCookie=ae,Object.getOwnPropertyDescriptor(n,"ALLOC_NORMAL")||Object.defineProperty(n,"ALLOC_NORMAL",{configurable:!0,get(){ye("'ALLOC_NORMAL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(n,"ALLOC_STACK")||Object.defineProperty(n,"ALLOC_STACK",{configurable:!0,get(){ye("'ALLOC_STACK' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),me=function e(){si||Ai(),si||(me=e)},n.run=Ai,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ai(),t.ready}}(),E=m,I=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||i,function(e){var t,r,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(e,i){t=e,r=i})),Object.getOwnPropertyDescriptor(i.ready,"_main")||(Object.defineProperty(i.ready,"_main",{configurable:!0,get:function(){ye("You are getting _main on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_main",{configurable:!0,set:function(){ye("You are setting _main on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_stack_get_end")||(Object.defineProperty(i.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){ye("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){ye("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_stack_get_free")||(Object.defineProperty(i.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){ye("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){ye("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_stack_init")||(Object.defineProperty(i.ready,"_emscripten_stack_init",{configurable:!0,get:function(){ye("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_stack_init",{configurable:!0,set:function(){ye("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_stackSave")||(Object.defineProperty(i.ready,"_stackSave",{configurable:!0,get:function(){ye("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_stackSave",{configurable:!0,set:function(){ye("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_stackRestore")||(Object.defineProperty(i.ready,"_stackRestore",{configurable:!0,get:function(){ye("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_stackRestore",{configurable:!0,set:function(){ye("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_stackAlloc")||(Object.defineProperty(i.ready,"_stackAlloc",{configurable:!0,get:function(){ye("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_stackAlloc",{configurable:!0,set:function(){ye("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"___wasm_call_ctors")||(Object.defineProperty(i.ready,"___wasm_call_ctors",{configurable:!0,get:function(){ye("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"___wasm_call_ctors",{configurable:!0,set:function(){ye("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_fflush")||(Object.defineProperty(i.ready,"_fflush",{configurable:!0,get:function(){ye("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_fflush",{configurable:!0,set:function(){ye("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"___errno_location")||(Object.defineProperty(i.ready,"___errno_location",{configurable:!0,get:function(){ye("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"___errno_location",{configurable:!0,set:function(){ye("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_malloc")||(Object.defineProperty(i.ready,"_malloc",{configurable:!0,get:function(){ye("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_malloc",{configurable:!0,set:function(){ye("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_free")||(Object.defineProperty(i.ready,"_free",{configurable:!0,get:function(){ye("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_free",{configurable:!0,set:function(){ye("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_setThrew")||(Object.defineProperty(i.ready,"_setThrew",{configurable:!0,get:function(){ye("You are getting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_setThrew",{configurable:!0,set:function(){ye("You are setting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"___cxa_is_pointer_type")||(Object.defineProperty(i.ready,"___cxa_is_pointer_type",{configurable:!0,get:function(){ye("You are getting ___cxa_is_pointer_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"___cxa_is_pointer_type",{configurable:!0,set:function(){ye("You are setting ___cxa_is_pointer_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"___cxa_can_catch")||(Object.defineProperty(i.ready,"___cxa_can_catch",{configurable:!0,get:function(){ye("You are getting ___cxa_can_catch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"___cxa_can_catch",{configurable:!0,set:function(){ye("You are setting ___cxa_can_catch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_saveSetjmp")||(Object.defineProperty(i.ready,"_saveSetjmp",{configurable:!0,get:function(){ye("You are getting _saveSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_saveSetjmp",{configurable:!0,set:function(){ye("You are setting _saveSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_memalign")||(Object.defineProperty(i.ready,"_memalign",{configurable:!0,get:function(){ye("You are getting _memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_memalign",{configurable:!0,set:function(){ye("You are setting _memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_main_thread_process_queued_calls")||(Object.defineProperty(i.ready,"_emscripten_main_thread_process_queued_calls",{configurable:!0,get:function(){ye("You are getting _emscripten_main_thread_process_queued_calls on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_main_thread_process_queued_calls",{configurable:!0,set:function(){ye("You are setting _emscripten_main_thread_process_queued_calls on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_webgl_make_context_current")||(Object.defineProperty(i.ready,"_emscripten_webgl_make_context_current",{configurable:!0,get:function(){ye("You are getting _emscripten_webgl_make_context_current on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_webgl_make_context_current",{configurable:!0,set:function(){ye("You are setting _emscripten_webgl_make_context_current on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_webgl_get_current_context")||(Object.defineProperty(i.ready,"_emscripten_webgl_get_current_context",{configurable:!0,get:function(){ye("You are getting _emscripten_webgl_get_current_context on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_webgl_get_current_context",{configurable:!0,set:function(){ye("You are setting _emscripten_webgl_get_current_context on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"__get_tzname")||(Object.defineProperty(i.ready,"__get_tzname",{configurable:!0,get:function(){ye("You are getting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"__get_tzname",{configurable:!0,set:function(){ye("You are setting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"__get_daylight")||(Object.defineProperty(i.ready,"__get_daylight",{configurable:!0,get:function(){ye("You are getting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"__get_daylight",{configurable:!0,set:function(){ye("You are setting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"__get_timezone")||(Object.defineProperty(i.ready,"__get_timezone",{configurable:!0,get:function(){ye("You are getting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"__get_timezone",{configurable:!0,set:function(){ye("You are setting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_builtin_malloc")||(Object.defineProperty(i.ready,"_emscripten_builtin_malloc",{configurable:!0,get:function(){ye("You are getting _emscripten_builtin_malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_builtin_malloc",{configurable:!0,set:function(){ye("You are setting _emscripten_builtin_malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_builtin_free")||(Object.defineProperty(i.ready,"_emscripten_builtin_free",{configurable:!0,get:function(){ye("You are getting _emscripten_builtin_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_builtin_free",{configurable:!0,set:function(){ye("You are setting _emscripten_builtin_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"_emscripten_builtin_memalign")||(Object.defineProperty(i.ready,"_emscripten_builtin_memalign",{configurable:!0,get:function(){ye("You are getting _emscripten_builtin_memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"_emscripten_builtin_memalign",{configurable:!0,set:function(){ye("You are setting _emscripten_builtin_memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"___getTypeName")||(Object.defineProperty(i.ready,"___getTypeName",{configurable:!0,get:function(){ye("You are getting ___getTypeName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"___getTypeName",{configurable:!0,set:function(){ye("You are setting ___getTypeName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"___embind_register_native_and_builtin_types")||(Object.defineProperty(i.ready,"___embind_register_native_and_builtin_types",{configurable:!0,get:function(){ye("You are getting ___embind_register_native_and_builtin_types on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"___embind_register_native_and_builtin_types",{configurable:!0,set:function(){ye("You are setting ___embind_register_native_and_builtin_types on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(i.ready,"onRuntimeInitialized")||(Object.defineProperty(i.ready,"onRuntimeInitialized",{configurable:!0,get:function(){ye("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(i.ready,"onRuntimeInitialized",{configurable:!0,set:function(){ye("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var o,a={};for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);var s=[],c="./this.program",A=function(e,t){throw t},l="object"==typeof window,u="function"==typeof importScripts,d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h=!l&&!d&&!u;if(i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var p,f,m,E="";if(!l&&!u)throw new Error("environment detection error");if(u?E=self.location.href:"undefined"!=typeof document&&document.currentScript&&(E=document.currentScript.src),n&&(E=n),E=0!==E.indexOf("blob:")?E.substr(0,E.lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(m=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):r()},i.onerror=r,i.send(null)};var I=i.print||console.log.bind(console),_=i.printErr||console.warn.bind(console);for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);function C(e){C.shown||(C.shown={}),C.shown[e]||(C.shown[e]=1,_(e))}a=null,i.arguments&&(s=i.arguments),Object.getOwnPropertyDescriptor(i,"arguments")||Object.defineProperty(i,"arguments",{configurable:!0,get:function(){ye("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),i.thisProgram&&(c=i.thisProgram),Object.getOwnPropertyDescriptor(i,"thisProgram")||Object.defineProperty(i,"thisProgram",{configurable:!0,get:function(){ye("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),i.quit&&(A=i.quit),Object.getOwnPropertyDescriptor(i,"quit")||Object.defineProperty(i,"quit",{configurable:!0,get:function(){ye("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),D(void 0===i.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),D(void 0===i.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),D(void 0===i.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),D(void 0===i.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),D(void 0===i.read,"Module.read option was removed (modify read_ in JS)"),D(void 0===i.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),D(void 0===i.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),D(void 0===i.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),D(void 0===i.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(i,"read")||Object.defineProperty(i,"read",{configurable:!0,get:function(){ye("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(i,"readAsync")||Object.defineProperty(i,"readAsync",{configurable:!0,get:function(){ye("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(i,"readBinary")||Object.defineProperty(i,"readBinary",{configurable:!0,get:function(){ye("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(i,"setWindowTitle")||Object.defineProperty(i,"setWindowTitle",{configurable:!0,get:function(){ye("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),D(!h,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");var y,T=0,v=function(e){T=e};i.wasmBinary&&(y=i.wasmBinary),Object.getOwnPropertyDescriptor(i,"wasmBinary")||Object.defineProperty(i,"wasmBinary",{configurable:!0,get:function(){ye("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});var w=i.noExitRuntime||!0;Object.getOwnPropertyDescriptor(i,"noExitRuntime")||Object.defineProperty(i,"noExitRuntime",{configurable:!0,get:function(){ye("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!=typeof WebAssembly&&ye("no native wasm support detected");var S,b,R=!1;function D(e,t){e||ye("Assertion failed: "+t)}var B="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,t,r){for(var i=t+r,n=t;e[n]&&!(n>=i);)++n;if(n-t>16&&e.subarray&&B)return B.decode(e.subarray(t,n));for(var o="";t<n;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|c:(240!=(248&a)&&C("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(7&a)<<18|s<<12|c<<6|63&e[t++]),a<65536)o+=String.fromCharCode(a);else{var A=a-65536;o+=String.fromCharCode(55296|A>>10,56320|1023&A)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function Q(e,t){return e?O(x,e,t):""}function k(e,t,r,i){if(!(i>0))return 0;for(var n=r,o=r+i-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=o)break;s>=2097152&&C("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-n}function M(e,t,r){return D("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),k(e,x,t,r)}function P(e){for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++r)),i<=127?++t:t+=i<=2047?2:i<=65535?3:4}return t}var N,L,x,U,F,V,G,j,H,Y="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function W(e,t){D(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var r=e,i=r>>1,n=i+t/2;!(i>=n)&&F[i];)++i;if((r=i<<1)-e>32&&Y)return Y.decode(x.subarray(e,r));for(var o="",a=0;!(a>=t/2);++a){var s=U[e+2*a>>1];if(0==s)break;o+=String.fromCharCode(s)}return o}function J(e,t,r){if(D(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),D("number"==typeof r,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===r&&(r=2147483647),r<2)return 0;for(var i=t,n=(r-=2)<2*e.length?r/2:e.length,o=0;o<n;++o){var a=e.charCodeAt(o);U[t>>1]=a,t+=2}return U[t>>1]=0,t-i}function X(e){return 2*e.length}function K(e,t){D(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var r=0,i="";!(r>=t/4);){var n=V[e+4*r>>2];if(0==n)break;if(++r,n>=65536){var o=n-65536;i+=String.fromCharCode(55296|o>>10,56320|1023&o)}else i+=String.fromCharCode(n)}return i}function z(e,t,r){if(D(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),D("number"==typeof r,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===r&&(r=2147483647),r<4)return 0;for(var i=t,n=i+r-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),V[t>>2]=a,(t+=4)+4>n)break}return V[t>>2]=0,t-i}function q(e){for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&++r,t+=4}return t}function Z(e){var t=P(e)+1,r=zr(t);return r&&k(e,L,r,t),r}function $(e,t){return e%t>0&&(e+=t-e%t),e}function ee(e){N=e,i.HEAP8=L=new Int8Array(e),i.HEAP16=U=new Int16Array(e),i.HEAP32=V=new Int32Array(e),i.HEAPU8=x=new Uint8Array(e),i.HEAPU16=F=new Uint16Array(e),i.HEAPU32=G=new Uint32Array(e),i.HEAPF32=j=new Float32Array(e),i.HEAPF64=H=new Float64Array(e)}var te=5242880;i.TOTAL_STACK&&D(te===i.TOTAL_STACK,"the stack size can no longer be determined at runtime");var re,ie=i.INITIAL_MEMORY||16777216;function ne(){var e=$r();D(!(3&e)),G[1+(e>>2)]=34821223,G[2+(e>>2)]=2310721022,V[0]=1668509029}function oe(){if(!R){var e=$r(),t=G[1+(e>>2)],r=G[2+(e>>2)];(34821223!=t||2310721022!=r)&&ye("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+r.toString(16)+" "+t.toString(16)),1668509029!==V[0]&&ye("Runtime error: The application has corrupted its heap memory area (address zero)!")}}Object.getOwnPropertyDescriptor(i,"INITIAL_MEMORY")||Object.defineProperty(i,"INITIAL_MEMORY",{configurable:!0,get:function(){ye("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),D(ie>=te,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+ie+"! (TOTAL_STACK="+te+")"),D("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),D(!i.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),D(16777216==ie,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically"),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"}();var ae=[],se=[],ce=[],Ae=[],le=!1,ue=!1;function de(){return w||!1}D(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),D(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),D(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),D(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var he,ge,pe=0,fe=null,me=null,Ee={};function Ie(e){for(var t=e;;){if(!Ee[e])return e;e=t+Math.random()}}function _e(e){pe++,i.monitorRunDependencies&&i.monitorRunDependencies(pe),e?(D(!Ee[e]),Ee[e]=1,null===fe&&"undefined"!=typeof setInterval&&(fe=setInterval((function(){if(R)return clearInterval(fe),void(fe=null);var e=!1;for(var t in Ee)e||(e=!0,_("still waiting on run dependencies:")),_("dependency: "+t);e&&_("(end of list)")}),1e4))):_("warning: run dependency added without ID")}function Ce(e){if(pe--,i.monitorRunDependencies&&i.monitorRunDependencies(pe),e?(D(Ee[e]),delete Ee[e]):_("warning: run dependency removed without ID"),0==pe&&(null!==fe&&(clearInterval(fe),fe=null),me)){var t=me;me=null,t()}}function ye(e){i.onAbort&&i.onAbort(e),_(e+=""),R=!0,b=1;var t="abort("+e+") at "+function(){var e=function(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}();return i.extraStackTrace&&(e+="\n"+i.extraStackTrace()),Le(e)}();e=t;var n=new WebAssembly.RuntimeError(e);throw r(n),n}function Te(e){return e.startsWith("data:application/octet-stream;base64,")}function ve(e){return e.startsWith("file://")}function we(e,t){return function(){var r=e,n=t;return t||(n=i.asm),D(le,"native function `"+r+"` called before runtime initialization"),D(!ue,"native function `"+r+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),n[e]||D(n[e],"exported native function `"+r+"` not found"),n[e].apply(null,arguments)}}function Se(e){try{if(e==he&&y)return new Uint8Array(y);if(m)return m(e);throw"both async and sync fetching of the wasm failed"}catch(e){ye(e)}}i.preloadedImages={},i.preloadedAudios={},Te(he="selfie_segmentation_solution_wasm_bin.wasm")||(ge=he,he=i.locateFile?i.locateFile(ge,E):E+ge);var be,Re,De,Be={460976:function(){let e=!0;if(e){let t=mr;if("function"!=typeof t)return void("undefined"!=typeof console&&console.error('Expected Emscripten global function "findCanvasEventTarget" not found. WebGL context creation may fail.'));mr=function(e){if(0==e){if(i&&i.canvas)return i.canvas;if(i&&i.canvasCssSelector)return t(i.canvasCssSelector);"undefined"!=typeof console&&console.warn("Module properties canvas and canvasCssSelector not found during WebGL context creation.")}return t(e)},e=!1}},461761:function(){return"undefined"!=typeof wasmOffsetConverter}};function Oe(e,t){if(Pe.mainLoop.timingMode=e,Pe.mainLoop.timingValue=t,!Pe.mainLoop.func)return _("emscripten_set_main_loop_timing: Cannot set timing mode for main loop since a main loop does not exist! Call emscripten_set_main_loop first to set one up."),1;if(Pe.mainLoop.running||(Pe.mainLoop.running=!0),0==e)Pe.mainLoop.scheduler=function(){var e=0|Math.max(0,Pe.mainLoop.tickStartTime+t-De());setTimeout(Pe.mainLoop.runner,e)},Pe.mainLoop.method="timeout";else if(1==e)Pe.mainLoop.scheduler=function(){Pe.requestAnimationFrame(Pe.mainLoop.runner)},Pe.mainLoop.method="rAF";else if(2==e){if("undefined"==typeof setImmediate){var r=[],n="setimmediate";addEventListener("message",(function(e){(e.data===n||e.data.target===n)&&(e.stopPropagation(),r.shift()())}),!0),setImmediate=function(e){r.push(e),u?(void 0===i.setImmediates&&(i.setImmediates=[]),i.setImmediates.push(e),postMessage({target:n})):postMessage(n,"*")}}Pe.mainLoop.scheduler=function(){setImmediate(Pe.mainLoop.runner)},Pe.mainLoop.method="immediate"}return 0}function Qe(e){!function(e){if(b=e,function(){var e=I,t=_,r=!1;I=_=function(e){r=!0};try{var n=i._fflush;n&&n(0),["stdout","stderr"].forEach((function(e){var t=Ze.analyzePath("/dev/"+e);if(t){var i=t.object.rdev,n=Je.ttys[i];n&&n.output&&n.output.length&&(r=!0)}}))}catch(e){}I=e,_=t,r&&C("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc.")}(),de()){var t="program exited (with status: "+e+"), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)";r(t),_(t)}else oe(),ue=!0;di(e)}(e)}function ke(e,t){if(R)_("user callback triggered after application aborted.  Ignoring.");else if(t)e();else try{e()}catch(e){if(e instanceof li)return;if("unwind"!==e)throw e&&"object"==typeof e&&e.stack&&_("exception thrown: "+[e,e.stack]),e}}function Me(e,t){return setTimeout((function(){ke(e)}),t)}De=d?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.now()};var Pe={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Pe.mainLoop.scheduler=null,Pe.mainLoop.currentlyRunningMainloop++},resume:function(){Pe.mainLoop.currentlyRunningMainloop++;var e=Pe.mainLoop.timingMode,t=Pe.mainLoop.timingValue,r=Pe.mainLoop.func;Pe.mainLoop.func=null,function(e,t,r,n,o){D(!Pe.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Pe.mainLoop.func=e,Pe.mainLoop.arg=n;var a=Pe.mainLoop.currentlyRunningMainloop;function s(){return!(a<Pe.mainLoop.currentlyRunningMainloop&&(function(){if(!de())try{Qe(b)}catch(e){if(e instanceof li)return;throw e}}(),1))}if(Pe.mainLoop.running=!1,Pe.mainLoop.runner=function(){if(!R){if(Pe.mainLoop.queue.length>0){var t=Date.now(),r=Pe.mainLoop.queue.shift();if(r.func(r.arg),Pe.mainLoop.remainingBlockers){var n=Pe.mainLoop.remainingBlockers,o=n%1==0?n-1:Math.floor(n);r.counted?Pe.mainLoop.remainingBlockers=o:(o+=.5,Pe.mainLoop.remainingBlockers=(8*n+o)/9)}if(I('main loop blocker "'+r.name+'" took '+(Date.now()-t)+" ms"),Pe.mainLoop.updateStatus(),!s())return;return void setTimeout(Pe.mainLoop.runner,0)}if(s()){if(Pe.mainLoop.currentFrameNumber=Pe.mainLoop.currentFrameNumber+1|0,1==Pe.mainLoop.timingMode&&Pe.mainLoop.timingValue>1&&Pe.mainLoop.currentFrameNumber%Pe.mainLoop.timingValue!=0)return void Pe.mainLoop.scheduler();0==Pe.mainLoop.timingMode&&(Pe.mainLoop.tickStartTime=De()),hr.newRenderingFrameStarted(),void 0!==hr&&hr.currentContext&&!hr.currentContextIsProxied&&!hr.currentContext.attributes.explicitSwapControl&&hr.currentContext.GLctx.commit&&hr.currentContext.GLctx.commit(),"timeout"===Pe.mainLoop.method&&i.ctx&&(C("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),Pe.mainLoop.method=""),Pe.mainLoop.runIter(e),oe(),s()&&("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Pe.mainLoop.scheduler())}}},o||(t&&t>0?Oe(0,1e3/t):Oe(1,1),Pe.mainLoop.scheduler()),r)throw"unwind"}(r,0,!1,Pe.mainLoop.arg,!0),Oe(e,t),Pe.mainLoop.scheduler()},updateStatus:function(){if(i.setStatus){var e=i.statusMessage||"Please wait...",t=Pe.mainLoop.remainingBlockers,r=Pe.mainLoop.expectedBlockers;t?t<r?i.setStatus(e+" ("+(r-t)+"/"+r+")"):i.setStatus(e):i.setStatus("")}},runIter:function(e){if(!R){if(i.preMainLoop&&!1===i.preMainLoop())return;ke(e),i.postMainLoop&&i.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(i.preloadPlugins||(i.preloadPlugins=[]),!Pe.initted){Pe.initted=!0;try{new Blob,Pe.hasBlobConstructor=!0}catch(e){Pe.hasBlobConstructor=!1,I("warning: no blob constructor, cannot create blobs with mimetypes")}Pe.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Pe.hasBlobConstructor?null:I("warning: no BlobBuilder"),Pe.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,!i.noImageDecoding&&void 0===Pe.URLObject&&(I("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),i.noImageDecoding=!0);var e={canHandle:function(e){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},handle:function(e,t,r,n){var o=null;if(Pe.hasBlobConstructor)try{(o=new Blob([e],{type:Pe.getMimetype(t)})).size!==e.length&&(o=new Blob([new Uint8Array(e).buffer],{type:Pe.getMimetype(t)}))}catch(e){C("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!o){var a=new Pe.BlobBuilder;a.append(new Uint8Array(e).buffer),o=a.getBlob()}var s=Pe.URLObject.createObjectURL(o);D("string"==typeof s,"createObjectURL must return a url as a string");var c=new Image;c.onload=function(){D(c.complete,"Image "+t+" could not be decoded");var n=document.createElement("canvas");n.width=c.width,n.height=c.height,n.getContext("2d").drawImage(c,0,0),i.preloadedImages[t]=n,Pe.URLObject.revokeObjectURL(s),r&&r(e)},c.onerror=function(e){I("Image "+s+" could not be decoded"),n&&n()},c.src=s}};i.preloadPlugins.push(e);var t={canHandle:function(e){return!i.noAudioDecoding&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,t,r,n){var o=!1;function a(n){o||(o=!0,i.preloadedAudios[t]=n,r&&r(e))}function s(){o||(o=!0,i.preloadedAudios[t]=new Audio,n&&n())}if(!Pe.hasBlobConstructor)return s();try{var c=new Blob([e],{type:Pe.getMimetype(t)})}catch(e){return s()}var A=Pe.URLObject.createObjectURL(c);D("string"==typeof A,"createObjectURL must return a url as a string");var l=new Audio;l.addEventListener("canplaythrough",(function(){a(l)}),!1),l.onerror=function(r){o||(I("warning: browser could not fully decode audio "+t+", trying slower base64 approach"),l.src="data:audio/x-"+t.substr(-3)+";base64,"+function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i=0,n=0,o=0;o<e.length;o++)for(i=i<<8|e[o],n+=8;n>=6;){var a=i>>n-6&63;n-=6,r+=t[a]}return 2==n?(r+=t[(3&i)<<4],r+="=="):4==n&&(r+=t[(15&i)<<2],r+="="),r}(e),a(l))},l.src=A,Me((function(){a(l)}),1e4)}};i.preloadPlugins.push(t);var r=i.canvas;r&&(r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock||r.msRequestPointerLock||function(){},r.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},r.exitPointerLock=r.exitPointerLock.bind(document),i.elementPointerLock&&r.addEventListener("click",(function(e){!Pe.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),e.preventDefault())}),!1))}},createContext:function(e,t,r,n){if(t&&i.ctx&&e==i.canvas)return i.ctx;var o,a;if(t){var s={antialias:!1,alpha:!1,majorVersion:"undefined"!=typeof WebGL2RenderingContext?2:1};if(n)for(var c in n)s[c]=n[c];void 0!==hr&&(a=hr.createContext(e,s))&&(o=hr.getContext(a).GLctx)}else o=e.getContext("2d");return o?(r&&(t||D(void 0===Gr,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=o,t&&hr.makeContextCurrent(a),i.useWebGL=t,Pe.moduleContextCreatedCallbacks.forEach((function(e){e()})),Pe.init()),o):null},destroyContext:function(e,t,r){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t){Pe.lockPointer=e,Pe.resizeCanvas=t,void 0===Pe.lockPointer&&(Pe.lockPointer=!0),void 0===Pe.resizeCanvas&&(Pe.resizeCanvas=!1);var r=i.canvas;function n(){Pe.isFullscreen=!1;var e=r.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(r.exitFullscreen=Pe.exitFullscreen,Pe.lockPointer&&r.requestPointerLock(),Pe.isFullscreen=!0,Pe.resizeCanvas?Pe.setFullscreenCanvasSize():Pe.updateCanvasDimensions(r)):(e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e),Pe.resizeCanvas?Pe.setWindowedCanvasSize():Pe.updateCanvasDimensions(r)),i.onFullScreen&&i.onFullScreen(Pe.isFullscreen),i.onFullscreen&&i.onFullscreen(Pe.isFullscreen)}Pe.fullscreenHandlersInstalled||(Pe.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1));var o=document.createElement("div");r.parentNode.insertBefore(o,r),o.appendChild(r),o.requestFullscreen=o.requestFullscreen||o.mozRequestFullScreen||o.msRequestFullscreen||(o.webkitRequestFullscreen?function(){o.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(o.webkitRequestFullScreen?function(){o.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),o.requestFullscreen()},requestFullScreen:function(){ye("Module.requestFullScreen has been replaced by Module.requestFullscreen (without a capital S)")},exitFullscreen:function(){return!!Pe.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(0===Pe.nextRAF)Pe.nextRAF=t+1e3/60;else for(;t+2>=Pe.nextRAF;)Pe.nextRAF+=1e3/60;var r=Math.max(Pe.nextRAF-t,0);setTimeout(e,r)},requestAnimationFrame:function(e){"function"!=typeof requestAnimationFrame?(0,Pe.fakeRequestAnimationFrame)(e):requestAnimationFrame(e)},safeSetTimeout:function(e){return Me(e)},safeRequestAnimationFrame:function(e){return Pe.requestAnimationFrame((function(){ke(e)}))},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(Pe.pointerLock)"mousemove"!=e.type&&"mozMovementX"in e?Pe.mouseMovementX=Pe.mouseMovementY=0:(Pe.mouseMovementX=Pe.getMovementX(e),Pe.mouseMovementY=Pe.getMovementY(e)),"undefined"!=typeof SDL?(Pe.mouseX=SDL.mouseX+Pe.mouseMovementX,Pe.mouseY=SDL.mouseY+Pe.mouseMovementY):(Pe.mouseX+=Pe.mouseMovementX,Pe.mouseY+=Pe.mouseMovementY);else{var t=i.canvas.getBoundingClientRect(),r=i.canvas.width,n=i.canvas.height,o=void 0!==window.scrollX?window.scrollX:window.pageXOffset,a=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if(D(void 0!==o&&void 0!==a,"Unable to retrieve scroll position, mouse positions likely broken."),"touchstart"===e.type||"touchend"===e.type||"touchmove"===e.type){var s=e.touch;if(void 0===s)return;var c=s.pageX-(o+t.left),A=s.pageY-(a+t.top),l={x:c*=r/t.width,y:A*=n/t.height};if("touchstart"===e.type)Pe.lastTouches[s.identifier]=l,Pe.touches[s.identifier]=l;else if("touchend"===e.type||"touchmove"===e.type){var u=Pe.touches[s.identifier];u||(u=l),Pe.lastTouches[s.identifier]=u,Pe.touches[s.identifier]=l}return}var d=e.pageX-(o+t.left),h=e.pageY-(a+t.top);d*=r/t.width,h*=n/t.height,Pe.mouseMovementX=d-Pe.mouseX,Pe.mouseMovementY=h-Pe.mouseY,Pe.mouseX=d,Pe.mouseY=h}},resizeListeners:[],updateResizeListeners:function(){var e=i.canvas;Pe.resizeListeners.forEach((function(t){t(e.width,e.height)}))},setCanvasSize:function(e,t,r){var n=i.canvas;Pe.updateCanvasDimensions(n,e,t),r||Pe.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var e=G[SDL.screen>>2];e|=8388608,V[SDL.screen>>2]=e}Pe.updateCanvasDimensions(i.canvas),Pe.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var e=G[SDL.screen>>2];e&=-8388609,V[SDL.screen>>2]=e}Pe.updateCanvasDimensions(i.canvas),Pe.updateResizeListeners()},updateCanvasDimensions:function(e,t,r){t&&r?(e.widthNative=t,e.heightNative=r):(t=e.widthNative,r=e.heightNative);var n=t,o=r;if(i.forcedAspectRatio&&i.forcedAspectRatio>0&&(n/o<i.forcedAspectRatio?n=Math.round(o*i.forcedAspectRatio):o=Math.round(n/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen){var a=Math.min(screen.width/n,screen.height/o);n=Math.round(n*a),o=Math.round(o*a)}Pe.resizeCanvas?(e.width!=n&&(e.width=n),e.height!=o&&(e.height=o),void 0!==e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=r&&(e.height=r),void 0!==e.style&&(n!=t||o!=r?(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",o+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}};function Ne(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?re.get(r)():re.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(i)}}function Le(e){return e.replace(/\b_Z[\w\d_]+/g,(function(e){var t=function(e){return C("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}(e);return e===t?e:t+" ["+e+"]"}))}function xe(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){V[this.ptr+4>>2]=e},this.get_type=function(){return V[this.ptr+4>>2]},this.set_destructor=function(e){V[this.ptr+8>>2]=e},this.get_destructor=function(){return V[this.ptr+8>>2]},this.set_refcount=function(e){V[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,L[this.ptr+12|0]=e},this.get_caught=function(){return 0!=L[this.ptr+12|0]},this.set_rethrown=function(e){e=e?1:0,L[this.ptr+13|0]=e},this.get_rethrown=function(){return 0!=L[this.ptr+13|0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=V[this.ptr>>2];V[this.ptr>>2]=e+1},this.release_ref=function(){var e=V[this.ptr>>2];return V[this.ptr>>2]=e-1,D(e>0),1===e}}function Ue(e){this.free=function(){Kr(this.ptr),this.ptr=0},this.set_base_ptr=function(e){V[this.ptr>>2]=e},this.get_base_ptr=function(){return V[this.ptr>>2]},this.set_adjusted_ptr=function(e){V[this.ptr+4>>2]=e},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return V[this.ptr+4>>2]},this.get_exception_ptr=function(){if(ci(this.get_exception_info().get_type()))return V[this.get_base_ptr()>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.get_base_ptr()},this.get_exception_info=function(){return new xe(this.get_base_ptr())},void 0===e?(this.ptr=zr(8),this.set_adjusted_ptr(0)):this.ptr=e}var Fe=[],Ve=0;function Ge(e){try{return Kr(new xe(e).ptr)}catch(e){_("exception during cxa_free_exception: "+e)}}function je(e){return V[qr()>>2]=e,e}var He={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return!(e=He.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=He.splitPath(e),r=t[0],i=t[1];return r||i?(i&&(i=i.substr(0,i.length-1)),r+i):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=He.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return He.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return He.normalize(e.join("/"))},join2:function(e,t){return He.normalize(e+"/"+t)}};function Ye(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(d)try{var t=g("crypto");return function(){return t.randomBytes(1)[0]}}catch(e){}return function(){ye("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}}var We={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var i=r>=0?arguments[r]:Ze.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,t="/"===i.charAt(0)}return(t?"/":"")+(e=He.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=We.resolve(e).substr(1),t=We.resolve(t).substr(1);for(var i=r(e.split("/")),n=r(t.split("/")),o=Math.min(i.length,n.length),a=o,s=0;s<o;s++)if(i[s]!==n[s]){a=s;break}var c=[];for(s=a;s<i.length;s++)c.push("..");return(c=c.concat(n.slice(a))).join("/")}},Je={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Je.ttys[e]={input:[],output:[],ops:t},Ze.registerDevice(e,Je.stream_ops)},stream_ops:{open:function(e){var t=Je.ttys[e.node.rdev];if(!t)throw new Ze.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,i,n){if(!e.tty||!e.tty.ops.get_char)throw new Ze.ErrnoError(60);for(var o=0,a=0;a<i;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new Ze.ErrnoError(29)}if(void 0===s&&0===o)throw new Ze.ErrnoError(6);if(null==s)break;o++,t[r+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,r,i,n){if(!e.tty||!e.tty.ops.put_char)throw new Ze.ErrnoError(60);try{for(var o=0;o<i;o++)e.tty.ops.put_char(e.tty,t[r+o])}catch(e){throw new Ze.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(d){var r=Buffer.alloc(256),i=0;try{i=nodeFS.readSync(process.stdin.fd,r,0,256,null)}catch(e){if(!e.toString().includes("EOF"))throw e;i=0}t=i>0?r.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=Wr(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(I(O(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(I(O(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(_(O(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(_(O(e.output,0)),e.output=[])}}};function Xe(e){e=function(e,t){return D(t,"alignment argument is required"),Math.ceil(e/t)*t}(e,65536);var t=Ai(65536,e);return t?(function(e,t){x.fill(0,e,e+t)}(t,e),t):0}var Ke={ops_table:null,mount:function(e){return Ke.createNode(null,"/",16895,0)},createNode:function(e,t,r,i){if(Ze.isBlkdev(r)||Ze.isFIFO(r))throw new Ze.ErrnoError(63);Ke.ops_table||(Ke.ops_table={dir:{node:{getattr:Ke.node_ops.getattr,setattr:Ke.node_ops.setattr,lookup:Ke.node_ops.lookup,mknod:Ke.node_ops.mknod,rename:Ke.node_ops.rename,unlink:Ke.node_ops.unlink,rmdir:Ke.node_ops.rmdir,readdir:Ke.node_ops.readdir,symlink:Ke.node_ops.symlink},stream:{llseek:Ke.stream_ops.llseek}},file:{node:{getattr:Ke.node_ops.getattr,setattr:Ke.node_ops.setattr},stream:{llseek:Ke.stream_ops.llseek,read:Ke.stream_ops.read,write:Ke.stream_ops.write,allocate:Ke.stream_ops.allocate,mmap:Ke.stream_ops.mmap,msync:Ke.stream_ops.msync}},link:{node:{getattr:Ke.node_ops.getattr,setattr:Ke.node_ops.setattr,readlink:Ke.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ke.node_ops.getattr,setattr:Ke.node_ops.setattr},stream:Ze.chrdev_stream_ops}});var n=Ze.createNode(e,t,r,i);return Ze.isDir(n.mode)?(n.node_ops=Ke.ops_table.dir.node,n.stream_ops=Ke.ops_table.dir.stream,n.contents={}):Ze.isFile(n.mode)?(n.node_ops=Ke.ops_table.file.node,n.stream_ops=Ke.ops_table.file.stream,n.usedBytes=0,n.contents=null):Ze.isLink(n.mode)?(n.node_ops=Ke.ops_table.link.node,n.stream_ops=Ke.ops_table.link.stream):Ze.isChrdev(n.mode)&&(n.node_ops=Ke.ops_table.chrdev.node,n.stream_ops=Ke.ops_table.chrdev.stream),n.timestamp=Date.now(),e&&(e.contents[t]=n,e.timestamp=n.timestamp),n},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var i=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Ze.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Ze.isDir(e.mode)?t.size=4096:Ze.isFile(e.mode)?t.size=e.usedBytes:Ze.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Ke.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Ze.genericErrors[44]},mknod:function(e,t,r,i){return Ke.createNode(e,t,r,i)},rename:function(e,t,r){if(Ze.isDir(e.mode)){var i;try{i=Ze.lookupNode(t,r)}catch(e){}if(i)for(var n in i.contents)throw new Ze.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var r=Ze.lookupNode(e,t);for(var i in r.contents)throw new Ze.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var i=Ke.createNode(e,t,41471,0);return i.link=r,i},readlink:function(e){if(!Ze.isLink(e.mode))throw new Ze.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,i,n){var o=e.node.contents;if(n>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-n,i);if(D(a>=0),a>8&&o.subarray)t.set(o.subarray(n,n+a),r);else for(var s=0;s<a;s++)t[r+s]=o[n+s];return a},write:function(e,t,r,i,n,o){if(D(!(t instanceof ArrayBuffer)),t.buffer===L.buffer&&(o=!1),!i)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(o)return D(0===n,"canOwn must imply no weird position inside the file"),a.contents=t.subarray(r,r+i),a.usedBytes=i,i;if(0===a.usedBytes&&0===n)return a.contents=t.slice(r,r+i),a.usedBytes=i,i;if(n+i<=a.usedBytes)return a.contents.set(t.subarray(r,r+i),n),i}if(Ke.expandFileStorage(a,n+i),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(r,r+i),n);else for(var s=0;s<i;s++)a.contents[n+s]=t[r+s];return a.usedBytes=Math.max(a.usedBytes,n+i),i},llseek:function(e,t,r){var i=t;if(1===r?i+=e.position:2===r&&Ze.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new Ze.ErrnoError(28);return i},allocate:function(e,t,r){Ke.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,i,n,o){if(0!==t)throw new Ze.ErrnoError(28);if(!Ze.isFile(e.node.mode))throw new Ze.ErrnoError(43);var a,s,c=e.node.contents;if(2&o||c.buffer!==N){if((i>0||i+r<c.length)&&(c=c.subarray?c.subarray(i,i+r):Array.prototype.slice.call(c,i,i+r)),s=!0,!(a=Xe(r)))throw new Ze.ErrnoError(48);L.set(c,a)}else s=!1,a=c.byteOffset;return{ptr:a,allocated:s}},msync:function(e,t,r,i,n){if(!Ze.isFile(e.node.mode))throw new Ze.ErrnoError(43);return 2&n||Ke.stream_ops.write(e,t,0,i,r,!1),0}}},ze={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},qe={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Ze={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=We.resolve(Ze.cwd(),e)))return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var i in r)void 0===t[i]&&(t[i]=r[i]);if(t.recurse_count>8)throw new Ze.ErrnoError(32);for(var n=He.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),o=Ze.root,a="/",s=0;s<n.length;s++){var c=s===n.length-1;if(c&&t.parent)break;if(o=Ze.lookupNode(o,n[s]),a=He.join2(a,n[s]),Ze.isMountpoint(o)&&(!c||c&&t.follow_mount)&&(o=o.mounted.root),!c||t.follow)for(var A=0;Ze.isLink(o.mode);){var l=Ze.readlink(a);if(a=We.resolve(He.dirname(a),l),o=Ze.lookupPath(a,{recurse_count:t.recurse_count}).node,A++>40)throw new Ze.ErrnoError(32)}}return{path:a,node:o}},getPath:function(e){for(var t;;){if(Ze.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;return(e+r>>>0)%Ze.nameTable.length},hashAddNode:function(e){var t=Ze.hashName(e.parent.id,e.name);e.name_next=Ze.nameTable[t],Ze.nameTable[t]=e},hashRemoveNode:function(e){var t=Ze.hashName(e.parent.id,e.name);if(Ze.nameTable[t]===e)Ze.nameTable[t]=e.name_next;else for(var r=Ze.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:function(e,t){var r=Ze.mayLookup(e);if(r)throw new Ze.ErrnoError(r,e);for(var i=Ze.hashName(e.id,t),n=Ze.nameTable[i];n;n=n.name_next){var o=n.name;if(n.parent.id===e.id&&o===t)return n}return Ze.lookup(e,t)},createNode:function(e,t,r,i){D("object"==typeof e);var n=new Ze.FSNode(e,t,r,i);return Ze.hashAddNode(n),n},destroyNode:function(e){Ze.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return!(49152&~e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=Ze.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return Ze.ignorePermissions?0:t.includes("r")&&!(292&e.mode)||t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0},mayLookup:function(e){return Ze.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return Ze.lookupNode(e,t),20}catch(e){}return Ze.nodePermissions(e,"wx")},mayDelete:function(e,t,r){var i;try{i=Ze.lookupNode(e,t)}catch(e){return e.errno}var n=Ze.nodePermissions(e,"wx");if(n)return n;if(r){if(!Ze.isDir(i.mode))return 54;if(Ze.isRoot(i)||Ze.getPath(i)===Ze.cwd())return 10}else if(Ze.isDir(i.mode))return 31;return 0},mayOpen:function(e,t){return e?Ze.isLink(e.mode)?32:Ze.isDir(e.mode)&&("r"!==Ze.flagsToPermissionString(t)||512&t)?31:Ze.nodePermissions(e,Ze.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||Ze.MAX_OPEN_FDS;for(var r=e;r<=t;r++)if(!Ze.streams[r])return r;throw new Ze.ErrnoError(33)},getStream:function(e){return Ze.streams[e]},createStream:function(e,t,r){Ze.FSStream||(Ze.FSStream=function(){},Ze.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return!!(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var i=new Ze.FSStream;for(var n in e)i[n]=e[n];e=i;var o=Ze.nextfd(t,r);return e.fd=o,Ze.streams[o]=e,e},closeStream:function(e){Ze.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=Ze.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new Ze.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){Ze.devices[e]={stream_ops:t}},getDevice:function(e){return Ze.devices[e]},getMounts:function(e){for(var t=[],r=[e];r.length;){var i=r.pop();t.push(i),r.push.apply(r,i.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),Ze.syncFSRequests++,Ze.syncFSRequests>1&&_("warning: "+Ze.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=Ze.getMounts(Ze.root.mount),i=0;function n(e){return D(Ze.syncFSRequests>0),Ze.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,n(e));++i>=r.length&&n(null)}r.forEach((function(t){if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount:function(e,t,r){if("string"==typeof e)throw e;var i,n="/"===r,o=!r;if(n&&Ze.root)throw new Ze.ErrnoError(10);if(!n&&!o){var a=Ze.lookupPath(r,{follow_mount:!1});if(r=a.path,i=a.node,Ze.isMountpoint(i))throw new Ze.ErrnoError(10);if(!Ze.isDir(i.mode))throw new Ze.ErrnoError(54)}var s={type:e,opts:t,mountpoint:r,mounts:[]},c=e.mount(s);return c.mount=s,s.root=c,n?Ze.root=c:i&&(i.mounted=s,i.mount&&i.mount.mounts.push(s)),c},unmount:function(e){var t=Ze.lookupPath(e,{follow_mount:!1});if(!Ze.isMountpoint(t.node))throw new Ze.ErrnoError(28);var r=t.node,i=r.mounted,n=Ze.getMounts(i);Object.keys(Ze.nameTable).forEach((function(e){for(var t=Ze.nameTable[e];t;){var r=t.name_next;n.includes(t.mount)&&Ze.destroyNode(t),t=r}})),r.mounted=null;var o=r.mount.mounts.indexOf(i);D(-1!==o),r.mount.mounts.splice(o,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var i=Ze.lookupPath(e,{parent:!0}).node,n=He.basename(e);if(!n||"."===n||".."===n)throw new Ze.ErrnoError(28);var o=Ze.mayCreate(i,n);if(o)throw new Ze.ErrnoError(o);if(!i.node_ops.mknod)throw new Ze.ErrnoError(63);return i.node_ops.mknod(i,n,t,r)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,Ze.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,Ze.mknod(e,t,0)},mkdirTree:function(e,t){for(var r=e.split("/"),i="",n=0;n<r.length;++n)if(r[n]){i+="/"+r[n];try{Ze.mkdir(i,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,r){return void 0===r&&(r=t,t=438),t|=8192,Ze.mknod(e,t,r)},symlink:function(e,t){if(!We.resolve(e))throw new Ze.ErrnoError(44);var r=Ze.lookupPath(t,{parent:!0}).node;if(!r)throw new Ze.ErrnoError(44);var i=He.basename(t),n=Ze.mayCreate(r,i);if(n)throw new Ze.ErrnoError(n);if(!r.node_ops.symlink)throw new Ze.ErrnoError(63);return r.node_ops.symlink(r,i,e)},rename:function(e,t){var r,i,n=He.dirname(e),o=He.dirname(t),a=He.basename(e),s=He.basename(t);if(r=Ze.lookupPath(e,{parent:!0}).node,i=Ze.lookupPath(t,{parent:!0}).node,!r||!i)throw new Ze.ErrnoError(44);if(r.mount!==i.mount)throw new Ze.ErrnoError(75);var c,A=Ze.lookupNode(r,a),l=We.relative(e,o);if("."!==l.charAt(0))throw new Ze.ErrnoError(28);if("."!==(l=We.relative(t,n)).charAt(0))throw new Ze.ErrnoError(55);try{c=Ze.lookupNode(i,s)}catch(e){}if(A!==c){var u=Ze.isDir(A.mode),d=Ze.mayDelete(r,a,u);if(d)throw new Ze.ErrnoError(d);if(d=c?Ze.mayDelete(i,s,u):Ze.mayCreate(i,s))throw new Ze.ErrnoError(d);if(!r.node_ops.rename)throw new Ze.ErrnoError(63);if(Ze.isMountpoint(A)||c&&Ze.isMountpoint(c))throw new Ze.ErrnoError(10);if(i!==r&&(d=Ze.nodePermissions(r,"w")))throw new Ze.ErrnoError(d);try{Ze.trackingDelegate.willMovePath&&Ze.trackingDelegate.willMovePath(e,t)}catch(r){_("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}Ze.hashRemoveNode(A);try{r.node_ops.rename(A,i,s)}catch(e){throw e}finally{Ze.hashAddNode(A)}try{Ze.trackingDelegate.onMovePath&&Ze.trackingDelegate.onMovePath(e,t)}catch(r){_("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}}},rmdir:function(e){var t=Ze.lookupPath(e,{parent:!0}).node,r=He.basename(e),i=Ze.lookupNode(t,r),n=Ze.mayDelete(t,r,!0);if(n)throw new Ze.ErrnoError(n);if(!t.node_ops.rmdir)throw new Ze.ErrnoError(63);if(Ze.isMountpoint(i))throw new Ze.ErrnoError(10);try{Ze.trackingDelegate.willDeletePath&&Ze.trackingDelegate.willDeletePath(e)}catch(t){_("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,r),Ze.destroyNode(i);try{Ze.trackingDelegate.onDeletePath&&Ze.trackingDelegate.onDeletePath(e)}catch(t){_("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=Ze.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Ze.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=Ze.lookupPath(e,{parent:!0}).node,r=He.basename(e),i=Ze.lookupNode(t,r),n=Ze.mayDelete(t,r,!1);if(n)throw new Ze.ErrnoError(n);if(!t.node_ops.unlink)throw new Ze.ErrnoError(63);if(Ze.isMountpoint(i))throw new Ze.ErrnoError(10);try{Ze.trackingDelegate.willDeletePath&&Ze.trackingDelegate.willDeletePath(e)}catch(t){_("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,r),Ze.destroyNode(i);try{Ze.trackingDelegate.onDeletePath&&Ze.trackingDelegate.onDeletePath(e)}catch(t){_("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=Ze.lookupPath(e).node;if(!t)throw new Ze.ErrnoError(44);if(!t.node_ops.readlink)throw new Ze.ErrnoError(28);return We.resolve(Ze.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var r=Ze.lookupPath(e,{follow:!t}).node;if(!r)throw new Ze.ErrnoError(44);if(!r.node_ops.getattr)throw new Ze.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(e){return Ze.stat(e,!0)},chmod:function(e,t,r){var i;if(!(i="string"==typeof e?Ze.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Ze.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&t|-4096&i.mode,timestamp:Date.now()})},lchmod:function(e,t){Ze.chmod(e,t,!0)},fchmod:function(e,t){var r=Ze.getStream(e);if(!r)throw new Ze.ErrnoError(8);Ze.chmod(r.node,t)},chown:function(e,t,r,i){var n;if(!(n="string"==typeof e?Ze.lookupPath(e,{follow:!i}).node:e).node_ops.setattr)throw new Ze.ErrnoError(63);n.node_ops.setattr(n,{timestamp:Date.now()})},lchown:function(e,t,r){Ze.chown(e,t,r,!0)},fchown:function(e,t,r){var i=Ze.getStream(e);if(!i)throw new Ze.ErrnoError(8);Ze.chown(i.node,t,r)},truncate:function(e,t){if(t<0)throw new Ze.ErrnoError(28);var r;if(!(r="string"==typeof e?Ze.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Ze.ErrnoError(63);if(Ze.isDir(r.mode))throw new Ze.ErrnoError(31);if(!Ze.isFile(r.mode))throw new Ze.ErrnoError(28);var i=Ze.nodePermissions(r,"w");if(i)throw new Ze.ErrnoError(i);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=Ze.getStream(e);if(!r)throw new Ze.ErrnoError(8);if(!(2097155&r.flags))throw new Ze.ErrnoError(28);Ze.truncate(r.node,t)},utime:function(e,t,r){var i=Ze.lookupPath(e,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(t,r)})},open:function(e,t,r,n,o){if(""===e)throw new Ze.ErrnoError(44);var a;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?Ze.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)a=e;else{e=He.normalize(e);try{a=Ze.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var s=!1;if(64&t)if(a){if(128&t)throw new Ze.ErrnoError(20)}else a=Ze.mknod(e,r,0),s=!0;if(!a)throw new Ze.ErrnoError(44);if(Ze.isChrdev(a.mode)&&(t&=-513),65536&t&&!Ze.isDir(a.mode))throw new Ze.ErrnoError(54);if(!s){var c=Ze.mayOpen(a,t);if(c)throw new Ze.ErrnoError(c)}512&t&&Ze.truncate(a,0),t&=-131713;var A=Ze.createStream({node:a,path:Ze.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},n,o);A.stream_ops.open&&A.stream_ops.open(A),i.logReadFiles&&!(1&t)&&(Ze.readFiles||(Ze.readFiles={}),e in Ze.readFiles||(Ze.readFiles[e]=1,_("FS.trackingDelegate error on read file: "+e)));try{if(Ze.trackingDelegate.onOpenFile){var l=0;1!=(2097155&t)&&(l|=Ze.tracking.openFlags.READ),!!(2097155&t)&&(l|=Ze.tracking.openFlags.WRITE),Ze.trackingDelegate.onOpenFile(e,l)}}catch(t){_("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return A},close:function(e){if(Ze.isClosed(e))throw new Ze.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Ze.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,r){if(Ze.isClosed(e))throw new Ze.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Ze.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new Ze.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,i,n){if(i<0||n<0)throw new Ze.ErrnoError(28);if(Ze.isClosed(e))throw new Ze.ErrnoError(8);if(1==(2097155&e.flags))throw new Ze.ErrnoError(8);if(Ze.isDir(e.node.mode))throw new Ze.ErrnoError(31);if(!e.stream_ops.read)throw new Ze.ErrnoError(28);var o=void 0!==n;if(o){if(!e.seekable)throw new Ze.ErrnoError(70)}else n=e.position;var a=e.stream_ops.read(e,t,r,i,n);return o||(e.position+=a),a},write:function(e,t,r,i,n,o){if(i<0||n<0)throw new Ze.ErrnoError(28);if(Ze.isClosed(e))throw new Ze.ErrnoError(8);if(!(2097155&e.flags))throw new Ze.ErrnoError(8);if(Ze.isDir(e.node.mode))throw new Ze.ErrnoError(31);if(!e.stream_ops.write)throw new Ze.ErrnoError(28);e.seekable&&1024&e.flags&&Ze.llseek(e,0,2);var a=void 0!==n;if(a){if(!e.seekable)throw new Ze.ErrnoError(70)}else n=e.position;var s=e.stream_ops.write(e,t,r,i,n,o);a||(e.position+=s);try{e.path&&Ze.trackingDelegate.onWriteToFile&&Ze.trackingDelegate.onWriteToFile(e.path)}catch(t){_("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return s},allocate:function(e,t,r){if(Ze.isClosed(e))throw new Ze.ErrnoError(8);if(t<0||r<=0)throw new Ze.ErrnoError(28);if(!(2097155&e.flags))throw new Ze.ErrnoError(8);if(!Ze.isFile(e.node.mode)&&!Ze.isDir(e.node.mode))throw new Ze.ErrnoError(43);if(!e.stream_ops.allocate)throw new Ze.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,i,n,o){if(2&n&&!(2&o)&&2!=(2097155&e.flags))throw new Ze.ErrnoError(2);if(1==(2097155&e.flags))throw new Ze.ErrnoError(2);if(!e.stream_ops.mmap)throw new Ze.ErrnoError(43);return e.stream_ops.mmap(e,t,r,i,n,o)},msync:function(e,t,r,i,n){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,i,n):0},munmap:function(e){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new Ze.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,i=Ze.open(e,t.flags),n=Ze.stat(e).size,o=new Uint8Array(n);return Ze.read(i,o,0,n,0),"utf8"===t.encoding?r=O(o,0):"binary"===t.encoding&&(r=o),Ze.close(i),r},writeFile:function(e,t,r){(r=r||{}).flags=r.flags||577;var i=Ze.open(e,r.flags,r.mode);if("string"==typeof t){var n=new Uint8Array(P(t)+1),o=k(t,n,0,n.length);Ze.write(i,n,0,o,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Ze.write(i,t,0,t.byteLength,void 0,r.canOwn)}Ze.close(i)},cwd:function(){return Ze.currentPath},chdir:function(e){var t=Ze.lookupPath(e,{follow:!0});if(null===t.node)throw new Ze.ErrnoError(44);if(!Ze.isDir(t.node.mode))throw new Ze.ErrnoError(54);var r=Ze.nodePermissions(t.node,"x");if(r)throw new Ze.ErrnoError(r);Ze.currentPath=t.path},createDefaultDirectories:function(){Ze.mkdir("/tmp"),Ze.mkdir("/home"),Ze.mkdir("/home/web_user")},createDefaultDevices:function(){Ze.mkdir("/dev"),Ze.registerDevice(Ze.makedev(1,3),{read:function(){return 0},write:function(e,t,r,i,n){return i}}),Ze.mkdev("/dev/null",Ze.makedev(1,3)),Je.register(Ze.makedev(5,0),Je.default_tty_ops),Je.register(Ze.makedev(6,0),Je.default_tty1_ops),Ze.mkdev("/dev/tty",Ze.makedev(5,0)),Ze.mkdev("/dev/tty1",Ze.makedev(6,0));var e=Ye();Ze.createDevice("/dev","random",e),Ze.createDevice("/dev","urandom",e),Ze.mkdir("/dev/shm"),Ze.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Ze.mkdir("/proc");var e=Ze.mkdir("/proc/self");Ze.mkdir("/proc/self/fd"),Ze.mount({mount:function(){var t=Ze.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var r=+t,i=Ze.getStream(r);if(!i)throw new Ze.ErrnoError(8);var n={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return i.path}}};return n.parent=n,n}},t}},{},"/proc/self/fd")},createStandardStreams:function(){i.stdin?Ze.createDevice("/dev","stdin",i.stdin):Ze.symlink("/dev/tty","/dev/stdin"),i.stdout?Ze.createDevice("/dev","stdout",null,i.stdout):Ze.symlink("/dev/tty","/dev/stdout"),i.stderr?Ze.createDevice("/dev","stderr",null,i.stderr):Ze.symlink("/dev/tty1","/dev/stderr");var e=Ze.open("/dev/stdin",0),t=Ze.open("/dev/stdout",1),r=Ze.open("/dev/stderr",1);D(0===e.fd,"invalid handle for stdin ("+e.fd+")"),D(1===t.fd,"invalid handle for stdout ("+t.fd+")"),D(2===r.fd,"invalid handle for stderr ("+r.fd+")")},ensureErrnoError:function(){Ze.ErrnoError||(Ze.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){for(var t in this.errno=e,qe)if(qe[t]===e){this.code=t;break}},this.setErrno(e),this.message=ze[e],this.stack&&(Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack=Le(this.stack))},Ze.ErrnoError.prototype=new Error,Ze.ErrnoError.prototype.constructor=Ze.ErrnoError,[44].forEach((function(e){Ze.genericErrors[e]=new Ze.ErrnoError(e),Ze.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){Ze.ensureErrnoError(),Ze.nameTable=new Array(4096),Ze.mount(Ke,{},"/"),Ze.createDefaultDirectories(),Ze.createDefaultDevices(),Ze.createSpecialDirectories(),Ze.filesystems={MEMFS:Ke}},init:function(e,t,r){D(!Ze.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Ze.init.initialized=!0,Ze.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=r||i.stderr,Ze.createStandardStreams()},quit:function(){Ze.init.initialized=!1;var e=i._fflush;e&&e(0);for(var t=0;t<Ze.streams.length;t++){var r=Ze.streams[t];r&&Ze.close(r)}},getMode:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:function(e,t){var r=Ze.analyzePath(e,t);return r.exists?r.object:null},analyzePath:function(e,t){try{e=(i=Ze.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=Ze.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=i.path,r.parentObject=i.node,r.name=He.basename(e),i=Ze.lookupPath(e,{follow:!t}),r.exists=!0,r.path=i.path,r.object=i.node,r.name=i.node.name,r.isRoot="/"===i.path}catch(e){r.error=e.errno}return r},createPath:function(e,t,r,i){e="string"==typeof e?e:Ze.getPath(e);for(var n=t.split("/").reverse();n.length;){var o=n.pop();if(o){var a=He.join2(e,o);try{Ze.mkdir(a)}catch(e){}e=a}}return a},createFile:function(e,t,r,i,n){var o=He.join2("string"==typeof e?e:Ze.getPath(e),t),a=Ze.getMode(i,n);return Ze.create(o,a)},createDataFile:function(e,t,r,i,n,o){var a=t?He.join2("string"==typeof e?e:Ze.getPath(e),t):e,s=Ze.getMode(i,n),c=Ze.create(a,s);if(r){if("string"==typeof r){for(var A=new Array(r.length),l=0,u=r.length;l<u;++l)A[l]=r.charCodeAt(l);r=A}Ze.chmod(c,146|s);var d=Ze.open(c,577);Ze.write(d,r,0,r.length,0,o),Ze.close(d),Ze.chmod(c,s)}return c},createDevice:function(e,t,r,i){var n=He.join2("string"==typeof e?e:Ze.getPath(e),t),o=Ze.getMode(!!r,!!i);Ze.createDevice.major||(Ze.createDevice.major=64);var a=Ze.makedev(Ze.createDevice.major++,0);return Ze.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){i&&i.buffer&&i.buffer.length&&i(10)},read:function(e,t,i,n,o){for(var a=0,s=0;s<n;s++){var c;try{c=r()}catch(e){throw new Ze.ErrnoError(29)}if(void 0===c&&0===a)throw new Ze.ErrnoError(6);if(null==c)break;a++,t[i+s]=c}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,n,o){for(var a=0;a<n;a++)try{i(t[r+a])}catch(e){throw new Ze.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}}),Ze.mkdev(n,o,a)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!p)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Wr(p(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new Ze.ErrnoError(29)}},createLazyFile:function(e,t,r,i,n){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,i=Number(e.getResponseHeader("Content-length")),n=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;n||(a=i);var s=this;s.setDataGetter((function(e){var t=e*a,n=(e+1)*a-1;if(n=Math.min(n,i-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>i-1)throw new Error("only "+i+" bytes available! programmer error!");var n=new XMLHttpRequest;if(n.open("GET",r,!1),i!==a&&n.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(n.responseType="arraybuffer"),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.send(null),!(n.status>=200&&n.status<300||304===n.status))throw new Error("Couldn't load "+r+". Status: "+n.status);return void 0!==n.response?new Uint8Array(n.response||[]):Wr(n.responseText||"",!0)}(t,n)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),(o||!i)&&(a=i=1,i=this.getter(0).length,a=i,I("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new o;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:a}}else s={isDevice:!1,url:r};var c=Ze.createFile(e,t,s,i,n);s.contents?c.contents=s.contents:s.url&&(c.contents=null,c.url=s.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var A={};return Object.keys(c.stream_ops).forEach((function(e){var t=c.stream_ops[e];A[e]=function(){return Ze.forceLoadFile(c),t.apply(null,arguments)}})),A.read=function(e,t,r,i,n){Ze.forceLoadFile(c);var o=e.node.contents;if(n>=o.length)return 0;var a=Math.min(o.length-n,i);if(D(a>=0),o.slice)for(var s=0;s<a;s++)t[r+s]=o[n+s];else for(s=0;s<a;s++)t[r+s]=o.get(n+s);return a},c.stream_ops=A,c},createPreloadedFile:function(e,t,r,n,o,a,s,c,A,l){Pe.init();var u=t?We.resolve(He.join2(e,t)):e,d=Ie("cp "+u);function h(r){function h(r){l&&l(),c||Ze.createDataFile(e,t,r,n,o,A),a&&a(),Ce(d)}var g=!1;i.preloadPlugins.forEach((function(e){g||e.canHandle(u)&&(e.handle(r,u,h,(function(){s&&s(),Ce(d)})),g=!0)})),g||h(r)}_e(d),"string"==typeof r?function(e,t,r){var i=Ie("al "+e);f(e,(function(t){D(t,'Loading data file "'+e+'" failed (no arrayBuffer).'),h(new Uint8Array(t)),i&&Ce(i)}),(function(t){if(!r)throw'Loading data file "'+e+'" failed.';r()})),i&&_e(i)}(r,0,s):h(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,r){t=t||function(){},r=r||function(){};var i=Ze.indexedDB();try{var n=i.open(Ze.DB_NAME(),Ze.DB_VERSION)}catch(e){return r(e)}n.onupgradeneeded=function(){I("creating db"),n.result.createObjectStore(Ze.DB_STORE_NAME)},n.onsuccess=function(){var i=n.result.transaction([Ze.DB_STORE_NAME],"readwrite"),o=i.objectStore(Ze.DB_STORE_NAME),a=0,s=0,c=e.length;function A(){0==s?t():r()}e.forEach((function(e){var t=o.put(Ze.analyzePath(e).object.contents,e);t.onsuccess=function(){++a+s==c&&A()},t.onerror=function(){s++,a+s==c&&A()}})),i.onerror=r},n.onerror=r},loadFilesFromDB:function(e,t,r){t=t||function(){},r=r||function(){};var i=Ze.indexedDB();try{var n=i.open(Ze.DB_NAME(),Ze.DB_VERSION)}catch(e){return r(e)}n.onupgradeneeded=r,n.onsuccess=function(){var i=n.result;try{var o=i.transaction([Ze.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}var a=o.objectStore(Ze.DB_STORE_NAME),s=0,c=0,A=e.length;function l(){0==c?t():r()}e.forEach((function(e){var t=a.get(e);t.onsuccess=function(){Ze.analyzePath(e).exists&&Ze.unlink(e),Ze.createDataFile(He.dirname(e),He.basename(e),t.result,!0,!0,!0),++s+c==A&&l()},t.onerror=function(){c++,s+c==A&&l()}})),o.onerror=r},n.onerror=r},absolutePath:function(){ye("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder:function(){ye("FS.createFolder has been removed; use FS.mkdir instead")},createLink:function(){ye("FS.createLink has been removed; use FS.symlink instead")},joinPath:function(){ye("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc:function(){ye("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath:function(){ye("FS.standardizePath has been removed; use PATH.normalize instead")}},$e={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t,r){if("/"===t[0])return t;var i;if(-100===e)i=Ze.cwd();else{var n=Ze.getStream(e);if(!n)throw new Ze.ErrnoError(8);i=n.path}if(0==t.length){if(!r)throw new Ze.ErrnoError(44);return i}return He.join2(i,t)},doStat:function(e,t,r){try{var i=e(t)}catch(e){if(e&&e.node&&He.normalize(t)!==He.normalize(Ze.getPath(e.node)))return-54;throw e}return V[r>>2]=i.dev,V[r+4>>2]=0,V[r+8>>2]=i.ino,V[r+12>>2]=i.mode,V[r+16>>2]=i.nlink,V[r+20>>2]=i.uid,V[r+24>>2]=i.gid,V[r+28>>2]=i.rdev,V[r+32>>2]=0,Re=[i.size>>>0,(be=i.size,+Math.abs(be)>=1?be>0?(0|Math.min(+Math.floor(be/4294967296),4294967295))>>>0:~~+Math.ceil((be-+(~~be>>>0))/4294967296)>>>0:0)],V[r+40>>2]=Re[0],V[r+44>>2]=Re[1],V[r+48>>2]=4096,V[r+52>>2]=i.blocks,V[r+56>>2]=i.atime.getTime()/1e3|0,V[r+60>>2]=0,V[r+64>>2]=i.mtime.getTime()/1e3|0,V[r+68>>2]=0,V[r+72>>2]=i.ctime.getTime()/1e3|0,V[r+76>>2]=0,Re=[i.ino>>>0,(be=i.ino,+Math.abs(be)>=1?be>0?(0|Math.min(+Math.floor(be/4294967296),4294967295))>>>0:~~+Math.ceil((be-+(~~be>>>0))/4294967296)>>>0:0)],V[r+80>>2]=Re[0],V[r+84>>2]=Re[1],0},doMsync:function(e,t,r,i,n){var o=x.slice(e,e+r);Ze.msync(t,o,n,r,i)},doMkdir:function(e,t){return"/"===(e=He.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),Ze.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Ze.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return-28;var i=Ze.readlink(e),n=Math.min(r,P(i)),o=L[t+n];return M(i,t,r+1),L[t+n]=o,n},doAccess:function(e,t){if(-8&t)return-28;var r;if(!(r=Ze.lookupPath(e,{follow:!0}).node))return-44;var i="";return 4&t&&(i+="r"),2&t&&(i+="w"),1&t&&(i+="x"),i&&Ze.nodePermissions(r,i)?-2:0},doDup:function(e,t,r){var i=Ze.getStream(r);return i&&Ze.close(i),Ze.open(e,t,0,r,r).fd},doReadv:function(e,t,r,i){for(var n=0,o=0;o<r;o++){var a=V[t+8*o>>2],s=V[t+(8*o+4)>>2],c=Ze.read(e,L,a,s,i);if(c<0)return-1;if(n+=c,c<s)break}return n},doWritev:function(e,t,r,i){for(var n=0,o=0;o<r;o++){var a=V[t+8*o>>2],s=V[t+(8*o+4)>>2],c=Ze.write(e,L,a,s,i);if(c<0)return-1;n+=c}return n},varargs:void 0,get:function(){return D(null!=$e.varargs),$e.varargs+=4,V[$e.varargs-4>>2]},getStr:function(e){return Q(e)},getStreamFromFD:function(e){var t=Ze.getStream(e);if(!t)throw new Ze.ErrnoError(8);return t},get64:function(e,t){return D(e>=0?0===t:-1===t),e}};function et(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function tt(e,t){return e=et(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}var rt=[],it=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function nt(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=rt.length?rt.pop():it.length;return it[t]={refcount:1,value:e},t}}function ot(e,t){var r=tt(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var at=void 0,st=void 0;function ct(e){for(var t="",r=e;x[r];)t+=st[x[r++]];return t}var At=[];function lt(){for(;At.length;){var e=At.pop();e.$$.deleteScheduled=!1,e.delete()}}var ut=void 0;var dt={},ht=void 0;function gt(e){throw new ht(e)}function pt(e,t){for(void 0===t&&gt("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function ft(e){return e||gt("Cannot use deleted val. handle = "+e),it[e].value}var mt={};function Et(e){var t=Zr(e),r=ct(t);return Kr(t),r}function It(e,t){var r=mt[e];return void 0===r&&gt(t+" has unknown type "+Et(e)),r}function _t(e){}var Ct=!1;function yt(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Tt(e){return"undefined"==typeof FinalizationGroup?(Tt=function(e){return e},e):(Ct=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var r=t.value;r.ptr?yt(r):console.warn("object already deleted: "+r.ptr)}})),_t=function(e){Ct.unregister(e.$$)},(Tt=function(e){return Ct.register(e,e.$$,e.$$),e})(e))}var vt={};function wt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function St(e){return this.fromWireType(G[e>>2])}var bt={},Rt={},Dt=void 0;function Bt(e){throw new Dt(e)}function Ot(e,t,r){function i(t){var i=r(t);i.length!==e.length&&Bt("Mismatched type converter count");for(var n=0;n<e.length;++n)kt(e[n],i[n])}e.forEach((function(e){Rt[e]=t}));var n=new Array(t.length),o=[],a=0;t.forEach((function(e,t){mt.hasOwnProperty(e)?n[t]=mt[e]:(o.push(e),bt.hasOwnProperty(e)||(bt[e]=[]),bt[e].push((function(){n[t]=mt[e],++a===o.length&&i(n)})))})),0===o.length&&i(n)}function Qt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function kt(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||gt('type "'+i+'" must have a positive integer typeid pointer'),mt.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;gt("Cannot register type '"+i+"' twice")}if(mt[e]=t,delete Rt[e],bt.hasOwnProperty(e)){var n=bt[e];delete bt[e],n.forEach((function(e){e()}))}}function Mt(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Pt(e){gt(e.$$.ptrType.registeredClass.name+" instance already deleted")}function Nt(){}var Lt={};function xt(e,t,r){if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||gt("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}}function Ut(e,t,r){i.hasOwnProperty(e)?((void 0===r||void 0!==i[e].overloadTable&&void 0!==i[e].overloadTable[r])&&gt("Cannot register public name '"+e+"' twice"),xt(i,e,e),i.hasOwnProperty(r)&&gt("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),i[e].overloadTable[r]=t):(i[e]=t,void 0!==r&&(i[e].numArguments=r))}function Ft(e,t,r,i,n,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=i,this.baseClass=n,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function Vt(e,t,r){for(;t!==r;)t.upcast||gt("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Gt(e,t){if(null===t)return this.isReference&&gt("null is not a valid "+this.name),0;t.$$||gt('Cannot pass "'+ir(t)+'" as a '+this.name),t.$$.ptr||gt("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return Vt(t.$$.ptr,r,this.registeredClass)}function jt(e,t){var r;if(null===t)return this.isReference&&gt("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||gt('Cannot pass "'+ir(t)+'" as a '+this.name),t.$$.ptr||gt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&gt("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var i=t.$$.ptrType.registeredClass;if(r=Vt(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&gt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:gt("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var n=t.clone();r=this.rawShare(r,nt((function(){n.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:gt("Unsupporting sharing policy")}return r}function Ht(e,t){if(null===t)return this.isReference&&gt("null is not a valid "+this.name),0;t.$$||gt('Cannot pass "'+ir(t)+'" as a '+this.name),t.$$.ptr||gt("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&gt("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return Vt(t.$$.ptr,r,this.registeredClass)}function Yt(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var i=Yt(e,t,r.baseClass);return null===i?null:r.downcast(i)}function Wt(e,t){return(!t.ptrType||!t.ptr)&&Bt("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Bt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Tt(Object.create(e,{$$:{value:t}}))}function Jt(e,t,r,i,n,o,a,s,c,A,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=i,this.isSmartPointer=n,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=A,this.rawDestructor=l,n||void 0!==t.baseClass?this.toWireType=jt:i?(this.toWireType=Gt,this.destructorFunction=null):(this.toWireType=Ht,this.destructorFunction=null)}function Xt(e,t,r){i.hasOwnProperty(e)||Bt("Replacing nonexistant public symbol"),void 0!==i[e].overloadTable&&void 0!==r?i[e].overloadTable[r]=t:(i[e]=t,i[e].argCount=r)}function Kt(e,t){var r=(e=ct(e)).includes("j")?function(e,t){D(e.includes("j"),"getDynCaller should only be called with i64 sigs");var r=[];return function(){r.length=arguments.length;for(var n=0;n<arguments.length;n++)r[n]=arguments[n];return function(e,t,r){return e.includes("j")?function(e,t,r){D("dynCall_"+e in i,"bad function pointer type - no table for sig '"+e+"'"),r&&r.length?D(r.length===e.substring(1).replace(/j/g,"--").length):D(1==e.length);var n=i["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)}(e,t,r):(D(re.get(t),"missing table entry in dynCall: "+t),re.get(t).apply(null,r))}(e,t,r)}}(e,t):re.get(t);return"function"!=typeof r&&gt("unknown function pointer with signature "+e+": "+t),r}var zt=void 0;function qt(e,t){var r=[],i={};throw t.forEach((function e(t){if(!i[t]&&!mt[t]){if(Rt[t])return void Rt[t].forEach(e);r.push(t),i[t]=!0}})),new zt(e+": "+r.map(Et).join([", "]))}function Zt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=tt(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var i=new r,n=e.apply(i,t);return n instanceof Object?n:i}function $t(e,t,r,i,n){var o=t.length;o<2&&gt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,s=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){s=!0;break}var A="void"!==t[0].name,l="",u="";for(c=0;c<o-2;++c)l+=(0!==c?", ":"")+"arg"+c,u+=(0!==c?", ":"")+"arg"+c+"Wired";var d="return function "+et(e)+"("+l+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var h=s?"destructors":"null",g=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[gt,i,n,wt,t[0],t[1]];for(a&&(d+="var thisWired = classParam.toWireType("+h+", this);\n"),c=0;c<o-2;++c)d+="var arg"+c+"Wired = argType"+c+".toWireType("+h+", arg"+c+"); // "+t[c+2].name+"\n",g.push("argType"+c),p.push(t[c+2]);if(a&&(u="thisWired"+(u.length>0?", ":"")+u),d+=(A?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+");\n",s)d+="runDestructors(destructors);\n";else for(c=a?1:2;c<t.length;++c){var f=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(d+=f+"_dtor("+f+"); // "+t[c].name+"\n",g.push(f+"_dtor"),p.push(t[c].destructorFunction))}return A&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",g.push(d),Zt(Function,g).apply(null,p)}function er(e,t){for(var r=[],i=0;i<e;i++)r.push(V[(t>>2)+i]);return r}function tr(e,t,r){return e instanceof Object||gt(r+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||gt(r+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||gt("cannot call emscripten binding method "+r+" on deleted object"),Vt(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}function rr(e){e>4&&0===--it[e].refcount&&(it[e]=void 0,rt.push(e))}function ir(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function nr(e,t){switch(t){case 2:return function(e){return this.fromWireType(j[e>>2])};case 3:return function(e){return this.fromWireType(H[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function or(e,t,r){switch(t){case 0:return r?function(e){return L[e]}:function(e){return x[e]};case 1:return r?function(e){return U[e>>1]}:function(e){return F[e>>1]};case 2:return r?function(e){return V[e>>2]}:function(e){return G[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var ar={},sr=[],cr=[];function Ar(e){try{return S.grow(e-N.byteLength+65535>>>16),ee(S.buffer),1}catch(t){_("emscripten_realloc_buffer: Attempted to grow heap from "+N.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}function lr(e){ye("Cannot use emscripten_generate_pc (needed by __builtin_return_address) without -s USE_OFFSET_CONVERTER")}var ur={};function dr(e){e.forEach((function(e){var t=lr();t&&(ur[t]=e)}))}var hr={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){hr.lastError||(hr.lastError=e)},getNewId:function(e){for(var t=hr.counter++,r=e.length;r<t;r++)e[r]=null;return t},MAX_TEMP_BUFFER_SIZE:2097152,numTempVertexBuffersPerSize:64,log2ceilLookup:function(e){return 32-Math.clz32(0===e?0:e-1)},generateTempBuffers:function(e,t){var r=hr.log2ceilLookup(hr.MAX_TEMP_BUFFER_SIZE);t.tempVertexBufferCounters1=[],t.tempVertexBufferCounters2=[],t.tempVertexBufferCounters1.length=t.tempVertexBufferCounters2.length=r+1,t.tempVertexBuffers1=[],t.tempVertexBuffers2=[],t.tempVertexBuffers1.length=t.tempVertexBuffers2.length=r+1,t.tempIndexBuffers=[],t.tempIndexBuffers.length=r+1;for(var i=0;i<=r;++i){t.tempIndexBuffers[i]=null,t.tempVertexBufferCounters1[i]=t.tempVertexBufferCounters2[i]=0;var n=hr.numTempVertexBuffersPerSize;t.tempVertexBuffers1[i]=[],t.tempVertexBuffers2[i]=[];var o=t.tempVertexBuffers1[i],a=t.tempVertexBuffers2[i];o.length=a.length=n;for(var s=0;s<n;++s)o[s]=a[s]=null}if(e){t.tempQuadIndexBuffer=Gr.createBuffer(),t.GLctx.bindBuffer(34963,t.tempQuadIndexBuffer);for(var c=hr.MAX_TEMP_BUFFER_SIZE>>1,A=new Uint16Array(c),l=(i=0,0);A[i++]=l,!(i>=c||(A[i++]=l+1,i>=c)||(A[i++]=l+2,i>=c)||(A[i++]=l,i>=c)||(A[i++]=l+2,i>=c)||(A[i++]=l+3,i>=c));)l+=4;t.GLctx.bufferData(34963,A,35044),t.GLctx.bindBuffer(34963,null)}},getTempVertexBuffer:function(e){var t=hr.log2ceilLookup(e),r=hr.currentContext.tempVertexBuffers1[t],i=hr.currentContext.tempVertexBufferCounters1[t];hr.currentContext.tempVertexBufferCounters1[t]=hr.currentContext.tempVertexBufferCounters1[t]+1&hr.numTempVertexBuffersPerSize-1;var n=r[i];if(n)return n;var o=Gr.getParameter(34964);return r[i]=Gr.createBuffer(),Gr.bindBuffer(34962,r[i]),Gr.bufferData(34962,1<<t,35048),Gr.bindBuffer(34962,o),r[i]},getTempIndexBuffer:function(e){var t=hr.log2ceilLookup(e),r=hr.currentContext.tempIndexBuffers[t];if(r)return r;var i=Gr.getParameter(34965);return hr.currentContext.tempIndexBuffers[t]=Gr.createBuffer(),Gr.bindBuffer(34963,hr.currentContext.tempIndexBuffers[t]),Gr.bufferData(34963,1<<t,35048),Gr.bindBuffer(34963,i),hr.currentContext.tempIndexBuffers[t]},newRenderingFrameStarted:function(){if(hr.currentContext){var e=hr.currentContext.tempVertexBuffers1;hr.currentContext.tempVertexBuffers1=hr.currentContext.tempVertexBuffers2,hr.currentContext.tempVertexBuffers2=e,e=hr.currentContext.tempVertexBufferCounters1,hr.currentContext.tempVertexBufferCounters1=hr.currentContext.tempVertexBufferCounters2,hr.currentContext.tempVertexBufferCounters2=e;for(var t=hr.log2ceilLookup(hr.MAX_TEMP_BUFFER_SIZE),r=0;r<=t;++r)hr.currentContext.tempVertexBufferCounters1[r]=0}},getSource:function(e,t,r,i){for(var n="",o=0;o<t;++o){var a=i?V[i+4*o>>2]:-1;n+=Q(V[r+4*o>>2],a<0?void 0:a)}return n},calcBufLength:function(e,t,r,i){return r>0?i*r:e*hr.byteSizeByType[t-hr.byteSizeByTypeRoot]*i},usedTempBuffers:[],preDrawHandleClientVertexAttribBindings:function(e){hr.resetBufferBinding=!1;for(var t=0;t<hr.currentContext.maxVertexAttribs;++t){var r=hr.currentContext.clientBuffers[t];if(r.clientside&&r.enabled){hr.resetBufferBinding=!0;var i=hr.calcBufLength(r.size,r.type,r.stride,e),n=hr.getTempVertexBuffer(i);Gr.bindBuffer(34962,n),Gr.bufferSubData(34962,0,x.subarray(r.ptr,r.ptr+i)),r.vertexAttribPointerAdaptor.call(Gr,t,r.size,r.type,r.normalized,r.stride,0)}}},postDrawHandleClientVertexAttribBindings:function(){hr.resetBufferBinding&&Gr.bindBuffer(34962,hr.buffers[Gr.currentArrayBufferBinding])},createContext:function(e,t){t.renderViaOffscreenBackBuffer&&(t.preserveDrawingBuffer=!0);var r=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);return r?hr.registerContext(r,t):0},enableOffscreenFramebufferAttributes:function(e){e.renderViaOffscreenBackBuffer=!0,e.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(e){var t=e.GLctx,r=t.createFramebuffer();if(t.bindFramebuffer(36160,r),e.defaultFbo=r,e.defaultFboForbidBlitFramebuffer=!1,t.getContextAttributes().antialias)e.defaultFboForbidBlitFramebuffer=!0;else{var i=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/);if(null!=i){var n=i[1];e.defaultFboForbidBlitFramebuffer=n<67}}e.defaultColorTarget=t.createTexture(),e.defaultDepthTarget=t.createRenderbuffer(),hr.resizeOffscreenFramebuffer(e),t.bindTexture(3553,e.defaultColorTarget),t.texParameteri(3553,10241,9728),t.texParameteri(3553,10240,9728),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.texImage2D(3553,0,6408,t.canvas.width,t.canvas.height,0,6408,5121,null),t.framebufferTexture2D(36160,36064,3553,e.defaultColorTarget,0),t.bindTexture(3553,null),t.createRenderbuffer(),t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.canvas.width,t.canvas.height),t.framebufferRenderbuffer(36160,36096,36161,e.defaultDepthTarget),t.bindRenderbuffer(36161,null);var o=t.createBuffer();t.bindBuffer(34962,o),t.bufferData(34962,new Float32Array([-1,-1,-1,1,1,-1,1,1]),35044),t.bindBuffer(34962,null),e.blitVB=o;var a=t.createShader(35633);t.shaderSource(a,"attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }"),t.compileShader(a);var s=t.createShader(35632);t.shaderSource(s,"varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }"),t.compileShader(s);var c=t.createProgram();t.attachShader(c,a),t.attachShader(c,s),t.linkProgram(c),e.blitProgram=c,e.blitPosLoc=t.getAttribLocation(c,"pos"),t.useProgram(c),t.uniform1i(t.getUniformLocation(c,"sampler"),0),t.useProgram(null),e.defaultVao=void 0,t.createVertexArray&&(e.defaultVao=t.createVertexArray(),t.bindVertexArray(e.defaultVao),t.enableVertexAttribArray(e.blitPosLoc),t.bindVertexArray(null))},resizeOffscreenFramebuffer:function(e){var t=e.GLctx;if(e.defaultColorTarget){var r=t.getParameter(32873);t.bindTexture(3553,e.defaultColorTarget),t.texImage2D(3553,0,6408,t.drawingBufferWidth,t.drawingBufferHeight,0,6408,5121,null),t.bindTexture(3553,r)}if(e.defaultDepthTarget){var i=t.getParameter(36007);t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.drawingBufferWidth,t.drawingBufferHeight),t.bindRenderbuffer(36161,i)}},blitOffscreenFramebuffer:function(e){var t=e.GLctx,r=t.getParameter(3089);r&&t.disable(3089);var i=t.getParameter(36006);if(t.blitFramebuffer&&!e.defaultFboForbidBlitFramebuffer)t.bindFramebuffer(36008,e.defaultFbo),t.bindFramebuffer(36009,null),t.blitFramebuffer(0,0,t.canvas.width,t.canvas.height,0,0,t.canvas.width,t.canvas.height,16384,9728);else{let r=function(){t.vertexAttribPointer(e.blitPosLoc,2,5126,!1,0,0),t.drawArrays(5,0,4)};t.bindFramebuffer(36160,null);var n=t.getParameter(35725);t.useProgram(e.blitProgram);var o=t.getParameter(34964);t.bindBuffer(34962,e.blitVB);var a=t.getParameter(34016);t.activeTexture(33984);var s=t.getParameter(32873);t.bindTexture(3553,e.defaultColorTarget);var c=t.getParameter(3042);c&&t.disable(3042);var A=t.getParameter(2884);A&&t.disable(2884);var l=t.getParameter(2929);l&&t.disable(2929);var u=t.getParameter(2960);if(u&&t.disable(2960),e.defaultVao){var d=t.getParameter(34229);t.bindVertexArray(e.defaultVao),r(),t.bindVertexArray(d)}else{for(var h={buffer:t.getVertexAttrib(e.blitPosLoc,34975),size:t.getVertexAttrib(e.blitPosLoc,34339),stride:t.getVertexAttrib(e.blitPosLoc,34340),type:t.getVertexAttrib(e.blitPosLoc,34341),normalized:t.getVertexAttrib(e.blitPosLoc,34922),pointer:t.getVertexAttribOffset(e.blitPosLoc,34373)},g=t.getParameter(34921),p=[],f=0;f<g;++f){var m=t.getVertexAttrib(f,34338),E=f==e.blitPosLoc;m&&!E&&t.disableVertexAttribArray(f),!m&&E&&t.enableVertexAttribArray(f),p[f]=m}for(r(),f=0;f<g;++f){m=p[f];var I=f==e.blitPosLoc;m&&!I&&t.enableVertexAttribArray(f),!m&&I&&t.disableVertexAttribArray(f)}t.bindBuffer(34962,h.buffer),t.vertexAttribPointer(e.blitPosLoc,h.size,h.type,h.normalized,h.stride,h.offset)}u&&t.enable(2960),l&&t.enable(2929),A&&t.enable(2884),c&&t.enable(3042),t.bindTexture(3553,s),t.activeTexture(a),t.bindBuffer(34962,o),t.useProgram(n)}t.bindFramebuffer(36160,i),r&&t.enable(3089)},registerContext:function(e,t){var r=hr.getNewId(hr.contexts),i={handle:r,attributes:t,version:t.majorVersion,GLctx:e};e.canvas&&(e.canvas.GLctxObject=i),hr.contexts[r]=i,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&hr.initExtensions(i),i.maxVertexAttribs=i.GLctx.getParameter(34921),i.clientBuffers=[];for(var n=0;n<i.maxVertexAttribs;n++)i.clientBuffers[n]={enabled:!1,clientside:!1,size:0,type:0,normalized:0,stride:0,ptr:0,vertexAttribPointerAdaptor:null};return hr.generateTempBuffers(!1,i),t.renderViaOffscreenBackBuffer&&hr.createOffscreenFramebuffer(i),r},makeContextCurrent:function(e){return hr.currentContext=hr.contexts[e],i.ctx=Gr=hr.currentContext&&hr.currentContext.GLctx,!(e&&!Gr)},getContext:function(e){return hr.contexts[e]},deleteContext:function(e){hr.currentContext===hr.contexts[e]&&(hr.currentContext=null),"object"==typeof gr&&gr.removeAllHandlersOnTarget(hr.contexts[e].GLctx.canvas),hr.contexts[e]&&hr.contexts[e].GLctx.canvas&&(hr.contexts[e].GLctx.canvas.GLctxObject=void 0),hr.contexts[e]=null},initExtensions:function(e){if(e||(e=hr.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;(function(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},e.drawArraysInstanced=function(e,r,i,n){t.drawArraysInstancedANGLE(e,r,i,n)},e.drawElementsInstanced=function(e,r,i,n,o){t.drawElementsInstancedANGLE(e,r,i,n,o)})})(t),function(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(t),function(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,r){t.drawBuffersWEBGL(e,r)})}(t),function(e){e.dibvbi=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")}(t),function(e){e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance")}(t),e.version>=2&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!t.disjointTimerQueryExt)&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query")),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach((function(e){!e.includes("lose_context")&&!e.includes("debug")&&t.getExtension(e)}))}}},gr={inEventHandler:0,removeAllEventListeners:function(){for(var e=gr.eventHandlers.length-1;e>=0;--e)gr._removeHandler(e);gr.eventHandlers=[],gr.deferredCalls=[]},registerRemoveEventListeners:function(){gr.removeEventListenersRegistered||(ce.push(gr.removeAllEventListeners),gr.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,r){function i(e,t){if(e.length!=t.length)return!1;for(var r in e)if(e[r]!=t[r])return!1;return!0}for(var n in gr.deferredCalls){var o=gr.deferredCalls[n];if(o.targetFunction==e&&i(o.argsList,r))return}gr.deferredCalls.push({targetFunction:e,precedence:t,argsList:r}),gr.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<gr.deferredCalls.length;++t)gr.deferredCalls[t].targetFunction==e&&(gr.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return gr.inEventHandler&&gr.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(gr.canPerformEventHandlerRequests())for(var e=0;e<gr.deferredCalls.length;++e){var t=gr.deferredCalls[e];gr.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var r=0;r<gr.eventHandlers.length;++r)gr.eventHandlers[r].target==e&&(!t||t==gr.eventHandlers[r].eventTypeString)&&gr._removeHandler(r--)},_removeHandler:function(e){var t=gr.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),gr.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++gr.inEventHandler,gr.currentEventHandler=e,gr.runDeferredCalls(),e.handlerFunc(t),gr.runDeferredCalls(),--gr.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),gr.eventHandlers.push(e),gr.registerRemoveEventListeners();else for(var r=0;r<gr.eventHandlers.length;++r)gr.eventHandlers[r].target==e.target&&gr.eventHandlers[r].eventTypeString==e.eventTypeString&&gr._removeHandler(r--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},pr=["default","low-power","high-performance"],fr=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function mr(e){return"number"==typeof e&&(e=Q(e)),e&&"#canvas"!==e?void 0!==hr&&hr.offscreenCanvases[e]?hr.offscreenCanvases[e]:function(e){C("Rules for selecting event targets in HTML5 API are changing: instead of using document.getElementById() that only can refer to elements by their DOM ID, new event target selection mechanism uses the more flexible function document.querySelector() that can look up element names, classes, and complex CSS selectors. Build with -s DISABLE_DEPRECATED_FIND_EVENT_TARGET_BEHAVIOR=1 to change to the new lookup rules. See https://github.com/emscripten-core/emscripten/pull/7977 for more details.");try{return e&&("number"==typeof e&&(e=fr[e]||Q(e)),"#window"!==e)?"#document"===e?document:"#screen"===e?screen:"#canvas"===e?i.canvas:"string"==typeof e?document.getElementById(e):e:window}catch(e){return null}}(e):void 0!==hr&&hr.offscreenCanvases.canvas?hr.offscreenCanvases.canvas:i.canvas}function Er(){return hr.currentContext?hr.currentContext.handle:0}function Ir(e){return hr.makeContextCurrent(e)?0:-5}i._emscripten_webgl_get_current_context=Er,i._emscripten_webgl_make_context_current=Ir;var _r={};function Cr(){if(!Cr.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(var t in _r)void 0===_r[t]?delete e[t]:e[t]=_r[t];var r=[];for(var t in e)r.push(t+"="+e[t]);Cr.strings=r}return Cr.strings}var yr=[];function Tr(e,t,r,i){for(var n=0;n<e;n++){var o=Gr[r](),a=o&&hr.getNewId(i);o?(o.name=a,i[a]=o):hr.recordError(1282),V[t+4*n>>2]=a}}function vr(e){var t=P(e)+1,r=zr(t);return M(e,r,t),r}function wr(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function Sr(e){return 0==(e-=5120)?L:1==e?x:2==e?U:4==e?V:6==e?j:5==e||28922==e||28520==e||30779==e||30782==e?G:F}function br(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function Rr(e,t,r,i,n,o){var a=Sr(e),s=br(a),c=1<<s,A=function(e){return{5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[e-6402]||1}(t)*c,l=function(e,t,r,i){var n;return t*(e*r+(n=i)-1&-n)}(r,i,A,hr.unpackAlignment);return a.subarray(n>>s,n+l>>s)}function Dr(e){var t=Gr.currentProgram;if(t){var r=t.uniformLocsById[e];return"number"==typeof r&&(t.uniformLocsById[e]=r=Gr.getUniformLocation(t,t.uniformArrayNamesById[e]+(r>0?"["+r+"]":""))),r}hr.recordError(1282)}var Br=[],Or=[];function Qr(){if(!Qr.called){Qr.called=!0;var e=(new Date).getFullYear(),t=new Date(e,0,1),r=new Date(e,6,1),i=t.getTimezoneOffset(),n=r.getTimezoneOffset(),o=Math.max(i,n);V[ri()>>2]=60*o,V[ti()>>2]=+(i!=n);var a=l(t),s=l(r),c=Z(a),A=Z(s);n<i?(V[ei()>>2]=c,V[ei()+4>>2]=A):(V[ei()>>2]=A,V[ei()+4>>2]=c)}function l(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}}function kr(e){return e%4==0&&(e%100!=0||e%400==0)}function Mr(e,t){for(var r=0,i=0;i<=t;r+=e[i++]);return r}var Pr=[31,29,31,30,31,30,31,31,30,31,30,31],Nr=[31,28,31,30,31,30,31,31,30,31,30,31];function Lr(e,t){for(var r=new Date(e.getTime());t>0;){var i=kr(r.getFullYear()),n=r.getMonth(),o=(i?Pr:Nr)[n];if(!(t>o-r.getDate()))return r.setDate(r.getDate()+t),r;t-=o-r.getDate()+1,r.setDate(1),n<11?r.setMonth(n+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}function xr(e,t,r,i){var n=V[i+40>>2],o={tm_sec:V[i>>2],tm_min:V[i+4>>2],tm_hour:V[i+8>>2],tm_mday:V[i+12>>2],tm_mon:V[i+16>>2],tm_year:V[i+20>>2],tm_wday:V[i+24>>2],tm_yday:V[i+28>>2],tm_isdst:V[i+32>>2],tm_gmtoff:V[i+36>>2],tm_zone:n?Q(n):""},a=Q(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in s)a=a.replace(new RegExp(c,"g"),s[c]);var A=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function u(e,t,r){for(var i="number"==typeof e?e.toString():e||"";i.length<t;)i=r[0]+i;return i}function d(e,t){return u(e,t,"0")}function h(e,t){function r(e){return e<0?-1:e>0?1:0}var i;return 0===(i=r(e.getFullYear()-t.getFullYear()))&&0===(i=r(e.getMonth()-t.getMonth()))&&(i=r(e.getDate()-t.getDate())),i}function g(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function p(e){var t=Lr(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),i=new Date(t.getFullYear()+1,0,4),n=g(r),o=g(i);return h(n,t)<=0?h(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f={"%a":function(e){return A[e.tm_wday].substring(0,3)},"%A":function(e){return A[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return u(e.tm_mday,2," ")},"%g":function(e){return p(e).toString().substring(2)},"%G":function(e){return p(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+Mr(kr(e.tm_year+1900)?Pr:Nr,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),r=0===t.getDay()?t:Lr(t,7-t.getDay()),i=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(h(r,i)<0){var n=Mr(kr(i.getFullYear())?Pr:Nr,i.getMonth()-1)-31,o=31-r.getDate()+n+i.getDate();return d(Math.ceil(o/7),2)}return 0===h(r,t)?"01":"00"},"%V":function(e){var t,r=new Date(e.tm_year+1900,0,4),i=new Date(e.tm_year+1901,0,4),n=g(r),o=g(i),a=Lr(new Date(e.tm_year+1900,0,1),e.tm_yday);return h(a,n)<0?"53":h(o,a)<=0?"01":(t=n.getFullYear()<e.tm_year+1900?e.tm_yday+32-n.getDate():e.tm_yday+1-n.getDate(),d(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),r=1===t.getDay()?t:Lr(t,0===t.getDay()?1:7-t.getDay()+1),i=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(h(r,i)<0){var n=Mr(kr(i.getFullYear())?Pr:Nr,i.getMonth()-1)-31,o=31-r.getDate()+n+i.getDate();return d(Math.ceil(o/7),2)}return 0===h(r,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff;return(t>=0?"+":"-")+("0000"+(t=(t=Math.abs(t)/60)/60*100+t%60)).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in f)a.includes(c)&&(a=a.replace(new RegExp(c,"g"),f[c](o)));var m=Wr(a,!1);return m.length>t?0:(function(e,t){D(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),L.set(e,t)}(m,e),m.length-1)}i.requestFullscreen=function(e,t){Pe.requestFullscreen(e,t)},i.requestFullScreen=function(){Pe.requestFullScreen()},i.requestAnimationFrame=function(e){Pe.requestAnimationFrame(e)},i.setCanvasSize=function(e,t,r){Pe.setCanvasSize(e,t,r)},i.pauseMainLoop=function(){Pe.mainLoop.pause()},i.resumeMainLoop=function(){Pe.mainLoop.resume()},i.getUserMedia=function(){Pe.getUserMedia()},i.createContext=function(e,t,r,i){return Pe.createContext(e,t,r,i)};var Ur=function(e,t,r,i){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Ze.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=i},Fr=365,Vr=146;Object.defineProperties(Ur.prototype,{read:{get:function(){return(this.mode&Fr)===Fr},set:function(e){e?this.mode|=Fr:this.mode&=~Fr}},write:{get:function(){return(this.mode&Vr)===Vr},set:function(e){e?this.mode|=Vr:this.mode&=~Vr}},isFolder:{get:function(){return Ze.isDir(this.mode)}},isDevice:{get:function(){return Ze.isChrdev(this.mode)}}}),Ze.FSNode=Ur,Ze.staticInit(),i.FS_createPath=Ze.createPath,i.FS_createDataFile=Ze.createDataFile,i.FS_createPreloadedFile=Ze.createPreloadedFile,i.FS_createLazyFile=Ze.createLazyFile,i.FS_createDevice=Ze.createDevice,i.FS_unlink=Ze.unlink,i.count_emval_handles=function(){for(var e=0,t=5;t<it.length;++t)void 0!==it[t]&&++e;return e},i.get_first_emval=function(){for(var e=5;e<it.length;++e)if(void 0!==it[e])return it[e];return null},at=i.PureVirtualError=ot(Error,"PureVirtualError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);st=e}(),i.getInheritedInstanceCount=function(){return Object.keys(dt).length},i.getLiveInheritedInstances=function(){var e=[];for(var t in dt)dt.hasOwnProperty(t)&&e.push(dt[t]);return e},i.flushPendingDeletes=lt,i.setDelayFunction=function(e){ut=e,At.length&&ut&&ut(lt)},ht=i.BindingError=ot(Error,"BindingError"),Dt=i.InternalError=ot(Error,"InternalError"),Nt.prototype.isAliasOf=function(e){if(!(this instanceof Nt&&e instanceof Nt))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,i=e.$$.ptrType.registeredClass,n=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;i.baseClass;)n=i.upcast(n),i=i.baseClass;return t===i&&r===n},Nt.prototype.clone=function(){if(this.$$.ptr||Pt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Tt(Object.create(Object.getPrototypeOf(this),{$$:{value:Mt(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},Nt.prototype.delete=function(){this.$$.ptr||Pt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&gt("Object already scheduled for deletion"),_t(this),yt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},Nt.prototype.isDeleted=function(){return!this.$$.ptr},Nt.prototype.deleteLater=function(){return this.$$.ptr||Pt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&gt("Object already scheduled for deletion"),At.push(this),1===At.length&&ut&&ut(lt),this.$$.deleteScheduled=!0,this},Jt.prototype.getPointee=function(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},Jt.prototype.destructor=function(e){this.rawDestructor&&this.rawDestructor(e)},Jt.prototype.argPackAdvance=8,Jt.prototype.readValueFromPointer=St,Jt.prototype.deleteObject=function(e){null!==e&&e.delete()},Jt.prototype.fromWireType=function(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=function(e,t){return t=pt(e,t),dt[t]}(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var i=r.clone();return this.destructor(e),i}function n(){return this.isSmartPointer?Wt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Wt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(t),s=Lt[a];if(!s)return n.call(this);o=this.isConst?s.constPointerType:s.pointerType;var c=Yt(t,this.registeredClass,o.registeredClass);return null===c?n.call(this):this.isSmartPointer?Wt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:e}):Wt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})},zt=i.UnboundTypeError=ot(Error,"UnboundTypeError");for(var Gr,jr=0;jr<32;++jr)yr.push(new Array(jr));var Hr=new Float32Array(288);for(jr=0;jr<288;++jr)Br[jr]=Hr.subarray(0,jr+1);var Yr=new Int32Array(288);for(jr=0;jr<288;++jr)Or[jr]=Yr.subarray(0,jr+1);function Wr(e,t,r){var i=r>0?r:P(e)+1,n=new Array(i),o=k(e,n,0,n.length);return t&&(n.length=o),n}"function"==typeof atob&&atob;var Jr,Xr={HaveOffsetConverter:function(){return"undefined"!=typeof wasmOffsetConverter},__cxa_allocate_exception:function(e){return zr(e+16)+16},__cxa_atexit:function(e,t){},__cxa_begin_catch:function(e){var t=new Ue(e),r=t.get_exception_info();return r.get_caught()||r.set_caught(!0),r.set_rethrown(!1),Fe.push(t),function(e){e.add_ref()}(r),t.get_exception_ptr()},__cxa_end_catch:function(){ai(0),D(Fe.length>0);var e=Fe.pop();(function(e){if(e.release_ref()&&!e.get_rethrown()){var t=e.get_destructor();t&&re.get(t)(e.excPtr),Ge(e.excPtr)}})(e.get_exception_info()),e.free(),Ve=0},__cxa_find_matching_catch_2:function(){var e=Ve;if(!e)return v(0),0;var t=new xe(e).get_type(),r=new Ue;if(r.set_base_ptr(e),r.set_adjusted_ptr(e),!t)return v(0),0|r.ptr;for(var i=Array.prototype.slice.call(arguments),n=0;n<i.length;n++){var o=i[n];if(0===o||o===t)break;if(si(o,t,r.get_adjusted_ptr_addr()))return v(o),0|r.ptr}return v(t),0|r.ptr},__cxa_find_matching_catch_3:function(){var e=Ve;if(!e)return v(0),0;var t=new xe(e).get_type(),r=new Ue;if(r.set_base_ptr(e),r.set_adjusted_ptr(e),!t)return v(0),0|r.ptr;for(var i=Array.prototype.slice.call(arguments),n=0;n<i.length;n++){var o=i[n];if(0===o||o===t)break;if(si(o,t,r.get_adjusted_ptr_addr()))return v(o),0|r.ptr}return v(t),0|r.ptr},__cxa_free_exception:Ge,__cxa_rethrow:function(){var e=Fe.pop();e||ye("no exception to throw");var t=e.get_exception_info(),r=e.get_base_ptr();throw t.get_rethrown()?e.free():(Fe.push(e),t.set_rethrown(!0),t.set_caught(!1)),Ve=r,r+" - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch."},__cxa_thread_atexit:function(e,t){},__cxa_throw:function(e,t,r){throw new xe(e).init(t,r),Ve=e,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch."},__resumeException:function(e){var t=new Ue(e),r=t.get_base_ptr();throw Ve||(Ve=r),t.free(),r+" - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch."},__sys_fcntl64:function(e,t,r){$e.varargs=r;try{var i=$e.getStreamFromFD(e);switch(t){case 0:return(n=$e.get())<0?-28:Ze.open(i.path,i.flags,0,n).fd;case 1:case 2:case 13:case 14:return 0;case 3:return i.flags;case 4:var n=$e.get();return i.flags|=n,0;case 12:return n=$e.get(),U[n+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return je(28),-1}}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),-e.errno}},__sys_ioctl:function(e,t,r){$e.varargs=r;try{var i=$e.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return i.tty?0:-59;case 21519:if(!i.tty)return-59;var n=$e.get();return V[n>>2]=0,0;case 21520:return i.tty?-28:-59;case 21531:return n=$e.get(),Ze.ioctl(i,t,n);default:ye("bad ioctl syscall "+t)}}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),-e.errno}},__sys_mmap2:function(e,t,r,i,n,o){try{return function(e,t,r,i,n,o){o<<=12;var a,s=!1;if(16&i&&e%65536!=0)return-28;if(32&i){if(!(a=Xe(t)))return-48;s=!0}else{var c=Ze.getStream(n);if(!c)return-8;var A=Ze.mmap(c,e,t,o,r,i);a=A.ptr,s=A.allocated}return $e.mappings[a]={malloc:a,len:t,allocated:s,fd:n,prot:r,flags:i,offset:o},a}(e,t,r,i,n,o)}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),-e.errno}},__sys_open:function(e,t,r){$e.varargs=r;try{var i=$e.getStr(e),n=r?$e.get():0;return Ze.open(i,t,n).fd}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),-e.errno}},__sys_stat64:function(e,t){try{return e=$e.getStr(e),$e.doStat(Ze.stat,e,t)}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),-e.errno}},_embind_create_inheriting_constructor:function(e,t,r){e=ct(e),t=It(t,"wrapper"),r=ft(r);var i=[].slice,n=t.registeredClass,o=n.instancePrototype,a=n.baseClass.instancePrototype,s=n.baseClass.constructor,c=tt(e,(function(){n.baseClass.pureVirtualFunctions.forEach(function(e){if(this[e]===a[e])throw new at("Pure virtual function "+e+" must be implemented in JavaScript")}.bind(this)),Object.defineProperty(this,"__parent",{value:o}),this.__construct.apply(this,i.call(arguments))}));for(var A in o.__construct=function(){this===o&&gt("Pass correct 'this' to __construct");var e=s.implement.apply(void 0,[this].concat(i.call(arguments)));_t(e);var t=e.$$;e.notifyOnDestruction(),t.preservePointerOnDelete=!0,Object.defineProperties(this,{$$:{value:t}}),Tt(this),function(e,t,r){t=pt(e,t),dt.hasOwnProperty(t)?gt("Tried to register registered instance: "+t):dt[t]=r}(n,t.ptr,this)},o.__destruct=function(){this===o&&gt("Pass correct 'this' to __destruct"),_t(this),function(e,t){t=pt(e,t),dt.hasOwnProperty(t)?delete dt[t]:gt("Tried to unregister unregistered instance: "+t)}(n,this.$$.ptr)},c.prototype=Object.create(o),r)c.prototype[A]=r[A];return nt(c)},_embind_finalize_value_object:function(e){var t=vt[e];delete vt[e];var r=t.rawConstructor,i=t.rawDestructor,n=t.fields;Ot([e],n.map((function(e){return e.getterReturnType})).concat(n.map((function(e){return e.setterArgumentType}))),(function(e){var o={};return n.forEach((function(t,r){var i=t.fieldName,a=e[r],s=t.getter,c=t.getterContext,A=e[r+n.length],l=t.setter,u=t.setterContext;o[i]={read:function(e){return a.fromWireType(s(c,e))},write:function(e,t){var r=[];l(u,e,A.toWireType(r,t)),wt(r)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var r in o)t[r]=o[r].read(e);return i(e),t},toWireType:function(e,t){for(var n in o)if(!(n in t))throw new TypeError('Missing field:  "'+n+'"');var a=r();for(n in o)o[n].write(a,t[n]);return null!==e&&e.push(i,a),a},argPackAdvance:8,readValueFromPointer:St,destructorFunction:i}]}))},_embind_register_bigint:function(e,t,r,i,n){},_embind_register_bool:function(e,t,r,i,n){var o=Qt(r);kt(e,{name:t=ct(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:n},argPackAdvance:8,readValueFromPointer:function(e){var i;if(1===r)i=L;else if(2===r)i=U;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);i=V}return this.fromWireType(i[e>>o])},destructorFunction:null})},_embind_register_class:function(e,t,r,i,n,o,a,s,c,A,l,u,d){l=ct(l),o=Kt(n,o),s&&(s=Kt(a,s)),A&&(A=Kt(c,A)),d=Kt(u,d);var h=et(l);Ut(h,(function(){qt("Cannot construct "+l+" due to unbound types",[i])})),Ot([e,t,r],i?[i]:[],(function(t){var r,n;t=t[0],n=i?(r=t.registeredClass).instancePrototype:Nt.prototype;var a=tt(h,(function(){if(Object.getPrototypeOf(this)!==c)throw new ht("Use 'new' to construct "+l);if(void 0===u.constructor_body)throw new ht(l+" has no accessible constructor");var e=u.constructor_body[arguments.length];if(void 0===e)throw new ht("Tried to invoke ctor of "+l+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),c=Object.create(n,{constructor:{value:a}});a.prototype=c;var u=new Ft(l,a,c,d,r,o,s,A),g=new Jt(l,u,!0,!1,!1),p=new Jt(l+"*",u,!1,!1,!1),f=new Jt(l+" const*",u,!1,!0,!1);return Lt[e]={pointerType:p,constPointerType:f},Xt(h,a),[g,p,f]}))},_embind_register_class_class_function:function(e,t,r,i,n,o,a){var s=er(r,i);t=ct(t),o=Kt(n,o),Ot([],[e],(function(e){var i=(e=e[0]).name+"."+t;function n(){qt("Cannot call "+i+" due to unbound types",s)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var c=e.registeredClass.constructor;return void 0===c[t]?(n.argCount=r-1,c[t]=n):(xt(c,t,i),c[t].overloadTable[r-1]=n),Ot([],s,(function(e){var n=[e[0],null].concat(e.slice(1)),s=$t(i,n,null,o,a);return void 0===c[t].overloadTable?(s.argCount=r-1,c[t]=s):c[t].overloadTable[r-1]=s,[]})),[]}))},_embind_register_class_constructor:function(e,t,r,i,n,o){D(t>0);var a=er(t,r);n=Kt(i,n),Ot([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new ht("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){qt("Cannot construct "+e.name+" due to unbound types",a)},Ot([],a,(function(i){return i.splice(1,0,null),e.registeredClass.constructor_body[t-1]=$t(r,i,null,n,o),[]})),[]}))},_embind_register_class_function:function(e,t,r,i,n,o,a,s){var c=er(r,i);t=ct(t),o=Kt(n,o),Ot([],[e],(function(e){var i=(e=e[0]).name+"."+t;function n(){qt("Cannot call "+i+" due to unbound types",c)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);var A=e.registeredClass.instancePrototype,l=A[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===r-2?(n.argCount=r-2,n.className=e.name,A[t]=n):(xt(A,t,i),A[t].overloadTable[r-2]=n),Ot([],c,(function(n){var s=$t(i,n,e,o,a);return void 0===A[t].overloadTable?(s.argCount=r-2,A[t]=s):A[t].overloadTable[r-2]=s,[]})),[]}))},_embind_register_class_property:function(e,t,r,i,n,o,a,s,c,A){t=ct(t),n=Kt(i,n),Ot([],[e],(function(e){var i=(e=e[0]).name+"."+t,l={get:function(){qt("Cannot access "+i+" due to unbound types",[r,a])},enumerable:!0,configurable:!0};return l.set=c?function(){qt("Cannot access "+i+" due to unbound types",[r,a])}:function(e){gt(i+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,l),Ot([],c?[r,a]:[r],(function(r){var a=r[0],l={get:function(){var t=tr(this,e,i+" getter");return a.fromWireType(n(o,t))},enumerable:!0};if(c){c=Kt(s,c);var u=r[1];l.set=function(t){var r=tr(this,e,i+" setter"),n=[];c(A,r,u.toWireType(n,t)),wt(n)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,l),[]})),[]}))},_embind_register_emval:function(e,t){kt(e,{name:t=ct(t),fromWireType:function(e){var t=it[e].value;return rr(e),t},toWireType:function(e,t){return nt(t)},argPackAdvance:8,readValueFromPointer:St,destructorFunction:null})},_embind_register_float:function(e,t,r){var i=Qt(r);kt(e,{name:t=ct(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+ir(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:nr(t,i),destructorFunction:null})},_embind_register_function:function(e,t,r,i,n,o){var a=er(t,r);e=ct(e),n=Kt(i,n),Ut(e,(function(){qt("Cannot call "+e+" due to unbound types",a)}),t-1),Ot([],a,(function(r){var i=[r[0],null].concat(r.slice(1));return Xt(e,$t(e,i,null,n,o),t-1),[]}))},_embind_register_integer:function(e,t,r,i,n){t=ct(t),-1===n&&(n=4294967295);var o=Qt(r),a=function(e){return e};if(0===i){var s=32-8*r;a=function(e){return e<<s>>>s}}var c=t.includes("unsigned");kt(e,{name:t,fromWireType:a,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+ir(r)+'" to '+this.name);if(r<i||r>n)throw new TypeError('Passing a number "'+ir(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+i+", "+n+"]!");return c?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:or(t,o,0!==i),destructorFunction:null})},_embind_register_memory_view:function(e,t,r){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function n(e){var t=G,r=t[e>>=2],n=t[e+1];return new i(N,n,r)}kt(e,{name:r=ct(r),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:function(e,t){var r="std::string"===(t=ct(t));kt(e,{name:t,fromWireType:function(e){var t,i=G[e>>2];if(r)for(var n=e+4,o=0;o<=i;++o){var a=e+4+o;if(o==i||0==x[a]){var s=Q(n,a-n);void 0===t?t=s:(t+="\0",t+=s),n=a+1}}else{var c=new Array(i);for(o=0;o<i;++o)c[o]=String.fromCharCode(x[e+4+o]);t=c.join("")}return Kr(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||gt("Cannot pass non-string to std::string");var n=(r&&i?function(){return P(t)}:function(){return t.length})(),o=zr(4+n+1);if(G[o>>2]=n,r&&i)M(t,o+4,n+1);else if(i)for(var a=0;a<n;++a){var s=t.charCodeAt(a);s>255&&(Kr(o),gt("String has UTF-16 code units that do not fit in 8 bits")),x[o+4+a]=s}else for(a=0;a<n;++a)x[o+4+a]=t[a];return null!==e&&e.push(Kr,o),o},argPackAdvance:8,readValueFromPointer:St,destructorFunction:function(e){Kr(e)}})},_embind_register_std_wstring:function(e,t,r){var i,n,o,a,s;r=ct(r),2===t?(i=W,n=J,a=X,o=function(){return F},s=1):4===t&&(i=K,n=z,a=q,o=function(){return G},s=2),kt(e,{name:r,fromWireType:function(e){for(var r,n=G[e>>2],a=o(),c=e+4,A=0;A<=n;++A){var l=e+4+A*t;if(A==n||0==a[l>>s]){var u=i(c,l-c);void 0===r?r=u:(r+="\0",r+=u),c=l+t}}return Kr(e),r},toWireType:function(e,i){"string"!=typeof i&&gt("Cannot pass non-string to C++ string type "+r);var o=a(i),c=zr(4+o+t);return G[c>>2]=o>>s,n(i,c+4,o+t),null!==e&&e.push(Kr,c),c},argPackAdvance:8,readValueFromPointer:St,destructorFunction:function(e){Kr(e)}})},_embind_register_value_object:function(e,t,r,i,n,o){vt[e]={name:ct(t),rawConstructor:Kt(r,i),rawDestructor:Kt(n,o),fields:[]}},_embind_register_value_object_field:function(e,t,r,i,n,o,a,s,c,A){vt[e].fields.push({fieldName:ct(t),getterReturnType:r,getter:Kt(i,n),getterContext:o,setterArgumentType:a,setter:Kt(s,c),setterContext:A})},_embind_register_void:function(e,t){kt(e,{isVoid:!0,name:t=ct(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},_emval_call_void_method:function(e,t,r,i){e=sr[e],t=ft(t),r=function(e){var t=ar[e];return void 0===t?ct(e):t}(r),e(t,r,null,i)},_emval_decref:rr,_emval_get_method_caller:function(e,t){for(var r=function(e,t){for(var r=new Array(e),i=0;i<e;++i)r[i]=It(V[(t>>2)+i],"parameter "+i);return r}(e,t),i=r[0],n=i.name+"_$"+r.slice(1).map((function(e){return e.name})).join("_")+"$",o=["retType"],a=[i],s="",c=0;c<e-1;++c)s+=(0!==c?", ":"")+"arg"+c,o.push("argType"+c),a.push(r[1+c]);var A="return function "+et("methodCaller_"+n)+"(handle, name, destructors, args) {\n",l=0;for(c=0;c<e-1;++c)A+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(l?"+"+l:"")+");\n",l+=r[c+1].argPackAdvance;for(A+="    var rv = handle[name]("+s+");\n",c=0;c<e-1;++c)r[c+1].deleteObject&&(A+="    argType"+c+".deleteObject(arg"+c+");\n");return i.isVoid||(A+="    return retType.toWireType(destructors, rv);\n"),A+="};\n",o.push(A),function(e){var t=sr.length;return sr.push(e),t}(Zt(Function,o).apply(null,a))},_emval_incref:function(e){e>4&&(it[e].refcount+=1)},_emval_take_value:function(e,t){return nt((e=It(e,"_emval_take_value")).readValueFromPointer(t))},abort:function(){ye()},clock_gettime:function(e,t){var r;if(0===e)r=Date.now();else{if(1!==e&&4!==e)return je(28),-1;r=De()}return V[t>>2]=r/1e3|0,V[t+4>>2]=r%1e3*1e3*1e3|0,0},dlopen:function(e,t){ye("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},dlsym:function(e,t){ye("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},emscripten_asm_const_int:function(e,t,r){var i=function(e,t){var r;for(D(Array.isArray(cr)),D(t%16==0),cr.length=0,t>>=2;r=x[e++];){D(100===r||102===r||105===r);var i=r<105;i&&1&t&&t++,cr.push(i?H[t++>>1]:V[t]),++t}return cr}(t,r);return Be.hasOwnProperty(e)||ye("No EM_ASM constant found at address "+e),Be[e].apply(null,i)},emscripten_get_heap_max:function(){return 2147483648},emscripten_memcpy_big:function(e,t,r){x.copyWithin(e,t,t+r)},emscripten_pc_get_function:function(e){ye("Cannot use emscripten_pc_get_function without -s USE_OFFSET_CONVERTER")},emscripten_resize_heap:function(e){var t=x.length;D((e>>>=0)>t);var r=2147483648;if(e>r)return _("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is "+r+" bytes!"),!1;for(var i=1;i<=4;i*=2){var n=t*(1+.2/i);n=Math.min(n,e+100663296);var o=Math.min(r,$(Math.max(e,n),65536));if(Ar(o))return!0}return _("Failed to grow the heap from "+t+" bytes to "+o+" bytes, not enough memory!"),!1},emscripten_stack_snapshot:function(){var e=(new Error).stack.split("\n");return"Error"==e[0]&&e.shift(),dr(e),ur.last_addr=lr(e[2]),ur.last_stack=e,ur.last_addr},emscripten_stack_unwind_buffer:function(e,t,r){var i;ur.last_addr==e?i=ur.last_stack:("Error"==(i=(new Error).stack.split("\n"))[0]&&i.shift(),dr(i));for(var n=2;i[n]&&lr(i[n])!=e;)++n;for(var o=0;o<r&&i[o+n];++o)V[t+4*o>>2]=lr(i[o+n]);return o},emscripten_thread_sleep:function(e){for(var t=De();De()-t<e;);},emscripten_webgl_create_context:function(e,t){return function(e,t){D(t);var r=t>>2,i=V[r+6],n={alpha:!!V[r+0],depth:!!V[r+1],stencil:!!V[r+2],antialias:!!V[r+3],premultipliedAlpha:!!V[r+4],preserveDrawingBuffer:!!V[r+5],powerPreference:pr[i],failIfMajorPerformanceCaveat:!!V[r+7],majorVersion:V[r+8],minorVersion:V[r+9],enableExtensionsByDefault:V[r+10],explicitSwapControl:V[r+11],proxyContextToMainThread:V[r+12],renderViaOffscreenBackBuffer:V[r+13]},o=mr(e);if(!o)return 0;if(o.offscreenCanvas&&(o=o.offscreenCanvas),n.explicitSwapControl&&(o.transferControlToOffscreen||"undefined"!=typeof OffscreenCanvas&&o instanceof OffscreenCanvas||n.renderViaOffscreenBackBuffer||(n.renderViaOffscreenBackBuffer=!0),o.transferControlToOffscreen)){if(o.controlTransferredOffscreen){if(!hr.offscreenCanvases[o.id])return 0}else hr.offscreenCanvases[o.id]={canvas:o.transferControlToOffscreen(),canvasSharedPtr:zr(12),id:o.id},o.controlTransferredOffscreen=!0;o=hr.offscreenCanvases[o.id]}return hr.createContext(o,n)}(e,t)},emscripten_webgl_destroy_context:function(e){hr.currentContext==e&&(hr.currentContext=0),hr.deleteContext(e)},emscripten_webgl_get_context_attributes:function(e,t){if(!t)return-5;if(!(e=hr.contexts[e]))return-3;var r=e.GLctx;if(!r)return-3;r=r.getContextAttributes(),V[t>>2]=r.alpha,V[t+4>>2]=r.depth,V[t+8>>2]=r.stencil,V[t+12>>2]=r.antialias,V[t+16>>2]=r.premultipliedAlpha,V[t+20>>2]=r.preserveDrawingBuffer;var i=r.powerPreference&&pr.indexOf(r.powerPreference);return V[t+24>>2]=i,V[t+28>>2]=r.failIfMajorPerformanceCaveat,V[t+32>>2]=e.version,V[t+36>>2]=0,V[t+40>>2]=e.attributes.enableExtensionsByDefault,0},emscripten_webgl_get_current_context:Er,emscripten_webgl_init_context_attributes:function(e){D(e);for(var t=e>>2,r=0;r<14;++r)V[t+r]=0;V[t+0]=V[t+1]=V[t+3]=V[t+4]=V[t+8]=V[t+10]=1},emscripten_webgl_make_context_current:Ir,environ_get:function(e,t){var r=0;return Cr().forEach((function(i,n){var o=t+r;V[e+4*n>>2]=o,function(e,t){for(var r=0;r<e.length;++r)D(e.charCodeAt(r)==e.charCodeAt(r)&255),L[0|t++]=e.charCodeAt(r);L[0|t]=0}(i,o),r+=i.length+1})),0},environ_sizes_get:function(e,t){var r=Cr();V[e>>2]=r.length;var i=0;return r.forEach((function(e){i+=e.length+1})),V[t>>2]=i,0},exit:Qe,fd_close:function(e){try{var t=$e.getStreamFromFD(e);return Ze.close(t),0}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),e.errno}},fd_read:function(e,t,r,i){try{var n=$e.getStreamFromFD(e),o=$e.doReadv(n,t,r);return V[i>>2]=o,0}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),e.errno}},fd_seek:function(e,t,r,i,n){try{var o=$e.getStreamFromFD(e),a=4294967296*r+(t>>>0),s=9007199254740992;return a<=-s||a>=s?-61:(Ze.llseek(o,a,i),Re=[o.position>>>0,(be=o.position,+Math.abs(be)>=1?be>0?(0|Math.min(+Math.floor(be/4294967296),4294967295))>>>0:~~+Math.ceil((be-+(~~be>>>0))/4294967296)>>>0:0)],V[n>>2]=Re[0],V[n+4>>2]=Re[1],o.getdents&&0===a&&0===i&&(o.getdents=null),0)}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),e.errno}},fd_write:function(e,t,r,i){try{var n=$e.getStreamFromFD(e),o=$e.doWritev(n,t,r);return V[i>>2]=o,0}catch(e){return(void 0===Ze||!(e instanceof Ze.ErrnoError))&&ye(e),e.errno}},getTempRet0:function(){return T},getentropy:function e(t,r){e.randomDevice||(e.randomDevice=Ye());for(var i=0;i<r;i++)L[t+i|0]=e.randomDevice();return 0},glActiveTexture:function(e){Gr.activeTexture(e)},glAttachShader:function(e,t){Gr.attachShader(hr.programs[e],hr.shaders[t])},glBindAttribLocation:function(e,t,r){Gr.bindAttribLocation(hr.programs[e],t,Q(r))},glBindBuffer:function(e,t){34962==e?Gr.currentArrayBufferBinding=t:34963==e&&(Gr.currentElementArrayBufferBinding=t),35051==e?Gr.currentPixelPackBufferBinding=t:35052==e&&(Gr.currentPixelUnpackBufferBinding=t),Gr.bindBuffer(e,hr.buffers[t])},glBindBufferBase:function(e,t,r){Gr.bindBufferBase(e,t,hr.buffers[r])},glBindFramebuffer:function(e,t){Gr.bindFramebuffer(e,t?hr.framebuffers[t]:hr.currentContext.defaultFbo)},glBindTexture:function(e,t){Gr.bindTexture(e,hr.textures[t])},glBindVertexArray:function(e){Gr.bindVertexArray(hr.vaos[e]);var t=Gr.getParameter(34965);Gr.currentElementArrayBufferBinding=t?0|t.name:0},glBufferData:function(e,t,r,i){hr.currentContext.version>=2?r?Gr.bufferData(e,x,i,r,t):Gr.bufferData(e,t,i):Gr.bufferData(e,r?x.subarray(r,r+t):t,i)},glClientWaitSync:function(e,t,r,i){return Gr.clientWaitSync(hr.syncs[e],t,function(e,t){return D(t===(0|t)),(e>>>0)+4294967296*t}(r,i))},glCompileShader:function(e){Gr.compileShader(hr.shaders[e])},glCreateProgram:function(){var e=hr.getNewId(hr.programs),t=Gr.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,hr.programs[e]=t,e},glCreateShader:function(e){var t=hr.getNewId(hr.shaders);return hr.shaders[t]=Gr.createShader(e),t},glDeleteBuffers:function(e,t){for(var r=0;r<e;r++){var i=V[t+4*r>>2],n=hr.buffers[i];n&&(Gr.deleteBuffer(n),n.name=0,hr.buffers[i]=null,i==Gr.currentArrayBufferBinding&&(Gr.currentArrayBufferBinding=0),i==Gr.currentElementArrayBufferBinding&&(Gr.currentElementArrayBufferBinding=0),i==Gr.currentPixelPackBufferBinding&&(Gr.currentPixelPackBufferBinding=0),i==Gr.currentPixelUnpackBufferBinding&&(Gr.currentPixelUnpackBufferBinding=0))}},glDeleteFramebuffers:function(e,t){for(var r=0;r<e;++r){var i=V[t+4*r>>2],n=hr.framebuffers[i];n&&(Gr.deleteFramebuffer(n),n.name=0,hr.framebuffers[i]=null)}},glDeleteProgram:function(e){if(e){var t=hr.programs[e];if(!t)return void hr.recordError(1281);Gr.deleteProgram(t),t.name=0,hr.programs[e]=null}},glDeleteShader:function(e){if(e){var t=hr.shaders[e];if(!t)return void hr.recordError(1281);Gr.deleteShader(t),hr.shaders[e]=null}},glDeleteSync:function(e){if(e){var t=hr.syncs[e];if(!t)return void hr.recordError(1281);Gr.deleteSync(t),t.name=0,hr.syncs[e]=null}},glDeleteTextures:function(e,t){for(var r=0;r<e;r++){var i=V[t+4*r>>2],n=hr.textures[i];n&&(Gr.deleteTexture(n),n.name=0,hr.textures[i]=null)}},glDeleteVertexArrays:function(e,t){for(var r=0;r<e;r++){var i=V[t+4*r>>2];Gr.deleteVertexArray(hr.vaos[i]),hr.vaos[i]=null}},glDisable:function(e){Gr.disable(e)},glDisableVertexAttribArray:function(e){hr.currentContext.clientBuffers[e].enabled=!1,Gr.disableVertexAttribArray(e)},glDrawArrays:function(e,t,r){hr.preDrawHandleClientVertexAttribBindings(t+r),Gr.drawArrays(e,t,r),hr.postDrawHandleClientVertexAttribBindings()},glDrawBuffers:function(e,t){for(var r=yr[e],i=0;i<e;i++)r[i]=V[t+4*i>>2];Gr.drawBuffers(r)},glEnableVertexAttribArray:function(e){hr.currentContext.clientBuffers[e].enabled=!0,Gr.enableVertexAttribArray(e)},glFenceSync:function(e,t){var r=Gr.fenceSync(e,t);if(r){var i=hr.getNewId(hr.syncs);return r.name=i,hr.syncs[i]=r,i}return 0},glFinish:function(){Gr.finish()},glFlush:function(){Gr.flush()},glFramebufferTexture2D:function(e,t,r,i,n){Gr.framebufferTexture2D(e,t,r,hr.textures[i],n)},glFramebufferTextureLayer:function(e,t,r,i,n){Gr.framebufferTextureLayer(e,t,hr.textures[r],i,n)},glGenBuffers:function(e,t){Tr(e,t,"createBuffer",hr.buffers)},glGenFramebuffers:function(e,t){Tr(e,t,"createFramebuffer",hr.framebuffers)},glGenTextures:function(e,t){Tr(e,t,"createTexture",hr.textures)},glGenVertexArrays:function(e,t){Tr(e,t,"createVertexArray",hr.vaos)},glGetAttribLocation:function(e,t){return Gr.getAttribLocation(hr.programs[e],Q(t))},glGetError:function(){var e=Gr.getError()||hr.lastError;return hr.lastError=0,e},glGetIntegerv:function(e,t){!function(e,t){if(t){var r=void 0;switch(e){case 36346:r=1;break;case 36344:return;case 34814:case 36345:r=0;break;case 34466:var i=Gr.getParameter(34467);r=i?i.length:0;break;case 33309:if(hr.currentContext.version<2)return void hr.recordError(1282);r=2*(Gr.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(hr.currentContext.version<2)return void hr.recordError(1280);r=33307==e?3:0}if(void 0===r){var n=Gr.getParameter(e);switch(typeof n){case"number":r=n;break;case"boolean":r=n?1:0;break;case"string":return void hr.recordError(1280);case"object":if(null===n)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:r=0;break;default:return void hr.recordError(1280)}else{if(n instanceof Float32Array||n instanceof Uint32Array||n instanceof Int32Array||n instanceof Array){for(var o=0;o<n.length;++o)V[t+4*o>>2]=n[o];return}try{r=0|n.name}catch(t){return hr.recordError(1280),void _("GL_INVALID_ENUM in glGet0v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return hr.recordError(1280),void _("GL_INVALID_ENUM in glGet0v: Native code calling glGet0v("+e+") and it returns "+n+" of type "+typeof n+"!")}}V[t>>2]=r}else hr.recordError(1281)}(e,t)},glGetString:function(e){var t=hr.stringCache[e];if(!t){switch(e){case 7939:var r=Gr.getSupportedExtensions()||[];t=vr((r=r.concat(r.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var i=Gr.getParameter(e);i||hr.recordError(1280),t=i&&vr(i);break;case 7938:var n=Gr.getParameter(7938);t=vr(n=hr.currentContext.version>=2?"OpenGL ES 3.0 ("+n+")":"OpenGL ES 2.0 ("+n+")");break;case 35724:var o=Gr.getParameter(35724),a=o.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==a&&(3==a[1].length&&(a[1]=a[1]+"0"),o="OpenGL ES GLSL ES "+a[1]+" ("+o+")"),t=vr(o);break;default:hr.recordError(1280)}hr.stringCache[e]=t}return t},glGetUniformBlockIndex:function(e,t){return Gr.getUniformBlockIndex(hr.programs[e],Q(t))},glGetUniformLocation:function(e,t){if(t=Q(t),e=hr.programs[e]){!function(e){var t,r,i=e.uniformLocsById,n=e.uniformSizeAndIdsByName;if(!i)for(e.uniformLocsById=i={},e.uniformArrayNamesById={},t=0;t<Gr.getProgramParameter(e,35718);++t){var o=Gr.getActiveUniform(e,t),a=o.name,s=o.size,c=wr(a),A=c>0?a.slice(0,c):a,l=e.uniformIdCounter;for(e.uniformIdCounter+=s,n[A]=[s,l],r=0;r<s;++r)i[l]=r,e.uniformArrayNamesById[l++]=A}}(e);var r=e.uniformLocsById,i=0,n=t,o=wr(t);o>0&&(i=function(e){return parseInt(e)}(t.slice(o+1))>>>0,n=t.slice(0,o));var a=e.uniformSizeAndIdsByName[n];if(a&&i<a[0]&&(r[i+=a[1]]=r[i]||Gr.getUniformLocation(e,t)))return i}else hr.recordError(1281);return-1},glLinkProgram:function(e){e=hr.programs[e],Gr.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}},glPixelStorei:function(e,t){3317==e&&(hr.unpackAlignment=t),Gr.pixelStorei(e,t)},glReadPixels:function(e,t,r,i,n,o,a){if(hr.currentContext.version>=2)if(Gr.currentPixelPackBufferBinding)Gr.readPixels(e,t,r,i,n,o,a);else{var s=Sr(o);Gr.readPixels(e,t,r,i,n,o,s,a>>br(s))}else{var c=Rr(o,n,r,i,a);c?Gr.readPixels(e,t,r,i,n,o,c):hr.recordError(1280)}},glShaderSource:function(e,t,r,i){var n=hr.getSource(e,t,r,i);Gr.shaderSource(hr.shaders[e],n)},glTexImage2D:function(e,t,r,i,n,o,a,s,c){if(hr.currentContext.version>=2)if(Gr.currentPixelUnpackBufferBinding)Gr.texImage2D(e,t,r,i,n,o,a,s,c);else if(c){var A=Sr(s);Gr.texImage2D(e,t,r,i,n,o,a,s,A,c>>br(A))}else Gr.texImage2D(e,t,r,i,n,o,a,s,null);else Gr.texImage2D(e,t,r,i,n,o,a,s,c?Rr(s,a,i,n,c):null)},glTexParameterfv:function(e,t,r){var i=j[r>>2];Gr.texParameterf(e,t,i)},glTexParameteri:function(e,t,r){Gr.texParameteri(e,t,r)},glTexStorage2D:function(e,t,r,i,n){Gr.texStorage2D(e,t,r,i,n)},glTexStorage3D:function(e,t,r,i,n,o){Gr.texStorage3D(e,t,r,i,n,o)},glTexSubImage2D:function(e,t,r,i,n,o,a,s,c){if(hr.currentContext.version>=2)if(Gr.currentPixelUnpackBufferBinding)Gr.texSubImage2D(e,t,r,i,n,o,a,s,c);else if(c){var A=Sr(s);Gr.texSubImage2D(e,t,r,i,n,o,a,s,A,c>>br(A))}else Gr.texSubImage2D(e,t,r,i,n,o,a,s,null);else{var l=null;c&&(l=Rr(s,a,n,o,c)),Gr.texSubImage2D(e,t,r,i,n,o,a,s,l)}},glTexSubImage3D:function(e,t,r,i,n,o,a,s,c,A,l){if(Gr.currentPixelUnpackBufferBinding)Gr.texSubImage3D(e,t,r,i,n,o,a,s,c,A,l);else if(l){var u=Sr(A);Gr.texSubImage3D(e,t,r,i,n,o,a,s,c,A,u,l>>br(u))}else Gr.texSubImage3D(e,t,r,i,n,o,a,s,c,A,null)},glUniform1f:function(e,t){Gr.uniform1f(Dr(e),t)},glUniform1i:function(e,t){Gr.uniform1i(Dr(e),t)},glUniform2fv:function(e,t,r){if(hr.currentContext.version>=2)Gr.uniform2fv(Dr(e),j,r>>2,2*t);else{if(t<=144)for(var i=Br[2*t-1],n=0;n<2*t;n+=2)i[n]=j[r+4*n>>2],i[n+1]=j[r+(4*n+4)>>2];else i=j.subarray(r>>2,r+8*t>>2);Gr.uniform2fv(Dr(e),i)}},glUniform4fv:function(e,t,r){if(hr.currentContext.version>=2)Gr.uniform4fv(Dr(e),j,r>>2,4*t);else{if(t<=72){var i=Br[4*t-1],n=j;r>>=2;for(var o=0;o<4*t;o+=4){var a=r+o;i[o]=n[a],i[o+1]=n[a+1],i[o+2]=n[a+2],i[o+3]=n[a+3]}}else i=j.subarray(r>>2,r+16*t>>2);Gr.uniform4fv(Dr(e),i)}},glUniform4iv:function(e,t,r){if(hr.currentContext.version>=2)Gr.uniform4iv(Dr(e),V,r>>2,4*t);else{if(t<=72)for(var i=Or[4*t-1],n=0;n<4*t;n+=4)i[n]=V[r+4*n>>2],i[n+1]=V[r+(4*n+4)>>2],i[n+2]=V[r+(4*n+8)>>2],i[n+3]=V[r+(4*n+12)>>2];else i=V.subarray(r>>2,r+16*t>>2);Gr.uniform4iv(Dr(e),i)}},glUniformBlockBinding:function(e,t,r){e=hr.programs[e],Gr.uniformBlockBinding(e,t,r)},glUniformMatrix4fv:function(e,t,r,i){if(hr.currentContext.version>=2)Gr.uniformMatrix4fv(Dr(e),!!r,j,i>>2,16*t);else{if(t<=18){var n=Br[16*t-1],o=j;i>>=2;for(var a=0;a<16*t;a+=16){var s=i+a;n[a]=o[s],n[a+1]=o[s+1],n[a+2]=o[s+2],n[a+3]=o[s+3],n[a+4]=o[s+4],n[a+5]=o[s+5],n[a+6]=o[s+6],n[a+7]=o[s+7],n[a+8]=o[s+8],n[a+9]=o[s+9],n[a+10]=o[s+10],n[a+11]=o[s+11],n[a+12]=o[s+12],n[a+13]=o[s+13],n[a+14]=o[s+14],n[a+15]=o[s+15]}}else n=j.subarray(i>>2,i+64*t>>2);Gr.uniformMatrix4fv(Dr(e),!!r,n)}},glUseProgram:function(e){e=hr.programs[e],Gr.useProgram(e),Gr.currentProgram=e},glVertexAttribPointer:function(e,t,r,i,n,o){var a=hr.currentContext.clientBuffers[e];if(!Gr.currentArrayBufferBinding)return a.size=t,a.type=r,a.normalized=i,a.stride=n,a.ptr=o,a.clientside=!0,void(a.vertexAttribPointerAdaptor=function(e,t,r,i,n,o){this.vertexAttribPointer(e,t,r,i,n,o)});a.clientside=!1,Gr.vertexAttribPointer(e,t,r,!!i,n,o)},glViewport:function(e,t,r,i){Gr.viewport(e,t,r,i)},gmtime_r:function e(t,r){var i=new Date(1e3*V[t>>2]);V[r>>2]=i.getUTCSeconds(),V[r+4>>2]=i.getUTCMinutes(),V[r+8>>2]=i.getUTCHours(),V[r+12>>2]=i.getUTCDate(),V[r+16>>2]=i.getUTCMonth(),V[r+20>>2]=i.getUTCFullYear()-1900,V[r+24>>2]=i.getUTCDay(),V[r+36>>2]=0,V[r+32>>2]=0;var n=Date.UTC(i.getUTCFullYear(),0,1,0,0,0,0),o=(i.getTime()-n)/864e5|0;return V[r+28>>2]=o,e.GMTString||(e.GMTString=Z("GMT")),V[r+40>>2]=e.GMTString,r},invoke_diii:function(e,t,r,i){var n=ii();try{return re.get(e)(t,r,i)}catch(e){if(ni(n),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_i:function(e){var t=ii();try{return re.get(e)()}catch(e){if(ni(t),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_ii:function(e,t){var r=ii();try{return re.get(e)(t)}catch(e){if(ni(r),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_iii:function(e,t,r){var i=ii();try{return re.get(e)(t,r)}catch(e){if(ni(i),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_iiii:function(e,t,r,i){var n=ii();try{return re.get(e)(t,r,i)}catch(e){if(ni(n),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_iiiii:function(e,t,r,i,n){var o=ii();try{return re.get(e)(t,r,i,n)}catch(e){if(ni(o),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_iiiiii:function(e,t,r,i,n,o){var a=ii();try{return re.get(e)(t,r,i,n,o)}catch(e){if(ni(a),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_iiiiiii:function(e,t,r,i,n,o,a){var s=ii();try{return re.get(e)(t,r,i,n,o,a)}catch(e){if(ni(s),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_iiiiiiiddi:function(e,t,r,i,n,o,a,s,c,A){var l=ii();try{return re.get(e)(t,r,i,n,o,a,s,c,A)}catch(e){if(ni(l),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_iiiiiiii:function(e,t,r,i,n,o,a,s){var c=ii();try{return re.get(e)(t,r,i,n,o,a,s)}catch(e){if(ni(c),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_iiiiiiiii:function(e,t,r,i,n,o,a,s,c){var A=ii();try{return re.get(e)(t,r,i,n,o,a,s,c)}catch(e){if(ni(A),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_v:function(e){var t=ii();try{re.get(e)()}catch(e){if(ni(t),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_vdiii:function(e,t,r,i,n){var o=ii();try{re.get(e)(t,r,i,n)}catch(e){if(ni(o),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_vi:function(e,t){var r=ii();try{re.get(e)(t)}catch(e){if(ni(r),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_vididdii:function(e,t,r,i,n,o,a,s){var c=ii();try{re.get(e)(t,r,i,n,o,a,s)}catch(e){if(ni(c),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_vidii:function(e,t,r,i,n){var o=ii();try{re.get(e)(t,r,i,n)}catch(e){if(ni(o),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_vii:function(e,t,r){var i=ii();try{re.get(e)(t,r)}catch(e){if(ni(i),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viid:function(e,t,r,i){var n=ii();try{re.get(e)(t,r,i)}catch(e){if(ni(n),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viidi:function(e,t,r,i,n){var o=ii();try{re.get(e)(t,r,i,n)}catch(e){if(ni(o),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viididii:function(e,t,r,i,n,o,a,s){var c=ii();try{re.get(e)(t,r,i,n,o,a,s)}catch(e){if(ni(c),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viii:function(e,t,r,i){var n=ii();try{re.get(e)(t,r,i)}catch(e){if(ni(n),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiid:function(e,t,r,i,n){var o=ii();try{re.get(e)(t,r,i,n)}catch(e){if(ni(o),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiidd:function(e,t,r,i,n,o){var a=ii();try{re.get(e)(t,r,i,n,o)}catch(e){if(ni(a),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiddi:function(e,t,r,i,n,o,a){var s=ii();try{re.get(e)(t,r,i,n,o,a)}catch(e){if(ni(s),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiidi:function(e,t,r,i,n,o){var a=ii();try{re.get(e)(t,r,i,n,o)}catch(e){if(ni(a),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiii:function(e,t,r,i,n){var o=ii();try{re.get(e)(t,r,i,n)}catch(e){if(ni(o),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiid:function(e,t,r,i,n,o){var a=ii();try{re.get(e)(t,r,i,n,o)}catch(e){if(ni(a),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiidi:function(e,t,r,i,n,o,a){var s=ii();try{re.get(e)(t,r,i,n,o,a)}catch(e){if(ni(s),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiidid:function(e,t,r,i,n,o,a,s){var c=ii();try{re.get(e)(t,r,i,n,o,a,s)}catch(e){if(ni(c),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiidiidiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d,h,g,p){var f=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u,d,h,g,p)}catch(e){if(ni(f),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiifiifiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d,h,g,p){var f=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u,d,h,g,p)}catch(e){if(ni(f),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiii:function(e,t,r,i,n,o){var a=ii();try{re.get(e)(t,r,i,n,o)}catch(e){if(ni(a),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiid:function(e,t,r,i,n,o,a){var s=ii();try{re.get(e)(t,r,i,n,o,a)}catch(e){if(ni(s),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiif:function(e,t,r,i,n,o,a){var s=ii();try{re.get(e)(t,r,i,n,o,a)}catch(e){if(ni(s),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiii:function(e,t,r,i,n,o,a){var s=ii();try{re.get(e)(t,r,i,n,o,a)}catch(e){if(ni(s),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiid:function(e,t,r,i,n,o,a,s){var c=ii();try{re.get(e)(t,r,i,n,o,a,s)}catch(e){if(ni(c),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiif:function(e,t,r,i,n,o,a,s){var c=ii();try{re.get(e)(t,r,i,n,o,a,s)}catch(e){if(ni(c),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiii:function(e,t,r,i,n,o,a,s){var c=ii();try{re.get(e)(t,r,i,n,o,a,s)}catch(e){if(ni(c),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiddi:function(e,t,r,i,n,o,a,s,c,A,l){var u=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l)}catch(e){if(ni(u),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiidiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d){var h=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u,d)}catch(e){if(ni(h),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiifiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d){var h=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u,d)}catch(e){if(ni(h),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiii:function(e,t,r,i,n,o,a,s,c){var A=ii();try{re.get(e)(t,r,i,n,o,a,s,c)}catch(e){if(ni(A),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiidd:function(e,t,r,i,n,o,a,s,c,A,l){var u=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l)}catch(e){if(ni(u),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiidf:function(e,t,r,i,n,o,a,s,c,A,l){var u=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l)}catch(e){if(ni(u),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiii:function(e,t,r,i,n,o,a,s,c,A){var l=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A)}catch(e){if(ni(l),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiiidd:function(e,t,r,i,n,o,a,s,c,A,l,u){var d=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u)}catch(e){if(ni(d),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiiiddi:function(e,t,r,i,n,o,a,s,c,A,l,u,d){var h=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u,d)}catch(e){if(ni(h),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l){var u=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l)}catch(e){if(ni(u),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiiiiddi:function(e,t,r,i,n,o,a,s,c,A,l,u,d,h){var g=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u,d,h)}catch(e){if(ni(g),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u){var d=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u)}catch(e){if(ni(d),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d){var h=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u,d)}catch(e){if(ni(h),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},invoke_viiiiiiiiiiiii:function(e,t,r,i,n,o,a,s,c,A,l,u,d,h){var g=ii();try{re.get(e)(t,r,i,n,o,a,s,c,A,l,u,d,h)}catch(e){if(ni(g),e!==e+0&&"longjmp"!==e)throw e;ai(1,0)}},llvm_eh_typeid_for:function(e){return e},localtime_r:function(e,t){Qr();var r=new Date(1e3*V[e>>2]);V[t>>2]=r.getSeconds(),V[t+4>>2]=r.getMinutes(),V[t+8>>2]=r.getHours(),V[t+12>>2]=r.getDate(),V[t+16>>2]=r.getMonth(),V[t+20>>2]=r.getFullYear()-1900,V[t+24>>2]=r.getDay();var i=new Date(r.getFullYear(),0,1),n=(r.getTime()-i.getTime())/864e5|0;V[t+28>>2]=n,V[t+36>>2]=-60*r.getTimezoneOffset();var o=new Date(r.getFullYear(),6,1).getTimezoneOffset(),a=i.getTimezoneOffset(),s=0|(o!=a&&r.getTimezoneOffset()==Math.min(a,o));V[t+32>>2]=s;var c=V[ei()+(s?4:0)>>2];return V[t+40>>2]=c,t},mktime:function(e){Qr();var t=new Date(V[e+20>>2]+1900,V[e+16>>2],V[e+12>>2],V[e+8>>2],V[e+4>>2],V[e>>2],0),r=V[e+32>>2],i=t.getTimezoneOffset(),n=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=n.getTimezoneOffset(),s=Math.min(a,o);if(r<0)V[e+32>>2]=+(o!=a&&s==i);else if(r>0!=(s==i)){var c=Math.max(a,o),A=r>0?s:c;t.setTime(t.getTime()+6e4*(A-i))}V[e+24>>2]=t.getDay();var l=(t.getTime()-n.getTime())/864e5|0;return V[e+28>>2]=l,V[e>>2]=t.getSeconds(),V[e+4>>2]=t.getMinutes(),V[e+8>>2]=t.getHours(),V[e+12>>2]=t.getDate(),V[e+16>>2]=t.getMonth(),t.getTime()/1e3|0},proc_exit:function(e){di(e)},setTempRet0:function(e){v(e)},strftime:xr,strftime_l:function(e,t,r,i){return xr(e,t,r,i)}},Kr=(function(){var e={env:Xr,wasi_snapshot_preview1:Xr};function t(e,t){var r=e.exports;i.asm=r,D(S=i.asm.memory,"memory not found in wasm exports"),ee(S.buffer),D(re=i.asm.__indirect_function_table,"table not found in wasm exports"),function(e){se.unshift(e)}(i.asm.__wasm_call_ctors),Ce("wasm-instantiate")}_e("wasm-instantiate");var n=i;function o(e){D(i===n,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),n=null,t(e.instance)}function a(t){return function(){if(!y&&(l||u)){if("function"==typeof fetch&&!ve(he))return fetch(he,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+he+"'";return e.arrayBuffer()})).catch((function(){return Se(he)}));if(f)return new Promise((function(e,t){f(he,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return Se(he)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),ve(he)&&_("warning: Loading from a file URI ("+he+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),ye(e)}))}if(i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(y||"function"!=typeof WebAssembly.instantiateStreaming||Te(he)||ve(he)||"function"!=typeof fetch?a(o):fetch(he,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(o,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),a(o)}))}))).catch(r)}(),i.___wasm_call_ctors=we("__wasm_call_ctors"),i._free=we("free")),zr=i._malloc=we("malloc"),qr=i.___errno_location=we("__errno_location"),Zr=(i._fflush=we("fflush"),i.___getTypeName=we("__getTypeName")),$r=(i.___embind_register_native_and_builtin_types=we("__embind_register_native_and_builtin_types"),i._emscripten_main_thread_process_queued_calls=we("emscripten_main_thread_process_queued_calls"),i._emscripten_stack_get_end=function(){return($r=i._emscripten_stack_get_end=i.asm.emscripten_stack_get_end).apply(null,arguments)}),ei=i.__get_tzname=we("_get_tzname"),ti=i.__get_daylight=we("_get_daylight"),ri=i.__get_timezone=we("_get_timezone"),ii=i.stackSave=we("stackSave"),ni=i.stackRestore=we("stackRestore"),oi=(i.stackAlloc=we("stackAlloc"),i._emscripten_stack_init=function(){return(oi=i._emscripten_stack_init=i.asm.emscripten_stack_init).apply(null,arguments)}),ai=(i._emscripten_stack_get_free=function(){return(i._emscripten_stack_get_free=i.asm.emscripten_stack_get_free).apply(null,arguments)},i._saveSetjmp=we("saveSetjmp"),i._setThrew=we("setThrew")),si=i.___cxa_can_catch=we("__cxa_can_catch"),ci=i.___cxa_is_pointer_type=we("__cxa_is_pointer_type"),Ai=i._memalign=we("memalign");function li(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ui(e){function r(){Jr||(Jr=!0,i.calledRun=!0,!R&&(oe(),D(!le),le=!0,!i.noFSInit&&!Ze.init.initialized&&Ze.init(),Ze.ignorePermissions=!1,Je.init(),Ne(se),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),D(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(oe(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),Ae.unshift(e);var e;Ne(Ae)}()))}e=e||s,pe>0||(oi(),ne(),function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),ae.unshift(e);var e;Ne(ae)}(),pe>0)||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),r()}),1)):r(),oe())}function di(e){b=e,de()||(i.onExit&&i.onExit(e),R=!0),A(e,new li(e))}if(i._emscripten_builtin_malloc=we("emscripten_builtin_malloc"),i._emscripten_builtin_free=we("emscripten_builtin_free"),i._emscripten_builtin_memalign=we("emscripten_builtin_memalign"),i.dynCall_jii=we("dynCall_jii"),i.dynCall_viji=we("dynCall_viji"),i.dynCall_jjj=we("dynCall_jjj"),i.dynCall_iiiijj=we("dynCall_iiiijj"),i.dynCall_viijj=we("dynCall_viijj"),i.dynCall_viiijjjj=we("dynCall_viiijjjj"),i.dynCall_ji=we("dynCall_ji"),i.dynCall_vij=we("dynCall_vij"),i.dynCall_viijii=we("dynCall_viijii"),i.dynCall_vj=we("dynCall_vj"),i.dynCall_viij=we("dynCall_viij"),i.dynCall_viiiiij=we("dynCall_viiiiij"),i.dynCall_iijjiiii=we("dynCall_iijjiiii"),i.dynCall_jiji=we("dynCall_jiji"),i.dynCall_iiiiij=we("dynCall_iiiiij"),i.dynCall_iiiiijj=we("dynCall_iiiiijj"),i.dynCall_iiiiiijj=we("dynCall_iiiiiijj"),Object.getOwnPropertyDescriptor(i,"intArrayFromString")||(i.intArrayFromString=function(){ye("'intArrayFromString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"intArrayToString")||(i.intArrayToString=function(){ye("'intArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ccall")||(i.ccall=function(){ye("'ccall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"cwrap")||(i.cwrap=function(){ye("'cwrap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setValue")||(i.setValue=function(){ye("'setValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getValue")||(i.getValue=function(){ye("'getValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"allocate")||(i.allocate=function(){ye("'allocate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UTF8ArrayToString")||(i.UTF8ArrayToString=function(){ye("'UTF8ArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UTF8ToString")||(i.UTF8ToString=function(){ye("'UTF8ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToUTF8Array")||(i.stringToUTF8Array=function(){ye("'stringToUTF8Array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToUTF8")||(i.stringToUTF8=function(){ye("'stringToUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"lengthBytesUTF8")||(i.lengthBytesUTF8=function(){ye("'lengthBytesUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackTrace")||(i.stackTrace=function(){ye("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnPreRun")||(i.addOnPreRun=function(){ye("'addOnPreRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnInit")||(i.addOnInit=function(){ye("'addOnInit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnPreMain")||(i.addOnPreMain=function(){ye("'addOnPreMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnExit")||(i.addOnExit=function(){ye("'addOnExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnPostRun")||(i.addOnPostRun=function(){ye("'addOnPostRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeStringToMemory")||(i.writeStringToMemory=function(){ye("'writeStringToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeArrayToMemory")||(i.writeArrayToMemory=function(){ye("'writeArrayToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeAsciiToMemory")||(i.writeAsciiToMemory=function(){ye("'writeAsciiToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),i.addRunDependency=_e,i.removeRunDependency=Ce,Object.getOwnPropertyDescriptor(i,"FS_createFolder")||(i.FS_createFolder=function(){ye("'FS_createFolder' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),i.FS_createPath=Ze.createPath,i.FS_createDataFile=Ze.createDataFile,i.FS_createPreloadedFile=Ze.createPreloadedFile,i.FS_createLazyFile=Ze.createLazyFile,Object.getOwnPropertyDescriptor(i,"FS_createLink")||(i.FS_createLink=function(){ye("'FS_createLink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),i.FS_createDevice=Ze.createDevice,i.FS_unlink=Ze.unlink,Object.getOwnPropertyDescriptor(i,"getLEB")||(i.getLEB=function(){ye("'getLEB' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getFunctionTables")||(i.getFunctionTables=function(){ye("'getFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"alignFunctionTables")||(i.alignFunctionTables=function(){ye("'alignFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerFunctions")||(i.registerFunctions=function(){ye("'registerFunctions' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addFunction")||(i.addFunction=function(){ye("'addFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"removeFunction")||(i.removeFunction=function(){ye("'removeFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getFuncWrapper")||(i.getFuncWrapper=function(){ye("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"prettyPrint")||(i.prettyPrint=function(){ye("'prettyPrint' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"dynCall")||(i.dynCall=function(){ye("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getCompilerSetting")||(i.getCompilerSetting=function(){ye("'getCompilerSetting' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"print")||(i.print=function(){ye("'print' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"printErr")||(i.printErr=function(){ye("'printErr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getTempRet0")||(i.getTempRet0=function(){ye("'getTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setTempRet0")||(i.setTempRet0=function(){ye("'setTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"callMain")||(i.callMain=function(){ye("'callMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"abort")||(i.abort=function(){ye("'abort' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"keepRuntimeAlive")||(i.keepRuntimeAlive=function(){ye("'keepRuntimeAlive' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"zeroMemory")||(i.zeroMemory=function(){ye("'zeroMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToNewUTF8")||(i.stringToNewUTF8=function(){ye("'stringToNewUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setFileTime")||(i.setFileTime=function(){ye("'setFileTime' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emscripten_realloc_buffer")||(i.emscripten_realloc_buffer=function(){ye("'emscripten_realloc_buffer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ENV")||(i.ENV=function(){ye("'ENV' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ERRNO_CODES")||(i.ERRNO_CODES=function(){ye("'ERRNO_CODES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ERRNO_MESSAGES")||(i.ERRNO_MESSAGES=function(){ye("'ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setErrNo")||(i.setErrNo=function(){ye("'setErrNo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"inetPton4")||(i.inetPton4=function(){ye("'inetPton4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"inetNtop4")||(i.inetNtop4=function(){ye("'inetNtop4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"inetPton6")||(i.inetPton6=function(){ye("'inetPton6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"inetNtop6")||(i.inetNtop6=function(){ye("'inetNtop6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"readSockaddr")||(i.readSockaddr=function(){ye("'readSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeSockaddr")||(i.writeSockaddr=function(){ye("'writeSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"DNS")||(i.DNS=function(){ye("'DNS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getHostByName")||(i.getHostByName=function(){ye("'getHostByName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"GAI_ERRNO_MESSAGES")||(i.GAI_ERRNO_MESSAGES=function(){ye("'GAI_ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"Protocols")||(i.Protocols=function(){ye("'Protocols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"Sockets")||(i.Sockets=function(){ye("'Sockets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getRandomDevice")||(i.getRandomDevice=function(){ye("'getRandomDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"traverseStack")||(i.traverseStack=function(){ye("'traverseStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UNWIND_CACHE")||(i.UNWIND_CACHE=function(){ye("'UNWIND_CACHE' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"withBuiltinMalloc")||(i.withBuiltinMalloc=function(){ye("'withBuiltinMalloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"readAsmConstArgsArray")||(i.readAsmConstArgsArray=function(){ye("'readAsmConstArgsArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"readAsmConstArgs")||(i.readAsmConstArgs=function(){ye("'readAsmConstArgs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"mainThreadEM_ASM")||(i.mainThreadEM_ASM=function(){ye("'mainThreadEM_ASM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"jstoi_q")||(i.jstoi_q=function(){ye("'jstoi_q' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"jstoi_s")||(i.jstoi_s=function(){ye("'jstoi_s' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getExecutableName")||(i.getExecutableName=function(){ye("'getExecutableName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"listenOnce")||(i.listenOnce=function(){ye("'listenOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"autoResumeAudioContext")||(i.autoResumeAudioContext=function(){ye("'autoResumeAudioContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"dynCallLegacy")||(i.dynCallLegacy=function(){ye("'dynCallLegacy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getDynCaller")||(i.getDynCaller=function(){ye("'getDynCaller' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"dynCall")||(i.dynCall=function(){ye("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"callRuntimeCallbacks")||(i.callRuntimeCallbacks=function(){ye("'callRuntimeCallbacks' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"runtimeKeepalivePush")||(i.runtimeKeepalivePush=function(){ye("'runtimeKeepalivePush' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"runtimeKeepalivePop")||(i.runtimeKeepalivePop=function(){ye("'runtimeKeepalivePop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"callUserCallback")||(i.callUserCallback=function(){ye("'callUserCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"maybeExit")||(i.maybeExit=function(){ye("'maybeExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"safeSetTimeout")||(i.safeSetTimeout=function(){ye("'safeSetTimeout' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"asmjsMangle")||(i.asmjsMangle=function(){ye("'asmjsMangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"asyncLoad")||(i.asyncLoad=function(){ye("'asyncLoad' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"alignMemory")||(i.alignMemory=function(){ye("'alignMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"mmapAlloc")||(i.mmapAlloc=function(){ye("'mmapAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"reallyNegative")||(i.reallyNegative=function(){ye("'reallyNegative' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"unSign")||(i.unSign=function(){ye("'unSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"reSign")||(i.reSign=function(){ye("'reSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"formatString")||(i.formatString=function(){ye("'formatString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"PATH")||(i.PATH=function(){ye("'PATH' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"PATH_FS")||(i.PATH_FS=function(){ye("'PATH_FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"SYSCALLS")||(i.SYSCALLS=function(){ye("'SYSCALLS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"syscallMmap2")||(i.syscallMmap2=function(){ye("'syscallMmap2' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"syscallMunmap")||(i.syscallMunmap=function(){ye("'syscallMunmap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getSocketFromFD")||(i.getSocketFromFD=function(){ye("'getSocketFromFD' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getSocketAddress")||(i.getSocketAddress=function(){ye("'getSocketAddress' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"JSEvents")||(i.JSEvents=function(){ye("'JSEvents' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerKeyEventCallback")||(i.registerKeyEventCallback=function(){ye("'registerKeyEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"specialHTMLTargets")||(i.specialHTMLTargets=function(){ye("'specialHTMLTargets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"findEventTarget")||(i.findEventTarget=function(){ye("'findEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"findCanvasEventTarget")||(i.findCanvasEventTarget=function(){ye("'findCanvasEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getBoundingClientRect")||(i.getBoundingClientRect=function(){ye("'getBoundingClientRect' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillMouseEventData")||(i.fillMouseEventData=function(){ye("'fillMouseEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerMouseEventCallback")||(i.registerMouseEventCallback=function(){ye("'registerMouseEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerWheelEventCallback")||(i.registerWheelEventCallback=function(){ye("'registerWheelEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerUiEventCallback")||(i.registerUiEventCallback=function(){ye("'registerUiEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerFocusEventCallback")||(i.registerFocusEventCallback=function(){ye("'registerFocusEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillDeviceOrientationEventData")||(i.fillDeviceOrientationEventData=function(){ye("'fillDeviceOrientationEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerDeviceOrientationEventCallback")||(i.registerDeviceOrientationEventCallback=function(){ye("'registerDeviceOrientationEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillDeviceMotionEventData")||(i.fillDeviceMotionEventData=function(){ye("'fillDeviceMotionEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerDeviceMotionEventCallback")||(i.registerDeviceMotionEventCallback=function(){ye("'registerDeviceMotionEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"screenOrientation")||(i.screenOrientation=function(){ye("'screenOrientation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillOrientationChangeEventData")||(i.fillOrientationChangeEventData=function(){ye("'fillOrientationChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerOrientationChangeEventCallback")||(i.registerOrientationChangeEventCallback=function(){ye("'registerOrientationChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillFullscreenChangeEventData")||(i.fillFullscreenChangeEventData=function(){ye("'fillFullscreenChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerFullscreenChangeEventCallback")||(i.registerFullscreenChangeEventCallback=function(){ye("'registerFullscreenChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerRestoreOldStyle")||(i.registerRestoreOldStyle=function(){ye("'registerRestoreOldStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"hideEverythingExceptGivenElement")||(i.hideEverythingExceptGivenElement=function(){ye("'hideEverythingExceptGivenElement' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"restoreHiddenElements")||(i.restoreHiddenElements=function(){ye("'restoreHiddenElements' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setLetterbox")||(i.setLetterbox=function(){ye("'setLetterbox' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"currentFullscreenStrategy")||(i.currentFullscreenStrategy=function(){ye("'currentFullscreenStrategy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"restoreOldWindowedStyle")||(i.restoreOldWindowedStyle=function(){ye("'restoreOldWindowedStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"softFullscreenResizeWebGLRenderTarget")||(i.softFullscreenResizeWebGLRenderTarget=function(){ye("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"doRequestFullscreen")||(i.doRequestFullscreen=function(){ye("'doRequestFullscreen' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillPointerlockChangeEventData")||(i.fillPointerlockChangeEventData=function(){ye("'fillPointerlockChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerPointerlockChangeEventCallback")||(i.registerPointerlockChangeEventCallback=function(){ye("'registerPointerlockChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerPointerlockErrorEventCallback")||(i.registerPointerlockErrorEventCallback=function(){ye("'registerPointerlockErrorEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"requestPointerLock")||(i.requestPointerLock=function(){ye("'requestPointerLock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillVisibilityChangeEventData")||(i.fillVisibilityChangeEventData=function(){ye("'fillVisibilityChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerVisibilityChangeEventCallback")||(i.registerVisibilityChangeEventCallback=function(){ye("'registerVisibilityChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerTouchEventCallback")||(i.registerTouchEventCallback=function(){ye("'registerTouchEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillGamepadEventData")||(i.fillGamepadEventData=function(){ye("'fillGamepadEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerGamepadEventCallback")||(i.registerGamepadEventCallback=function(){ye("'registerGamepadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerBeforeUnloadEventCallback")||(i.registerBeforeUnloadEventCallback=function(){ye("'registerBeforeUnloadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"fillBatteryEventData")||(i.fillBatteryEventData=function(){ye("'fillBatteryEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"battery")||(i.battery=function(){ye("'battery' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerBatteryEventCallback")||(i.registerBatteryEventCallback=function(){ye("'registerBatteryEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setCanvasElementSize")||(i.setCanvasElementSize=function(){ye("'setCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getCanvasElementSize")||(i.getCanvasElementSize=function(){ye("'getCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"polyfillSetImmediate")||(i.polyfillSetImmediate=function(){ye("'polyfillSetImmediate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"demangle")||(i.demangle=function(){ye("'demangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"demangleAll")||(i.demangleAll=function(){ye("'demangleAll' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"jsStackTrace")||(i.jsStackTrace=function(){ye("'jsStackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackTrace")||(i.stackTrace=function(){ye("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getEnvStrings")||(i.getEnvStrings=function(){ye("'getEnvStrings' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"checkWasiClock")||(i.checkWasiClock=function(){ye("'checkWasiClock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeI53ToI64")||(i.writeI53ToI64=function(){ye("'writeI53ToI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeI53ToI64Clamped")||(i.writeI53ToI64Clamped=function(){ye("'writeI53ToI64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeI53ToI64Signaling")||(i.writeI53ToI64Signaling=function(){ye("'writeI53ToI64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeI53ToU64Clamped")||(i.writeI53ToU64Clamped=function(){ye("'writeI53ToU64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeI53ToU64Signaling")||(i.writeI53ToU64Signaling=function(){ye("'writeI53ToU64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"readI53FromI64")||(i.readI53FromI64=function(){ye("'readI53FromI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"readI53FromU64")||(i.readI53FromU64=function(){ye("'readI53FromU64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"convertI32PairToI53")||(i.convertI32PairToI53=function(){ye("'convertI32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"convertU32PairToI53")||(i.convertU32PairToI53=function(){ye("'convertU32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"uncaughtExceptionCount")||(i.uncaughtExceptionCount=function(){ye("'uncaughtExceptionCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"exceptionLast")||(i.exceptionLast=function(){ye("'exceptionLast' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"exceptionCaught")||(i.exceptionCaught=function(){ye("'exceptionCaught' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ExceptionInfo")||(i.ExceptionInfo=function(){ye("'ExceptionInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"CatchInfo")||(i.CatchInfo=function(){ye("'CatchInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"exception_addRef")||(i.exception_addRef=function(){ye("'exception_addRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"exception_decRef")||(i.exception_decRef=function(){ye("'exception_decRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"Browser")||(i.Browser=function(){ye("'Browser' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"funcWrappers")||(i.funcWrappers=function(){ye("'funcWrappers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getFuncWrapper")||(i.getFuncWrapper=function(){ye("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setMainLoop")||(i.setMainLoop=function(){ye("'setMainLoop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"wget")||(i.wget=function(){ye("'wget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"FS")||(i.FS=function(){ye("'FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"MEMFS")||(i.MEMFS=function(){ye("'MEMFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"TTY")||(i.TTY=function(){ye("'TTY' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"PIPEFS")||(i.PIPEFS=function(){ye("'PIPEFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"SOCKFS")||(i.SOCKFS=function(){ye("'SOCKFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"_setNetworkCallback")||(i._setNetworkCallback=function(){ye("'_setNetworkCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"tempFixedLengthArray")||(i.tempFixedLengthArray=function(){ye("'tempFixedLengthArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"miniTempWebGLFloatBuffers")||(i.miniTempWebGLFloatBuffers=function(){ye("'miniTempWebGLFloatBuffers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"heapObjectForWebGLType")||(i.heapObjectForWebGLType=function(){ye("'heapObjectForWebGLType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"heapAccessShiftForWebGLHeap")||(i.heapAccessShiftForWebGLHeap=function(){ye("'heapAccessShiftForWebGLHeap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),i.GL=hr,Object.getOwnPropertyDescriptor(i,"emscriptenWebGLGet")||(i.emscriptenWebGLGet=function(){ye("'emscriptenWebGLGet' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"computeUnpackAlignedImageSize")||(i.computeUnpackAlignedImageSize=function(){ye("'computeUnpackAlignedImageSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emscriptenWebGLGetTexPixelData")||(i.emscriptenWebGLGetTexPixelData=function(){ye("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emscriptenWebGLGetUniform")||(i.emscriptenWebGLGetUniform=function(){ye("'emscriptenWebGLGetUniform' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"webglGetUniformLocation")||(i.webglGetUniformLocation=function(){ye("'webglGetUniformLocation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"webglPrepareUniformLocationsBeforeFirstUse")||(i.webglPrepareUniformLocationsBeforeFirstUse=function(){ye("'webglPrepareUniformLocationsBeforeFirstUse' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"webglGetLeftBracePos")||(i.webglGetLeftBracePos=function(){ye("'webglGetLeftBracePos' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emscriptenWebGLGetVertexAttrib")||(i.emscriptenWebGLGetVertexAttrib=function(){ye("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emscriptenWebGLGetBufferBinding")||(i.emscriptenWebGLGetBufferBinding=function(){ye("'emscriptenWebGLGetBufferBinding' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emscriptenWebGLValidateMapBufferTarget")||(i.emscriptenWebGLValidateMapBufferTarget=function(){ye("'emscriptenWebGLValidateMapBufferTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeGLArray")||(i.writeGLArray=function(){ye("'writeGLArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"AL")||(i.AL=function(){ye("'AL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"SDL_unicode")||(i.SDL_unicode=function(){ye("'SDL_unicode' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"SDL_ttfContext")||(i.SDL_ttfContext=function(){ye("'SDL_ttfContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"SDL_audio")||(i.SDL_audio=function(){ye("'SDL_audio' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"SDL")||(i.SDL=function(){ye("'SDL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"SDL_gfx")||(i.SDL_gfx=function(){ye("'SDL_gfx' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"GLUT")||(i.GLUT=function(){ye("'GLUT' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"EGL")||(i.EGL=function(){ye("'EGL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"GLFW_Window")||(i.GLFW_Window=function(){ye("'GLFW_Window' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"GLFW")||(i.GLFW=function(){ye("'GLFW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"GLEW")||(i.GLEW=function(){ye("'GLEW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"IDBStore")||(i.IDBStore=function(){ye("'IDBStore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"runAndAbortIfError")||(i.runAndAbortIfError=function(){ye("'runAndAbortIfError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emval_handle_array")||(i.emval_handle_array=function(){ye("'emval_handle_array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emval_free_list")||(i.emval_free_list=function(){ye("'emval_free_list' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emval_symbols")||(i.emval_symbols=function(){ye("'emval_symbols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"init_emval")||(i.init_emval=function(){ye("'init_emval' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"count_emval_handles")||(i.count_emval_handles=function(){ye("'count_emval_handles' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"get_first_emval")||(i.get_first_emval=function(){ye("'get_first_emval' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getStringOrSymbol")||(i.getStringOrSymbol=function(){ye("'getStringOrSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"requireHandle")||(i.requireHandle=function(){ye("'requireHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emval_newers")||(i.emval_newers=function(){ye("'emval_newers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"craftEmvalAllocator")||(i.craftEmvalAllocator=function(){ye("'craftEmvalAllocator' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emval_get_global")||(i.emval_get_global=function(){ye("'emval_get_global' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emval_methodCallers")||(i.emval_methodCallers=function(){ye("'emval_methodCallers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"InternalError")||(i.InternalError=function(){ye("'InternalError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"BindingError")||(i.BindingError=function(){ye("'BindingError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UnboundTypeError")||(i.UnboundTypeError=function(){ye("'UnboundTypeError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"PureVirtualError")||(i.PureVirtualError=function(){ye("'PureVirtualError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"init_embind")||(i.init_embind=function(){ye("'init_embind' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"throwInternalError")||(i.throwInternalError=function(){ye("'throwInternalError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"throwBindingError")||(i.throwBindingError=function(){ye("'throwBindingError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"throwUnboundTypeError")||(i.throwUnboundTypeError=function(){ye("'throwUnboundTypeError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ensureOverloadTable")||(i.ensureOverloadTable=function(){ye("'ensureOverloadTable' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"exposePublicSymbol")||(i.exposePublicSymbol=function(){ye("'exposePublicSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"replacePublicSymbol")||(i.replacePublicSymbol=function(){ye("'replacePublicSymbol' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"extendError")||(i.extendError=function(){ye("'extendError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"createNamedFunction")||(i.createNamedFunction=function(){ye("'createNamedFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registeredInstances")||(i.registeredInstances=function(){ye("'registeredInstances' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getBasestPointer")||(i.getBasestPointer=function(){ye("'getBasestPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerInheritedInstance")||(i.registerInheritedInstance=function(){ye("'registerInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"unregisterInheritedInstance")||(i.unregisterInheritedInstance=function(){ye("'unregisterInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getInheritedInstance")||(i.getInheritedInstance=function(){ye("'getInheritedInstance' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getInheritedInstanceCount")||(i.getInheritedInstanceCount=function(){ye("'getInheritedInstanceCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getLiveInheritedInstances")||(i.getLiveInheritedInstances=function(){ye("'getLiveInheritedInstances' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registeredTypes")||(i.registeredTypes=function(){ye("'registeredTypes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"awaitingDependencies")||(i.awaitingDependencies=function(){ye("'awaitingDependencies' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"typeDependencies")||(i.typeDependencies=function(){ye("'typeDependencies' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registeredPointers")||(i.registeredPointers=function(){ye("'registeredPointers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerType")||(i.registerType=function(){ye("'registerType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"whenDependentTypesAreResolved")||(i.whenDependentTypesAreResolved=function(){ye("'whenDependentTypesAreResolved' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"embind_charCodes")||(i.embind_charCodes=function(){ye("'embind_charCodes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"embind_init_charCodes")||(i.embind_init_charCodes=function(){ye("'embind_init_charCodes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"readLatin1String")||(i.readLatin1String=function(){ye("'readLatin1String' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getTypeName")||(i.getTypeName=function(){ye("'getTypeName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"heap32VectorToArray")||(i.heap32VectorToArray=function(){ye("'heap32VectorToArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"requireRegisteredType")||(i.requireRegisteredType=function(){ye("'requireRegisteredType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getShiftFromSize")||(i.getShiftFromSize=function(){ye("'getShiftFromSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"integerReadValueFromPointer")||(i.integerReadValueFromPointer=function(){ye("'integerReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"enumReadValueFromPointer")||(i.enumReadValueFromPointer=function(){ye("'enumReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"floatReadValueFromPointer")||(i.floatReadValueFromPointer=function(){ye("'floatReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"simpleReadValueFromPointer")||(i.simpleReadValueFromPointer=function(){ye("'simpleReadValueFromPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"runDestructors")||(i.runDestructors=function(){ye("'runDestructors' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"new_")||(i.new_=function(){ye("'new_' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"craftInvokerFunction")||(i.craftInvokerFunction=function(){ye("'craftInvokerFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"embind__requireFunction")||(i.embind__requireFunction=function(){ye("'embind__requireFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"tupleRegistrations")||(i.tupleRegistrations=function(){ye("'tupleRegistrations' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"structRegistrations")||(i.structRegistrations=function(){ye("'structRegistrations' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"genericPointerToWireType")||(i.genericPointerToWireType=function(){ye("'genericPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"constNoSmartPtrRawPointerToWireType")||(i.constNoSmartPtrRawPointerToWireType=function(){ye("'constNoSmartPtrRawPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"nonConstNoSmartPtrRawPointerToWireType")||(i.nonConstNoSmartPtrRawPointerToWireType=function(){ye("'nonConstNoSmartPtrRawPointerToWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"init_RegisteredPointer")||(i.init_RegisteredPointer=function(){ye("'init_RegisteredPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"RegisteredPointer")||(i.RegisteredPointer=function(){ye("'RegisteredPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"RegisteredPointer_getPointee")||(i.RegisteredPointer_getPointee=function(){ye("'RegisteredPointer_getPointee' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"RegisteredPointer_destructor")||(i.RegisteredPointer_destructor=function(){ye("'RegisteredPointer_destructor' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"RegisteredPointer_deleteObject")||(i.RegisteredPointer_deleteObject=function(){ye("'RegisteredPointer_deleteObject' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"RegisteredPointer_fromWireType")||(i.RegisteredPointer_fromWireType=function(){ye("'RegisteredPointer_fromWireType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"runDestructor")||(i.runDestructor=function(){ye("'runDestructor' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"releaseClassHandle")||(i.releaseClassHandle=function(){ye("'releaseClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"finalizationGroup")||(i.finalizationGroup=function(){ye("'finalizationGroup' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"detachFinalizer_deps")||(i.detachFinalizer_deps=function(){ye("'detachFinalizer_deps' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"detachFinalizer")||(i.detachFinalizer=function(){ye("'detachFinalizer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"attachFinalizer")||(i.attachFinalizer=function(){ye("'attachFinalizer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"makeClassHandle")||(i.makeClassHandle=function(){ye("'makeClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"init_ClassHandle")||(i.init_ClassHandle=function(){ye("'init_ClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ClassHandle")||(i.ClassHandle=function(){ye("'ClassHandle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ClassHandle_isAliasOf")||(i.ClassHandle_isAliasOf=function(){ye("'ClassHandle_isAliasOf' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"throwInstanceAlreadyDeleted")||(i.throwInstanceAlreadyDeleted=function(){ye("'throwInstanceAlreadyDeleted' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ClassHandle_clone")||(i.ClassHandle_clone=function(){ye("'ClassHandle_clone' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ClassHandle_delete")||(i.ClassHandle_delete=function(){ye("'ClassHandle_delete' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"deletionQueue")||(i.deletionQueue=function(){ye("'deletionQueue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ClassHandle_isDeleted")||(i.ClassHandle_isDeleted=function(){ye("'ClassHandle_isDeleted' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ClassHandle_deleteLater")||(i.ClassHandle_deleteLater=function(){ye("'ClassHandle_deleteLater' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"flushPendingDeletes")||(i.flushPendingDeletes=function(){ye("'flushPendingDeletes' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"delayFunction")||(i.delayFunction=function(){ye("'delayFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setDelayFunction")||(i.setDelayFunction=function(){ye("'setDelayFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"RegisteredClass")||(i.RegisteredClass=function(){ye("'RegisteredClass' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"shallowCopyInternalPointer")||(i.shallowCopyInternalPointer=function(){ye("'shallowCopyInternalPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"downcastPointer")||(i.downcastPointer=function(){ye("'downcastPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"upcastPointer")||(i.upcastPointer=function(){ye("'upcastPointer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"validateThis")||(i.validateThis=function(){ye("'validateThis' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"char_0")||(i.char_0=function(){ye("'char_0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"char_9")||(i.char_9=function(){ye("'char_9' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"makeLegalFunctionName")||(i.makeLegalFunctionName=function(){ye("'makeLegalFunctionName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"emscriptenWebGLGetIndexed")||(i.emscriptenWebGLGetIndexed=function(){ye("'emscriptenWebGLGetIndexed' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"warnOnce")||(i.warnOnce=function(){ye("'warnOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackSave")||(i.stackSave=function(){ye("'stackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackRestore")||(i.stackRestore=function(){ye("'stackRestore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackAlloc")||(i.stackAlloc=function(){ye("'stackAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"AsciiToString")||(i.AsciiToString=function(){ye("'AsciiToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToAscii")||(i.stringToAscii=function(){ye("'stringToAscii' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UTF16ToString")||(i.UTF16ToString=function(){ye("'UTF16ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToUTF16")||(i.stringToUTF16=function(){ye("'stringToUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"lengthBytesUTF16")||(i.lengthBytesUTF16=function(){ye("'lengthBytesUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UTF32ToString")||(i.UTF32ToString=function(){ye("'UTF32ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToUTF32")||(i.stringToUTF32=function(){ye("'stringToUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"lengthBytesUTF32")||(i.lengthBytesUTF32=function(){ye("'lengthBytesUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"allocateUTF8")||(i.allocateUTF8=function(){ye("'allocateUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"allocateUTF8OnStack")||(i.allocateUTF8OnStack=function(){ye("'allocateUTF8OnStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),i.writeStackCookie=ne,i.checkStackCookie=oe,Object.getOwnPropertyDescriptor(i,"ALLOC_NORMAL")||Object.defineProperty(i,"ALLOC_NORMAL",{configurable:!0,get:function(){ye("'ALLOC_NORMAL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(i,"ALLOC_STACK")||Object.defineProperty(i,"ALLOC_STACK",{configurable:!0,get:function(){ye("'ALLOC_STACK' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),me=function e(){Jr||ui(),Jr||(me=e)},i.run=ui,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return ui(),e.ready}),_=(()=>{var e,t="undefined"!=typeof document?null==(e=document.currentScript)?void 0:e.src:void 0;return function(e={}){var r,i,n=Object.assign({},e),o=new Promise(((e,t)=>{r=e,i=t})),a=Object.assign({},n),s="";"undefined"!=typeof document&&document.currentScript&&(s=document.currentScript.src),t&&(s=t),s=s.startsWith("blob:")?"":s.substr(0,s.replace(/[?#].*/,"").lastIndexOf("/")+1);var c,A=n.print||console.log.bind(console),l=n.printErr||console.error.bind(console);Object.assign(n,a),a=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&n.quit,n.wasmBinary&&(c=n.wasmBinary);var u,d,h,g,p,f,m,E,I,_=!1,C=[],y=[],T=[],v=0,w=null,S=null;function b(e){var t;null==(t=n.onAbort)||t.call(n,e),l(e="Aborted("+e+")"),_=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw i(r),r}var R,D="data:application/octet-stream;base64,",B=e=>e.startsWith(D);function O(e){return Promise.resolve().then((()=>function(e){if(e==R&&c)return new Uint8Array(c);var t=function(e){if(B(e))return function(e){for(var t=atob(e),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}(e.slice(D.length))}(e);if(t)return t;throw"both async and sync fetching of the wasm failed"}(e)))}var Q=e=>{for(;e.length>0;)e.shift()(n)};n.noExitRuntime;class k{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){m[this.ptr+4>>2]=e}get_type(){return m[this.ptr+4>>2]}set_destructor(e){m[this.ptr+8>>2]=e}get_destructor(){return m[this.ptr+8>>2]}set_caught(e){e=e?1:0,d[this.ptr+12]=e}get_caught(){return 0!=d[this.ptr+12]}set_rethrown(e){e=e?1:0,d[this.ptr+13]=e}get_rethrown(){return 0!=d[this.ptr+13]}init(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)}set_adjusted_ptr(e){m[this.ptr+16>>2]=e}get_adjusted_ptr(){return m[this.ptr+16>>2]}get_exception_ptr(){if(nt(this.get_type()))return m[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var M,P,N,L=e=>{for(var t="",r=e;h[r];)t+=M[h[r++]];return t},x={},U={},F={},V=e=>{throw new P(e)},G=e=>{throw new N(e)},j=(e,t,r)=>{function i(t){var i=r(t);i.length!==e.length&&G("Mismatched type converter count");for(var n=0;n<e.length;++n)H(e[n],i[n])}e.forEach((function(e){F[e]=t}));var n=new Array(t.length),o=[],a=0;t.forEach(((e,t)=>{U.hasOwnProperty(e)?n[t]=U[e]:(o.push(e),x.hasOwnProperty(e)||(x[e]=[]),x[e].push((()=>{n[t]=U[e],++a===o.length&&i(n)})))})),0===o.length&&i(n)};function H(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(e,t,r={}){var i=t.name;if(e||V(`type "${i}" must have a positive integer typeid pointer`),U.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;V(`Cannot register type '${i}' twice`)}if(U[e]=t,delete F[e],x.hasOwnProperty(e)){var n=x[e];delete x[e],n.forEach((e=>e()))}}(e,t,r)}var Y,W=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),J=e=>{V(e.$$.ptrType.registeredClass.name+" instance already deleted")},X=!1,K=e=>{},z=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)},q=(e,t,r)=>{if(t===r)return e;if(void 0===r.baseClass)return null;var i=q(e,t,r.baseClass);return null===i?null:r.downcast(i)},Z={},$=[],ee=()=>{for(;$.length;){var e=$.pop();e.$$.deleteScheduled=!1,e.delete()}},te={},re=(e,t)=>((!t.ptrType||!t.ptr)&&G("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&G("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ie(Object.create(e,{$$:{value:t,writable:!0}})));var ie=e=>"undefined"==typeof FinalizationRegistry?(ie=e=>e,e):(X=new FinalizationRegistry((e=>{z(e.$$)})),K=e=>X.unregister(e),(ie=e=>{var t=e.$$;if(t.smartPtr){var r={$$:t};X.register(e,r,e)}return e})(e));function ne(){}var oe=(e,t)=>Object.defineProperty(t,"name",{value:e}),ae=(e,t,r)=>{if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||V(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}};function se(e,t,r,i,n,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=i,this.baseClass=n,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}var ce=(e,t,r)=>{for(;t!==r;)t.upcast||V(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Ae(e,t){if(null===t)return this.isReference&&V(`null is not a valid ${this.name}`),0;t.$$||V(`Cannot pass "${Qe(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass;return ce(t.$$.ptr,r,this.registeredClass)}function le(e,t){var r;if(null===t)return this.isReference&&V(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&V(`Cannot pass "${Qe(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&V(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var i=t.$$.ptrType.registeredClass;if(r=ce(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&V("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:V(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var n=t.clone();r=this.rawShare(r,Be.toHandle((()=>n.delete()))),null!==e&&e.push(this.rawDestructor,r)}break;default:V("Unsupporting sharing policy")}return r}function ue(e,t){if(null===t)return this.isReference&&V(`null is not a valid ${this.name}`),0;t.$$||V(`Cannot pass "${Qe(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&V(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass;return ce(t.$$.ptr,r,this.registeredClass)}function de(e){return this.fromWireType(m[e>>2])}function he(e,t,r,i,n,o,a,s,c,A,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=i,this.isSmartPointer=n,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=A,this.rawDestructor=l,n||void 0!==t.baseClass?this.toWireType=le:i?(this.toWireType=Ae,this.destructorFunction=null):(this.toWireType=ue,this.destructorFunction=null)}var ge,pe,fe=[],me=e=>{var t=fe[e];return t||(e>=fe.length&&(fe.length=e+1),fe[e]=t=ge.get(e)),t},Ee=(e,t)=>{var r=(e=L(e)).includes("j")?((e,t)=>(...r)=>((e,t,r=[])=>e.includes("j")?((e,t,r)=>(e=e.replace(/p/g,"i"),(0,n["dynCall_"+e])(t,...r)))(e,t,r):me(t)(...r))(e,t,r))(e,t):me(t);return"function"!=typeof r&&V(`unknown function pointer with signature ${e}: ${t}`),r},Ie=e=>{var t=rt(e),r=L(t);return it(t),r},_e=(e,t)=>{var r=[],i={};throw t.forEach((function e(t){if(!i[t]&&!U[t]){if(F[t])return void F[t].forEach(e);r.push(t),i[t]=!0}})),new pe(`${e}: `+r.map(Ie).join([", "]))},Ce=(e,t)=>{for(var r=[],i=0;i<e;i++)r.push(m[t+4*i>>2]);return r},ye=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function Te(e,t,r,i,n,o){var a=t.length;a<2&&V("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=null!==t[1]&&null!==r,c=function(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}(t),A="void"!==t[0].name,l=a-2,u=new Array(l),d=[],h=[];return oe(e,(function(...r){var o;r.length!==l&&V(`function ${e} called with ${r.length} arguments, expected ${l}`),h.length=0,d.length=s?2:1,d[0]=n,s&&(o=t[1].toWireType(h,this),d[1]=o);for(var a=0;a<l;++a)u[a]=t[a+2].toWireType(h,r[a]),d.push(u[a]);return function(e){if(c)ye(h);else for(var r=s?1:2;r<t.length;r++){var i=1===r?o:u[r-2];null!==t[r].destructorFunction&&t[r].destructorFunction(i)}if(A)return t[0].fromWireType(e)}(i(...d))}))}var ve,we,Se=(e,t,r)=>(e instanceof Object||V(`${r} with invalid "this": ${e}`),e instanceof t.registeredClass.constructor||V(`${r} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||V(`cannot call emscripten binding method ${r} on deleted object`),ce(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)),be=[],Re=[],De=e=>{e>9&&0===--Re[e+1]&&(Re[e]=void 0,be.push(e))},Be={toValue:e=>(e||V("Cannot use deleted val. handle = "+e),Re[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{let t=be.pop()||Re.length;return Re[t]=e,Re[t+1]=1,t}}}},Oe={name:"emscripten::val",fromWireType:e=>{var t=Be.toValue(e);return De(e),t},toWireType:(e,t)=>Be.toHandle(t),argPackAdvance:8,readValueFromPointer:de,destructorFunction:null},Qe=e=>{if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e},ke=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType(E[e>>2])};case 8:return function(e){return this.fromWireType(I[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Me=(e,t,r)=>{switch(t){case 1:return r?e=>d[e]:e=>h[e];case 2:return r?e=>g[e>>1]:e=>p[e>>1];case 4:return r?e=>f[e>>2]:e=>m[e>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Pe="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,Ne=(e,t,r)=>{for(var i=t+r,n=t;e[n]&&!(n>=i);)++n;if(n-t>16&&e.buffer&&Pe)return Pe.decode(e.subarray(t,n));for(var o="";t<n;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var A=a-65536;o+=String.fromCharCode(55296|A>>10,56320|1023&A)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o},Le=(e,t)=>e?Ne(h,e,t):"",xe="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,Ue=(e,t)=>{for(var r=e,i=r>>1,n=i+t/2;!(i>=n)&&p[i];)++i;if((r=i<<1)-e>32&&xe)return xe.decode(h.subarray(e,r));for(var o="",a=0;!(a>=t/2);++a){var s=g[e+2*a>>1];if(0==s)break;o+=String.fromCharCode(s)}return o},Fe=(e,t,r)=>{if(null!=r||(r=2147483647),r<2)return 0;for(var i=t,n=(r-=2)<2*e.length?r/2:e.length,o=0;o<n;++o){var a=e.charCodeAt(o);g[t>>1]=a,t+=2}return g[t>>1]=0,t-i},Ve=e=>2*e.length,Ge=(e,t)=>{for(var r=0,i="";!(r>=t/4);){var n=f[e+4*r>>2];if(0==n)break;if(++r,n>=65536){var o=n-65536;i+=String.fromCharCode(55296|o>>10,56320|1023&o)}else i+=String.fromCharCode(n)}return i},je=(e,t,r)=>{if(null!=r||(r=2147483647),r<4)return 0;for(var i=t,n=i+r-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),f[t>>2]=a,(t+=4)+4>n)break}return f[t>>2]=0,t-i},He=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&++r,t+=4}return t},Ye=(e,t)=>{var r=U[e];return void 0===r&&V(`${t} has unknown type ${Ie(e)}`),r},We=(e,t,r)=>{var i=[],n=e.toWireType(i,r);return i.length&&(m[t>>2]=Be.toHandle(i)),n},Je={},Xe=[],Ke=Reflect.construct,ze=[null,[],[]],qe=(e,t)=>{var r=ze[e];0===t||10===t?((1===e?A:l)(Ne(r,0)),r.length=0):r.push(t)};(()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);M=e})(),P=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},N=n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Object.assign(ne.prototype,{isAliasOf(e){if(!(this instanceof ne&&e instanceof ne))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var i=e.$$.ptrType.registeredClass,n=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;i.baseClass;)n=i.upcast(n),i=i.baseClass;return t===i&&r===n},clone(){if(this.$$.ptr||J(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=ie(Object.create(Object.getPrototypeOf(this),{$$:{value:W(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||J(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&V("Object already scheduled for deletion"),K(this),z(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||J(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&V("Object already scheduled for deletion"),$.push(this),1===$.length&&Y&&Y(ee),this.$$.deleteScheduled=!0,this}}),n.getInheritedInstanceCount=()=>Object.keys(te).length,n.getLiveInheritedInstances=()=>{var e=[];for(var t in te)te.hasOwnProperty(t)&&e.push(te[t]);return e},n.flushPendingDeletes=ee,n.setDelayFunction=e=>{Y=e,$.length&&Y&&Y(ee)},Object.assign(he.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;null==(t=this.rawDestructor)||t.call(this,e)},argPackAdvance:8,readValueFromPointer:de,fromWireType:function(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=((e,t)=>(t=((e,t)=>{for(void 0===t&&V("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t})(e,t),te[t]))(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var i=r.clone();return this.destructor(e),i}function n(){return this.isSmartPointer?re(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):re(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(t),s=Z[a];if(!s)return n.call(this);o=this.isConst?s.constPointerType:s.pointerType;var c=q(t,this.registeredClass,o.registeredClass);return null===c?n.call(this):this.isSmartPointer?re(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:e}):re(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})}}),pe=n.UnboundTypeError=(ve=Error,(we=oe("UnboundTypeError",(function(e){this.name="UnboundTypeError",this.message=e;var t=new Error(e).stack;void 0!==t&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}))).prototype=Object.create(ve.prototype),we.prototype.constructor=we,we.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},we),Re.push(0,1,void 0,1,null,1,!0,1,!1,1),n.count_emval_handles=()=>Re.length/2-5-be.length;var Ze,$e={w:(e,t,r)=>{throw new k(e).init(t,r),e},q:()=>{b("")},p:(e,t,r,i,n)=>{},u:(e,t,r,i)=>{H(e,{name:t=L(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){return this.fromWireType(h[e])},destructorFunction:null})},y:(e,t,r,i,o,a,s,c,A,l,u,d,h)=>{u=L(u),a=Ee(o,a),c&&(c=Ee(s,c)),l&&(l=Ee(A,l)),h=Ee(d,h);var g=(e=>{if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(u);((e,t,r)=>{n.hasOwnProperty(e)?(V(`Cannot register public name '${e}' twice`),ae(n,e,e),n.hasOwnProperty(r)&&V(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):n[e]=t})(g,(function(){_e(`Cannot construct ${u} due to unbound types`,[i])})),j([e,t,r],i?[i]:[],(t=>{var r,o,s;t=t[0],s=i?(o=t.registeredClass).instancePrototype:ne.prototype;var A=oe(u,(function(...e){if(Object.getPrototypeOf(this)!==d)throw new P("Use 'new' to construct "+u);if(void 0===p.constructor_body)throw new P(u+" has no accessible constructor");var t=p.constructor_body[e.length];if(void 0===t)throw new P(`Tried to invoke ctor of ${u} with invalid number of parameters (${e.length}) - expected (${Object.keys(p.constructor_body).toString()}) parameters instead!`);return t.apply(this,e)})),d=Object.create(s,{constructor:{value:A}});A.prototype=d;var p=new se(u,A,d,h,o,a,c,l);p.baseClass&&(null!=(r=p.baseClass).__derivedClasses||(r.__derivedClasses=[]),p.baseClass.__derivedClasses.push(p));var f=new he(u,p,!0,!1,!1),m=new he(u+"*",p,!1,!1,!1),E=new he(u+" const*",p,!1,!0,!1);return Z[e]={pointerType:m,constPointerType:E},((e,t,r)=>{n.hasOwnProperty(e)||G("Replacing nonexistent public symbol"),n[e].overloadTable,n[e]=t,n[e].argCount=r})(g,A),[f,m,E]}))},x:(e,t,r,i,n,o)=>{var a=Ce(t,r);n=Ee(i,n),j([],[e],(e=>{var r=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new P(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=()=>{_e(`Cannot construct ${e.name} due to unbound types`,a)},j([],a,(i=>(i.splice(1,0,null),e.registeredClass.constructor_body[t-1]=Te(r,i,null,n,o),[]))),[]}))},h:(e,t,r,i,n,o,a,s,c)=>{var A=Ce(r,i);t=(e=>{let t=(e=e.trim()).indexOf("(");return-1!==t?e.substr(0,t):e})(t=L(t)),o=Ee(n,o),j([],[e],(e=>{var i=`${(e=e[0]).name}.${t}`;function n(){_e(`Cannot call ${i} due to unbound types`,A)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,l=c[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===r-2?(n.argCount=r-2,n.className=e.name,c[t]=n):(ae(c,t,i),c[t].overloadTable[r-2]=n),j([],A,(n=>{var s=Te(i,n,e,o,a);return void 0===c[t].overloadTable?(s.argCount=r-2,c[t]=s):c[t].overloadTable[r-2]=s,[]})),[]}))},k:(e,t,r,i,n,o,a,s,c,A)=>{t=L(t),n=Ee(i,n),j([],[e],(e=>{var i=`${(e=e[0]).name}.${t}`,l={get(){_e(`Cannot access ${i} due to unbound types`,[r,a])},enumerable:!0,configurable:!0};return l.set=c?()=>_e(`Cannot access ${i} due to unbound types`,[r,a]):e=>V(i+" is a read-only property"),Object.defineProperty(e.registeredClass.instancePrototype,t,l),j([],c?[r,a]:[r],(r=>{var a=r[0],l={get(){var t=Se(this,e,i+" getter");return a.fromWireType(n(o,t))},enumerable:!0};if(c){c=Ee(s,c);var u=r[1];l.set=function(t){var r=Se(this,e,i+" setter"),n=[];c(A,r,u.toWireType(n,t)),ye(n)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,l),[]})),[]}))},t:e=>H(e,Oe),o:(e,t,r)=>{H(e,{name:t=L(t),fromWireType:e=>e,toWireType:(e,t)=>t,argPackAdvance:8,readValueFromPointer:ke(t,r),destructorFunction:null})},g:(e,t,r,i,n)=>{t=L(t),-1===n&&(n=4294967295);var o=e=>e;if(0===i){var a=32-8*r;o=e=>e<<a>>>a}var s=t.includes("unsigned");H(e,{name:t,fromWireType:o,toWireType:s?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:Me(t,r,0!==i),destructorFunction:null})},a:(e,t,r)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function n(e){var t=m[e>>2],r=m[e+4>>2];return new i(d.buffer,r,t)}H(e,{name:r=L(r),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{ignoreDuplicateRegistrations:!0})},n:(e,t)=>{var r="std::string"===(t=L(t));H(e,{name:t,fromWireType(e){var t,i=m[e>>2],n=e+4;if(r)for(var o=n,a=0;a<=i;++a){var s=n+a;if(a==i||0==h[s]){var c=Le(o,s-o);void 0===t?t=c:(t+="\0",t+=c),o=s+1}}else{var A=new Array(i);for(a=0;a<i;++a)A[a]=String.fromCharCode(h[n+a]);t=A.join("")}return it(e),t},toWireType(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i,n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||V("Cannot pass non-string to std::string"),i=r&&n?(e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++r):t+=3}return t})(t):t.length;var o=tt(4+i+1),a=o+4;if(m[o>>2]=i,r&&n)((e,t,r)=>{((e,t,r,i)=>{if(!(i>0))return 0;for(var n=r+i-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(r>=n)break;t[r++]=a}else if(a<=2047){if(r+1>=n)break;t[r++]=192|a>>6,t[r++]=128|63&a}else if(a<=65535){if(r+2>=n)break;t[r++]=224|a>>12,t[r++]=128|a>>6&63,t[r++]=128|63&a}else{if(r+3>=n)break;t[r++]=240|a>>18,t[r++]=128|a>>12&63,t[r++]=128|a>>6&63,t[r++]=128|63&a}}t[r]=0})(e,h,t,r)})(t,a,i+1);else if(n)for(var s=0;s<i;++s){var c=t.charCodeAt(s);c>255&&(it(a),V("String has UTF-16 code units that do not fit in 8 bits")),h[a+s]=c}else for(s=0;s<i;++s)h[a+s]=t[s];return null!==e&&e.push(it,o),o},argPackAdvance:8,readValueFromPointer:de,destructorFunction(e){it(e)}})},l:(e,t,r)=>{var i,n,o,a;r=L(r),2===t?(i=Ue,n=Fe,a=Ve,o=e=>p[e>>1]):4===t&&(i=Ge,n=je,a=He,o=e=>m[e>>2]),H(e,{name:r,fromWireType:e=>{for(var r,n=m[e>>2],a=e+4,s=0;s<=n;++s){var c=e+4+s*t;if(s==n||0==o(c)){var A=i(a,c-a);void 0===r?r=A:(r+="\0",r+=A),a=c+t}}return it(e),r},toWireType:(e,i)=>{"string"!=typeof i&&V(`Cannot pass non-string to C++ string type ${r}`);var o=a(i),s=tt(4+o+t);return m[s>>2]=o/t,n(i,s+4,o+t),null!==e&&e.push(it,s),s},argPackAdvance:8,readValueFromPointer:de,destructorFunction(e){it(e)}})},v:(e,t)=>{H(e,{isVoid:!0,name:t=L(t),argPackAdvance:0,fromWireType:()=>{},toWireType:(e,t)=>{}})},s:(e,t,r)=>h.copyWithin(e,t,t+r),j:(e,t,r)=>(e=Be.toValue(e),t=Ye(t,"emval::as"),We(t,r,e)),e:(e,t,r,i,n)=>(e=Xe[e],t=Be.toValue(t),r=(e=>{var t=Je[e];return void 0===t?L(e):t})(r),e(t,t[r],i,n)),c:De,f:(e,t,r)=>{var i=((e,t)=>{for(var r=new Array(e),i=0;i<e;++i)r[i]=Ye(m[t+4*i>>2],"parameter "+i);return r})(e,t),n=i.shift();e--;var o=new Array(e),a=`methodCaller<(${i.map((e=>e.name)).join(", ")}) => ${n.name}>`;return(e=>{var t=Xe.length;return Xe.push(e),t})(oe(a,((t,a,s,c)=>{for(var A=0,l=0;l<e;++l)o[l]=i[l].readValueFromPointer(c+A),A+=i[l].argPackAdvance;var u=1===r?Ke(a,o):a.apply(t,o);return We(n,s,u)})))},d:e=>{e>9&&(Re[e+1]+=1)},b:e=>{var t=Be.toValue(e);ye(t),De(e)},i:(e,t)=>{var r=(e=Ye(e,"_emval_take_value")).readValueFromPointer(t);return Be.toHandle(r)},r:e=>{h.length,b("OOM")},m:(e,t,r,i)=>{for(var n=0,o=0;o<r;o++){var a=m[t>>2],s=m[t+4>>2];t+=8;for(var c=0;c<s;c++)qe(e,h[a+c]);n+=s}return m[i>>2]=n,0}},et=function(){var e={a:$e};function t(e,t){return et=e.exports,u=et.z,function(){var e=u.buffer;n.HEAP8=d=new Int8Array(e),n.HEAP16=g=new Int16Array(e),n.HEAPU8=h=new Uint8Array(e),n.HEAPU16=p=new Uint16Array(e),n.HEAP32=f=new Int32Array(e),n.HEAPU32=m=new Uint32Array(e),n.HEAPF32=E=new Float32Array(e),n.HEAPF64=I=new Float64Array(e)}(),ge=et.C,function(e){y.unshift(e)}(et.A),function(){var e;if(v--,null==(e=n.monitorRunDependencies)||e.call(n,v),0==v&&(null!==w&&(clearInterval(w),w=null),S)){var t=S;S=null,t()}}(),et}if(function(){var e;v++,null==(e=n.monitorRunDependencies)||e.call(n,v)}(),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(e){l(`Module.instantiateWasm callback failed with error: ${e}`),i(e)}return R||(R="data:application/octet-stream;base64,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Ay0AASIARQ0BIAJBAWohAiADQQFqIQMgACABRg0ACwsgACABRgtrAQF/IwBBgAJrIgUkAAJAIAIgA0wNACAEQYDABHENACAFIAEgAiADayIDQYACIANBgAJJIgEbECQaIAFFBEADQCAAIAVBgAIQHSADQYACayIDQf8BSw0ACwsgACAFIAMQHQsgBUGAAmokAAvlAwEFfyMAQRBrIgMkACADIAAoAgAiBEEIaygCACICNgIMIAMgACACajYCBCADIARBBGsoAgA2AgggAygCCCIEIAFBABAeIQIgAygCBCEFAkAgAgRAIAMoAgwhACMAQUBqIgEkACABQUBrJABBACAFIAAbIQIMAQsjAEFAaiICJAAgACAFTgRAIAJCADcCHCACQgA3AiQgAkIANwIsIAJCADcCFCACQQA2AhAgAiABNgIMIAIgBDYCBCACQQA2AjwgAkKBgICAgICAgAE3AjQgAiAANgIIIAQgAkEEaiAFIAVBAUEAIAQoAgAoAhQRCQAgAEEAIAIoAhwbIQYLIAJBQGskACAGIgINACMAQUBqIgIkACACQQA2AhAgAkGsxgA2AgwgAiAANgIIIAIgATYCBEEAIQAgAkEUakEAQScQJBogAkEANgI8IAJBAToAOyAEIAJBBGogBUEBQQAgBCgCACgCGBEIAAJAAkACQCACKAIoDgIAAQILIAIoAhhBACACKAIkQQFGG0EAIAIoAiBBAUYbQQAgAigCLEEBRhshAAwBCyACKAIcQQFHBEAgAigCLA0BIAIoAiBBAUcNASACKAIkQQFHDQELIAIoAhQhAAsgAkFAayQAIAAhAgsgA0EQaiQAIAILtAEBBX8jAEEQayIGJAAgBkEEaiICEEEjAEEQayIFJAACfyACLQALQQd2BEAgAigCBAwBCyACLQALQf8AcQshBANAAkACfyACLQALQQd2BEAgAigCAAwBCyACCyEDIAUgATkDACACAn8gAyAEQQFqIAUQRyIDQQBOBEAgAyAETQ0CIAMMAQsgBEEBdEEBcgsiBBAtDAELCyACIAMQLSAAIAIQQCAFQRBqJAAgAhBEIAZBEGokAAuABAEDfyACQYAETwRAIAAgASACEBIgAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCAAQQNxRQRAIAAhAgwBCyACRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAkEDcUUNASACIANJDQALCwJAIANBfHEiBEHAAEkNACACIARBQGoiBUsNAANAIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDCACIAEoAhA2AhAgAiABKAIUNgIUIAIgASgCGDYCGCACIAEoAhw2AhwgAiABKAIgNgIgIAIgASgCJDYCJCACIAEoAig2AiggAiABKAIsNgIsIAIgASgCMDYCMCACIAEoAjQ2AjQgAiABKAI4NgI4IAIgASgCPDYCPCABQUBrIQEgAkFAayICIAVNDQALCyACIARPDQEDQCACIAEoAgA2AgAgAUEEaiEBIAJBBGoiAiAESQ0ACwwBCyADQQRJBEAgACECDAELIAAgA0EEayIESwRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAiABLQABOgABIAIgAS0AAjoAAiACIAEtAAM6AAMgAUEEaiEBIAJBBGoiAiAETQ0ACwsgAiADSQRAA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0cNAAsLIAALCwAgASACIAAQRRoL8gICAn8BfgJAIAJFDQAgACABOgAAIAAgAmoiA0EBayABOgAAIAJBA0kNACAAIAE6AAIgACABOgABIANBA2sgAToAACADQQJrIAE6AAAgAkEHSQ0AIAAgAToAAyADQQRrIAE6AAAgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBBGsgATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQQhrIAE2AgAgAkEMayABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkEQayABNgIAIAJBFGsgATYCACACQRhrIAE2AgAgAkEcayABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa1CgYCAgBB+IQUgAyAEaiEBA0AgASAFNwMYIAEgBTcDECABIAU3AwggASAFNwMAIAFBIGohASACQSBrIgJBH0sNAAsLIAALEgAgAUEBdEHAxABqQQIgABBFC60CAQd/An8gARAqIQMjAEEQayIGJAACfyAALQALQQd2BEAgACgCBAwBCyAALQALQf8AcQsiBEEATwRAAkAgAyAALQALQQd2BH8gACgCCEH/////B3FBAWsFQQoLIgIgBGtNBEAgA0UNAQJ/IAAtAAtBB3YEQCAAKAIADAELIAALIgUgBAR/IwBBEGsiAiQAIAIgBCAFajYCCCACIAU2AgwgAiABNgIEIAIoAgQiCCACKAIMTwRAIAIoAgggCEshBwsgAkEQaiQAIAMgBWogBSAEEDYgASADQQAgBxtqBSABCyADEDYgACADIARqIgEQMSAGQQA6AA8gASAFaiAGLQAPOgAADAELIAAgAiADIARqIAJrIARBACADIAEQRgsgBkEQaiQAIAAMAQsQJwALCwUAEGgAC1IBAn9BqM4AKAIAIgEgAEEHakF4cSICaiEAAkAgAkEAIAAgAU0bRQRAIAA/AEEQdE0NASAAEBENAQtBuNgAQTA2AgBBfw8LQajOACAANgIAIAELiAECAX4FfwJAIABCgICAgBBUBEAgACECDAELA0AgAUEBayIBIAAgAEIKgCICQgp+fadBMHI6AAAgAEL/////nwFWIQYgAiEAIAYNAAsLIAJCAFIEQCACpyEDA0AgAUEBayIBIAMgA0EKbiIEQQpsa0EwcjoAACADQQlLIQcgBCEDIAcNAAsLIAELfQEDfwJAAkAgACIBQQNxRQ0AIAEtAABFBEBBAA8LA0AgAUEBaiIBQQNxRQ0BIAEtAAANAAsMAQsDQCABIgJBBGohAUGAgoQIIAIoAgAiA2sgA3JBgIGChHhxQYCBgoR4Rg0ACwNAIAIiAUEBaiECIAEtAAANAAsLIAEgAGsLBgAgABAZC84oAQx/IwBBEGsiCiQAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEG82AAoAgAiBEEQIABBC2pB+ANxIABBC0kbIgZBA3YiAHYiAUEDcQRAAkAgAUF/c0EBcSAAaiICQQN0IgFB5NgAaiIAIAFB7NgAaigCACIBKAIIIgVGBEBBvNgAIARBfiACd3E2AgAMAQsgBSAANgIMIAAgBTYCCAsgAUEIaiEAIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDAsLIAZBxNgAKAIAIghNDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIBQQN0IgBB5NgAaiICIABB7NgAaigCACIAKAIIIgVGBEBBvNgAIARBfiABd3EiBDYCAAwBCyAFIAI2AgwgAiAFNgIICyAAIAZBA3I2AgQgACAGaiIHIAFBA3QiASAGayIFQQFyNgIEIAAgAWogBTYCACAIBEAgCEF4cUHk2ABqIQFB0NgAKAIAIQICfyAEQQEgCEEDdnQiA3FFBEBBvNgAIAMgBHI2AgAgAQwBCyABKAIICyEDIAEgAjYCCCADIAI2AgwgAiABNgIMIAIgAzYCCAsgAEEIaiEAQdDYACAHNgIAQcTYACAFNgIADAsLQcDYACgCACILRQ0BIAtoQQJ0QezaAGooAgAiAigCBEF4cSAGayEDIAIhAQNAAkAgASgCECIARQRAIAEoAhQiAEUNAQsgACgCBEF4cSAGayIBIAMgASADSSIBGyEDIAAgAiABGyECIAAhAQwBCwsgAigCGCEJIAIgAigCDCIARwRAIAIoAggiASAANgIMIAAgATYCCAwKCyACKAIUIgEEfyACQRRqBSACKAIQIgFFDQMgAkEQagshBQNAIAUhByABIgBBFGohBSAAKAIUIgENACAAQRBqIQUgACgCECIBDQALIAdBADYCAAwJC0F/IQYgAEG/f0sNACAAQQtqIgBBeHEhBkHA2AAoAgAiB0UNAEEAIAZrIQMCQAJAAkACf0EAIAZBgAJJDQAaQR8gBkH///8HSw0AGiAGQSYgAEEIdmciAGt2QQFxIABBAXRrQT5qCyIIQQJ0QezaAGooAgAiAUUEQEEAIQAMAQtBACEAIAZBGSAIQQF2a0EAIAhBH0cbdCECA0ACQCABKAIEQXhxIAZrIgQgA08NACABIQUgBCIDDQBBACEDIAEhAAwDCyAAIAEoAhQiBCAEIAEgAkEddkEEcWooAhAiAUYbIAAgBBshACACQQF0IQIgAQ0ACwsgACAFckUEQEEAIQVBAiAIdCIAQQAgAGtyIAdxIgBFDQMgAGhBAnRB7NoAaigCACEACyAARQ0BCwNAIAAoAgRBeHEgBmsiAiADSSEBIAIgAyABGyEDIAAgBSABGyEFIAAoAhAiAQR/IAEFIAAoAhQLIgANAAsLIAVFDQAgA0HE2AAoAgAgBmtPDQAgBSgCGCEIIAUgBSgCDCIARwRAIAUoAggiASAANgIMIAAgATYCCAwICyAFKAIUIgEEfyAFQRRqBSAFKAIQIgFFDQMgBUEQagshAgNAIAIhBCABIgBBFGohAiAAKAIUIgENACAAQRBqIQIgACgCECIBDQALIARBADYCAAwHCyAGQcTYACgCACIFTQRAQdDYACgCACEAAkAgBSAGayIBQRBPBEAgACAGaiICIAFBAXI2AgQgACAFaiABNgIAIAAgBkEDcjYCBAwBCyAAIAVBA3I2AgQgACAFaiIBIAEoAgRBAXI2AgRBACECQQAhAQtBxNgAIAE2AgBB0NgAIAI2AgAgAEEIaiEADAkLIAZByNgAKAIAIgJJBEBByNgAIAIgBmsiATYCAEHU2ABB1NgAKAIAIgAgBmoiAjYCACACIAFBAXI2AgQgACAGQQNyNgIEIABBCGohAAwJC0EAIQAgBkEvaiIDAn9BlNwAKAIABEBBnNwAKAIADAELQaDcAEJ/NwIAQZjcAEKAoICAgIAENwIAQZTcACAKQQxqQXBxQdiq1aoFczYCAEGo3ABBADYCAEH42wBBADYCAEGAIAsiAWoiBEEAIAFrIgdxIgEgBk0NCEH02wAoAgAiBQRAQezbACgCACIIIAFqIgkgCE0NCSAFIAlJDQkLAkBB+NsALQAAQQRxRQRAAkACQAJAAkBB1NgAKAIAIgUEQEH82wAhAANAIAUgACgCACIITwRAIAggACgCBGogBUsNAwsgACgCCCIADQALC0EAECgiAkF/Rg0DIAEhBEGY3AAoAgAiAEEBayIFIAJxBEAgASACayACIAVqQQAgAGtxaiEECyAEIAZNDQNB9NsAKAIAIgAEQEHs2wAoAgAiBSAEaiIHIAVNDQQgACAHSQ0ECyAEECgiACACRw0BDAULIAQgAmsgB3EiBBAoIgIgACgCACAAKAIEakYNASACIQALIABBf0YNASAGQTBqIARNBEAgACECDAQLQZzcACgCACICIAMgBGtqQQAgAmtxIgIQKEF/Rg0BIAIgBGohBCAAIQIMAwsgAkF/Rw0CC0H42wBB+NsAKAIAQQRyNgIACyABECghAkEAECghACACQX9GDQUgAEF/Rg0FIAAgAk0NBSAAIAJrIgQgBkEoak0NBQtB7NsAQezbACgCACAEaiIANgIAQfDbACgCACAASQRAQfDbACAANgIACwJAQdTYACgCACIDBEBB/NsAIQADQCACIAAoAgAiASAAKAIEIgVqRg0CIAAoAggiAA0ACwwEC0HM2AAoAgAiAEEAIAAgAk0bRQRAQczYACACNgIAC0EAIQBBgNwAIAQ2AgBB/NsAIAI2AgBB3NgAQX82AgBB4NgAQZTcACgCADYCAEGI3ABBADYCAANAIABBA3QiAUHs2ABqIAFB5NgAaiIFNgIAIAFB8NgAaiAFNgIAIABBAWoiAEEgRw0AC0HI2AAgBEEoayIAQXggAmtBB3EiAWsiBTYCAEHU2AAgASACaiIBNgIAIAEgBUEBcjYCBCAAIAJqQSg2AgRB2NgAQaTcACgCADYCAAwECyACIANNDQIgASADSw0CIAAoAgxBCHENAiAAIAQgBWo2AgRB1NgAIANBeCADa0EHcSIAaiIBNgIAQcjYAEHI2AAoAgAgBGoiAiAAayIANgIAIAEgAEEBcjYCBCACIANqQSg2AgRB2NgAQaTcACgCADYCAAwDC0EAIQAMBgtBACEADAQLQczYACgCACACSwRAQczYACACNgIACyACIARqIQVB/NsAIQACQANAIAUgACgCACIBRwRAIAAoAggiAA0BDAILCyAALQAMQQhxRQ0DC0H82wAhAANAAkAgAyAAKAIAIgFPBEAgASAAKAIEaiIFIANLDQELIAAoAgghAAwBCwtByNgAIARBKGsiAEF4IAJrQQdxIgFrIgc2AgBB1NgAIAEgAmoiATYCACABIAdBAXI2AgQgACACakEoNgIEQdjYAEGk3AAoAgA2AgAgAyAFQScgBWtBB3FqQS9rIgAgACADQRBqSRsiAUEbNgIEIAFBhNwAKQIANwIQIAFB/NsAKQIANwIIQYTcACABQQhqNgIAQYDcACAENgIAQfzbACACNgIAQYjcAEEANgIAIAFBGGohAANAIABBBzYCBCAAQQhqIQwgAEEEaiEAIAwgBUkNAAsgASADRg0AIAEgASgCBEF+cTYCBCADIAEgA2siAkEBcjYCBCABIAI2AgACfyACQf8BTQRAIAJBeHFB5NgAaiEAAn9BvNgAKAIAIgFBASACQQN2dCICcUUEQEG82AAgASACcjYCACAADAELIAAoAggLIQEgACADNgIIIAEgAzYCDEEMIQJBCAwBC0EfIQAgAkH///8HTQRAIAJBJiACQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAAsgAyAANgIcIANCADcCECAAQQJ0QezaAGohAQJAAkBBwNgAKAIAIgVBASAAdCIEcUUEQEHA2AAgBCAFcjYCACABIAM2AgAMAQsgAkEZIABBAXZrQQAgAEEfRxt0IQAgASgCACEFA0AgBSIBKAIEQXhxIAJGDQIgAEEddiEFIABBAXQhACABIAVBBHFqIgQoAhAiBQ0ACyAEIAM2AhALIAMgATYCGEEIIQIgAyIBIQBBDAwBCyABKAIIIgAgAzYCDCABIAM2AgggAyAANgIIQQAhAEEYIQJBDAsgA2ogATYCACACIANqIAA2AgALQcjYACgCACIAIAZNDQBByNgAIAAgBmsiATYCAEHU2ABB1NgAKAIAIgAgBmoiAjYCACACIAFBAXI2AgQgACAGQQNyNgIEIABBCGohAAwEC0G42ABBMDYCAEEAIQAMAwsgACACNgIAIAAgACgCBCAEajYCBCACQXggAmtBB3FqIgggBkEDcjYCBCABQXggAWtBB3FqIgQgBiAIaiIDayEHAkBB1NgAKAIAIARGBEBB1NgAIAM2AgBByNgAQcjYACgCACAHaiIANgIAIAMgAEEBcjYCBAwBC0HQ2AAoAgAgBEYEQEHQ2AAgAzYCAEHE2ABBxNgAKAIAIAdqIgA2AgAgAyAAQQFyNgIEIAAgA2ogADYCAAwBCyAEKAIEIgBBA3FBAUYEQCAAQXhxIQkgBCgCDCECAkAgAEH/AU0EQCAEKAIIIgEgAkYEQEG82ABBvNgAKAIAQX4gAEEDdndxNgIADAILIAEgAjYCDCACIAE2AggMAQsgBCgCGCEGAkAgAiAERwRAIAQoAggiACACNgIMIAIgADYCCAwBCwJAIAQoAhQiAAR/IARBFGoFIAQoAhAiAEUNASAEQRBqCyEBA0AgASEFIAAiAkEUaiEBIAAoAhQiAA0AIAJBEGohASACKAIQIgANAAsgBUEANgIADAELQQAhAgsgBkUNAAJAIAQoAhwiAEECdEHs2gBqIgEoAgAgBEYEQCABIAI2AgAgAg0BQcDYAEHA2AAoAgBBfiAAd3E2AgAMAgsgBkEQQRQgBigCECAERhtqIAI2AgAgAkUNAQsgAiAGNgIYIAQoAhAiAARAIAIgADYCECAAIAI2AhgLIAQoAhQiAEUNACACIAA2AhQgACACNgIYCyAHIAlqIQcgBCAJaiIEKAIEIQALIAQgAEF+cTYCBCADIAdBAXI2AgQgAyAHaiAHNgIAIAdB/wFNBEAgB0F4cUHk2ABqIQACf0G82AAoAgAiAUEBIAdBA3Z0IgJxRQRAQbzYACABIAJyNgIAIAAMAQsgACgCCAshASAAIAM2AgggASADNgIMIAMgADYCDCADIAE2AggMAQtBHyECIAdB////B00EQCAHQSYgB0EIdmciAGt2QQFxIABBAXRrQT5qIQILIAMgAjYCHCADQgA3AhAgAkECdEHs2gBqIQACQAJAQcDYACgCACIBQQEgAnQiBXFFBEBBwNgAIAEgBXI2AgAgACADNgIADAELIAdBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAQNAIAEiACgCBEF4cSAHRg0CIAJBHXYhASACQQF0IQIgACABQQRxaiIFKAIQIgENAAsgBSADNgIQCyADIAA2AhggAyADNgIMIAMgAzYCCAwBCyAAKAIIIgEgAzYCDCAAIAM2AgggA0EANgIYIAMgADYCDCADIAE2AggLIAhBCGohAAwCCwJAIAhFDQACQCAFKAIcIgFBAnRB7NoAaiICKAIAIAVGBEAgAiAANgIAIAANAUHA2AAgB0F+IAF3cSIHNgIADAILIAhBEEEUIAgoAhAgBUYbaiAANgIAIABFDQELIAAgCDYCGCAFKAIQIgEEQCAAIAE2AhAgASAANgIYCyAFKAIUIgFFDQAgACABNgIUIAEgADYCGAsCQCADQQ9NBEAgBSADIAZqIgBBA3I2AgQgACAFaiIAIAAoAgRBAXI2AgQMAQsgBSAGQQNyNgIEIAUgBmoiBCADQQFyNgIEIAMgBGogAzYCACADQf8BTQRAIANBeHFB5NgAaiEAAn9BvNgAKAIAIgFBASADQQN2dCICcUUEQEG82AAgASACcjYCACAADAELIAAoAggLIQEgACAENgIIIAEgBDYCDCAEIAA2AgwgBCABNgIIDAELQR8hACADQf///wdNBEAgA0EmIANBCHZnIgBrdkEBcSAAQQF0a0E+aiEACyAEIAA2AhwgBEIANwIQIABBAnRB7NoAaiEBAkACQCAHQQEgAHQiAnFFBEBBwNgAIAIgB3I2AgAgASAENgIAIAQgATYCGAwBCyADQRkgAEEBdmtBACAAQR9HG3QhACABKAIAIQEDQCABIgIoAgRBeHEgA0YNAiAAQR12IQEgAEEBdCEAIAIgAUEEcWoiBygCECIBDQALIAcgBDYCECAEIAI2AhgLIAQgBDYCDCAEIAQ2AggMAQsgAigCCCIAIAQ2AgwgAiAENgIIIARBADYCGCAEIAI2AgwgBCAANgIICyAFQQhqIQAMAQsCQCAJRQ0AAkAgAigCHCIBQQJ0QezaAGoiBSgCACACRgRAIAUgADYCACAADQFBwNgAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECACRhtqIAA2AgAgAEUNAQsgACAJNgIYIAIoAhAiAQRAIAAgATYCECABIAA2AhgLIAIoAhQiAUUNACAAIAE2AhQgASAANgIYCwJAIANBD00EQCACIAMgBmoiAEEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwBCyACIAZBA3I2AgQgAiAGaiIFIANBAXI2AgQgAyAFaiADNgIAIAgEQCAIQXhxQeTYAGohAEHQ2AAoAgAhAQJ/QQEgCEEDdnQiByAEcUUEQEG82AAgBCAHcjYCACAADAELIAAoAggLIQQgACABNgIIIAQgATYCDCABIAA2AgwgASAENgIIC0HQ2AAgBTYCAEHE2AAgAzYCAAsgAkEIaiEACyAKQRBqJAAgAAsIACAAIAEQQgu7AQIFfwF8IwBBEGsiBiQAIAZBBGoiAhBBIwBBEGsiBSQAIAG7IQcCfyACLQALQQd2BEAgAigCBAwBCyACLQALQf8AcQshBANAAkACfyACLQALQQd2BEAgAigCAAwBCyACCyEDIAUgBzkDACACAn8gAyAEQQFqIAUQRyIDQQBOBEAgAyAETQ0CIAMMAQsgBEEBdEEBcgsiBBAtDAELCyACIAMQLSAAIAIQQCAFQRBqJAAgAhBEIAZBEGokAAvtBQEHfyMAQSBrIgMkAAJAIANBFWoiBiICIANBIGoiCCIFRg0AIAFBAE4NACACQS06AAAgAkEBaiECQQAgAWshAQsgAwJ/IAUgAmsiB0EJTARAQT0gB0EgIAFBAXJna0HRCWxBDHUiBCAEQQJ0QZDEAGooAgAgAU1qSA0BGgsCfyABQb+EPU0EQCABQY/OAE0EQCABQeMATQRAIAFBCU0EQCACIAFBMGo6AAAgAkEBagwECyACIAEQJQwDCyABQecHTQRAIAIgAUHkAG4iBEEwajoAACACQQFqIAEgBEHkAGxrECUMAwsgAiABEDUMAgsgAUGfjQZNBEAgAiABQZDOAG4iBEEwajoAACACQQFqIAEgBEGQzgBsaxA1DAILIAIgARA0DAELIAFB/8HXL00EQCABQf+s4gRNBEAgAiABQcCEPW4iBEEwajoAACACQQFqIAEgBEHAhD1saxA0DAILIAIgARAzDAELIAFB/5Pr3ANNBEAgAiABQYDC1y9uIgRBMGo6AAAgAkEBaiABIARBgMLXL2xrEDMMAQsgAiABQYDC1y9uIgIQJSABIAJBgMLXL2xrEDMLIQVBAAs2AhAgAyAFNgIMIAMoAgwhByMAQRBrIgQkACMAQRBrIgMkACAAIQECQCAHIAYiAGsiBUH3////B00EQAJAIAVBC0kEQCABIAEtAAtBgAFxIAVB/wBxcjoACyABIAEtAAtB/wBxOgALIAEhAgwBCyADQQhqIAVBC08EfyAFQQhqQXhxIgYgBkEBayIGIAZBC0YbBUEKC0EBahAwIAMoAgwaIAEgAygCCCICNgIAIAEgASgCCEGAgICAeHEgAygCDEH/////B3FyNgIIIAEgASgCCEGAgICAeHI2AgggASAFNgIECwNAIAAgB0cEQCACIAAtAAA6AAAgAkEBaiECIABBAWohAAwBCwsgA0EAOgAHIAIgAy0ABzoAACADQRBqJAAMAQsQJwALIARBEGokACAIJAALGAEBfyABEBwhAiAAIAE2AgQgACACNgIACzgAIAAtAAtBB3YEQCAAIAE2AgQPCyAAIAAtAAtBgAFxIAFB/wBxcjoACyAAIAAtAAtB/wBxOgALC9UCAQJ/AkAgACABRg0AIAEgACACaiIEa0EAIAJBAXRrTQRAIAAgASACECIaDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAw0CIABBA3FFDQEDQCACRQ0EIAAgAS0AADoAACABQQFqIQEgAkEBayECIABBAWoiAEEDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkEBayICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQQRrIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkEBayICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AA0AgACABKAIANgIAIAFBBGohASAAQQRqIQAgAkEEayICQQNLDQALCyACRQ0AA0AgACABLQAAOgAAIABBAWohACABQQFqIQEgAkEBayICDQALCwsbACAAIAFBwIQ9biIAECUgASAAQcCEPWxrEDQLGwAgACABQZDOAG4iABAlIAEgAEGQzgBsaxA1CxkAIAAgAUHkAG4iABAlIAEgAEHkAGxrECULDwAgAgRAIAAgASACEDILC70EAwN8A38CfgJ8AkAgAL1CNIinQf8PcSIFQckHa0E/SQRAIAUhBAwBCyAFQckHSQRAIABEAAAAAAAA8D+gDwsgBUGJCEkNAEQAAAAAAAAAACAAvSIHQoCAgICAgIB4UQ0BGiAFQf8PTwRAIABEAAAAAAAA8D+gDwsgB0IAUwRAIwBBEGsiBEQAAAAAAAAAEDkDCCAEKwMIRAAAAAAAAAAQog8LIwBBEGsiBEQAAAAAAAAAcDkDCCAEKwMIRAAAAAAAAABwog8LQbgvKwMAIACiQcAvKwMAIgGgIgIgAaEiAUHQLysDAKIgAUHILysDAKIgAKCgIgEgAaIiACAAoiABQfAvKwMAokHoLysDAKCiIAAgAUHgLysDAKJB2C8rAwCgoiACvSIHp0EEdEHwD3EiBUGoMGorAwAgAaCgoCEBIAVBsDBqKQMAIAdCLYZ8IQggBEUEQAJ8IAdCgICAgAiDUARAIAhCgICAgICAgIg/fb8iACABoiAAoEQAAAAAAAAAf6IMAQsgCEKAgICAgICA8D98vyICIAGiIgEgAqAiA0QAAAAAAADwP2MEfCMAQRBrIgQhBiAEQoCAgICAgIAINwMIIAYgBCsDCEQAAAAAAAAQAKI5AwhEAAAAAAAAAAAgA0QAAAAAAADwP6AiACABIAIgA6GgIANEAAAAAAAA8D8gAKGgoKBEAAAAAAAA8L+gIgAgAEQAAAAAAAAAAGEbBSADC0QAAAAAAAAQAKILDwsgCL8iACABoiAAoAsLCABBqQoQUwALcABBsM4AQRc2AgBBtM4AQQA2AgAQV0G0zgBB4M4AKAIANgIAQeDOAEGwzgA2AgBB5M4AQRg2AgBB6M4AQQA2AgAQUkHozgBB4M4AKAIANgIAQeDOAEHkzgA2AgBBhNAAQYzPADYCAEG8zwBBKjYCAAsLACAAEDsaIAAQGQsyAQJ/IABBnMwANgIAIAAoAgRBDGsiASABKAIIQQFrIgI2AgggAkEASARAIAEQGQsgAAuaAQAgAEEBOgA1AkAgACgCBCACRw0AIABBAToANAJAIAAoAhAiAkUEQCAAQQE2AiQgACADNgIYIAAgATYCECADQQFHDQIgACgCMEEBRg0BDAILIAEgAkYEQCAAKAIYIgJBAkYEQCAAIAM2AhggAyECCyAAKAIwQQFHDQIgAkEBRg0BDAILIAAgACgCJEEBajYCJAsgAEEBOgA2CwtMAQF/AkAgAUUNACABQazIABAgIgFFDQAgASgCCCAAKAIIQX9zcQ0AIAAoAgwgASgCDEEAEB5FDQAgACgCECABKAIQQQAQHiECCyACC3YBAX8gACgCJCIDRQRAIAAgAjYCGCAAIAE2AhAgAEEBNgIkIAAgACgCODYCFA8LAkACQCAAKAIUIAAoAjhHDQAgACgCECABRw0AIAAoAhhBAkcNASAAIAI2AhgPCyAAQQE6ADYgAEECNgIYIAAgA0EBajYCJAsLUwEDfyMAQRBrIgIkACABIAAoAgQiA0EBdWohASAAKAIAIQAgAkEIaiABIANBAXEEfyABKAIAIABqKAIABSAACxEAACACKAIMIQQgAkEQaiQAIAQLXwEBfyMAQRBrIgIkACABLQALGiAAIAEpAgA3AgAgACABKAIINgIIIAFCADcCACABQQA2AgggAC0AC0EHdiIBRQRAAn8gAQRAIAAoAgQMAQsgAC0ACwsaCyACQRBqJAALQwEBfyMAQRBrIgEkACAAQgA3AgAgAEEANgIIIAFBEGokACAAIAAtAAtBB3YEfyAAKAIIQf////8HcUEBawVBCgsQQgvUBAEJfwJ/IAAtAAtBB3YEQCAAKAIEDAELIAAtAAtB/wBxCyICIAFJBEAjAEEQayIGJAAgASACayIFBEAgBSAALQALQQd2BH8gACgCCEH/////B3FBAWsFQQoLIgICfyAALQALQQd2BEAgACgCBAwBCyAALQALQf8AcQsiAWtLBEAjAEEQayIEJAACQCAFIAJrIAFqIgNB9////wcgAmtNBEACfyAALQALQQd2BEAgACgCAAwBCyAACyEHIARBBGoiCCACQfP///8DSQR/IAQgAkEBdDYCDCAEIAIgA2o2AgQjAEEQayIDJAAgCCgCACAEQQxqIgkoAgBJIQogA0EQaiQAIAkgCCAKGygCACIDQQtPBH8gA0EIakF4cSIDIANBAWsiAyADQQtGGwVBCgtBAWoFQff///8HCxAwIAQoAgQhAyAEKAIIGiABBEAgAyAHIAEQIwsgAkEKRwRAIAcQGQsgACADNgIAIAAgACgCCEGAgICAeHEgBCgCCEH/////B3FyNgIIIAAgACgCCEGAgICAeHI2AgggBEEQaiQADAELECcACyAAIAE2AgQLIAECfyAALQALQQd2BEAgACgCAAwBCyAACyICaiAFEEMgACABIAVqIgAQMSAGQQA6AA8gACACaiAGLQAPOgAACyAGQRBqJAAPCwJ/IAAtAAtBB3YEQCAAKAIADAELIAALIQQjAEEQayICJAACfyAALQALQQd2BEAgACgCBAwBCyAALQALCxogACABEDEgAkEAOgAPIAEgBGogAi0ADzoAACACQRBqJAALPQEBfyMAQRBrIgIkACACQQA6AA8DQCABBEAgACACLQAPOgAAIAFBAWshASAAQQFqIQAMAQsLIAJBEGokAAsaACAALQALQQd2BEAgACgCCBogACgCABAZCwvmAQEFfyMAQRBrIgUkACMAQSBrIgMkACMAQRBrIgQkACAEIAA2AgwgBCAAIAFqNgIIIAMgBCgCDDYCGCADIAQoAgg2AhwgBEEQaiQAIAMoAhghBCADKAIcIQYjAEEQayIBJAAgASAGNgIMIAIgBCAGIARrIgQQNiABIAIgBGo2AgggAyABKAIMNgIQIAMgASgCCDYCFCABQRBqJAAgAyAAIAMoAhAgAGtqNgIMIAMgAiADKAIUIAJrajYCCCAFIAMoAgw2AgggBSADKAIINgIMIANBIGokACAFKAIMIQcgBUEQaiQAIAcL8wIBBX8jAEEQayIHJAAgAiABQX9zQff///8Hak0EQAJ/IAAtAAtBB3YEQCAAKAIADAELIAALIQggB0EEaiIJIAFB8////wNJBH8gByABQQF0NgIMIAcgASACajYCBCMAQRBrIgIkACAJKAIAIAdBDGoiCigCAEkhCyACQRBqJAAgCiAJIAsbKAIAIgJBC08EfyACQQhqQXhxIgIgAkEBayICIAJBC0YbBUEKC0EBagVB9////wcLEDAgBygCBCECIAcoAggaIAQEQCACIAggBBAjCyAFBEAgAiAEaiAGIAUQIwsgAyAEayEGIAMgBEcEQCACIARqIAVqIAQgCGogBhAjCyABQQpHBEAgCBAZCyAAIAI2AgAgACAAKAIIQYCAgIB4cSAHKAIIQf////8HcXI2AgggACAAKAIIQYCAgIB4cjYCCCAAIAQgBWogBmoiADYCBCAHQQA6AAwgACACaiAHLQAMOgAAIAdBEGokAA8LECcAC58BAQR/IwBBEGsiBCQAIAQgAjYCDCMAQaABayIDJAAgAyAAIANBngFqIAEbIgU2ApQBIAMgAUEBayIAQQAgACABTRs2ApgBIANBAEGQARAkIgBBfzYCTCAAQR42AiQgAEF/NgJQIAAgAEGfAWo2AiwgACAAQZQBajYCVCAFQQA6AAAgAEHkCiACQR0QTiEGIABBoAFqJAAgBEEQaiQAIAYLBAAgAAuZAgAgAEUEQEEADwsCfwJAIAAEfyABQf8ATQ0BAkBBhNAAKAIAKAIARQRAIAFBgH9xQYC/A0YNAwwBCyABQf8PTQRAIAAgAUE/cUGAAXI6AAEgACABQQZ2QcABcjoAAEECDAQLIAFBgEBxQYDAA0cgAUGAsANPcUUEQCAAIAFBP3FBgAFyOgACIAAgAUEMdkHgAXI6AAAgACABQQZ2QT9xQYABcjoAAUEDDAQLIAFBgIAEa0H//z9NBEAgACABQT9xQYABcjoAAyAAIAFBEnZB8AFyOgAAIAAgAUEGdkE/cUGAAXI6AAIgACABQQx2QT9xQYABcjoAAUEEDAQLC0G42ABBGTYCAEF/BUEBCwwBCyAAIAE6AABBAQsLjBgDE38BfAN+IwBBsARrIgwkACAMQQA2AiwCQCABvSIaQgBTBEBBASEQQZQIIRMgAZoiAb0hGgwBCyAEQYAQcQRAQQEhEEGXCCETDAELQZoIQZUIIARBAXEiEBshEyAQRSEVCwJAIBpCgICAgICAgPj/AINCgICAgICAgPj/AFEEQCAAQSAgAiAQQQNqIgMgBEH//3txEB8gACATIBAQHSAAQcIJQbwLIAVBIHEiBRtB4ApBwAsgBRsgASABYhtBAxAdIABBICACIAMgBEGAwABzEB8gAyACIAIgA0gbIQoMAQsgDEEQaiERAkACfwJAIAEgDEEsahBPIgEgAaAiAUQAAAAAAAAAAGIEQCAMIAwoAiwiBkEBazYCLCAFQSByIg5B4QBHDQEMAwsgBUEgciIOQeEARg0CIAwoAiwhCUEGIAMgA0EASBsMAQsgDCAGQR1rIgk2AiwgAUQAAAAAAACwQaIhAUEGIAMgA0EASBsLIQsgDEEwakGgAkEAIAlBAE4baiINIQcDQCAHAn8gAUQAAAAAAADwQWMgAUQAAAAAAAAAAGZxBEAgAasMAQtBAAsiAzYCACAHQQRqIQcgASADuKFEAAAAAGXNzUGiIgFEAAAAAAAAAABiDQALAkAgCUEATARAIAkhAyAHIQYgDSEIDAELIA0hCCAJIQMDQEEdIAMgA0EdTxshAwJAIAdBBGsiBiAISQ0AIAOtIRxCACEaA0AgBiAaQv////8PgyAGNQIAIByGfCIbIBtCgJTr3AOAIhpCgJTr3AN+fT4CACAGQQRrIgYgCE8NAAsgG0KAlOvcA1QNACAIQQRrIgggGj4CAAsDQCAIIAciBkkEQCAGQQRrIgcoAgBFDQELCyAMIAwoAiwgA2siAzYCLCAGIQcgA0EASg0ACwsgA0EASARAIAtBGWpBCW5BAWohDyAOQeYARiESA0BBCUEAIANrIgMgA0EJTxshCgJAIAYgCE0EQCAIKAIARUECdCEHDAELQYCU69wDIAp2IRRBfyAKdEF/cyEWQQAhAyAIIQcDQCAHIAMgBygCACIXIAp2ajYCACAWIBdxIBRsIQMgB0EEaiIHIAZJDQALIAgoAgBFQQJ0IQcgA0UNACAGIAM2AgAgBkEEaiEGCyAMIAwoAiwgCmoiAzYCLCANIAcgCGoiCCASGyIHIA9BAnRqIAYgBiAHa0ECdSAPShshBiADQQBIDQALC0EAIQMCQCAGIAhNDQAgDSAIa0ECdUEJbCEDQQohByAIKAIAIgpBCkkNAANAIANBAWohAyAKIAdBCmwiB08NAAsLIAsgA0EAIA5B5gBHG2sgDkHnAEYgC0EAR3FrIgcgBiANa0ECdUEJbEEJa0gEQCAMQTBqQYRgQaRiIAlBAEgbaiAHQYDIAGoiCkEJbSIPQQJ0aiEJQQohByAKIA9BCWxrIgpBB0wEQANAIAdBCmwhByAKQQFqIgpBCEcNAAsLAkAgCSgCACISIBIgB24iDyAHbGsiCkUgCUEEaiIUIAZGcQ0AAkAgD0EBcUUEQEQAAAAAAABAQyEBIAdBgJTr3ANHDQEgCCAJTw0BIAlBBGstAABBAXFFDQELRAEAAAAAAEBDIQELRAAAAAAAAOA/RAAAAAAAAPA/RAAAAAAAAPg/IAYgFEYbRAAAAAAAAPg/IAogB0EBdiIURhsgCiAUSRshGQJAIBUNACATLQAAQS1HDQAgGZohGSABmiEBCyAJIBIgCmsiCjYCACABIBmgIAFhDQAgCSAHIApqIgM2AgAgA0GAlOvcA08EQANAIAlBADYCACAIIAlBBGsiCUsEQCAIQQRrIghBADYCAAsgCSAJKAIAQQFqIgM2AgAgA0H/k+vcA0sNAAsLIA0gCGtBAnVBCWwhA0EKIQcgCCgCACIKQQpJDQADQCADQQFqIQMgCiAHQQpsIgdPDQALCyAJQQRqIgcgBiAGIAdLGyEGCwNAIAYiByAITSIKRQRAIAZBBGsiBigCAEUNAQsLAkAgDkHnAEcEQCAEQQhxIQkMAQsgA0F/c0F/IAtBASALGyIGIANKIANBe0pxIgkbIAZqIQtBf0F+IAkbIAVqIQUgBEEIcSIJDQBBdyEGAkAgCg0AIAdBBGsoAgAiDkUNAEEKIQpBACEGIA5BCnANAANAIAYiCUEBaiEGIA4gCkEKbCIKcEUNAAsgCUF/cyEGCyAHIA1rQQJ1QQlsIQogBUFfcUHGAEYEQEEAIQkgCyAGIApqQQlrIgZBACAGQQBKGyIGIAYgC0obIQsMAQtBACEJIAsgAyAKaiAGakEJayIGQQAgBkEAShsiBiAGIAtKGyELC0F/IQogC0H9////B0H+////ByAJIAtyIhIbSg0BIAsgEkEAR2pBAWohDgJAIAVBX3EiFUHGAEYEQCADIA5B/////wdzSg0DIANBACADQQBKGyEGDAELIBEgAyADQR91IgZzIAZrrSARECkiBmtBAUwEQANAIAZBAWsiBkEwOgAAIBEgBmtBAkgNAAsLIAZBAmsiDyAFOgAAIAZBAWtBLUErIANBAEgbOgAAIBEgD2siBiAOQf////8Hc0oNAgsgBiAOaiIDIBBB/////wdzSg0BIABBICACIAMgEGoiAyAEEB8gACATIBAQHSAAQTAgAiADIARBgIAEcxAfAkACQAJAIBVBxgBGBEAgDEEQakEJciEFIA0gCCAIIA1LGyIJIQgDQCAINQIAIAUQKSEGAkAgCCAJRwRAIAYgDEEQak0NAQNAIAZBAWsiBkEwOgAAIAYgDEEQaksNAAsMAQsgBSAGRw0AIAZBAWsiBkEwOgAACyAAIAYgBSAGaxAdIAhBBGoiCCANTQ0ACyASBEAgAEG0EUEBEB0LIAcgCE0NASALQQBMDQEDQCAINQIAIAUQKSIGIAxBEGpLBEADQCAGQQFrIgZBMDoAACAGIAxBEGpLDQALCyAAIAZBCSALIAtBCU4bEB0gC0EJayEGIAhBBGoiCCAHTw0DIAtBCUohGCAGIQsgGA0ACwwCCwJAIAtBAEgNACAHIAhBBGogByAISxshDSAMQRBqQQlyIQUgCCEHA0AgBSAHNQIAIAUQKSIGRgRAIAZBAWsiBkEwOgAACwJAIAcgCEcEQCAGIAxBEGpNDQEDQCAGQQFrIgZBMDoAACAGIAxBEGpLDQALDAELIAAgBkEBEB0gBkEBaiEGIAkgC3JFDQAgAEG0EUEBEB0LIAAgBiAFIAZrIgYgCyAGIAtIGxAdIAsgBmshCyAHQQRqIgcgDU8NASALQQBODQALCyAAQTAgC0ESakESQQAQHyAAIA8gESAPaxAdDAILIAshBgsgAEEwIAZBCWpBCUEAEB8LIABBICACIAMgBEGAwABzEB8gAyACIAIgA0gbIQoMAQsgEyAFQRp0QR91QQlxaiEIAkAgA0ELSw0AQQwgA2shBkQAAAAAAAAwQCEZA0AgGUQAAAAAAAAwQKIhGSAGQQFrIgYNAAsgCC0AAEEtRgRAIBkgAZogGaGgmiEBDAELIAEgGaAgGaEhAQsgESAMKAIsIgYgBkEfdSIGcyAGa60gERApIgZGBEAgBkEBayIGQTA6AAALIBBBAnIhCyAFQSBxIQ0gDCgCLCEHIAZBAmsiCSAFQQ9qOgAAIAZBAWtBLUErIAdBAEgbOgAAIARBCHEhBiAMQRBqIQcDQCAHIgUCfyABmUQAAAAAAADgQWMEQCABqgwBC0GAgICAeAsiB0GAxABqLQAAIA1yOgAAIAEgB7ehRAAAAAAAADBAoiEBAkAgBUEBaiIHIAxBEGprQQFHDQACQCAGDQAgA0EASg0AIAFEAAAAAAAAAABhDQELIAVBLjoAASAFQQJqIQcLIAFEAAAAAAAAAABiDQALQX8hCkH9////ByALIBEgCWsiBmoiDWsgA0gNACAAQSAgAiANIANBAmogByAMQRBqIgdrIgUgBUECayADSBsgBSADGyIKaiIDIAQQHyAAIAggCxAdIABBMCACIAMgBEGAgARzEB8gACAHIAUQHSAAQTAgCiAFa0EAQQAQHyAAIAkgBhAdIABBICACIAMgBEGAwABzEB8gAyACIAIgA0gbIQoLIAxBsARqJAAgCgu8AgACQAJAAkACQAJAAkACQAJAAkACQAJAIAFBCWsOEgAICQoICQECAwQKCQoKCAkFBgcLIAIgAigCACIBQQRqNgIAIAAgASgCADYCAA8LIAIgAigCACIBQQRqNgIAIAAgATIBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATMBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATAAADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATEAADcDAA8LIAIgAigCAEEHakF4cSIBQQhqNgIAIAAgASsDADkDAA8LIAAgAiADEQAACw8LIAIgAigCACIBQQRqNgIAIAAgATQCADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATUCADcDAA8LIAIgAigCAEEHakF4cSIBQQhqNgIAIAAgASkDADcDAAtzAQZ/IAAoAgAiAywAAEEwayIBQQlLBEBBAA8LA0BBfyEEIAJBzJmz5gBNBEBBfyABIAJBCmwiBWogASAFQf////8Hc0sbIQQLIAAgA0EBaiIFNgIAIAMsAAEhBiAEIQIgBSEDIAZBMGsiAUEKSQ0ACyACC7AUAhV/AX4jAEFAaiIHJAAgByABNgI8IAdBJ2ohFSAHQShqIRACQAJAAkACQANAQQAhBgNAIAEhDCAGIA1B/////wdzSg0CIAYgDWohDQJAAkACQAJAIAEiBi0AACIKBEADQAJAAkAgCkH/AXEiAUUEQCAGIQEMAQsgAUElRw0BIAYhCgNAIAotAAFBJUcEQCAKIQEMAgsgBkEBaiEGIAotAAIhGCAKQQJqIgEhCiAYQSVGDQALCyAGIAxrIgYgDUH/////B3MiFkoNCSAABEAgACAMIAYQHQsgBg0HIAcgATYCPCABQQFqIQZBfyEPAkAgASwAAUEwayIIQQlLDQAgAS0AAkEkRw0AIAFBA2ohBkEBIREgCCEPCyAHIAY2AjxBACELAkAgBiwAACIKQSBrIgFBH0sEQCAGIQgMAQsgBiEIQQEgAXQiAUGJ0QRxRQ0AA0AgByAGQQFqIgg2AjwgASALciELIAYsAAEiCkEgayIBQSBPDQEgCCEGQQEgAXQiAUGJ0QRxDQALCwJAIApBKkYEQAJ/AkAgCCwAAUEwayIBQQlLDQAgCC0AAkEkRw0AAn8gAEUEQCAEIAFBAnRqQQo2AgBBAAwBCyADIAFBA3RqKAIACyEOIAhBA2ohAUEBDAELIBENBiAIQQFqIQEgAEUEQCAHIAE2AjxBACERQQAhDgwDCyACIAIoAgAiBkEEajYCACAGKAIAIQ5BAAshESAHIAE2AjwgDkEATg0BQQAgDmshDiALQYDAAHIhCwwBCyAHQTxqEEwiDkEASA0KIAcoAjwhAQtBACEGQX8hCQJ/QQAgAS0AAEEuRw0AGiABLQABQSpGBEACfwJAIAEsAAJBMGsiCEEJSw0AIAEtAANBJEcNACABQQRqIQECfyAARQRAIAQgCEECdGpBCjYCAEEADAELIAMgCEEDdGooAgALDAELIBENBiABQQJqIQFBACAARQ0AGiACIAIoAgAiCEEEajYCACAIKAIACyEJIAcgATYCPCAJQQBODAELIAcgAUEBajYCPCAHQTxqEEwhCSAHKAI8IQFBAQshEgNAIAYhE0EcIQggASIXLAAAIgZB+wBrQUZJDQsgAUEBaiEBIAYgE0E6bGpB7z9qLQAAIgZBAWtBCEkNAAsgByABNgI8AkAgBkEbRwRAIAZFDQwgD0EATgRAIABFBEAgBCAPQQJ0aiAGNgIADAwLIAcgAyAPQQN0aikDADcDMAwCCyAARQ0IIAdBMGogBiACIAUQSwwBCyAPQQBODQtBACEGIABFDQgLIAAtAABBIHENCyALQf//e3EiCiALIAtBgMAAcRshC0EAIQ9BigghFCAQIQgCQAJAAn8CQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIBcsAAAiBkFTcSAGIAZBD3FBA0YbIAYgExsiBkHYAGsOIQQWFhYWFhYWFhAWCQYQEBAWBhYWFhYCBQMWFgoWARYWBAALAkAgBkHBAGsOBxAWCxYQEBAACyAGQdMARg0LDBULIAcpAzAhG0GKCAwFC0EAIQYCQAJAAkACQAJAAkACQCATQf8BcQ4IAAECAwQcBQYcCyAHKAIwIA02AgAMGwsgBygCMCANNgIADBoLIAcoAjAgDaw3AwAMGQsgBygCMCANOwEADBgLIAcoAjAgDToAAAwXCyAHKAIwIA02AgAMFgsgBygCMCANrDcDAAwVC0EIIAkgCUEITRshCSALQQhyIQtB+AAhBgsgECEBIAcpAzAiG0IAUgRAIAZBIHEhDANAIAFBAWsiASAbp0EPcUGAxABqLQAAIAxyOgAAIBtCD1YhGSAbQgSIIRsgGQ0ACwsgASEMIAcpAzBQDQMgC0EIcUUNAyAGQQR2QYoIaiEUQQIhDwwDCyAQIQEgBykDMCIbQgBSBEADQCABQQFrIgEgG6dBB3FBMHI6AAAgG0IHViEaIBtCA4ghGyAaDQALCyABIQwgC0EIcUUNAiAJIBAgAWsiAUEBaiABIAlIGyEJDAILIAcpAzAiG0IAUwRAIAdCACAbfSIbNwMwQQEhD0GKCAwBCyALQYAQcQRAQQEhD0GLCAwBC0GMCEGKCCALQQFxIg8bCyEUIBsgEBApIQwLIBIgCUEASHENESALQf//e3EgCyASGyELAkAgBykDMCIbQgBSDQAgCQ0AIBAhDEEAIQkMDgsgCSAbUCAQIAxraiIBIAEgCUgbIQkMDQsgBykDMCEbDAsLAn9B/////wcgCSAJQf////8HTxsiCyIGQQBHIQgCQAJAAkAgBygCMCIBQcIRIAEbIgwiAUEDcUUNACAGRQ0AA0AgAS0AAEUNAiAGQQFrIgZBAEchCCABQQFqIgFBA3FFDQEgBg0ACwsgCEUNAQJAIAEtAABFDQAgBkEESQ0AA0BBgIKECCABKAIAIghrIAhyQYCBgoR4cUGAgYKEeEcNAiABQQRqIQEgBkEEayIGQQNLDQALCyAGRQ0BCwNAIAEgAS0AAEUNAhogAUEBaiEBIAZBAWsiBg0ACwtBAAsiASAMayALIAEbIgEgDGohCCAJQQBOBEAgCiELIAEhCQwMCyAKIQsgASEJIAgtAAANDwwLCyAHKQMwIhtCAFINAUIAIRsMCQsgCQRAIAcoAjAMAgtBACEGIABBICAOQQAgCxAfDAILIAdBADYCDCAHIBs+AgggByAHQQhqIgY2AjBBfyEJIAYLIQpBACEGA0ACQCAKKAIAIgxFDQAgB0EEaiAMEEkiDEEASA0PIAwgCSAGa0sNACAKQQRqIQogBiAMaiIGIAlJDQELC0E9IQggBkEASA0MIABBICAOIAYgCxAfIAZFBEBBACEGDAELQQAhCCAHKAIwIQoDQCAKKAIAIgxFDQEgB0EEaiIJIAwQSSIMIAhqIgggBksNASAAIAkgDBAdIApBBGohCiAGIAhLDQALCyAAQSAgDiAGIAtBgMAAcxAfIA4gBiAGIA5IGyEGDAgLIBIgCUEASHENCUE9IQggACAHKwMwIA4gCSALIAYQSiIGQQBODQcMCgsgBi0AASEKIAZBAWohBgwACwALIAANCSARRQ0DQQEhBgNAIAQgBkECdGooAgAiAARAIAMgBkEDdGogACACIAUQS0EBIQ0gBkEBaiIGQQpHDQEMCwsLQQEhDSAGQQpPDQkDQCAEIAZBAnRqKAIADQEgBkEBaiIGQQpHDQALDAkLQRwhCAwGCyAHIBs8ACdBASEJIBUhDCAKIQsLIAkgCCAMayIKIAkgCkobIgkgD0H/////B3NKDQNBPSEIIA4gCSAPaiIBIAEgDkgbIgYgFkoNBCAAQSAgBiABIAsQHyAAIBQgDxAdIABBMCAGIAEgC0GAgARzEB8gAEEwIAkgCkEAEB8gACAMIAoQHSAAQSAgBiABIAtBgMAAcxAfIAcoAjwhAQwBCwsLQQAhDQwDC0E9IQgLQbjYACAINgIAC0F/IQ0LIAdBQGskACANC78CAQV/IwBB0AFrIgQkACAEIAI2AswBIARBoAFqIgJBAEEoECQaIAQgBCgCzAE2AsgBAkBBACABIARByAFqIARB0ABqIAIgAxBNQQBIBEBBfyEDDAELIAAoAkxBAEghCCAAIAAoAgAiB0FfcTYCAAJ/AkACQCAAKAIwRQRAIABB0AA2AjAgAEEANgIcIABCADcDECAAKAIsIQUgACAENgIsDAELIAAoAhANAQtBfyAAEFANARoLIAAgASAEQcgBaiAEQdAAaiAEQaABaiADEE0LIQIgBQRAIABBAEEAIAAoAiQRAwAaIABBADYCMCAAIAU2AiwgAEEANgIcIAAoAhQhASAAQgA3AxAgAkF/IAEbIQILIAAgACgCACIAIAdBIHFyNgIAQX8gAiAAQSBxGyEDIAgNAAsgBEHQAWokACADC34CAX8BfiAAvSIDQjSIp0H/D3EiAkH/D0cEfCACRQRAIAEgAEQAAAAAAAAAAGEEf0EABSAARAAAAAAAAPBDoiABEE8hACABKAIAQUBqCzYCACAADwsgASACQf4HazYCACADQv////////+HgH+DQoCAgICAgIDwP4S/BSAACwtZAQF/IAAgACgCSCIBQQFrIAFyNgJIIAAoAgAiAUEIcQRAIAAgAUEgcjYCAEF/DwsgAEIANwIEIAAgACgCLCIBNgIcIAAgATYCFCAAIAEgACgCMGo2AhBBAAsCAAvtAwBBjMkAQYgLEBVBpMkAQe4JQQFBABAUQbDJAEGuCUEBQYB/Qf8AEAZByMkAQacJQQFBgH9B/wAQBkG8yQBBpQlBAUEAQf8BEAZB1MkAQbAIQQJBgIB+Qf//ARAGQeDJAEGnCEECQQBB//8DEAZB7MkAQb8IQQRBgICAgHhB/////wcQBkH4yQBBtghBBEEAQX8QBkGEygBBlwpBBEGAgICAeEH/////BxAGQZDKAEGOCkEEQQBBfxAGQZzKAEHPCEKAgICAgICAgIB/Qv///////////wAQVkGoygBBzghCAEJ/EFZBtMoAQcgIQQQQDkHAygBB7QpBCBAOQfAoQbYKEA1ByClBvA8QDUGQKkEEQZwKEAtB3CpBAkHCChALQagrQQRB0QoQC0GUJxATQdArQQBB9w4QAEH4K0EAQd0PEABBoCxBAUGVDxAAQcgsQQJBxAsQAEHwLEEDQeMLEABBmC1BBEGLDBAAQcAtQQVBqAwQAEHoLUEEQYIQEABBkC5BBUGgEBAAQfgrQQBBjg0QAEGgLEEBQe0MEABByCxBAkHQDRAAQfAsQQNBrg0QAEGYLUEEQdYOEABBwC1BBUG0DhAAQbguQQhBkw4QAEHgLkEJQfENEABBiC9BBkHODBAAQbAvQQdBxxAQAAtmAQN/QdgAECxB0ABqIgFB8MsANgIAIAFBnMwANgIAIAAQKiICQQ1qEBwiA0EANgIIIAMgAjYCBCADIAI2AgAgASADQQxqIAAgAkEBahAiNgIEIAFBzMwANgIAIAFB7MwAQRYQFgALqAEBAX8jAEEgayIDJAAgASgCBCIBQQlPBEAgARADCyADIAE2AhAgAigCBCIBQQlPBEAgARADCyADIAE2AhggA0EANgIMAkBB3M4ALQAAQQFxBEBB2M4AKAIAIQEMAQtBA0H8KEEAEAUhAUHczgBBAToAAEHYzgAgATYCAAsgASAAKAIEQfAIIANBDGogA0EQahAEGiADKAIMIgAEQCAAEAELIANBIGokAAv/AwIEfwF8IwBBEGsiBCQAIAQgAjYCCCAEQQA2AgQCQEHEzgAtAABBAXEEQEHAzgAoAgAhAgwBC0ECQZwoQQAQBSECQcTOAEEBOgAAQcDOACACNgIACwJ/IAIgASgCBEGKCSAEQQRqIARBCGoQBCIIRAAAAAAAAPBBYyAIRAAAAAAAAAAAZnEEQCAIqwwBC0EACyEFIAQoAgQhAiAAIAU2AgQgAEGkzwA2AgAgAgRAIAIQAQsjAEEgayICJAAgACgCBCIFQQlPBEAgBRADCyACIAU2AhAgAygCBCADLAALIgUgBUEASCIHGyIFQQRqECwiBiAFNgIAIAZBBGogAygCACADIAcbIAUQIhogAiAGNgIYIAJBADYCDAJAQczOAC0AAEEBcQRAQcjOACgCACEDDAELQQNBpChBABAFIQNBzM4AQQE6AABByM4AIAM2AgALIAMgASgCBEH7CiACQQxqIAJBEGoQBBogAigCDCIDBEAgAxABCyACQSBqJAAgACgCBCIAQQlPBEAgABADCyAEIAA2AgggBEEANgIEAkBBvM4ALQAAQQFxBEBBuM4AKAIAIQAMAQtBAkGMKEEAEAUhAEG8zgBBAToAAEG4zgAgADYCAAsgACABKAIEQZcJIARBBGogBEEIahAEGiAEKAIEIgAEQCAAEAELIARBEGokAAscACAAIAFBCCACpyACQiCIpyADpyADQiCIpxAPC8sDAQJ/QbAmQcQmQeAmQQBB8CZBAUHzJkEAQfMmQQBBrRFB9SZBAhAYQbAmQQJB+CZBnCdBA0EEEBdBCBAcIgBBADYCBCAAQQU2AgBBCBAcIgFBADYCBCABQQY2AgBBsCZB6QhBlCdBnCdBByAAQZQnQaAnQQggARAKQQgQHCIAQQA2AgQgAEEJNgIAQQgQHCIBQQA2AgQgAUEKNgIAQbAmQfQKQZQnQZwnQQcgAEGUJ0GgJ0EIIAEQCkEIEBwiAEEANgIEIABBCzYCAEEIEBwiAUEANgIEIAFBDDYCAEGwJkHXCEGUJ0GcJ0EHIABBlCdBoCdBCCABEApBCBAcIgBBADYCBCAAQQ02AgBBsCZBgAhBB0GwJ0HMJ0EOIABBAEEAEAdBCBAcIgBBADYCBCAAQQ82AgBBsCZB8wlBBkHgJ0H4J0EQIABBAEEAEAdBCBAcIgBBADYCBCAAQRE2AgBBsCZBgApBAkGAKEGIKEESIABBAEEAEAdBCBAcIgBBADYCBCAAQRM2AgBBsCZB5wpBAkGAKEGIKEESIABBAEEAEAdBCBAcIgBBADYCBCAAQRQ2AgBBsCZBwwhBAkGUKEGcJ0EVIABBAEEAEAcLBwAgACgCBAsFAEGzCQsWACAARQRAQQAPCyAAQbzHABAgQQBHCxoAIAAgASgCCCAFEB4EQCABIAIgAyAEEDwLCzcAIAAgASgCCCAFEB4EQCABIAIgAyAEEDwPCyAAKAIIIgAgASACIAMgBCAFIAAoAgAoAhQRCQALpwEAIAAgASgCCCAEEB4EQAJAIAEoAgQgAkcNACABKAIcQQFGDQAgASADNgIcCw8LAkAgACABKAIAIAQQHkUNAAJAIAIgASgCEEcEQCABKAIUIAJHDQELIANBAUcNASABQQE2AiAPCyABIAI2AhQgASADNgIgIAEgASgCKEEBajYCKAJAIAEoAiRBAUcNACABKAIYQQJHDQAgAUEBOgA2CyABQQQ2AiwLC4sCACAAIAEoAgggBBAeBEACQCABKAIEIAJHDQAgASgCHEEBRg0AIAEgAzYCHAsPCwJAIAAgASgCACAEEB4EQAJAIAIgASgCEEcEQCABKAIUIAJHDQELIANBAUcNAiABQQE2AiAPCyABIAM2AiACQCABKAIsQQRGDQAgAUEAOwE0IAAoAggiACABIAIgAkEBIAQgACgCACgCFBEJACABLQA1QQFGBEAgAUEDNgIsIAEtADRFDQEMAwsgAUEENgIsCyABIAI2AhQgASABKAIoQQFqNgIoIAEoAiRBAUcNASABKAIYQQJHDQEgAUEBOgA2DwsgACgCCCIAIAEgAiADIAQgACgCACgCGBEIAAsLbAECfyMAQRBrIgMkACABIAAoAgQiBEEBdWohASAAKAIAIQAgBEEBcQRAIAEoAgAgAGooAgAhAAsgAyACNgIMIANBpM8ANgIIIAEgA0EIaiAAEQAAIAMoAgwiAEEJTwRAIAAQAgsgA0EQaiQAC40FAQR/IwBBQGoiBCQAAkAgAUGYyQBBABAeBEAgAkEANgIAQQEhBQwBCwJAIAAgASAALQAIQRhxBH9BAQUgAUUNASABQYzHABAgIgNFDQEgAy0ACEEYcUEARwsQHiEGCyAGBEBBASEFIAIoAgAiAEUNASACIAAoAgA2AgAMAQsCQCABRQ0AIAFBvMcAECAiBkUNASACKAIAIgEEQCACIAEoAgA2AgALIAYoAggiAyAAKAIIIgFBf3NxQQdxDQEgA0F/cyABcUHgAHENAUEBIQUgACgCDCAGKAIMQQAQHg0BIAAoAgxBjMkAQQAQHgRAIAYoAgwiAEUNAiAAQfDHABAgRSEFDAILIAAoAgwiA0UNAEEAIQUgA0G8xwAQICIBBEAgAC0ACEEBcUUNAgJ/IAYoAgwhAEEAIQICQANAQQAgAEUNAhogAEG8xwAQICIDRQ0BIAMoAgggASgCCEF/c3ENAUEBIAEoAgwgAygCDEEAEB4NAhogAS0ACEEBcUUNASABKAIMIgBFDQEgAEG8xwAQICIBBEAgAygCDCEADAELCyAAQazIABAgIgBFDQAgACADKAIMED0hAgsgAgshBQwCCyADQazIABAgIgEEQCAALQAIQQFxRQ0CIAEgBigCDBA9IQUMAgsgA0HcxgAQICIBRQ0BIAYoAgwiAEUNASAAQdzGABAgIgBFDQEgAigCACEDIARBCGpBAEE4ECQaIAQgA0EARzoAOyAEQX82AhAgBCABNgIMIAQgADYCBCAEQQE2AjQgACAEQQRqIANBASAAKAIAKAIcEQYAIAQoAhwiAEEBRgRAIAIgBCgCFEEAIAMbNgIACyAAQQFGIQUMAQtBACEFCyAEQUBrJAAgBQsxACAAIAEoAghBABAeBEAgASACIAMQPg8LIAAoAggiACABIAIgAyAAKAIAKAIcEQYACxgAIAAgASgCCEEAEB4EQCABIAIgAxA+CwukAQECfyMAQUBqIgMkAAJ/QQEgACABQQAQHg0AGkEAIAFFDQAaQQAgAUHcxgAQICIBRQ0AGiADQQhqQQBBOBAkGiADQQE6ADsgA0F/NgIQIAMgADYCDCADIAE2AgQgA0EBNgI0IAEgA0EEaiACKAIAQQEgASgCACgCHBEGACADKAIcIgBBAUYEQCACIAMoAhQ2AgALIABBAUYLIQQgA0FAayQAIAQLCgAgACABQQAQHgtOAgF/AXwjAEEQayICJAAgAkEANgIMIAEoAgRBpMkAIAJBDGoQCSEDIAIoAgwiAQRAIAEQAQsgACADRAAAAAAAAAAAYjoAOCACQRBqJAALNwEBfyMAQRBrIgIkACACIAEtADg2AgggAEGkyQAgAkEIahAINgIEIABBpM8ANgIAIAJBEGokAAuoAQEFfyAAKAJUIgMoAgAhBSADKAIEIgQgACgCFCAAKAIcIgdrIgYgBCAGSRsiBgRAIAUgByAGECIaIAMgAygCACAGaiIFNgIAIAMgAygCBCAGayIENgIECyAEIAIgAiAESxsiBARAIAUgASAEECIaIAMgAygCACAEaiIFNgIAIAMgAygCBCAEazYCBAsgBUEAOgAAIAAgACgCLCIBNgIcIAAgATYCFCACCwUAEBAAC50BAQJ/IwBBEGsiAiQAQcQAEBwhASAAKAIEIgBBCU8EQCAAEAMLIAIgADYCCCABQZQnIAJBCGoQCDYCBCABQaTPADYCACABQQI2AhwgAUGkzwA2AhggAUECNgIUIAFBpM8ANgIQIAFBAjYCDCABQaTPADYCCCABQQA6ACAgAUKAgICAMDcCPCABQQA7ADcgAUEAOwArIAJBEGokACABC54FAgZ+BH8gASABKAIAQQdqQXhxIgFBEGo2AgAgACELIAEpAwAhAyABKQMIIQcjAEEgayIBJAAgB0L///////8/gyEFAn4gB0IwiEL//wGDIgSnIglBgfgAa0H9D00EQCAFQgSGIANCPIiEIQIgCUGA+ABrrSEEAkAgA0L//////////w+DIgNCgYCAgICAgIAIWgRAIAJCAXwhAgwBCyADQoCAgICAgICACFINACACQgGDIAJ8IQILQgAgAiACQv////////8HViIAGyECIACtIAR8DAELAkAgAyAFhFANACAEQv//AVINACAFQgSGIANCPIiEQoCAgICAgIAEhCECQv8PDAELQv8PIAlB/ocBSw0AGkIAQYD4AEGB+AAgBFAiCBsiCiAJayIAQfAASg0AGiADIQIgBSAFQoCAgICAgMAAhCAIGyIEIQYCQEGAASAAayIIQcAAcQRAIAIgCEFAaq2GIQZCACECDAELIAhFDQAgBiAIrSIFhiACQcAAIAhrrYiEIQYgAiAFhiECCyABIAI3AxAgASAGNwMYAkAgAEHAAHEEQCAEIABBQGqtiCEDQgAhBAwBCyAARQ0AIARBwAAgAGuthiADIACtIgKIhCEDIAQgAoghBAsgASADNwMAIAEgBDcDCCABKQMIQgSGIAEpAwAiA0I8iIQhAgJAIAkgCkcgASkDECABKQMYhEIAUnGtIANC//////////8Pg4QiA0KBgICAgICAgAhaBEAgAkIBfCECDAELIANCgICAgICAgIAIUg0AIAJCAYMgAnwhAgsgAkKAgICAgICACIUgAiACQv////////8HViIAGyECIACtCyEDIAFBIGokACALIAdCgICAgICAgICAf4MgA0I0hoQgAoS/OQMAC0MBAn8jAEEQayICJAAgAiABNgIMIAJBpM8ANgIIIAJBCGogABEBACEDIAIoAgwiAUEJTwRAIAEQAgsgAkEQaiQAIAMLBABCAAsE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IgdBAEgiAxsgBSgCCCAHIAMbEBsiAygCCDYCcCAFIAMpAgA3A2ggA0IANwIAIANBADYCCCAFIAVB6ABqQasREBoiAygCCDYCgAEgBSADKQIANwN4IANCADcCACADQQA2AgggBUGIAWogBSgCeCAFQfgAaiAFLACDASIHQQBIIgMbIAUoAnwgByADGxAbGiAFLACDAUEASARAIAUoAngQGQsgBSwAc0EASARAIAUoAmgQGQsgBSwAD0EASARAIAUoAgQQGQsgBSwAY0EASARAIAUoAlgQGQsgBSwAU0EASARAIAUoAkgQGQsgBSwAG0EASARAIAUoAhAQGQsgBSwAQ0EASARAIAUoAjgQGQsgBSwAM0EASARAIAUoAigQGQsgBSwAJ0EATg0AIAUoAhwQGQsgAkEBaiICQQdHDQALIAlBAWoiCUEHRw0ACyMAQRBrIggkAEHzHxAqIQwCfyAFQYgBaiILLQALQQd2BEAgCygCBAwBCyALLQALQf8AcQshBgJ/An8jAEEQayIHJAAgBUH4AGohCiAGIAxqIglB9////wdNBEACQCAJQQtJBEAgCkIANwIAIApBADYCCCAKIAotAAtBgAFxIAlB/wBxcjoACyAKIAotAAtB/wBxOgALDAELIAlBC08EfyAJQQhqQXhxIgIgAkEBayICIAJBC0YbBUEKC0EBaiIDEBwhAiAKIAooAghBgICAgHhxIANB/////wdxcjYCCCAKIAooAghBgICAgHhyNgIIIAogAjYCACAKIAk2AgQLIAdBEGokACAKDAELECcACyICLQALQQd2BEAgAigCAAwBCyACCyICQfMfIAwQIyACIAxqIgICfyALLQALQQd2BEAgCygCAAwBCyALCyAGECMgAiAGakEBEEMgCEEQaiQAIA0gCkHNIxAaIgIpAgA3AgAgDSACKAIINgIIIAJCADcCACACQQA2AgggBSwAgwFBAEgEQCAFKAJ4EBkLIAUsAJMBQQBIBEAgBSgCiAEQGQsgBSgClAEiBwRAIAUoApgBIgMgByICRwRAA0AgA0EMayICKAIAIggEQCADQQhrIAg2AgAgCBAZCyACIgMgB0cNAAsgBSgClAEhAgsgBSAHNgKYASACEBkLIAVBoAFqJAAgBEEwaiAEKAIgIA0gBCwAKyIDQQBIIgIbIAQoAiQgAyACGxAbGiAELAAr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AAsLvUQWAEGACAukH3NldEJlYXV0eQAtKyAgIDBYMHgALTBYKzBYIDBYLTB4KzB4IDB4AHVuc2lnbmVkIHNob3J0AHVuc2lnbmVkIGludABpbml0AGZsb2F0AHVpbnQ2NF90AGJsdXJSYWRpdXMAdmVjdG9yAG1pcnJvcgBhdHRhY2hTaGFkZXIAZGVsZXRlU2hhZGVyAGNyZWF0ZVNoYWRlcgBjb21waWxlU2hhZGVyAHVuc2lnbmVkIGNoYXIAc3RkOjpleGNlcHRpb24AbmFuAGxpbmtQcm9ncmFtAGRlbGV0ZVByb2dyYW0AY3JlYXRlUHJvZ3JhbQBib29sAHNldFdhdGVyTWFyawBzdG9wV2F0ZXJNYXJrAHVuc2lnbmVkIGxvbmcAc3RkOjp3c3RyaW5nAGJhc2ljX3N0cmluZwBzdGQ6OnN0cmluZwBzdGQ6OnUxNnN0cmluZwBzdGQ6OnUzMnN0cmluZwBpbmYAJWYAY2xvc2UAZG91YmxlAHZiTW9kZQBzaGFkZXJTb3VyY2UAdm9pZABzYW1wbGVDb2xvciArPSB0ZXh0dXJlKGZyYW1lLCBibHVyQ29vcmRpbmF0ZXNbAE5BTgBJTkYAZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2hvcnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGludD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8ZmxvYXQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDhfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDE2X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDE2X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQ2NF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ2NF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8Y2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4Ac3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGRvdWJsZT4AdmVjMiBjID0gdl90ZXhDb29yZDsAdmVjMiBjID0gdmVjMigxLjAgLSB2X3RleENvb3JkLngsIHZfdGV4Q29vcmQueSk7AEFsbEluMQAuAC4wLAAuMCkqbykqAChudWxsKQApKm8ueSk7ICAgIHZlYzIgY29vcmQyID0gdmVjMihmbG9hdCgAICAgIGMgPSB2ZWMyKHZfdGV4Q29vcmQueCwgMS4wIC0gdl90ZXhDb29yZC55KTsgICAgdmVjMiBjb29yZDEgPSB2ZWMyKGZsb2F0KAApLCAoYy55IC1jb29yZDEueSkgLyBvLnkgLyBmbG9hdCgAKSpvLnkpOyAgICBpZiAoYy54ID4gY29vcmQxLnggJiYgYy54IDwgY29vcmQyLnggJiYgYy55ID4gY29vcmQxLnkgJiYgYy55IDwgY29vcmQyLnkpIHsgICAgICB2ZWM0IHdhdGVyQ29sb3IgPSB0ZXh0dXJlKHdhdGVyTWFyaywgdmVjMigoYy54IC0gY29vcmQxLngpICAvIG8ueCAvIGZsb2F0KAApICogby54LCBmbG9hdCgAb3V0Q29sb3IucmdiICs9IHZlYzMoACk7ICAgICAgIHZlYzMgc21vb3RoQ29sb3IgPSBvdXRDb2xvci5yZ2IgKyAob3V0Q29sb3IucmdiLXZlYzMoaGlnaFBhc3MpKSphbHBoYSowLjE7ICAgICAgIHNtb290aENvbG9yID0gY2xhbXAocG93KHNtb290aENvbG9yLCB2ZWMzKABnKz1HKGMsdmVjMigAICAgICAgdmVjMiBvZmZzZXQgPSB2ZWMyKABdID0gdl90ZXhDb29yZC54eSArIG9mZnNldCAqIHZlYzIoADsgACkpLCB2ZWMzKDAuMCksIHZlYzMoMS4wKSk7ICAgICAgdmVjMyBzY3JlZW4gPSB2ZWMzKDEuMCkgLSAodmVjMygxLjApLXNtb290aENvbG9yKSAqICh2ZWMzKDEuMCktb3V0Q29sb3IucmdiKTsgICAgICAgdmVjMyBsaWdodGVuID0gbWF4KHNtb290aENvbG9yLCBvdXRDb2xvci5yZ2IpOyAgICAgICB2ZWMzIGJlYXV0eUNvbG9yID0gbWl4KG1peChvdXRDb2xvci5yZ2IsIHNjcmVlbiwgYWxwaGEpLCBsaWdodGVuLCBhbHBoYSk7ICAgICAgb3V0Q29sb3IucmdiID0gbWl4KG91dENvbG9yLnJnYiwgYmVhdXR5Q29sb3IsIAAKICAgICAgY29uc3QgbWF0MyBzYXR1cmF0ZU1hdHJpeCA9IG1hdDMoMS4xMTAyLC0wLjA1OTgsLTAuMDYxLC0wLjA3NzQsMS4wODI2LC0wLjExODYsLTAuMDIyOCwtMC4wMjI4LDEuMTc3Mik7CiAgICAgIHZlYzMgd2FybUNvbG9yID0gb3V0Q29sb3IucmdiICogc2F0dXJhdGVNYXRyaXg7CiAgICAgIG91dENvbG9yLnJnYiA9IG1peChvdXRDb2xvci5yZ2IsIHdhcm1Db2xvciwgACAgICAgIHNhbXBsZUNvbG9yID0gc2FtcGxlQ29sb3IgLyA2Mi4wOyAgICAgICBmbG9hdCBoaWdoUGFzcyA9IG91dENvbG9yLmcgLSBzYW1wbGVDb2xvciArIDAuNTsgICAgICAgY29uc3QgaGlnaHAgdmVjMyBXID0gdmVjMygwLjI5OSwwLjU4NywwLjExNCk7ICAgICAgZmxvYXQgbHVtaW5hbmNlID0gZG90KG91dENvbG9yLnJnYiwgVyk7ICAgICAgIGZsb2F0IGFscGhhID0gcG93KGx1bWluYW5jZSwgAF0pLmcgKiAAKSkpOyAgICAgIG91dENvbG9yID0gbWl4KG91dENvbG9yLHdhdGVyQ29sb3IsICB3YXRlckNvbG9yLmEpOyAgICB9ICAgIAApOyAgICAAKTsgICAgICB2ZWMyIGJsdXJDb29yZGluYXRlc1syNF07ICAgICAgACAgICAgIGZsb2F0IHNhbXBsZUNvbG9yID0gb3V0Q29sb3IuZyAqIDIyLjA7ICAgICAgIAAjdmVyc2lvbiAzMDAgZXMKICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDsKICAgIHVuaWZvcm0gc2FtcGxlcjJEIGZyYW1lOwogICAgdW5pZm9ybSBzYW1wbGVyMkQgbWFzazsKICAgIHVuaWZvcm0gc2FtcGxlcjJEIGJnOwogICAgdW5pZm9ybSBzYW1wbGVyMkQgd2F0ZXJNYXJrOwogICAgdW5pZm9ybSBzYW1wbGVyMkQgbGFzdE1hc2s7CiAgICBpbiB2ZWMyIHZfdGV4Q29vcmQ7CiAgICBvdXQgdmVjNCBvdXRDb2xvcjsKICAgIHZlYzQgRyh2ZWMyIGMsdmVjMiBzKXsKICAgICAgcmV0dXJuIHRleHR1cmUoZnJhbWUsdGV4dHVyZShtYXNrLGMrcykuYT4wLjM/YzpjK3MpOwogICAgfQogICAgdm9pZCBtYWluKCkgewogICAgICAACiAgICB2ZWM0IGcgPSB2ZWM0KDAuMCk7CiAgICAACiAgICAgIGMueSA9IDEuMCAtIGMueTsKICAgICAgdmVjNCBzcmNfY29sb3IgPSB0ZXh0dXJlKGZyYW1lLCBjKTsKICAgICAgZmxvYXQgYSA9IHRleHR1cmUobWFzaywgYykuYTsKICAgICAgYSA9IGE8MC41PzIuMCphKmE6MS4wLTIuMCooMS4wLWEpKigxLjAtYSk7CiAgICAgIC8vIGZsb2F0IGEyID0gdGV4dHVyZShsYXN0TWFzaywgYykuYTsKICAgICAgLy8gYTIgPSBhMjwwLjU/Mi4wKmEyKmEyOjEuMC0yLjAqKDEuMC1hMikqKDEuMC1hMik7CiAgICAgIC8vIGZsb2F0IGRlbHRhID0gYSAtIGEyOwogICAgICAvLyBpZiAoZGVsdGEgPCAwLjI1ICYmIGRlbHRhID4gLTAuMjUpCiAgICAgIC8vIHsKICAgICAgLy8gICAgIGEgPSBhICsgMC41KmRlbHRhOwogICAgICAvLyB9CiAgICAgIAogICAgICB2ZWMyIG8gPSAxLjAgLyB2ZWMyKHRleHR1cmVTaXplKGZyYW1lLCAwKSk7CiAgICAACiAgICAgIG91dENvbG9yID0gZzsKICAAI3ZlcnNpb24gMzAwIGVzCmluIHZlYzIgYV9wb3NpdGlvbjsKaW4gdmVjMiBhX3RleENvb3JkOwpvdXQgdmVjMiB2X3RleENvb3JkOwp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFfcG9zaXRpb24ueCwgYV9wb3NpdGlvbi55LCAwLCAxKTsKICB2X3RleENvb3JkID0gYV90ZXhDb29yZDsKfQoAc2V0QmVhdXR5ICVmICVmICVmICVmICVmCgBvdXRDb2xvciA9IHNyY19jb2xvcjsKAG91dENvbG9yID0gbWl4KHRleHR1cmUoYmcsIGMpLHNyY19jb2xvcixhKTsKAG91dENvbG9yID0gbWl4KHZlYzQoMC4wLDEuMCwwLjAsMS4wKSxzcmNfY29sb3IsYSk7CgA2QWxsSW4xAFAlAAAoEwAAUDZBbGxJbjEAAAAA1CUAADgTAAAAAAAAMBMAAFBLNkFsbEluMQAAANQlAABUEwAAAQAAADATAABwcAB2AHZwAEQTAACUEwAATjEwZW1zY3JpcHRlbjN2YWxFAABQJQAAgBMAAHBwcAB2cHBwAEGwJwskjCQAAEQTAABAJQAAQCUAAEAlAABAJQAAQCUAAHZwcGRkZGRkAEHgJwvICIwkAABEEwAAQCUAAEAlAABAJQAAQCUAAHZwcGRkZGQAjCQAAEQTAAB2cHAAjCQAAJQTAACUEwAARBMAAJQTAADsJAAAjCQAAJQTAABwFAAATlN0M19fMjEyYmFzaWNfc3RyaW5nSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAAFAlAAAwFAAAlBMAAIwkAACUEwAAlBMAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0loTlNfMTFjaGFyX3RyYWl0c0loRUVOU185YWxsb2NhdG9ySWhFRUVFAABQJQAAiBQAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0l3TlNfMTFjaGFyX3RyYWl0c0l3RUVOU185YWxsb2NhdG9ySXdFRUVFAABQJQAA0BQAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0lEc05TXzExY2hhcl90cmFpdHNJRHNFRU5TXzlhbGxvY2F0b3JJRHNFRUVFAAAAUCUAABgVAABOU3QzX18yMTJiYXNpY19zdHJpbmdJRGlOU18xMWNoYXJfdHJhaXRzSURpRUVO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"),function(e,t,r,i){return function(e,t,r){return O(e).then((e=>WebAssembly.instantiate(e,t))).then(r,(e=>{l(`failed to asynchronously prepare wasm: ${e}`),b(e)}))}(t,r,i)}(0,R,e,(function(e){t(e.instance)})).catch(i),{}}(),tt=e=>(tt=et.B)(e),rt=e=>(rt=et.D)(e),it=e=>(it=et.E)(e),nt=e=>(nt=et.F)(e);function ot(){function e(){Ze||(Ze=!0,n.calledRun=!0,!_&&(Q(y),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),T.unshift(e);var e;Q(T)}()))}v>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),C.unshift(e);var e;Q(C)}(),v>0)||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e())}if(n.dynCall_jiji=(e,t,r,i,o)=>(n.dynCall_jiji=et.G)(e,t,r,i,o),n._vertexShaderSource=9872,S=function e(){Ze||ot(),Ze||(S=e)},n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return ot(),o}})(),C=_,y=class{constructor(e,t){p(this,"canvas"),p(this,"locateFile"),p(this,"_glName"),p(this,"_solutionWasm"),p(this,"ctx"),p(this,"fileDownloader"),p(this,"startTime"),p(this,"lastTimestamp"),p(this,"pl",{onResults:e=>this.onResults(e.get(0).glName)}),this.locateFile=t=>`${e}/${t}`.replace(/([^:]\/)\/+/g,"$1"),this.fileDownloader=t}bindTexture(){var e;null==(e=this.ctx)||e.activeTexture(this.ctx.TEXTURE0),this.bindTexture2d(this._glName)}async initialize(){this._solutionWasm=new this.SolutionWasm;let e=new this.StringList;e.push_back("segmentation_mask");let t=this.PacketListener.implement(this.pl);return this._solutionWasm.attachMultiListener(e,t),e.delete(),this._solutionWasm.loadGraph(await this.fileDownloader.download(this.locateFile("selfie_segmentation.binarypb"),{type:"arraybuffer"})),this}setCanvas(e){this.canvas=e,this.createContext(e,!0,!0,{}),this._glName=this.createTexture()}fetchResponse(e){return this.fileDownloader.downloadWithFetch(e,"fetch-response")}loadWasm(e,t){return this.fileDownloader.loadWasm(e,t)}async changeModel(e="selfie_segmentation_landscape.tflite"){e="string"==typeof e?await this.fileDownloader.download(this.locateFile(e),{type:"arraybuffer"}):e,this._solutionWasm.overrideFile("third_party/mediapipe/modules/selfie_segmentation/selfie_segmentation_landscape.tflite",e);let t=new this.GraphOptionChangeRequestList;t.push_back({calculatorIndex:1,calculatorName:"",calculatorType:"GlScalerCalculator",fieldName:"flip_horizontal",valueBoolean:!1,valueNumber:0,valueString:""}),t.push_back({calculatorIndex:0,calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value",valueBoolean:!1,valueNumber:1,valueString:""}),t.push_back({calculatorIndex:0,calculatorType:"InferenceCalculator",calculatorName:"",fieldName:"use_cpu_inference",valueBoolean:!1,valueNumber:0,valueString:""}),this._solutionWasm.changeOptions(t),this.startTime=Date.now()}send(e,t){let r=new this.PacketDataList,i=Date.now()-this.startTime;this.lastTimestamp&&this.lastTimestamp>=i?this.lastTimestamp++:this.lastTimestamp=i,r.pushTexture2d({stream:"input_frames_gpu",timestamp:this.lastTimestamp,glName:this._glName,width:e,height:t}),this._solutionWasm.send(r),r.delete()}close(){var e,t,r;null==(e=this.canvas)||delete e.getContext,delete this.readyPromiseResolve,delete this.readyPromiseReject,this.pl.onResults=null,delete this.onResults,null==(t=this.deleteTexture)||t.call(this,this._glName),null==(r=this._solutionWasm)||r.delete();for(let e of Object.keys(this))delete this[e]}},T="undefined"==typeof navigator?"":navigator.userAgent,v=e=>new RegExp(e,"i").test(T),w=e=>{if(v(e)){let t=new RegExp(`${e}\\/([\\d.]+)`),r=T.match(t);if(r&&r[1])return r[1]}return""},S=e=>{if(v(e)){let t=new RegExp(`${e}\\/(\\d+)`),r=T.match(t);if(r&&r[1])return parseFloat(r[1])}return NaN},b=/AppleWebKit\/([\d.]+)/i.exec(T),R=(b&&parseFloat(b[1]),v("iPad")),D="undefined"!=typeof navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&v("Macintosh"),B=v("iPhone")&&!R,O=v("iPod"),Q=B||R||O||D,k=v("Android"),M=(function(){if(k){let e=T.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(e){let t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);if(t&&r)return parseFloat(`${e[1]}.${e[2]}`);if(t)return t}}}(),k&&v("webkit"),v("Firefox")),P=w("Firefox"),N=(S("Firefox"),v("Edge")),L=w("Edge"),x=v("Edg"),U=w("Edg"),F=(S("Edg"),v("SogouMobileBrowser")),V=w("SogouMobileBrowser"),G=v("MetaSr\\s"),j=w("MetaSr\\s"),H=v("TBS"),Y=w("TBS"),W=v("XWEB"),J=w("XWEB"),X=(v("MSIE\\s8\\.0"),v("MSIE\\/\\d+")),K=(function(){if(X){let e=/MSIE\s(\d+)\.\d/.exec(T),t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(T)&&/rv:11.0/.test(T)&&(t=11)}}(),v("(micromessenger|webbrowser)")),z=w("MicroMessenger"),q=!H&&v("MQQBrowser")&&v("COVC"),Z=!H&&v("MQQBrowser")&&!v("COVC"),$=Z||q?w("MQQBrowser"):"",ee=!H&&v(" QQBrowser"),te=w(" QQBrowser"),re=!H&&v("QQBrowserLite"),ie=w("QQBrowserLite"),ne=!H&&v("MQBHD"),oe=w("MQBHD"),ae=(v("Windows"),!Q&&v("MAC OS X"),!k&&v("Linux"),v("CrOS"),v("MicroMessenger"),v("UCBrowser"),v("Electron"),v("MiuiBrowser")),se=w("MiuiBrowser"),ce=v("HuaweiBrowser"),Ae=(v("Huawei")||v("HUAWEI"),v("Honor")||v("HONOR"),w("HuaweiBrowser")),le=v("SamsungBrowser"),ue=w("SamsungBrowser"),de=v("HeyTapBrowser"),he=w("HeyTapBrowser"),ge=v("VivoBrowser"),pe=w("VivoBrowser"),fe=v("Chrome"),me=!N&&!G&&!F&&!H&&!W&&!x&&!ee&&!ae&&!ce&&!le&&!de&&!ge&&fe,Ee=(v("HeadlessChrome"),S("Chrome")),Ie=w("Chrome"),_e=!fe&&!Z&&!q&&!re&&!ne&&v("Safari"),Ce=w("Version"),ye=(/Android.*(wv|.0.0.0)/.test(T),(()=>{if(D)return Ce;if(Q){let e=T.match(/OS (\d+)_(\d+)/i);if(e&&e[1]){let t=e[1];return e[2]&&(t+=`.${e[2]}`),t}}return""})());Number(ye.split(".")[0]),Number(ye.split(".")[0]),"undefined"!=typeof location&&("file:"===location.protocol||"localhost"===location.hostname||location.hostname),function(){let e=new Map([[M,["Firefox",P]],[x,["Edg",U]],[me,["Chrome",Ie]],[_e,["Safari",Ce]],[H,["TBS",Y]],[W,["XWEB",J]],[K&&B,["WeChat",z]],[ee,["QQ(Win)",te]],[Z,["QQ(Mobile)",$]],[q,["QQ(Mobile X5)",$]],[re,["QQ(Mac)",ie]],[ne,["QQ(iPad)",oe]],[ae,["MI",se]],[ce,["HW",Ae]],[le,["Samsung",ue]],[de,["OPPO",he]],[ge,["VIVO",pe]],[N,["EDGE",L]],[F,["SogouMobile",V]],[G,["Sogou",j]]]),t="unknown",r="unknown";e.has(!0)&&([t,r]=e.get(!0))}();var Te=570703,ve=0,we=class e{constructor(e){this.core=e,p(this,"seq"),p(this,"_core"),p(this,"log"),p(this,"preLoadPromise"),p(this,"startResolve"),p(this,"startReject"),p(this,"mediaPipeSolutions"),p(this,"assetsPath"),p(this,"currentType"),p(this,"onAbort"),p(this,"isAborted",!1),ve+=1,this.seq=ve,this._core=e,this.log=e.log.createChild({id:`${this.getAlias()}${ve}`}),this.log.info("created"),e.assetsPath&&(this.preLoadPromise=this.preload(e.assetsPath))}static isSupported(){if(Ee<90)return!1;let e=document.createElement("canvas").getContext("webgl2");return!!(e&&e instanceof WebGL2RenderingContext)}async preload(e="https://web.sdk.qcloud.com/trtc/webrtc/v5/assets/"){try{this._core.room.videoManager.Wasm||(this._core.room.videoManager.Wasm=await C()),this.assetsPath=`${e}/selfie_segmentation/`;let t=new y(this.assetsPath,this._core.fileDownloader);t.onAbort=e=>{var t;this.core.kvStatManager.addEnum({key:Te,value:this.getKVTypeValue(!1,this.isAborted,"ABORT_IN_INFERENCE")}),this.isAborted=!0,this.log.error("mediaPipeSolutions abort",e),this.core.clearStarted(this,this.getGroup()),this.stop(),null==(t=this.onAbort)||t.call(this,e)},t.print=this.log.info.bind(this.log),t.printErr=this.log.warn.bind(this.log),this.mediaPipeSolutions=await(this.core.rtcDectection.isSIMDSupported()?E:I)(t),await this.mediaPipeSolutions.initialize(),await this._core.room.videoManager.initVirtualBackground(this.mediaPipeSolutions)}catch(e){let{RtcError:t,ErrorCode:r}=this._core.errorModule;throw new t({code:r.INVALID_OPERATION,message:`VirtualBackground preload error, please check your assetsPath. detail: ${e}`})}}getName(){return e.Name}getAlias(){return"vb"}getValidateRule(e){switch(e){case"start":return function(e){return{name:"VirtualBackgroundOptions",type:"object",required:!0,allowEmpty:!1,properties:h(d({},f),{type:{required:!1,type:"string",values:["image","blur"]},src:{required:!1,type:"string"},blurLevel:{required:!1,type:"number",min:1,max:10},onAbort:{required:!1}}),validate(t,r,i,n){var o;let{RtcError:a,ErrorCode:s,ErrorCodeDictionary:c}=e.errorModule;if(!t)return;let{type:A,src:l,onAbort:u}=t;if("image"===A&&!l)throw new a({code:s.INVALID_PARAMETER,extraCode:c.INVALID_PARAMETER_REQUIRED,fnName:i,messageParams:{key:"src"}});if(u&&!e.utils.isFunction(u))throw new a({code:s.INVALID_PARAMETER,extraCode:c.INVALID_PARAMETER_TYPE,fnName:i,messageParams:{key:"onAbort",value:typeof u,rule:{type:"Function"}}});if(null==(o=e.room.videoManager.cameraTrack)||!o.mediaTrack)throw new a({code:s.INVALID_OPERATION,extraCode:c.INVALID_OPERATION_NEED_VIDEO,fnName:i})}}}(this._core);case"update":return function(e){return{name:"UpdateVirtualBackgroundOptions",type:"object",required:!0,allowEmpty:!1,properties:{type:{required:!0,type:"string",values:["image","blur"]},src:{required:!1,type:"string"},blurLevel:{required:!1,type:"number",min:1,max:10}},validate(t,r,i,n){if(!t)return;let{RtcError:o,ErrorCode:a,ErrorCodeDictionary:s}=e.errorModule,{type:c,src:A}=t;if("image"===c&&!A)throw new o({code:a.INVALID_PARAMETER,extraCode:s.INVALID_PARAMETER_REQUIRED,fnName:i,messageParams:{key:"src"}})}}}(this._core);case"stop":return this._core,{name:"StopVirtualBackgroundOptions",required:!1}}}getGroup(){return"vb"}getKVTypeValue(e=!1,t=!1,r="NONE"){let i=0;switch(this.currentType){case"blur":i|=0;break;case"image":i|=1;break;case"green":i|=2}switch(e&&(i|=256),t&&(i|=512),r){case"ABORT_IN_INFERENCE":i|=4096;break;case"ABORT_IN_VIDEO_MANAGER":i|=8192;break;case"OTHER":i|=61440}return i}async start(e){let{type:t="blur",src:r,blurLevel:i=3,onAbort:n}=e;this.currentType=t,this.onAbort=n;let{auth:o,sign:a,timestamp:s}=await async function({sdkAppId:e,userId:t,userSig:r,core:i}){var n;let o=i.schedule.getAbilityConfigUrl(e),a=Math.round((new Date).getTime()/1e3),s=`${o}?sdkAppId=${e}&userId=${t}&userSig=${r}&timestamp=${a}`;try{let e=await(await fetch(s)).json();i.log.info(`virtual background send ${s}, response: ${JSON.stringify(e)}`);let{data:t}=e;return null!=(n=null==t?void 0:t.trtcAutoConf)&&n.web_ar?{auth:!0,timestamp:a}:{auth:!1}}catch(e){return i.log.error("virtual background fetch error",e),{auth:!1}}}({sdkAppId:e.sdkAppId,userId:e.userId,userSig:e.userSig,core:this._core});if(!o){let{RtcError:e,ErrorCode:t,ErrorCodeDictionary:r}=this._core.errorModule;throw new e({code:t.SERVER_ERROR,extraCode:r.NEED_TO_BUY,messageParams:{value:"Virtual Background",url:"https://cloud.tencent.com/document/product/647/85386"}})}return this.preLoadPromise||(this.preLoadPromise=this.preload(this._core.assetsPath)),await this.preLoadPromise,this.core.room.videoManager.setVirtualBackground({type:t,imageUrl:r,blurLevel:i,onAbort:e=>{var t;this.core.kvStatManager.addEnum({key:Te,value:this.getKVTypeValue(!0,this.isAborted,"ABORT_IN_VIDEO_MANAGER")}),this.isAborted=!0,this.core.clearStarted(this,this.getGroup()),this.stop(),delete this.preLoadPromise,null==(t=this.onAbort)||t.call(this,e)}}).then((()=>{this.core.kvStatManager.addEnum({key:Te,value:this.getKVTypeValue(!1,this.isAborted,"NONE")})})).catch((()=>{this.core.kvStatManager.addEnum({key:Te,value:this.getKVTypeValue(!0,this.isAborted,"OTHER")})}))}async update(e){let{type:t,src:r}=e;return t!==this.currentType&&(this.currentType=t),this.core.room.videoManager.setVirtualBackground({type:t,imageUrl:r,blurLevel:e.blurLevel}).then((()=>{this.core.kvStatManager.addEnum({key:Te,value:this.getKVTypeValue(!1,!1,"NONE")})})).catch((()=>{this.core.kvStatManager.addEnum({key:Te,value:this.getKVTypeValue(!0,!1,"OTHER")})}))}async stop(){return this.core.room.videoManager.setVirtualBackground()}};p(we,"Name","VirtualBackground");var Se=we,be=we},839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVideoResolution=t.logError=t.logInfo=t.logSuccess=t.noSupportFunction=t.getFlutterArgs=void 0;var r="<TRTC Wrapper>";function i(){var e=new Date,t="hh:mm:ss:S",r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return t}function n(e){console.error("%c [".concat(i(),"] ").concat(r," ").concat(e),"color:red;font-size:18px")}t.getFlutterArgs=function(e,t){try{return JSON.parse(e)[t]}catch(r){n("_getFlutterArgs error _args: ".concat(e," ,key:").concat(t))}},t.noSupportFunction=function(e){console.warn("[".concat(i(),"] ").concat(r," web sdk not supper ").concat(e))},t.logSuccess=function(e){console.info("%c [".concat(i(),"] ").concat(r," ").concat(e),"color:green;font-size:18px;")},t.logInfo=function(e){console.info("%c [".concat(i(),"] ").concat(r," ").concat(e),"font-size:18px;color:blue;")},t.logError=n,t.getVideoResolution=function(e){var t="120*120 = 1;\n  160*160 = 3;\n  270*270 = 5;\n  480*480 = 7;\n  160*120 = 50;\n  240*180 = 52;\n  280*210 = 54;\n  320*240 = 56;\n  400*300 = 58;\n  480*360 = 60;\n  640*480 = 62;\n  960*720 = 64;\n  160*90 = 100;\n  256*144 = 102;\n  320*180 = 104;\n  480*270 = 106;\n  640*360 = 108;\n  960*540 = 110;\n  1280*720 = 112;\n  1920*1080 = 114;".split(";"),r="360*360";return t.forEach((function(t){if(t.indexOf("=")>=0&&t.endsWith("= ".concat(e)))return r=t.split("=")[0].trim().replace(/\n/g,"")})),r}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=r(62);return i.default})()));